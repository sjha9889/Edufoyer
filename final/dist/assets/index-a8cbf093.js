function ED(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ue(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pP={exports:{}},bp={},mP={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Du=Symbol.for("react.element"),jD=Symbol.for("react.portal"),ND=Symbol.for("react.fragment"),PD=Symbol.for("react.strict_mode"),_D=Symbol.for("react.profiler"),OD=Symbol.for("react.provider"),AD=Symbol.for("react.context"),RD=Symbol.for("react.forward_ref"),ID=Symbol.for("react.suspense"),MD=Symbol.for("react.memo"),DD=Symbol.for("react.lazy"),H1=Symbol.iterator;function LD(t){return t===null||typeof t!="object"?null:(t=H1&&t[H1]||t["@@iterator"],typeof t=="function"?t:null)}var gP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vP=Object.assign,yP={};function oc(t,e,n){this.props=t,this.context=e,this.refs=yP,this.updater=n||gP}oc.prototype.isReactComponent={};oc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bP(){}bP.prototype=oc.prototype;function qb(t,e,n){this.props=t,this.context=e,this.refs=yP,this.updater=n||gP}var Vb=qb.prototype=new bP;Vb.constructor=qb;vP(Vb,oc.prototype);Vb.isPureReactComponent=!0;var G1=Array.isArray,xP=Object.prototype.hasOwnProperty,Wb={current:null},wP={key:!0,ref:!0,__self:!0,__source:!0};function SP(t,e,n){var r,i={},a=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)xP.call(e,r)&&!wP.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var c=Array(o),l=0;l<o;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Du,type:t,key:a,ref:s,props:i,_owner:Wb.current}}function $D(t,e){return{$$typeof:Du,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hb(t){return typeof t=="object"&&t!==null&&t.$$typeof===Du}function UD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var K1=/\/+/g;function Xm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UD(""+t.key):e.toString(36)}function Hd(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Du:case jD:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Xm(s,0):r,G1(i)?(n="",t!=null&&(n=t.replace(K1,"$&/")+"/"),Hd(i,e,n,"",function(l){return l})):i!=null&&(Hb(i)&&(i=$D(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(K1,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",G1(t))for(var o=0;o<t.length;o++){a=t[o];var c=r+Xm(a,o);s+=Hd(a,e,n,c,i)}else if(c=LD(t),typeof c=="function")for(t=c.call(t),o=0;!(a=t.next()).done;)a=a.value,c=r+Xm(a,o++),s+=Hd(a,e,n,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function sd(t,e,n){if(t==null)return t;var r=[],i=0;return Hd(t,r,"","",function(a){return e.call(n,a,i++)}),r}function FD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sn={current:null},Gd={transition:null},BD={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:Gd,ReactCurrentOwner:Wb};function kP(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:sd,forEach:function(t,e,n){sd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sd(t,function(){e++}),e},toArray:function(t){return sd(t,function(e){return e})||[]},only:function(t){if(!Hb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=oc;be.Fragment=ND;be.Profiler=_D;be.PureComponent=qb;be.StrictMode=PD;be.Suspense=ID;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BD;be.act=kP;be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=vP({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=Wb.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)xP.call(e,c)&&!wP.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var l=0;l<c;l++)o[l]=arguments[l+2];r.children=o}return{$$typeof:Du,type:t.type,key:i,ref:a,props:r,_owner:s}};be.createContext=function(t){return t={$$typeof:AD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:OD,_context:t},t.Consumer=t};be.createElement=SP;be.createFactory=function(t){var e=SP.bind(null,t);return e.type=t,e};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:RD,render:t}};be.isValidElement=Hb;be.lazy=function(t){return{$$typeof:DD,_payload:{_status:-1,_result:t},_init:FD}};be.memo=function(t,e){return{$$typeof:MD,type:t,compare:e===void 0?null:e}};be.startTransition=function(t){var e=Gd.transition;Gd.transition={};try{t()}finally{Gd.transition=e}};be.unstable_act=kP;be.useCallback=function(t,e){return sn.current.useCallback(t,e)};be.useContext=function(t){return sn.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return sn.current.useDeferredValue(t)};be.useEffect=function(t,e){return sn.current.useEffect(t,e)};be.useId=function(){return sn.current.useId()};be.useImperativeHandle=function(t,e,n){return sn.current.useImperativeHandle(t,e,n)};be.useInsertionEffect=function(t,e){return sn.current.useInsertionEffect(t,e)};be.useLayoutEffect=function(t,e){return sn.current.useLayoutEffect(t,e)};be.useMemo=function(t,e){return sn.current.useMemo(t,e)};be.useReducer=function(t,e,n){return sn.current.useReducer(t,e,n)};be.useRef=function(t){return sn.current.useRef(t)};be.useState=function(t){return sn.current.useState(t)};be.useSyncExternalStore=function(t,e,n){return sn.current.useSyncExternalStore(t,e,n)};be.useTransition=function(){return sn.current.useTransition()};be.version="18.3.1";mP.exports=be;var y=mP.exports;const M=Ue(y),zD=ED({__proto__:null,default:M},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qD=y,VD=Symbol.for("react.element"),WD=Symbol.for("react.fragment"),HD=Object.prototype.hasOwnProperty,GD=qD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KD={key:!0,ref:!0,__self:!0,__source:!0};function TP(t,e,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)HD.call(e,r)&&!KD.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:VD,type:t,key:a,ref:s,props:i,_owner:GD.current}}bp.Fragment=WD;bp.jsx=TP;bp.jsxs=TP;pP.exports=bp;var u=pP.exports,Nv={},CP={exports:{}},Dn={},EP={exports:{}},jP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,$){var I=D.length;D.push($);e:for(;0<I;){var V=I-1>>>1,J=D[V];if(0<i(J,$))D[V]=$,D[I]=J,I=V;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var $=D[0],I=D.pop();if(I!==$){D[0]=I;e:for(var V=0,J=D.length,ne=J>>>1;V<ne;){var de=2*(V+1)-1,xe=D[de],Se=de+1,ke=D[Se];if(0>i(xe,I))Se<J&&0>i(ke,xe)?(D[V]=ke,D[Se]=I,V=Se):(D[V]=xe,D[de]=I,V=de);else if(Se<J&&0>i(ke,I))D[V]=ke,D[Se]=I,V=Se;else break e}}return $}function i(D,$){var I=D.sortIndex-$.sortIndex;return I!==0?I:D.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],l=[],d=1,f=null,h=3,p=!1,g=!1,m=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(D){for(var $=n(l);$!==null;){if($.callback===null)r(l);else if($.startTime<=D)r(l),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(l)}}function T(D){if(m=!1,S(D),!g)if(n(c)!==null)g=!0,U(w);else{var $=n(l);$!==null&&q(T,$.startTime-D)}}function w(D,$){g=!1,m&&(m=!1,v(E),E=-1),p=!0;var I=h;try{for(S($),f=n(c);f!==null&&(!(f.expirationTime>$)||D&&!N());){var V=f.callback;if(typeof V=="function"){f.callback=null,h=f.priorityLevel;var J=V(f.expirationTime<=$);$=t.unstable_now(),typeof J=="function"?f.callback=J:f===n(c)&&r(c),S($)}else r(c);f=n(c)}if(f!==null)var ne=!0;else{var de=n(l);de!==null&&q(T,de.startTime-$),ne=!1}return ne}finally{f=null,h=I,p=!1}}var k=!1,C=null,E=-1,j=5,P=-1;function N(){return!(t.unstable_now()-P<j)}function _(){if(C!==null){var D=t.unstable_now();P=D;var $=!0;try{$=C(!0,D)}finally{$?A():(k=!1,C=null)}}else k=!1}var A;if(typeof x=="function")A=function(){x(_)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,L=R.port2;R.port1.onmessage=_,A=function(){L.postMessage(null)}}else A=function(){b(_,0)};function U(D){C=D,k||(k=!0,A())}function q(D,$){E=b(function(){D(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,U(w))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(D){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var I=h;h=$;try{return D()}finally{h=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var I=h;h=D;try{return $()}finally{h=I}},t.unstable_scheduleCallback=function(D,$,I){var V=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?V+I:V):I=V,D){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=I+J,D={id:d++,callback:$,priorityLevel:D,startTime:I,expirationTime:J,sortIndex:-1},I>V?(D.sortIndex=I,e(l,D),n(c)===null&&D===n(l)&&(m?(v(E),E=-1):m=!0,q(T,I-V))):(D.sortIndex=J,e(c,D),g||p||(g=!0,U(w))),D},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(D){var $=h;return function(){var I=h;h=$;try{return D.apply(this,arguments)}finally{h=I}}}})(jP);EP.exports=jP;var JD=EP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YD=y,In=JD;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var NP=new Set,El={};function ks(t,e){To(t,e),To(t+"Capture",e)}function To(t,e){for(El[t]=e,t=0;t<e.length;t++)NP.add(e[t])}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pv=Object.prototype.hasOwnProperty,XD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J1={},Y1={};function QD(t){return Pv.call(Y1,t)?!0:Pv.call(J1,t)?!1:XD.test(t)?Y1[t]=!0:(J1[t]=!0,!1)}function ZD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function e3(t,e,n,r){if(e===null||typeof e>"u"||ZD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function on(t,e,n,r,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qt[t]=new on(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qt[e]=new on(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qt[t]=new on(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qt[t]=new on(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qt[t]=new on(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qt[t]=new on(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qt[t]=new on(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qt[t]=new on(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qt[t]=new on(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gb=/[\-:]([a-z])/g;function Kb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gb,Kb);qt[e]=new on(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gb,Kb);qt[e]=new on(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gb,Kb);qt[e]=new on(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qt[t]=new on(t,1,!1,t.toLowerCase(),null,!1,!1)});qt.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qt[t]=new on(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jb(t,e,n,r){var i=qt.hasOwnProperty(e)?qt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(e3(e,n,i,r)&&(n=null),r||i===null?QD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ii=YD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,od=Symbol.for("react.element"),zs=Symbol.for("react.portal"),qs=Symbol.for("react.fragment"),Yb=Symbol.for("react.strict_mode"),_v=Symbol.for("react.profiler"),PP=Symbol.for("react.provider"),_P=Symbol.for("react.context"),Xb=Symbol.for("react.forward_ref"),Ov=Symbol.for("react.suspense"),Av=Symbol.for("react.suspense_list"),Qb=Symbol.for("react.memo"),Gi=Symbol.for("react.lazy"),OP=Symbol.for("react.offscreen"),X1=Symbol.iterator;function Ec(t){return t===null||typeof t!="object"?null:(t=X1&&t[X1]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Object.assign,Qm;function Zc(t){if(Qm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qm=e&&e[1]||""}return`
`+Qm+t}var Zm=!1;function eg(t,e){if(!t||Zm)return"";Zm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=o);break}}}finally{Zm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zc(t):""}function t3(t){switch(t.tag){case 5:return Zc(t.type);case 16:return Zc("Lazy");case 13:return Zc("Suspense");case 19:return Zc("SuspenseList");case 0:case 2:case 15:return t=eg(t.type,!1),t;case 11:return t=eg(t.type.render,!1),t;case 1:return t=eg(t.type,!0),t;default:return""}}function Rv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qs:return"Fragment";case zs:return"Portal";case _v:return"Profiler";case Yb:return"StrictMode";case Ov:return"Suspense";case Av:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _P:return(t.displayName||"Context")+".Consumer";case PP:return(t._context.displayName||"Context")+".Provider";case Xb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qb:return e=t.displayName||null,e!==null?e:Rv(t.type)||"Memo";case Gi:e=t._payload,t=t._init;try{return Rv(t(e))}catch{}}return null}function n3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rv(e);case 8:return e===Yb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function r3(t){var e=AP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cd(t){t._valueTracker||(t._valueTracker=r3(t))}function RP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=AP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Iv(t,e){var n=e.checked;return nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Q1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xa(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function IP(t,e){e=e.checked,e!=null&&Jb(t,"checked",e,!1)}function Mv(t,e){IP(t,e);var n=xa(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dv(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dv(t,e.type,xa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Z1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dv(t,e,n){(e!=="number"||Tf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var el=Array.isArray;function so(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xa(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Lv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return nt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(el(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xa(n)}}function MP(t,e){var n=xa(e.value),r=xa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function DP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $v(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?DP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ld,LP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ld=ld||document.createElement("div"),ld.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ld.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i3=["Webkit","ms","Moz","O"];Object.keys(ol).forEach(function(t){i3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ol[e]=ol[t]})});function $P(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ol.hasOwnProperty(t)&&ol[t]?(""+e).trim():e+"px"}function UP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=$P(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var a3=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uv(t,e){if(e){if(a3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Fv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bv=null;function Zb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zv=null,oo=null,co=null;function nS(t){if(t=Uu(t)){if(typeof zv!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Tp(e),zv(t.stateNode,t.type,e))}}function FP(t){oo?co?co.push(t):co=[t]:oo=t}function BP(){if(oo){var t=oo,e=co;if(co=oo=null,nS(t),e)for(t=0;t<e.length;t++)nS(e[t])}}function zP(t,e){return t(e)}function qP(){}var tg=!1;function VP(t,e,n){if(tg)return t(e,n);tg=!0;try{return zP(t,e,n)}finally{tg=!1,(oo!==null||co!==null)&&(qP(),BP())}}function Nl(t,e){var n=t.stateNode;if(n===null)return null;var r=Tp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var qv=!1;if(Ti)try{var jc={};Object.defineProperty(jc,"passive",{get:function(){qv=!0}}),window.addEventListener("test",jc,jc),window.removeEventListener("test",jc,jc)}catch{qv=!1}function s3(t,e,n,r,i,a,s,o,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(d){this.onError(d)}}var cl=!1,Cf=null,Ef=!1,Vv=null,o3={onError:function(t){cl=!0,Cf=t}};function c3(t,e,n,r,i,a,s,o,c){cl=!1,Cf=null,s3.apply(o3,arguments)}function l3(t,e,n,r,i,a,s,o,c){if(c3.apply(this,arguments),cl){if(cl){var l=Cf;cl=!1,Cf=null}else throw Error(Q(198));Ef||(Ef=!0,Vv=l)}}function Ts(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function WP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rS(t){if(Ts(t)!==t)throw Error(Q(188))}function u3(t){var e=t.alternate;if(!e){if(e=Ts(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return rS(i),t;if(a===r)return rS(i),e;a=a.sibling}throw Error(Q(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function HP(t){return t=u3(t),t!==null?GP(t):null}function GP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=GP(t);if(e!==null)return e;t=t.sibling}return null}var KP=In.unstable_scheduleCallback,iS=In.unstable_cancelCallback,d3=In.unstable_shouldYield,f3=In.unstable_requestPaint,dt=In.unstable_now,h3=In.unstable_getCurrentPriorityLevel,ex=In.unstable_ImmediatePriority,JP=In.unstable_UserBlockingPriority,jf=In.unstable_NormalPriority,p3=In.unstable_LowPriority,YP=In.unstable_IdlePriority,xp=null,qr=null;function m3(t){if(qr&&typeof qr.onCommitFiberRoot=="function")try{qr.onCommitFiberRoot(xp,t,void 0,(t.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:y3,g3=Math.log,v3=Math.LN2;function y3(t){return t>>>=0,t===0?32:31-(g3(t)/v3|0)|0}var ud=64,dd=4194304;function tl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=tl(o):(a&=s,a!==0&&(r=tl(a)))}else s=n&~i,s!==0?r=tl(s):a!==0&&(r=tl(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wr(e),i=1<<n,r|=t[n],e&=~i;return r}function b3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x3(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-wr(a),o=1<<s,c=i[s];c===-1?(!(o&n)||o&r)&&(i[s]=b3(o,e)):c<=e&&(t.expiredLanes|=o),a&=~o}}function Wv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function XP(){var t=ud;return ud<<=1,!(ud&4194240)&&(ud=64),t}function ng(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Lu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wr(e),t[e]=n}function w3(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wr(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function tx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ae=0;function QP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ZP,nx,e_,t_,n_,Hv=!1,fd=[],aa=null,sa=null,oa=null,Pl=new Map,_l=new Map,Yi=[],S3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aS(t,e){switch(t){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":sa=null;break;case"mouseover":case"mouseout":oa=null;break;case"pointerover":case"pointerout":Pl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(e.pointerId)}}function Nc(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Uu(e),e!==null&&nx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function k3(t,e,n,r,i){switch(e){case"focusin":return aa=Nc(aa,t,e,n,r,i),!0;case"dragenter":return sa=Nc(sa,t,e,n,r,i),!0;case"mouseover":return oa=Nc(oa,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pl.set(a,Nc(Pl.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,_l.set(a,Nc(_l.get(a)||null,t,e,n,r,i)),!0}return!1}function r_(t){var e=Va(t.target);if(e!==null){var n=Ts(e);if(n!==null){if(e=n.tag,e===13){if(e=WP(n),e!==null){t.blockedOn=e,n_(t.priority,function(){e_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bv=r,n.target.dispatchEvent(r),Bv=null}else return e=Uu(n),e!==null&&nx(e),t.blockedOn=n,!1;e.shift()}return!0}function sS(t,e,n){Kd(t)&&n.delete(e)}function T3(){Hv=!1,aa!==null&&Kd(aa)&&(aa=null),sa!==null&&Kd(sa)&&(sa=null),oa!==null&&Kd(oa)&&(oa=null),Pl.forEach(sS),_l.forEach(sS)}function Pc(t,e){t.blockedOn===e&&(t.blockedOn=null,Hv||(Hv=!0,In.unstable_scheduleCallback(In.unstable_NormalPriority,T3)))}function Ol(t){function e(i){return Pc(i,t)}if(0<fd.length){Pc(fd[0],t);for(var n=1;n<fd.length;n++){var r=fd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(aa!==null&&Pc(aa,t),sa!==null&&Pc(sa,t),oa!==null&&Pc(oa,t),Pl.forEach(e),_l.forEach(e),n=0;n<Yi.length;n++)r=Yi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yi.length&&(n=Yi[0],n.blockedOn===null);)r_(n),n.blockedOn===null&&Yi.shift()}var lo=Ii.ReactCurrentBatchConfig,Pf=!0;function C3(t,e,n,r){var i=Ae,a=lo.transition;lo.transition=null;try{Ae=1,rx(t,e,n,r)}finally{Ae=i,lo.transition=a}}function E3(t,e,n,r){var i=Ae,a=lo.transition;lo.transition=null;try{Ae=4,rx(t,e,n,r)}finally{Ae=i,lo.transition=a}}function rx(t,e,n,r){if(Pf){var i=Gv(t,e,n,r);if(i===null)fg(t,e,r,_f,n),aS(t,r);else if(k3(i,t,e,n,r))r.stopPropagation();else if(aS(t,r),e&4&&-1<S3.indexOf(t)){for(;i!==null;){var a=Uu(i);if(a!==null&&ZP(a),a=Gv(t,e,n,r),a===null&&fg(t,e,r,_f,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else fg(t,e,r,null,n)}}var _f=null;function Gv(t,e,n,r){if(_f=null,t=Zb(r),t=Va(t),t!==null)if(e=Ts(t),e===null)t=null;else if(n=e.tag,n===13){if(t=WP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _f=t,null}function i_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h3()){case ex:return 1;case JP:return 4;case jf:case p3:return 16;case YP:return 536870912;default:return 16}default:return 16}}var ea=null,ix=null,Jd=null;function a_(){if(Jd)return Jd;var t,e=ix,n=e.length,r,i="value"in ea?ea.value:ea.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[a-r];r++);return Jd=i.slice(t,1<r?1-r:void 0)}function Yd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hd(){return!0}function oS(){return!1}function Ln(t){function e(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?hd:oS,this.isPropagationStopped=oS,this}return nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hd)},persist:function(){},isPersistent:hd}),e}var cc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ax=Ln(cc),$u=nt({},cc,{view:0,detail:0}),j3=Ln($u),rg,ig,_c,wp=nt({},$u,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_c&&(_c&&t.type==="mousemove"?(rg=t.screenX-_c.screenX,ig=t.screenY-_c.screenY):ig=rg=0,_c=t),rg)},movementY:function(t){return"movementY"in t?t.movementY:ig}}),cS=Ln(wp),N3=nt({},wp,{dataTransfer:0}),P3=Ln(N3),_3=nt({},$u,{relatedTarget:0}),ag=Ln(_3),O3=nt({},cc,{animationName:0,elapsedTime:0,pseudoElement:0}),A3=Ln(O3),R3=nt({},cc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),I3=Ln(R3),M3=nt({},cc,{data:0}),lS=Ln(M3),D3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function U3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$3[t])?!!e[t]:!1}function sx(){return U3}var F3=nt({},$u,{key:function(t){if(t.key){var e=D3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?L3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sx,charCode:function(t){return t.type==="keypress"?Yd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),B3=Ln(F3),z3=nt({},wp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uS=Ln(z3),q3=nt({},$u,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sx}),V3=Ln(q3),W3=nt({},cc,{propertyName:0,elapsedTime:0,pseudoElement:0}),H3=Ln(W3),G3=nt({},wp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K3=Ln(G3),J3=[9,13,27,32],ox=Ti&&"CompositionEvent"in window,ll=null;Ti&&"documentMode"in document&&(ll=document.documentMode);var Y3=Ti&&"TextEvent"in window&&!ll,s_=Ti&&(!ox||ll&&8<ll&&11>=ll),dS=String.fromCharCode(32),fS=!1;function o_(t,e){switch(t){case"keyup":return J3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vs=!1;function X3(t,e){switch(t){case"compositionend":return c_(e);case"keypress":return e.which!==32?null:(fS=!0,dS);case"textInput":return t=e.data,t===dS&&fS?null:t;default:return null}}function Q3(t,e){if(Vs)return t==="compositionend"||!ox&&o_(t,e)?(t=a_(),Jd=ix=ea=null,Vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return s_&&e.locale!=="ko"?null:e.data;default:return null}}var Z3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Z3[t.type]:e==="textarea"}function l_(t,e,n,r){FP(r),e=Of(e,"onChange"),0<e.length&&(n=new ax("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ul=null,Al=null;function eL(t){x_(t,0)}function Sp(t){var e=Gs(t);if(RP(e))return t}function tL(t,e){if(t==="change")return e}var u_=!1;if(Ti){var sg;if(Ti){var og="oninput"in document;if(!og){var pS=document.createElement("div");pS.setAttribute("oninput","return;"),og=typeof pS.oninput=="function"}sg=og}else sg=!1;u_=sg&&(!document.documentMode||9<document.documentMode)}function mS(){ul&&(ul.detachEvent("onpropertychange",d_),Al=ul=null)}function d_(t){if(t.propertyName==="value"&&Sp(Al)){var e=[];l_(e,Al,t,Zb(t)),VP(eL,e)}}function nL(t,e,n){t==="focusin"?(mS(),ul=e,Al=n,ul.attachEvent("onpropertychange",d_)):t==="focusout"&&mS()}function rL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sp(Al)}function iL(t,e){if(t==="click")return Sp(e)}function aL(t,e){if(t==="input"||t==="change")return Sp(e)}function sL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kr=typeof Object.is=="function"?Object.is:sL;function Rl(t,e){if(kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Pv.call(e,i)||!kr(t[i],e[i]))return!1}return!0}function gS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vS(t,e){var n=gS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gS(n)}}function f_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?f_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function h_(){for(var t=window,e=Tf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tf(t.document)}return e}function cx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function oL(t){var e=h_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&f_(n.ownerDocument.documentElement,n)){if(r!==null&&cx(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=vS(n,a);var s=vS(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cL=Ti&&"documentMode"in document&&11>=document.documentMode,Ws=null,Kv=null,dl=null,Jv=!1;function yS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jv||Ws==null||Ws!==Tf(r)||(r=Ws,"selectionStart"in r&&cx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dl&&Rl(dl,r)||(dl=r,r=Of(Kv,"onSelect"),0<r.length&&(e=new ax("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ws)))}function pd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hs={animationend:pd("Animation","AnimationEnd"),animationiteration:pd("Animation","AnimationIteration"),animationstart:pd("Animation","AnimationStart"),transitionend:pd("Transition","TransitionEnd")},cg={},p_={};Ti&&(p_=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function kp(t){if(cg[t])return cg[t];if(!Hs[t])return t;var e=Hs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in p_)return cg[t]=e[n];return t}var m_=kp("animationend"),g_=kp("animationiteration"),v_=kp("animationstart"),y_=kp("transitionend"),b_=new Map,bS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ta(t,e){b_.set(t,e),ks(e,[t])}for(var lg=0;lg<bS.length;lg++){var ug=bS[lg],lL=ug.toLowerCase(),uL=ug[0].toUpperCase()+ug.slice(1);Ta(lL,"on"+uL)}Ta(m_,"onAnimationEnd");Ta(g_,"onAnimationIteration");Ta(v_,"onAnimationStart");Ta("dblclick","onDoubleClick");Ta("focusin","onFocus");Ta("focusout","onBlur");Ta(y_,"onTransitionEnd");To("onMouseEnter",["mouseout","mouseover"]);To("onMouseLeave",["mouseout","mouseover"]);To("onPointerEnter",["pointerout","pointerover"]);To("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dL=new Set("cancel close invalid load scroll toggle".split(" ").concat(nl));function xS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,l3(r,e,void 0,t),t.currentTarget=null}function x_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],c=o.instance,l=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;xS(i,o,l),a=c}else for(s=0;s<r.length;s++){if(o=r[s],c=o.instance,l=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;xS(i,o,l),a=c}}}if(Ef)throw t=Vv,Ef=!1,Vv=null,t}function We(t,e){var n=e[ey];n===void 0&&(n=e[ey]=new Set);var r=t+"__bubble";n.has(r)||(w_(e,t,2,!1),n.add(r))}function dg(t,e,n){var r=0;e&&(r|=4),w_(n,t,r,e)}var md="_reactListening"+Math.random().toString(36).slice(2);function Il(t){if(!t[md]){t[md]=!0,NP.forEach(function(n){n!=="selectionchange"&&(dL.has(n)||dg(n,!1,t),dg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[md]||(e[md]=!0,dg("selectionchange",!1,e))}}function w_(t,e,n,r){switch(i_(e)){case 1:var i=C3;break;case 4:i=E3;break;default:i=rx}n=i.bind(null,e,n,t),i=void 0,!qv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fg(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;o!==null;){if(s=Va(o),s===null)return;if(c=s.tag,c===5||c===6){r=a=s;continue e}o=o.parentNode}}r=r.return}VP(function(){var l=a,d=Zb(n),f=[];e:{var h=b_.get(t);if(h!==void 0){var p=ax,g=t;switch(t){case"keypress":if(Yd(n)===0)break e;case"keydown":case"keyup":p=B3;break;case"focusin":g="focus",p=ag;break;case"focusout":g="blur",p=ag;break;case"beforeblur":case"afterblur":p=ag;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=cS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=P3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=V3;break;case m_:case g_:case v_:p=A3;break;case y_:p=H3;break;case"scroll":p=j3;break;case"wheel":p=K3;break;case"copy":case"cut":case"paste":p=I3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=uS}var m=(e&4)!==0,b=!m&&t==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var x=l,S;x!==null;){S=x;var T=S.stateNode;if(S.tag===5&&T!==null&&(S=T,v!==null&&(T=Nl(x,v),T!=null&&m.push(Ml(x,T,S)))),b)break;x=x.return}0<m.length&&(h=new p(h,g,null,n,d),f.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==Bv&&(g=n.relatedTarget||n.fromElement)&&(Va(g)||g[Ci]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=l,g=g?Va(g):null,g!==null&&(b=Ts(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=l),p!==g)){if(m=cS,T="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=uS,T="onPointerLeave",v="onPointerEnter",x="pointer"),b=p==null?h:Gs(p),S=g==null?h:Gs(g),h=new m(T,x+"leave",p,n,d),h.target=b,h.relatedTarget=S,T=null,Va(d)===l&&(m=new m(v,x+"enter",g,n,d),m.target=S,m.relatedTarget=b,T=m),b=T,p&&g)t:{for(m=p,v=g,x=0,S=m;S;S=As(S))x++;for(S=0,T=v;T;T=As(T))S++;for(;0<x-S;)m=As(m),x--;for(;0<S-x;)v=As(v),S--;for(;x--;){if(m===v||v!==null&&m===v.alternate)break t;m=As(m),v=As(v)}m=null}else m=null;p!==null&&wS(f,h,p,m,!1),g!==null&&b!==null&&wS(f,b,g,m,!0)}}e:{if(h=l?Gs(l):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=tL;else if(hS(h))if(u_)w=aL;else{w=rL;var k=nL}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=iL);if(w&&(w=w(t,l))){l_(f,w,n,d);break e}k&&k(t,h,l),t==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&Dv(h,"number",h.value)}switch(k=l?Gs(l):window,t){case"focusin":(hS(k)||k.contentEditable==="true")&&(Ws=k,Kv=l,dl=null);break;case"focusout":dl=Kv=Ws=null;break;case"mousedown":Jv=!0;break;case"contextmenu":case"mouseup":case"dragend":Jv=!1,yS(f,n,d);break;case"selectionchange":if(cL)break;case"keydown":case"keyup":yS(f,n,d)}var C;if(ox)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Vs?o_(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(s_&&n.locale!=="ko"&&(Vs||E!=="onCompositionStart"?E==="onCompositionEnd"&&Vs&&(C=a_()):(ea=d,ix="value"in ea?ea.value:ea.textContent,Vs=!0)),k=Of(l,E),0<k.length&&(E=new lS(E,t,null,n,d),f.push({event:E,listeners:k}),C?E.data=C:(C=c_(n),C!==null&&(E.data=C)))),(C=Y3?X3(t,n):Q3(t,n))&&(l=Of(l,"onBeforeInput"),0<l.length&&(d=new lS("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:l}),d.data=C))}x_(f,e)})}function Ml(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Of(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Nl(t,n),a!=null&&r.unshift(Ml(t,a,i)),a=Nl(t,e),a!=null&&r.push(Ml(t,a,i))),t=t.return}return r}function As(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wS(t,e,n,r,i){for(var a=e._reactName,s=[];n!==null&&n!==r;){var o=n,c=o.alternate,l=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&l!==null&&(o=l,i?(c=Nl(n,a),c!=null&&s.unshift(Ml(n,c,o))):i||(c=Nl(n,a),c!=null&&s.push(Ml(n,c,o)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var fL=/\r\n?/g,hL=/\u0000|\uFFFD/g;function SS(t){return(typeof t=="string"?t:""+t).replace(fL,`
`).replace(hL,"")}function gd(t,e,n){if(e=SS(e),SS(t)!==e&&n)throw Error(Q(425))}function Af(){}var Yv=null,Xv=null;function Qv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zv=typeof setTimeout=="function"?setTimeout:void 0,pL=typeof clearTimeout=="function"?clearTimeout:void 0,kS=typeof Promise=="function"?Promise:void 0,mL=typeof queueMicrotask=="function"?queueMicrotask:typeof kS<"u"?function(t){return kS.resolve(null).then(t).catch(gL)}:Zv;function gL(t){setTimeout(function(){throw t})}function hg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ol(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ol(e)}function ca(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function TS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lc=Math.random().toString(36).slice(2),$r="__reactFiber$"+lc,Dl="__reactProps$"+lc,Ci="__reactContainer$"+lc,ey="__reactEvents$"+lc,vL="__reactListeners$"+lc,yL="__reactHandles$"+lc;function Va(t){var e=t[$r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ci]||n[$r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=TS(t);t!==null;){if(n=t[$r])return n;t=TS(t)}return e}t=n,n=t.parentNode}return null}function Uu(t){return t=t[$r]||t[Ci],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Tp(t){return t[Dl]||null}var ty=[],Ks=-1;function Ca(t){return{current:t}}function Je(t){0>Ks||(t.current=ty[Ks],ty[Ks]=null,Ks--)}function ze(t,e){Ks++,ty[Ks]=t.current,t.current=e}var wa={},Zt=Ca(wa),mn=Ca(!1),ss=wa;function Co(t,e){var n=t.type.contextTypes;if(!n)return wa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function gn(t){return t=t.childContextTypes,t!=null}function Rf(){Je(mn),Je(Zt)}function CS(t,e,n){if(Zt.current!==wa)throw Error(Q(168));ze(Zt,e),ze(mn,n)}function S_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Q(108,n3(t)||"Unknown",i));return nt({},n,r)}function If(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wa,ss=Zt.current,ze(Zt,t),ze(mn,mn.current),!0}function ES(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=S_(t,e,ss),r.__reactInternalMemoizedMergedChildContext=t,Je(mn),Je(Zt),ze(Zt,t)):Je(mn),ze(mn,n)}var ci=null,Cp=!1,pg=!1;function k_(t){ci===null?ci=[t]:ci.push(t)}function bL(t){Cp=!0,k_(t)}function Ea(){if(!pg&&ci!==null){pg=!0;var t=0,e=Ae;try{var n=ci;for(Ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ci=null,Cp=!1}catch(i){throw ci!==null&&(ci=ci.slice(t+1)),KP(ex,Ea),i}finally{Ae=e,pg=!1}}return null}var Js=[],Ys=0,Mf=null,Df=0,qn=[],Vn=0,os=null,pi=1,mi="";function $a(t,e){Js[Ys++]=Df,Js[Ys++]=Mf,Mf=t,Df=e}function T_(t,e,n){qn[Vn++]=pi,qn[Vn++]=mi,qn[Vn++]=os,os=t;var r=pi;t=mi;var i=32-wr(r)-1;r&=~(1<<i),n+=1;var a=32-wr(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,pi=1<<32-wr(e)+i|n<<i|r,mi=a+t}else pi=1<<a|n<<i|r,mi=t}function lx(t){t.return!==null&&($a(t,1),T_(t,1,0))}function ux(t){for(;t===Mf;)Mf=Js[--Ys],Js[Ys]=null,Df=Js[--Ys],Js[Ys]=null;for(;t===os;)os=qn[--Vn],qn[Vn]=null,mi=qn[--Vn],qn[Vn]=null,pi=qn[--Vn],qn[Vn]=null}var An=null,_n=null,Ye=!1,hr=null;function C_(t,e){var n=Hn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function jS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,An=t,_n=ca(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,An=t,_n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=os!==null?{id:pi,overflow:mi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Hn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,An=t,_n=null,!0):!1;default:return!1}}function ny(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ry(t){if(Ye){var e=_n;if(e){var n=e;if(!jS(t,e)){if(ny(t))throw Error(Q(418));e=ca(n.nextSibling);var r=An;e&&jS(t,e)?C_(r,n):(t.flags=t.flags&-4097|2,Ye=!1,An=t)}}else{if(ny(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Ye=!1,An=t}}}function NS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;An=t}function vd(t){if(t!==An)return!1;if(!Ye)return NS(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qv(t.type,t.memoizedProps)),e&&(e=_n)){if(ny(t))throw E_(),Error(Q(418));for(;e;)C_(t,e),e=ca(e.nextSibling)}if(NS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_n=ca(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_n=null}}else _n=An?ca(t.stateNode.nextSibling):null;return!0}function E_(){for(var t=_n;t;)t=ca(t.nextSibling)}function Eo(){_n=An=null,Ye=!1}function dx(t){hr===null?hr=[t]:hr.push(t)}var xL=Ii.ReactCurrentBatchConfig;function Oc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function yd(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function PS(t){var e=t._init;return e(t._payload)}function j_(t){function e(v,x){if(t){var S=v.deletions;S===null?(v.deletions=[x],v.flags|=16):S.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=fa(v,x),v.index=0,v.sibling=null,v}function a(v,x,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<x?(v.flags|=2,x):S):(v.flags|=2,x)):(v.flags|=1048576,x)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,x,S,T){return x===null||x.tag!==6?(x=wg(S,v.mode,T),x.return=v,x):(x=i(x,S),x.return=v,x)}function c(v,x,S,T){var w=S.type;return w===qs?d(v,x,S.props.children,T,S.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Gi&&PS(w)===x.type)?(T=i(x,S.props),T.ref=Oc(v,x,S),T.return=v,T):(T=rf(S.type,S.key,S.props,null,v.mode,T),T.ref=Oc(v,x,S),T.return=v,T)}function l(v,x,S,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Sg(S,v.mode,T),x.return=v,x):(x=i(x,S.children||[]),x.return=v,x)}function d(v,x,S,T,w){return x===null||x.tag!==7?(x=Za(S,v.mode,T,w),x.return=v,x):(x=i(x,S),x.return=v,x)}function f(v,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=wg(""+x,v.mode,S),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case od:return S=rf(x.type,x.key,x.props,null,v.mode,S),S.ref=Oc(v,null,x),S.return=v,S;case zs:return x=Sg(x,v.mode,S),x.return=v,x;case Gi:var T=x._init;return f(v,T(x._payload),S)}if(el(x)||Ec(x))return x=Za(x,v.mode,S,null),x.return=v,x;yd(v,x)}return null}function h(v,x,S,T){var w=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return w!==null?null:o(v,x,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case od:return S.key===w?c(v,x,S,T):null;case zs:return S.key===w?l(v,x,S,T):null;case Gi:return w=S._init,h(v,x,w(S._payload),T)}if(el(S)||Ec(S))return w!==null?null:d(v,x,S,T,null);yd(v,S)}return null}function p(v,x,S,T,w){if(typeof T=="string"&&T!==""||typeof T=="number")return v=v.get(S)||null,o(x,v,""+T,w);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case od:return v=v.get(T.key===null?S:T.key)||null,c(x,v,T,w);case zs:return v=v.get(T.key===null?S:T.key)||null,l(x,v,T,w);case Gi:var k=T._init;return p(v,x,S,k(T._payload),w)}if(el(T)||Ec(T))return v=v.get(S)||null,d(x,v,T,w,null);yd(x,T)}return null}function g(v,x,S,T){for(var w=null,k=null,C=x,E=x=0,j=null;C!==null&&E<S.length;E++){C.index>E?(j=C,C=null):j=C.sibling;var P=h(v,C,S[E],T);if(P===null){C===null&&(C=j);break}t&&C&&P.alternate===null&&e(v,C),x=a(P,x,E),k===null?w=P:k.sibling=P,k=P,C=j}if(E===S.length)return n(v,C),Ye&&$a(v,E),w;if(C===null){for(;E<S.length;E++)C=f(v,S[E],T),C!==null&&(x=a(C,x,E),k===null?w=C:k.sibling=C,k=C);return Ye&&$a(v,E),w}for(C=r(v,C);E<S.length;E++)j=p(C,v,E,S[E],T),j!==null&&(t&&j.alternate!==null&&C.delete(j.key===null?E:j.key),x=a(j,x,E),k===null?w=j:k.sibling=j,k=j);return t&&C.forEach(function(N){return e(v,N)}),Ye&&$a(v,E),w}function m(v,x,S,T){var w=Ec(S);if(typeof w!="function")throw Error(Q(150));if(S=w.call(S),S==null)throw Error(Q(151));for(var k=w=null,C=x,E=x=0,j=null,P=S.next();C!==null&&!P.done;E++,P=S.next()){C.index>E?(j=C,C=null):j=C.sibling;var N=h(v,C,P.value,T);if(N===null){C===null&&(C=j);break}t&&C&&N.alternate===null&&e(v,C),x=a(N,x,E),k===null?w=N:k.sibling=N,k=N,C=j}if(P.done)return n(v,C),Ye&&$a(v,E),w;if(C===null){for(;!P.done;E++,P=S.next())P=f(v,P.value,T),P!==null&&(x=a(P,x,E),k===null?w=P:k.sibling=P,k=P);return Ye&&$a(v,E),w}for(C=r(v,C);!P.done;E++,P=S.next())P=p(C,v,E,P.value,T),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?E:P.key),x=a(P,x,E),k===null?w=P:k.sibling=P,k=P);return t&&C.forEach(function(_){return e(v,_)}),Ye&&$a(v,E),w}function b(v,x,S,T){if(typeof S=="object"&&S!==null&&S.type===qs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case od:e:{for(var w=S.key,k=x;k!==null;){if(k.key===w){if(w=S.type,w===qs){if(k.tag===7){n(v,k.sibling),x=i(k,S.props.children),x.return=v,v=x;break e}}else if(k.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Gi&&PS(w)===k.type){n(v,k.sibling),x=i(k,S.props),x.ref=Oc(v,k,S),x.return=v,v=x;break e}n(v,k);break}else e(v,k);k=k.sibling}S.type===qs?(x=Za(S.props.children,v.mode,T,S.key),x.return=v,v=x):(T=rf(S.type,S.key,S.props,null,v.mode,T),T.ref=Oc(v,x,S),T.return=v,v=T)}return s(v);case zs:e:{for(k=S.key;x!==null;){if(x.key===k)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(v,x.sibling),x=i(x,S.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=Sg(S,v.mode,T),x.return=v,v=x}return s(v);case Gi:return k=S._init,b(v,x,k(S._payload),T)}if(el(S))return g(v,x,S,T);if(Ec(S))return m(v,x,S,T);yd(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(v,x.sibling),x=i(x,S),x.return=v,v=x):(n(v,x),x=wg(S,v.mode,T),x.return=v,v=x),s(v)):n(v,x)}return b}var jo=j_(!0),N_=j_(!1),Lf=Ca(null),$f=null,Xs=null,fx=null;function hx(){fx=Xs=$f=null}function px(t){var e=Lf.current;Je(Lf),t._currentValue=e}function iy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function uo(t,e){$f=t,fx=Xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fn=!0),t.firstContext=null)}function Zn(t){var e=t._currentValue;if(fx!==t)if(t={context:t,memoizedValue:e,next:null},Xs===null){if($f===null)throw Error(Q(308));Xs=t,$f.dependencies={lanes:0,firstContext:t}}else Xs=Xs.next=t;return e}var Wa=null;function mx(t){Wa===null?Wa=[t]:Wa.push(t)}function P_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,mx(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ei(t,r)}function Ei(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ki=!1;function gx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function __(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function la(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ei(t,n)}return i=r.interleaved,i===null?(e.next=e,mx(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ei(t,n)}function Xd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tx(t,n)}}function _S(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uf(t,e,n,r){var i=t.updateQueue;Ki=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,l=c.next;c.next=null,s===null?a=l:s.next=l,s=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=c))}if(a!==null){var f=i.baseState;s=0,d=l=c=null,o=a;do{var h=o.lane,p=o.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,m=o;switch(h=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=nt({},f,h);break e;case 2:Ki=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(l=d=p,c=f):d=d.next=p,s|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);ls|=s,t.lanes=s,t.memoizedState=f}}function OS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Q(191,i));i.call(r)}}}var Fu={},Vr=Ca(Fu),Ll=Ca(Fu),$l=Ca(Fu);function Ha(t){if(t===Fu)throw Error(Q(174));return t}function vx(t,e){switch(ze($l,e),ze(Ll,t),ze(Vr,Fu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$v(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$v(e,t)}Je(Vr),ze(Vr,e)}function No(){Je(Vr),Je(Ll),Je($l)}function O_(t){Ha($l.current);var e=Ha(Vr.current),n=$v(e,t.type);e!==n&&(ze(Ll,t),ze(Vr,n))}function yx(t){Ll.current===t&&(Je(Vr),Je(Ll))}var et=Ca(0);function Ff(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mg=[];function bx(){for(var t=0;t<mg.length;t++)mg[t]._workInProgressVersionPrimary=null;mg.length=0}var Qd=Ii.ReactCurrentDispatcher,gg=Ii.ReactCurrentBatchConfig,cs=0,tt=null,kt=null,At=null,Bf=!1,fl=!1,Ul=0,wL=0;function Wt(){throw Error(Q(321))}function xx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!kr(t[n],e[n]))return!1;return!0}function wx(t,e,n,r,i,a){if(cs=a,tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qd.current=t===null||t.memoizedState===null?CL:EL,t=n(r,i),fl){a=0;do{if(fl=!1,Ul=0,25<=a)throw Error(Q(301));a+=1,At=kt=null,e.updateQueue=null,Qd.current=jL,t=n(r,i)}while(fl)}if(Qd.current=zf,e=kt!==null&&kt.next!==null,cs=0,At=kt=tt=null,Bf=!1,e)throw Error(Q(300));return t}function Sx(){var t=Ul!==0;return Ul=0,t}function Dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?tt.memoizedState=At=t:At=At.next=t,At}function er(){if(kt===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=kt.next;var e=At===null?tt.memoizedState:At.next;if(e!==null)At=e,kt=t;else{if(t===null)throw Error(Q(310));kt=t,t={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},At===null?tt.memoizedState=At=t:At=At.next=t}return At}function Fl(t,e){return typeof e=="function"?e(t):e}function vg(t){var e=er(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=kt,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,c=null,l=a;do{var d=l.lane;if((cs&d)===d)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var f={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(o=c=f,s=r):c=c.next=f,tt.lanes|=d,ls|=d}l=l.next}while(l!==null&&l!==a);c===null?s=r:c.next=o,kr(r,e.memoizedState)||(fn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,tt.lanes|=a,ls|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yg(t){var e=er(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);kr(a,e.memoizedState)||(fn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function A_(){}function R_(t,e){var n=tt,r=er(),i=e(),a=!kr(r.memoizedState,i);if(a&&(r.memoizedState=i,fn=!0),r=r.queue,kx(D_.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,Bl(9,M_.bind(null,n,r,i,e),void 0,null),Dt===null)throw Error(Q(349));cs&30||I_(n,e,i)}return i}function I_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function M_(t,e,n,r){e.value=n,e.getSnapshot=r,L_(e)&&$_(t)}function D_(t,e,n){return n(function(){L_(e)&&$_(t)})}function L_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kr(t,n)}catch{return!0}}function $_(t){var e=Ei(t,1);e!==null&&Sr(e,t,1,-1)}function AS(t){var e=Dr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:t},e.queue=t,t=t.dispatch=TL.bind(null,tt,t),[e.memoizedState,t]}function Bl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function U_(){return er().memoizedState}function Zd(t,e,n,r){var i=Dr();tt.flags|=t,i.memoizedState=Bl(1|e,n,void 0,r===void 0?null:r)}function Ep(t,e,n,r){var i=er();r=r===void 0?null:r;var a=void 0;if(kt!==null){var s=kt.memoizedState;if(a=s.destroy,r!==null&&xx(r,s.deps)){i.memoizedState=Bl(e,n,a,r);return}}tt.flags|=t,i.memoizedState=Bl(1|e,n,a,r)}function RS(t,e){return Zd(8390656,8,t,e)}function kx(t,e){return Ep(2048,8,t,e)}function F_(t,e){return Ep(4,2,t,e)}function B_(t,e){return Ep(4,4,t,e)}function z_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function q_(t,e,n){return n=n!=null?n.concat([t]):null,Ep(4,4,z_.bind(null,e,t),n)}function Tx(){}function V_(t,e){var n=er();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function W_(t,e){var n=er();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function H_(t,e,n){return cs&21?(kr(n,e)||(n=XP(),tt.lanes|=n,ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fn=!0),t.memoizedState=n)}function SL(t,e){var n=Ae;Ae=n!==0&&4>n?n:4,t(!0);var r=gg.transition;gg.transition={};try{t(!1),e()}finally{Ae=n,gg.transition=r}}function G_(){return er().memoizedState}function kL(t,e,n){var r=da(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},K_(t))J_(e,n);else if(n=P_(t,e,n,r),n!==null){var i=an();Sr(n,t,r,i),Y_(n,e,r)}}function TL(t,e,n){var r=da(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(K_(t))J_(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,kr(o,s)){var c=e.interleaved;c===null?(i.next=i,mx(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=P_(t,e,i,r),n!==null&&(i=an(),Sr(n,t,r,i),Y_(n,e,r))}}function K_(t){var e=t.alternate;return t===tt||e!==null&&e===tt}function J_(t,e){fl=Bf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Y_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tx(t,n)}}var zf={readContext:Zn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},CL={readContext:Zn,useCallback:function(t,e){return Dr().memoizedState=[t,e===void 0?null:e],t},useContext:Zn,useEffect:RS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zd(4194308,4,z_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zd(4,2,t,e)},useMemo:function(t,e){var n=Dr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kL.bind(null,tt,t),[r.memoizedState,t]},useRef:function(t){var e=Dr();return t={current:t},e.memoizedState=t},useState:AS,useDebugValue:Tx,useDeferredValue:function(t){return Dr().memoizedState=t},useTransition:function(){var t=AS(!1),e=t[0];return t=SL.bind(null,t[1]),Dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=tt,i=Dr();if(Ye){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),Dt===null)throw Error(Q(349));cs&30||I_(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,RS(D_.bind(null,r,a,t),[t]),r.flags|=2048,Bl(9,M_.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Dr(),e=Dt.identifierPrefix;if(Ye){var n=mi,r=pi;n=(r&~(1<<32-wr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ul++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},EL={readContext:Zn,useCallback:V_,useContext:Zn,useEffect:kx,useImperativeHandle:q_,useInsertionEffect:F_,useLayoutEffect:B_,useMemo:W_,useReducer:vg,useRef:U_,useState:function(){return vg(Fl)},useDebugValue:Tx,useDeferredValue:function(t){var e=er();return H_(e,kt.memoizedState,t)},useTransition:function(){var t=vg(Fl)[0],e=er().memoizedState;return[t,e]},useMutableSource:A_,useSyncExternalStore:R_,useId:G_,unstable_isNewReconciler:!1},jL={readContext:Zn,useCallback:V_,useContext:Zn,useEffect:kx,useImperativeHandle:q_,useInsertionEffect:F_,useLayoutEffect:B_,useMemo:W_,useReducer:yg,useRef:U_,useState:function(){return yg(Fl)},useDebugValue:Tx,useDeferredValue:function(t){var e=er();return kt===null?e.memoizedState=t:H_(e,kt.memoizedState,t)},useTransition:function(){var t=yg(Fl)[0],e=er().memoizedState;return[t,e]},useMutableSource:A_,useSyncExternalStore:R_,useId:G_,unstable_isNewReconciler:!1};function or(t,e){if(t&&t.defaultProps){e=nt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ay(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jp={isMounted:function(t){return(t=t._reactInternals)?Ts(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=an(),i=da(t),a=bi(r,i);a.payload=e,n!=null&&(a.callback=n),e=la(t,a,i),e!==null&&(Sr(e,t,i,r),Xd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=an(),i=da(t),a=bi(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=la(t,a,i),e!==null&&(Sr(e,t,i,r),Xd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=an(),r=da(t),i=bi(n,r);i.tag=2,e!=null&&(i.callback=e),e=la(t,i,r),e!==null&&(Sr(e,t,r,n),Xd(e,t,r))}};function IS(t,e,n,r,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!Rl(n,r)||!Rl(i,a):!0}function X_(t,e,n){var r=!1,i=wa,a=e.contextType;return typeof a=="object"&&a!==null?a=Zn(a):(i=gn(e)?ss:Zt.current,r=e.contextTypes,a=(r=r!=null)?Co(t,i):wa),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function MS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jp.enqueueReplaceState(e,e.state,null)}function sy(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},gx(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Zn(a):(a=gn(e)?ss:Zt.current,i.context=Co(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(ay(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&jp.enqueueReplaceState(i,i.state,null),Uf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Po(t,e){try{var n="",r=e;do n+=t3(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function bg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function oy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NL=typeof WeakMap=="function"?WeakMap:Map;function Q_(t,e,n){n=bi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vf||(Vf=!0,vy=r),oy(t,e)},n}function Z_(t,e,n){n=bi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){oy(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){oy(t,e),typeof r!="function"&&(ua===null?ua=new Set([this]):ua.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function DS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=zL.bind(null,t,e,n),e.then(t,t))}function LS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $S(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bi(-1,1),e.tag=2,la(n,e,1))),n.lanes|=1),t)}var PL=Ii.ReactCurrentOwner,fn=!1;function en(t,e,n,r){e.child=t===null?N_(e,null,n,r):jo(e,t.child,n,r)}function US(t,e,n,r,i){n=n.render;var a=e.ref;return uo(e,i),r=wx(t,e,n,r,a,i),n=Sx(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ji(t,e,i)):(Ye&&n&&lx(e),e.flags|=1,en(t,e,r,i),e.child)}function FS(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!Ax(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,e2(t,e,a,r,i)):(t=rf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Rl,n(s,r)&&t.ref===e.ref)return ji(t,e,i)}return e.flags|=1,t=fa(a,r),t.ref=e.ref,t.return=e,e.child=t}function e2(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Rl(a,r)&&t.ref===e.ref)if(fn=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(fn=!0);else return e.lanes=t.lanes,ji(t,e,i)}return cy(t,e,n,r,i)}function t2(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Zs,jn),jn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(Zs,jn),jn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ze(Zs,jn),jn|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,ze(Zs,jn),jn|=r;return en(t,e,i,n),e.child}function n2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cy(t,e,n,r,i){var a=gn(n)?ss:Zt.current;return a=Co(e,a),uo(e,i),n=wx(t,e,n,r,a,i),r=Sx(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ji(t,e,i)):(Ye&&r&&lx(e),e.flags|=1,en(t,e,n,i),e.child)}function BS(t,e,n,r,i){if(gn(n)){var a=!0;If(e)}else a=!1;if(uo(e,i),e.stateNode===null)ef(t,e),X_(e,n,r),sy(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var c=s.context,l=n.contextType;typeof l=="object"&&l!==null?l=Zn(l):(l=gn(n)?ss:Zt.current,l=Co(e,l));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||c!==l)&&MS(e,s,r,l),Ki=!1;var h=e.memoizedState;s.state=h,Uf(e,r,s,i),c=e.memoizedState,o!==r||h!==c||mn.current||Ki?(typeof d=="function"&&(ay(e,n,d,r),c=e.memoizedState),(o=Ki||IS(e,n,o,r,h,c,l))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=l,r=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,__(t,e),o=e.memoizedProps,l=e.type===e.elementType?o:or(e.type,o),s.props=l,f=e.pendingProps,h=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Zn(c):(c=gn(n)?ss:Zt.current,c=Co(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||h!==c)&&MS(e,s,r,c),Ki=!1,h=e.memoizedState,s.state=h,Uf(e,r,s,i);var g=e.memoizedState;o!==f||h!==g||mn.current||Ki?(typeof p=="function"&&(ay(e,n,p,r),g=e.memoizedState),(l=Ki||IS(e,n,l,r,h,g,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,g,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,g,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),s.props=r,s.state=g,s.context=c,r=l):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return ly(t,e,n,r,a,i)}function ly(t,e,n,r,i,a){n2(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&ES(e,n,!1),ji(t,e,a);r=e.stateNode,PL.current=e;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=jo(e,t.child,null,a),e.child=jo(e,null,o,a)):en(t,e,o,a),e.memoizedState=r.state,i&&ES(e,n,!0),e.child}function r2(t){var e=t.stateNode;e.pendingContext?CS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&CS(t,e.context,!1),vx(t,e.containerInfo)}function zS(t,e,n,r,i){return Eo(),dx(i),e.flags|=256,en(t,e,n,r),e.child}var uy={dehydrated:null,treeContext:null,retryLane:0};function dy(t){return{baseLanes:t,cachePool:null,transitions:null}}function i2(t,e,n){var r=e.pendingProps,i=et.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ze(et,i&1),t===null)return ry(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,a?(r=e.mode,a=e.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=_p(s,r,0,null),t=Za(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=dy(n),e.memoizedState=uy,t):Cx(e,s));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return _L(t,e,s,r,o,i,n);if(a){a=r.fallback,s=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=fa(i,c),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=fa(o,a):(a=Za(a,s,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,s=t.child.memoizedState,s=s===null?dy(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~n,e.memoizedState=uy,r}return a=t.child,t=a.sibling,r=fa(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Cx(t,e){return e=_p({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bd(t,e,n,r){return r!==null&&dx(r),jo(e,t.child,null,n),t=Cx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _L(t,e,n,r,i,a,s){if(n)return e.flags&256?(e.flags&=-257,r=bg(Error(Q(422))),bd(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=_p({mode:"visible",children:r.children},i,0,null),a=Za(a,i,s,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&jo(e,t.child,null,s),e.child.memoizedState=dy(s),e.memoizedState=uy,a);if(!(e.mode&1))return bd(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(Q(419)),r=bg(a,r,void 0),bd(t,e,s,r)}if(o=(s&t.childLanes)!==0,fn||o){if(r=Dt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ei(t,i),Sr(r,t,i,-1))}return Ox(),r=bg(Error(Q(421))),bd(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=qL.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,_n=ca(i.nextSibling),An=e,Ye=!0,hr=null,t!==null&&(qn[Vn++]=pi,qn[Vn++]=mi,qn[Vn++]=os,pi=t.id,mi=t.overflow,os=e),e=Cx(e,r.children),e.flags|=4096,e)}function qS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),iy(t.return,e,n)}function xg(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function a2(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(en(t,e,r.children,n),r=et.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qS(t,n,e);else if(t.tag===19)qS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ze(et,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ff(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),xg(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ff(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}xg(e,!0,n,null,a);break;case"together":xg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ef(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ji(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=fa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OL(t,e,n){switch(e.tag){case 3:r2(e),Eo();break;case 5:O_(e);break;case 1:gn(e.type)&&If(e);break;case 4:vx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ze(Lf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ze(et,et.current&1),e.flags|=128,null):n&e.child.childLanes?i2(t,e,n):(ze(et,et.current&1),t=ji(t,e,n),t!==null?t.sibling:null);ze(et,et.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return a2(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(et,et.current),r)break;return null;case 22:case 23:return e.lanes=0,t2(t,e,n)}return ji(t,e,n)}var s2,fy,o2,c2;s2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fy=function(){};o2=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ha(Vr.current);var a=null;switch(n){case"input":i=Iv(t,i),r=Iv(t,r),a=[];break;case"select":i=nt({},i,{value:void 0}),r=nt({},r,{value:void 0}),a=[];break;case"textarea":i=Lv(t,i),r=Lv(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Af)}Uv(n,r);var s;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var o=i[l];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(El.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var c=r[l];if(o=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==o&&(c!=null||o!=null))if(l==="style")if(o){for(s in o)!o.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&o[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(El.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&We("scroll",t),a||o===c||(a=[])):(a=a||[]).push(l,c))}n&&(a=a||[]).push("style",n);var l=a;(e.updateQueue=l)&&(e.flags|=4)}};c2=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ac(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function AL(t,e,n){var r=e.pendingProps;switch(ux(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return gn(e.type)&&Rf(),Ht(e),null;case 3:return r=e.stateNode,No(),Je(mn),Je(Zt),bx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hr!==null&&(xy(hr),hr=null))),fy(t,e),Ht(e),null;case 5:yx(e);var i=Ha($l.current);if(n=e.type,t!==null&&e.stateNode!=null)o2(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return Ht(e),null}if(t=Ha(Vr.current),vd(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[$r]=e,r[Dl]=a,t=(e.mode&1)!==0,n){case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(i=0;i<nl.length;i++)We(nl[i],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"input":Q1(r,a),We("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},We("invalid",r);break;case"textarea":eS(r,a),We("invalid",r)}Uv(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&gd(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&gd(r.textContent,o,t),i=["children",""+o]):El.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&We("scroll",r)}switch(n){case"input":cd(r),Z1(r,a,!0);break;case"textarea":cd(r),tS(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Af)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=DP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[$r]=e,t[Dl]=r,s2(t,e,!1,!1),e.stateNode=t;e:{switch(s=Fv(n,r),n){case"dialog":We("cancel",t),We("close",t),i=r;break;case"iframe":case"object":case"embed":We("load",t),i=r;break;case"video":case"audio":for(i=0;i<nl.length;i++)We(nl[i],t);i=r;break;case"source":We("error",t),i=r;break;case"img":case"image":case"link":We("error",t),We("load",t),i=r;break;case"details":We("toggle",t),i=r;break;case"input":Q1(t,r),i=Iv(t,r),We("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=nt({},r,{value:void 0}),We("invalid",t);break;case"textarea":eS(t,r),i=Lv(t,r),We("invalid",t);break;default:i=r}Uv(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?UP(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&LP(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&jl(t,c):typeof c=="number"&&jl(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(El.hasOwnProperty(a)?c!=null&&a==="onScroll"&&We("scroll",t):c!=null&&Jb(t,a,c,s))}switch(n){case"input":cd(t),Z1(t,r,!1);break;case"textarea":cd(t),tS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xa(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?so(t,!!r.multiple,a,!1):r.defaultValue!=null&&so(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Af)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)c2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Ha($l.current),Ha(Vr.current),vd(e)){if(r=e.stateNode,n=e.memoizedProps,r[$r]=e,(a=r.nodeValue!==n)&&(t=An,t!==null))switch(t.tag){case 3:gd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gd(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$r]=e,e.stateNode=r}return Ht(e),null;case 13:if(Je(et),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&_n!==null&&e.mode&1&&!(e.flags&128))E_(),Eo(),e.flags|=98560,a=!1;else if(a=vd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Q(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Q(317));a[$r]=e}else Eo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),a=!1}else hr!==null&&(xy(hr),hr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?Ct===0&&(Ct=3):Ox())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return No(),fy(t,e),t===null&&Il(e.stateNode.containerInfo),Ht(e),null;case 10:return px(e.type._context),Ht(e),null;case 17:return gn(e.type)&&Rf(),Ht(e),null;case 19:if(Je(et),a=e.memoizedState,a===null)return Ht(e),null;if(r=(e.flags&128)!==0,s=a.rendering,s===null)if(r)Ac(a,!1);else{if(Ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Ff(t),s!==null){for(e.flags|=128,Ac(a,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(et,et.current&1|2),e.child}t=t.sibling}a.tail!==null&&dt()>_o&&(e.flags|=128,r=!0,Ac(a,!1),e.lanes=4194304)}else{if(!r)if(t=Ff(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ac(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Ye)return Ht(e),null}else 2*dt()-a.renderingStartTime>_o&&n!==1073741824&&(e.flags|=128,r=!0,Ac(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(n=a.last,n!==null?n.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=dt(),e.sibling=null,n=et.current,ze(et,r?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return _x(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function RL(t,e){switch(ux(e),e.tag){case 1:return gn(e.type)&&Rf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return No(),Je(mn),Je(Zt),bx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yx(e),null;case 13:if(Je(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Eo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(et),null;case 4:return No(),null;case 10:return px(e.type._context),null;case 22:case 23:return _x(),null;case 24:return null;default:return null}}var xd=!1,Kt=!1,IL=typeof WeakSet=="function"?WeakSet:Set,re=null;function Qs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){at(t,e,r)}else n.current=null}function hy(t,e,n){try{n()}catch(r){at(t,e,r)}}var VS=!1;function ML(t,e){if(Yv=Pf,t=h_(),cx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,c=-1,l=0,d=0,f=t,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(o=s+i),f!==a||r!==0&&f.nodeType!==3||(c=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===n&&++l===i&&(o=s),h===a&&++d===r&&(c=s),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xv={focusedElem:t,selectionRange:n},Pf=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,b=g.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:or(e.type,m),b);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(T){at(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return g=VS,VS=!1,g}function hl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&hy(e,n,a)}i=i.next}while(i!==r)}}function Np(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function py(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function l2(t){var e=t.alternate;e!==null&&(t.alternate=null,l2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$r],delete e[Dl],delete e[ey],delete e[vL],delete e[yL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function u2(t){return t.tag===5||t.tag===3||t.tag===4}function WS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||u2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function my(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Af));else if(r!==4&&(t=t.child,t!==null))for(my(t,e,n),t=t.sibling;t!==null;)my(t,e,n),t=t.sibling}function gy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gy(t,e,n),t=t.sibling;t!==null;)gy(t,e,n),t=t.sibling}var Ut=null,cr=!1;function qi(t,e,n){for(n=n.child;n!==null;)d2(t,e,n),n=n.sibling}function d2(t,e,n){if(qr&&typeof qr.onCommitFiberUnmount=="function")try{qr.onCommitFiberUnmount(xp,n)}catch{}switch(n.tag){case 5:Kt||Qs(n,e);case 6:var r=Ut,i=cr;Ut=null,qi(t,e,n),Ut=r,cr=i,Ut!==null&&(cr?(t=Ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ut.removeChild(n.stateNode));break;case 18:Ut!==null&&(cr?(t=Ut,n=n.stateNode,t.nodeType===8?hg(t.parentNode,n):t.nodeType===1&&hg(t,n),Ol(t)):hg(Ut,n.stateNode));break;case 4:r=Ut,i=cr,Ut=n.stateNode.containerInfo,cr=!0,qi(t,e,n),Ut=r,cr=i;break;case 0:case 11:case 14:case 15:if(!Kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&hy(n,e,s),i=i.next}while(i!==r)}qi(t,e,n);break;case 1:if(!Kt&&(Qs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){at(n,e,o)}qi(t,e,n);break;case 21:qi(t,e,n);break;case 22:n.mode&1?(Kt=(r=Kt)||n.memoizedState!==null,qi(t,e,n),Kt=r):qi(t,e,n);break;default:qi(t,e,n)}}function HS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new IL),e.forEach(function(r){var i=VL.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ir(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:Ut=o.stateNode,cr=!1;break e;case 3:Ut=o.stateNode.containerInfo,cr=!0;break e;case 4:Ut=o.stateNode.containerInfo,cr=!0;break e}o=o.return}if(Ut===null)throw Error(Q(160));d2(a,s,i),Ut=null,cr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){at(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)f2(e,t),e=e.sibling}function f2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ir(e,t),Rr(t),r&4){try{hl(3,t,t.return),Np(3,t)}catch(m){at(t,t.return,m)}try{hl(5,t,t.return)}catch(m){at(t,t.return,m)}}break;case 1:ir(e,t),Rr(t),r&512&&n!==null&&Qs(n,n.return);break;case 5:if(ir(e,t),Rr(t),r&512&&n!==null&&Qs(n,n.return),t.flags&32){var i=t.stateNode;try{jl(i,"")}catch(m){at(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=n!==null?n.memoizedProps:a,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&IP(i,a),Fv(o,s);var l=Fv(o,a);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?UP(i,f):d==="dangerouslySetInnerHTML"?LP(i,f):d==="children"?jl(i,f):Jb(i,d,f,l)}switch(o){case"input":Mv(i,a);break;case"textarea":MP(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?so(i,!!a.multiple,p,!1):h!==!!a.multiple&&(a.defaultValue!=null?so(i,!!a.multiple,a.defaultValue,!0):so(i,!!a.multiple,a.multiple?[]:"",!1))}i[Dl]=a}catch(m){at(t,t.return,m)}}break;case 6:if(ir(e,t),Rr(t),r&4){if(t.stateNode===null)throw Error(Q(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(m){at(t,t.return,m)}}break;case 3:if(ir(e,t),Rr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ol(e.containerInfo)}catch(m){at(t,t.return,m)}break;case 4:ir(e,t),Rr(t);break;case 13:ir(e,t),Rr(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Nx=dt())),r&4&&HS(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Kt=(l=Kt)||d,ir(e,t),Kt=l):ir(e,t),Rr(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!d&&t.mode&1)for(re=t,d=t.child;d!==null;){for(f=re=d;re!==null;){switch(h=re,p=h.child,h.tag){case 0:case 11:case 14:case 15:hl(4,h,h.return);break;case 1:Qs(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){at(r,n,m)}}break;case 5:Qs(h,h.return);break;case 22:if(h.memoizedState!==null){KS(f);continue}}p!==null?(p.return=h,re=p):KS(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,l?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=$P("display",s))}catch(m){at(t,t.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){at(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ir(e,t),Rr(t),r&4&&HS(t);break;case 21:break;default:ir(e,t),Rr(t)}}function Rr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(u2(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(jl(i,""),r.flags&=-33);var a=WS(t);gy(t,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=WS(t);my(t,o,s);break;default:throw Error(Q(161))}}catch(c){at(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function DL(t,e,n){re=t,h2(t)}function h2(t,e,n){for(var r=(t.mode&1)!==0;re!==null;){var i=re,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||xd;if(!s){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Kt;o=xd;var l=Kt;if(xd=s,(Kt=c)&&!l)for(re=i;re!==null;)s=re,c=s.child,s.tag===22&&s.memoizedState!==null?JS(i):c!==null?(c.return=s,re=c):JS(i);for(;a!==null;)re=a,h2(a),a=a.sibling;re=i,xd=o,Kt=l}GS(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,re=a):GS(t)}}function GS(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kt||Np(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Kt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:or(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&OS(e,a,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}OS(e,s,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var d=l.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ol(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Kt||e.flags&512&&py(e)}catch(h){at(e,e.return,h)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function KS(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function JS(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Np(4,e)}catch(c){at(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){at(e,i,c)}}var a=e.return;try{py(e)}catch(c){at(e,a,c)}break;case 5:var s=e.return;try{py(e)}catch(c){at(e,s,c)}}}catch(c){at(e,e.return,c)}if(e===t){re=null;break}var o=e.sibling;if(o!==null){o.return=e.return,re=o;break}re=e.return}}var LL=Math.ceil,qf=Ii.ReactCurrentDispatcher,Ex=Ii.ReactCurrentOwner,Yn=Ii.ReactCurrentBatchConfig,je=0,Dt=null,gt=null,zt=0,jn=0,Zs=Ca(0),Ct=0,zl=null,ls=0,Pp=0,jx=0,pl=null,un=null,Nx=0,_o=1/0,si=null,Vf=!1,vy=null,ua=null,wd=!1,ta=null,Wf=0,ml=0,yy=null,tf=-1,nf=0;function an(){return je&6?dt():tf!==-1?tf:tf=dt()}function da(t){return t.mode&1?je&2&&zt!==0?zt&-zt:xL.transition!==null?(nf===0&&(nf=XP()),nf):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:i_(t.type)),t):1}function Sr(t,e,n,r){if(50<ml)throw ml=0,yy=null,Error(Q(185));Lu(t,n,r),(!(je&2)||t!==Dt)&&(t===Dt&&(!(je&2)&&(Pp|=n),Ct===4&&Xi(t,zt)),vn(t,r),n===1&&je===0&&!(e.mode&1)&&(_o=dt()+500,Cp&&Ea()))}function vn(t,e){var n=t.callbackNode;x3(t,e);var r=Nf(t,t===Dt?zt:0);if(r===0)n!==null&&iS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iS(n),e===1)t.tag===0?bL(YS.bind(null,t)):k_(YS.bind(null,t)),mL(function(){!(je&6)&&Ea()}),n=null;else{switch(QP(r)){case 1:n=ex;break;case 4:n=JP;break;case 16:n=jf;break;case 536870912:n=YP;break;default:n=jf}n=w2(n,p2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function p2(t,e){if(tf=-1,nf=0,je&6)throw Error(Q(327));var n=t.callbackNode;if(fo()&&t.callbackNode!==n)return null;var r=Nf(t,t===Dt?zt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hf(t,r);else{e=r;var i=je;je|=2;var a=g2();(Dt!==t||zt!==e)&&(si=null,_o=dt()+500,Qa(t,e));do try{FL();break}catch(o){m2(t,o)}while(1);hx(),qf.current=a,je=i,gt!==null?e=0:(Dt=null,zt=0,e=Ct)}if(e!==0){if(e===2&&(i=Wv(t),i!==0&&(r=i,e=by(t,i))),e===1)throw n=zl,Qa(t,0),Xi(t,r),vn(t,dt()),n;if(e===6)Xi(t,r);else{if(i=t.current.alternate,!(r&30)&&!$L(i)&&(e=Hf(t,r),e===2&&(a=Wv(t),a!==0&&(r=a,e=by(t,a))),e===1))throw n=zl,Qa(t,0),Xi(t,r),vn(t,dt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:Ua(t,un,si);break;case 3:if(Xi(t,r),(r&130023424)===r&&(e=Nx+500-dt(),10<e)){if(Nf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){an(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Zv(Ua.bind(null,t,un,si),e);break}Ua(t,un,si);break;case 4:if(Xi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-wr(r);a=1<<s,s=e[s],s>i&&(i=s),r&=~a}if(r=i,r=dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*LL(r/1960))-r,10<r){t.timeoutHandle=Zv(Ua.bind(null,t,un,si),r);break}Ua(t,un,si);break;case 5:Ua(t,un,si);break;default:throw Error(Q(329))}}}return vn(t,dt()),t.callbackNode===n?p2.bind(null,t):null}function by(t,e){var n=pl;return t.current.memoizedState.isDehydrated&&(Qa(t,e).flags|=256),t=Hf(t,e),t!==2&&(e=un,un=n,e!==null&&xy(e)),t}function xy(t){un===null?un=t:un.push.apply(un,t)}function $L(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!kr(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xi(t,e){for(e&=~jx,e&=~Pp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wr(e),r=1<<n;t[n]=-1,e&=~r}}function YS(t){if(je&6)throw Error(Q(327));fo();var e=Nf(t,0);if(!(e&1))return vn(t,dt()),null;var n=Hf(t,e);if(t.tag!==0&&n===2){var r=Wv(t);r!==0&&(e=r,n=by(t,r))}if(n===1)throw n=zl,Qa(t,0),Xi(t,e),vn(t,dt()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ua(t,un,si),vn(t,dt()),null}function Px(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(_o=dt()+500,Cp&&Ea())}}function us(t){ta!==null&&ta.tag===0&&!(je&6)&&fo();var e=je;je|=1;var n=Yn.transition,r=Ae;try{if(Yn.transition=null,Ae=1,t)return t()}finally{Ae=r,Yn.transition=n,je=e,!(je&6)&&Ea()}}function _x(){jn=Zs.current,Je(Zs)}function Qa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pL(n)),gt!==null)for(n=gt.return;n!==null;){var r=n;switch(ux(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rf();break;case 3:No(),Je(mn),Je(Zt),bx();break;case 5:yx(r);break;case 4:No();break;case 13:Je(et);break;case 19:Je(et);break;case 10:px(r.type._context);break;case 22:case 23:_x()}n=n.return}if(Dt=t,gt=t=fa(t.current,null),zt=jn=e,Ct=0,zl=null,jx=Pp=ls=0,un=pl=null,Wa!==null){for(e=0;e<Wa.length;e++)if(n=Wa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}Wa=null}return t}function m2(t,e){do{var n=gt;try{if(hx(),Qd.current=zf,Bf){for(var r=tt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bf=!1}if(cs=0,At=kt=tt=null,fl=!1,Ul=0,Ex.current=null,n===null||n.return===null){Ct=1,zl=e,gt=null;break}e:{var a=t,s=n.return,o=n,c=e;if(e=zt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=LS(s);if(p!==null){p.flags&=-257,$S(p,s,o,a,e),p.mode&1&&DS(a,l,e),e=p,c=l;var g=e.updateQueue;if(g===null){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break e}else{if(!(e&1)){DS(a,l,e),Ox();break e}c=Error(Q(426))}}else if(Ye&&o.mode&1){var b=LS(s);if(b!==null){!(b.flags&65536)&&(b.flags|=256),$S(b,s,o,a,e),dx(Po(c,o));break e}}a=c=Po(c,o),Ct!==4&&(Ct=2),pl===null?pl=[a]:pl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var v=Q_(a,c,e);_S(a,v);break e;case 1:o=c;var x=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ua===null||!ua.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var T=Z_(a,o,e);_S(a,T);break e}}a=a.return}while(a!==null)}y2(n)}catch(w){e=w,gt===n&&n!==null&&(gt=n=n.return);continue}break}while(1)}function g2(){var t=qf.current;return qf.current=zf,t===null?zf:t}function Ox(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Dt===null||!(ls&268435455)&&!(Pp&268435455)||Xi(Dt,zt)}function Hf(t,e){var n=je;je|=2;var r=g2();(Dt!==t||zt!==e)&&(si=null,Qa(t,e));do try{UL();break}catch(i){m2(t,i)}while(1);if(hx(),je=n,qf.current=r,gt!==null)throw Error(Q(261));return Dt=null,zt=0,Ct}function UL(){for(;gt!==null;)v2(gt)}function FL(){for(;gt!==null&&!d3();)v2(gt)}function v2(t){var e=x2(t.alternate,t,jn);t.memoizedProps=t.pendingProps,e===null?y2(t):gt=e,Ex.current=null}function y2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RL(n,e),n!==null){n.flags&=32767,gt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ct=6,gt=null;return}}else if(n=AL(n,e,jn),n!==null){gt=n;return}if(e=e.sibling,e!==null){gt=e;return}gt=e=t}while(e!==null);Ct===0&&(Ct=5)}function Ua(t,e,n){var r=Ae,i=Yn.transition;try{Yn.transition=null,Ae=1,BL(t,e,n,r)}finally{Yn.transition=i,Ae=r}return null}function BL(t,e,n,r){do fo();while(ta!==null);if(je&6)throw Error(Q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(w3(t,a),t===Dt&&(gt=Dt=null,zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wd||(wd=!0,w2(jf,function(){return fo(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Yn.transition,Yn.transition=null;var s=Ae;Ae=1;var o=je;je|=4,Ex.current=null,ML(t,n),f2(n,t),oL(Xv),Pf=!!Yv,Xv=Yv=null,t.current=n,DL(n),f3(),je=o,Ae=s,Yn.transition=a}else t.current=n;if(wd&&(wd=!1,ta=t,Wf=i),a=t.pendingLanes,a===0&&(ua=null),m3(n.stateNode),vn(t,dt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vf)throw Vf=!1,t=vy,vy=null,t;return Wf&1&&t.tag!==0&&fo(),a=t.pendingLanes,a&1?t===yy?ml++:(ml=0,yy=t):ml=0,Ea(),null}function fo(){if(ta!==null){var t=QP(Wf),e=Yn.transition,n=Ae;try{if(Yn.transition=null,Ae=16>t?16:t,ta===null)var r=!1;else{if(t=ta,ta=null,Wf=0,je&6)throw Error(Q(331));var i=je;for(je|=4,re=t.current;re!==null;){var a=re,s=a.child;if(re.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var l=o[c];for(re=l;re!==null;){var d=re;switch(d.tag){case 0:case 11:case 15:hl(8,d,a)}var f=d.child;if(f!==null)f.return=d,re=f;else for(;re!==null;){d=re;var h=d.sibling,p=d.return;if(l2(d),d===l){re=null;break}if(h!==null){h.return=p,re=h;break}re=p}}}var g=a.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(m!==null)}}re=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,re=s;else e:for(;re!==null;){if(a=re,a.flags&2048)switch(a.tag){case 0:case 11:case 15:hl(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,re=v;break e}re=a.return}}var x=t.current;for(re=x;re!==null;){s=re;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,re=S;else e:for(s=x;re!==null;){if(o=re,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Np(9,o)}}catch(w){at(o,o.return,w)}if(o===s){re=null;break e}var T=o.sibling;if(T!==null){T.return=o.return,re=T;break e}re=o.return}}if(je=i,Ea(),qr&&typeof qr.onPostCommitFiberRoot=="function")try{qr.onPostCommitFiberRoot(xp,t)}catch{}r=!0}return r}finally{Ae=n,Yn.transition=e}}return!1}function XS(t,e,n){e=Po(n,e),e=Q_(t,e,1),t=la(t,e,1),e=an(),t!==null&&(Lu(t,1,e),vn(t,e))}function at(t,e,n){if(t.tag===3)XS(t,t,n);else for(;e!==null;){if(e.tag===3){XS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ua===null||!ua.has(r))){t=Po(n,t),t=Z_(e,t,1),e=la(e,t,1),t=an(),e!==null&&(Lu(e,1,t),vn(e,t));break}}e=e.return}}function zL(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=an(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(zt&n)===n&&(Ct===4||Ct===3&&(zt&130023424)===zt&&500>dt()-Nx?Qa(t,0):jx|=n),vn(t,e)}function b2(t,e){e===0&&(t.mode&1?(e=dd,dd<<=1,!(dd&130023424)&&(dd=4194304)):e=1);var n=an();t=Ei(t,e),t!==null&&(Lu(t,e,n),vn(t,n))}function qL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),b2(t,n)}function VL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),b2(t,n)}var x2;x2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mn.current)fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fn=!1,OL(t,e,n);fn=!!(t.flags&131072)}else fn=!1,Ye&&e.flags&1048576&&T_(e,Df,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ef(t,e),t=e.pendingProps;var i=Co(e,Zt.current);uo(e,n),i=wx(null,e,r,t,i,n);var a=Sx();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gn(r)?(a=!0,If(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gx(e),i.updater=jp,e.stateNode=i,i._reactInternals=e,sy(e,r,t,n),e=ly(null,e,r,!0,a,n)):(e.tag=0,Ye&&a&&lx(e),en(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ef(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=HL(r),t=or(r,t),i){case 0:e=cy(null,e,r,t,n);break e;case 1:e=BS(null,e,r,t,n);break e;case 11:e=US(null,e,r,t,n);break e;case 14:e=FS(null,e,r,or(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),cy(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),BS(t,e,r,i,n);case 3:e:{if(r2(e),t===null)throw Error(Q(387));r=e.pendingProps,a=e.memoizedState,i=a.element,__(t,e),Uf(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Po(Error(Q(423)),e),e=zS(t,e,r,n,i);break e}else if(r!==i){i=Po(Error(Q(424)),e),e=zS(t,e,r,n,i);break e}else for(_n=ca(e.stateNode.containerInfo.firstChild),An=e,Ye=!0,hr=null,n=N_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Eo(),r===i){e=ji(t,e,n);break e}en(t,e,r,n)}e=e.child}return e;case 5:return O_(e),t===null&&ry(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,Qv(r,i)?s=null:a!==null&&Qv(r,a)&&(e.flags|=32),n2(t,e),en(t,e,s,n),e.child;case 6:return t===null&&ry(e),null;case 13:return i2(t,e,n);case 4:return vx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=jo(e,null,r,n):en(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),US(t,e,r,i,n);case 7:return en(t,e,e.pendingProps,n),e.child;case 8:return en(t,e,e.pendingProps.children,n),e.child;case 12:return en(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,ze(Lf,r._currentValue),r._currentValue=s,a!==null)if(kr(a.value,s)){if(a.children===i.children&&!mn.current){e=ji(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=bi(-1,n&-n),c.tag=2;var l=a.updateQueue;if(l!==null){l=l.shared;var d=l.pending;d===null?c.next=c:(c.next=d.next,d.next=c),l.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),iy(a.return,n,e),o.lanes|=n;break}c=c.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(Q(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),iy(s,n,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}en(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,uo(e,n),i=Zn(i),r=r(i),e.flags|=1,en(t,e,r,n),e.child;case 14:return r=e.type,i=or(r,e.pendingProps),i=or(r.type,i),FS(t,e,r,i,n);case 15:return e2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),ef(t,e),e.tag=1,gn(r)?(t=!0,If(e)):t=!1,uo(e,n),X_(e,r,i),sy(e,r,i,n),ly(null,e,r,!0,t,n);case 19:return a2(t,e,n);case 22:return t2(t,e,n)}throw Error(Q(156,e.tag))};function w2(t,e){return KP(t,e)}function WL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(t,e,n,r){return new WL(t,e,n,r)}function Ax(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HL(t){if(typeof t=="function")return Ax(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xb)return 11;if(t===Qb)return 14}return 2}function fa(t,e){var n=t.alternate;return n===null?(n=Hn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rf(t,e,n,r,i,a){var s=2;if(r=t,typeof t=="function")Ax(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case qs:return Za(n.children,i,a,e);case Yb:s=8,i|=8;break;case _v:return t=Hn(12,n,e,i|2),t.elementType=_v,t.lanes=a,t;case Ov:return t=Hn(13,n,e,i),t.elementType=Ov,t.lanes=a,t;case Av:return t=Hn(19,n,e,i),t.elementType=Av,t.lanes=a,t;case OP:return _p(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case PP:s=10;break e;case _P:s=9;break e;case Xb:s=11;break e;case Qb:s=14;break e;case Gi:s=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Hn(s,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Za(t,e,n,r){return t=Hn(7,t,r,e),t.lanes=n,t}function _p(t,e,n,r){return t=Hn(22,t,r,e),t.elementType=OP,t.lanes=n,t.stateNode={isHidden:!1},t}function wg(t,e,n){return t=Hn(6,t,null,e),t.lanes=n,t}function Sg(t,e,n){return e=Hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GL(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ng(0),this.expirationTimes=ng(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ng(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rx(t,e,n,r,i,a,s,o,c){return t=new GL(t,e,n,o,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Hn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gx(a),t}function KL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function S2(t){if(!t)return wa;t=t._reactInternals;e:{if(Ts(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(gn(n))return S_(t,n,e)}return e}function k2(t,e,n,r,i,a,s,o,c){return t=Rx(n,r,!0,t,i,a,s,o,c),t.context=S2(null),n=t.current,r=an(),i=da(n),a=bi(r,i),a.callback=e??null,la(n,a,i),t.current.lanes=i,Lu(t,i,r),vn(t,r),t}function Op(t,e,n,r){var i=e.current,a=an(),s=da(i);return n=S2(n),e.context===null?e.context=n:e.pendingContext=n,e=bi(a,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=la(i,e,s),t!==null&&(Sr(t,i,s,a),Xd(t,i,s)),s}function Gf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function QS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ix(t,e){QS(t,e),(t=t.alternate)&&QS(t,e)}function JL(){return null}var T2=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mx(t){this._internalRoot=t}Ap.prototype.render=Mx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Op(t,e,null,null)};Ap.prototype.unmount=Mx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;us(function(){Op(null,t,null,null)}),e[Ci]=null}};function Ap(t){this._internalRoot=t}Ap.prototype.unstable_scheduleHydration=function(t){if(t){var e=t_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yi.length&&e!==0&&e<Yi[n].priority;n++);Yi.splice(n,0,t),n===0&&r_(t)}};function Dx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ZS(){}function YL(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var l=Gf(s);a.call(l)}}var s=k2(e,r,t,0,null,!1,!1,"",ZS);return t._reactRootContainer=s,t[Ci]=s.current,Il(t.nodeType===8?t.parentNode:t),us(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var l=Gf(c);o.call(l)}}var c=Rx(t,0,!1,null,null,!1,!1,"",ZS);return t._reactRootContainer=c,t[Ci]=c.current,Il(t.nodeType===8?t.parentNode:t),us(function(){Op(e,c,n,r)}),c}function Ip(t,e,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var c=Gf(s);o.call(c)}}Op(e,s,t,i)}else s=YL(n,e,t,i,r);return Gf(s)}ZP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=tl(e.pendingLanes);n!==0&&(tx(e,n|1),vn(e,dt()),!(je&6)&&(_o=dt()+500,Ea()))}break;case 13:us(function(){var r=Ei(t,1);if(r!==null){var i=an();Sr(r,t,1,i)}}),Ix(t,1)}};nx=function(t){if(t.tag===13){var e=Ei(t,134217728);if(e!==null){var n=an();Sr(e,t,134217728,n)}Ix(t,134217728)}};e_=function(t){if(t.tag===13){var e=da(t),n=Ei(t,e);if(n!==null){var r=an();Sr(n,t,e,r)}Ix(t,e)}};t_=function(){return Ae};n_=function(t,e){var n=Ae;try{return Ae=t,e()}finally{Ae=n}};zv=function(t,e,n){switch(e){case"input":if(Mv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Tp(r);if(!i)throw Error(Q(90));RP(r),Mv(r,i)}}}break;case"textarea":MP(t,n);break;case"select":e=n.value,e!=null&&so(t,!!n.multiple,e,!1)}};zP=Px;qP=us;var XL={usingClientEntryPoint:!1,Events:[Uu,Gs,Tp,FP,BP,Px]},Rc={findFiberByHostInstance:Va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QL={bundleType:Rc.bundleType,version:Rc.version,rendererPackageName:Rc.rendererPackageName,rendererConfig:Rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=HP(t),t===null?null:t.stateNode},findFiberByHostInstance:Rc.findFiberByHostInstance||JL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sd.isDisabled&&Sd.supportsFiber)try{xp=Sd.inject(QL),qr=Sd}catch{}}Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XL;Dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dx(e))throw Error(Q(200));return KL(t,e,null,n)};Dn.createRoot=function(t,e){if(!Dx(t))throw Error(Q(299));var n=!1,r="",i=T2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Rx(t,1,!1,null,null,n,!1,r,i),t[Ci]=e.current,Il(t.nodeType===8?t.parentNode:t),new Mx(e)};Dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=HP(e),t=t===null?null:t.stateNode,t};Dn.flushSync=function(t){return us(t)};Dn.hydrate=function(t,e,n){if(!Rp(e))throw Error(Q(200));return Ip(null,t,e,!0,n)};Dn.hydrateRoot=function(t,e,n){if(!Dx(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=T2;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=k2(e,null,t,1,n??null,i,!1,a,s),t[Ci]=e.current,Il(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ap(e)};Dn.render=function(t,e,n){if(!Rp(e))throw Error(Q(200));return Ip(null,t,e,!1,n)};Dn.unmountComponentAtNode=function(t){if(!Rp(t))throw Error(Q(40));return t._reactRootContainer?(us(function(){Ip(null,null,t,!1,function(){t._reactRootContainer=null,t[Ci]=null})}),!0):!1};Dn.unstable_batchedUpdates=Px;Dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rp(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Ip(t,e,n,!1,r)};Dn.version="18.3.1-next-f1338f8080-20240426";function C2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C2)}catch(t){console.error(t)}}C2(),CP.exports=Dn;var ZL=CP.exports,ek=ZL;Nv.createRoot=ek.createRoot,Nv.hydrateRoot=ek.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ql.apply(this,arguments)}var na;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(na||(na={}));const tk="popstate";function e$(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return wy("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:j2(i)}return n$(e,n,null,t)}function jt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function E2(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function t$(){return Math.random().toString(36).substr(2,8)}function nk(t,e){return{usr:t.state,key:t.key,idx:e}}function wy(t,e,n,r){return n===void 0&&(n=null),ql({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?uc(e):e,{state:n,key:e&&e.key||r||t$()})}function j2(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function uc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function n$(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=na.Pop,c=null,l=d();l==null&&(l=0,s.replaceState(ql({},s.state,{idx:l}),""));function d(){return(s.state||{idx:null}).idx}function f(){o=na.Pop;let b=d(),v=b==null?null:b-l;l=b,c&&c({action:o,location:m.location,delta:v})}function h(b,v){o=na.Push;let x=wy(m.location,b,v);n&&n(x,b),l=d()+1;let S=nk(x,l),T=m.createHref(x);try{s.pushState(S,"",T)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(T)}a&&c&&c({action:o,location:m.location,delta:1})}function p(b,v){o=na.Replace;let x=wy(m.location,b,v);n&&n(x,b),l=d();let S=nk(x,l),T=m.createHref(x);s.replaceState(S,"",T),a&&c&&c({action:o,location:m.location,delta:0})}function g(b){let v=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof b=="string"?b:j2(b);return x=x.replace(/ $/,"%20"),jt(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let m={get action(){return o},get location(){return t(i,s)},listen(b){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(tk,f),c=b,()=>{i.removeEventListener(tk,f),c=null}},createHref(b){return e(i,b)},createURL:g,encodeLocation(b){let v=g(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(b){return s.go(b)}};return m}var rk;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rk||(rk={}));function r$(t,e,n){return n===void 0&&(n="/"),i$(t,e,n,!1)}function i$(t,e,n,r){let i=typeof e=="string"?uc(e):e,a=_2(i.pathname||"/",n);if(a==null)return null;let s=N2(t);a$(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let l=g$(a);o=p$(s[c],l,r)}return o}function N2(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,s,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(jt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=es([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(jt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),N2(a.children,e,d,l)),!(a.path==null&&!a.index)&&e.push({path:l,score:f$(l,a.index),routesMeta:d})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let c of P2(a.path))i(a,s,c)}),e}function P2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=P2(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function a$(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:h$(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const s$=/^:[\w-]+$/,o$=3,c$=2,l$=1,u$=10,d$=-2,ik=t=>t==="*";function f$(t,e){let n=t.split("/"),r=n.length;return n.some(ik)&&(r+=d$),e&&(r+=c$),n.filter(i=>!ik(i)).reduce((i,a)=>i+(s$.test(a)?o$:a===""?l$:u$),r)}function h$(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function p$(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],l=o===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",f=ak({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},d),h=c.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=ak({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:es([a,f.pathname]),pathnameBase:S$(es([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=es([a,f.pathnameBase]))}return s}function ak(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=m$(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((l,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let m=o[f]||"";s=a.slice(0,a.length-m.length).replace(/(.)\/+$/,"$1")}const g=o[f];return p&&!g?l[h]=void 0:l[h]=(g||"").replace(/%2F/g,"/"),l},{}),pathname:a,pathnameBase:s,pattern:t}}function m$(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),E2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function g$(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return E2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _2(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function v$(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?uc(t):t;return{pathname:n?n.startsWith("/")?n:y$(n,e):e,search:k$(r),hash:T$(i)}}function y$(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function kg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function b$(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function x$(t,e){let n=b$(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function w$(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=uc(t):(i=ql({},t),jt(!i.pathname||!i.pathname.includes("?"),kg("?","pathname","search",i)),jt(!i.pathname||!i.pathname.includes("#"),kg("#","pathname","hash",i)),jt(!i.search||!i.search.includes("#"),kg("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let f=e.length-1;if(!r&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}o=f>=0?e[f]:"/"}let c=v$(i,o),l=s&&s!=="/"&&s.endsWith("/"),d=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||d)&&(c.pathname+="/"),c}const es=t=>t.join("/").replace(/\/\/+/g,"/"),S$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),k$=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,T$=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function C$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const O2=["post","put","patch","delete"];new Set(O2);const E$=["get",...O2];new Set(E$);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vl(){return Vl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vl.apply(this,arguments)}const Lx=y.createContext(null),j$=y.createContext(null),Mp=y.createContext(null),Dp=y.createContext(null),Cs=y.createContext({outlet:null,matches:[],isDataRoute:!1}),A2=y.createContext(null);function Lp(){return y.useContext(Dp)!=null}function R2(){return Lp()||jt(!1),y.useContext(Dp).location}function I2(t){y.useContext(Mp).static||y.useLayoutEffect(t)}function Vt(){let{isDataRoute:t}=y.useContext(Cs);return t?F$():N$()}function N$(){Lp()||jt(!1);let t=y.useContext(Lx),{basename:e,future:n,navigator:r}=y.useContext(Mp),{matches:i}=y.useContext(Cs),{pathname:a}=R2(),s=JSON.stringify(x$(i,n.v7_relativeSplatPath)),o=y.useRef(!1);return I2(()=>{o.current=!0}),y.useCallback(function(l,d){if(d===void 0&&(d={}),!o.current)return;if(typeof l=="number"){r.go(l);return}let f=w$(l,JSON.parse(s),a,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:es([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,s,a,t])}function Bu(){let{matches:t}=y.useContext(Cs),e=t[t.length-1];return e?e.params:{}}function P$(t,e){return _$(t,e)}function _$(t,e,n,r){Lp()||jt(!1);let{navigator:i}=y.useContext(Mp),{matches:a}=y.useContext(Cs),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let l=R2(),d;if(e){var f;let b=typeof e=="string"?uc(e):e;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||jt(!1),d=b}else d=l;let h=d.pathname||"/",p=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=r$(t,{pathname:p}),m=M$(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:es([c,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:es([c,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,n,r);return e&&m?y.createElement(Dp.Provider,{value:{location:Vl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:na.Pop}},m):m}function O$(){let t=U$(),e=C$(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:i},n):null,a)}const A$=y.createElement(O$,null);class R$ extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?y.createElement(Cs.Provider,{value:this.props.routeContext},y.createElement(A2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function I$(t){let{routeContext:e,match:n,children:r}=t,i=y.useContext(Lx);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(Cs.Provider,{value:e},r)}function M$(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||jt(!1),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=d),f.route.id){let{loaderData:h,errors:p}=n,g=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){c=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((d,f,h)=>{let p,g=!1,m=null,b=null;n&&(p=o&&f.route.id?o[f.route.id]:void 0,m=f.route.errorElement||A$,c&&(l<0&&h===0?(B$("route-fallback",!1),g=!0,b=null):l===h&&(g=!0,b=f.route.hydrateFallbackElement||null)));let v=e.concat(s.slice(0,h+1)),x=()=>{let S;return p?S=m:g?S=b:f.route.Component?S=y.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=d,y.createElement(I$,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?y.createElement(R$,{location:n.location,revalidation:n.revalidation,component:m,error:p,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var M2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(M2||{}),Kf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Kf||{});function D$(t){let e=y.useContext(Lx);return e||jt(!1),e}function L$(t){let e=y.useContext(j$);return e||jt(!1),e}function $$(t){let e=y.useContext(Cs);return e||jt(!1),e}function D2(t){let e=$$(),n=e.matches[e.matches.length-1];return n.route.id||jt(!1),n.route.id}function U$(){var t;let e=y.useContext(A2),n=L$(Kf.UseRouteError),r=D2(Kf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function F$(){let{router:t}=D$(M2.UseNavigateStable),e=D2(Kf.UseNavigateStable),n=y.useRef(!1);return I2(()=>{n.current=!0}),y.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Vl({fromRouteId:e},a)))},[t,e])}const sk={};function B$(t,e,n){!e&&!sk[t]&&(sk[t]=!0)}function z$(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function rt(t){jt(!1)}function q$(t){let{basename:e="/",children:n=null,location:r,navigationType:i=na.Pop,navigator:a,static:s=!1,future:o}=t;Lp()&&jt(!1);let c=e.replace(/^\/*/,"/"),l=y.useMemo(()=>({basename:c,navigator:a,static:s,future:Vl({v7_relativeSplatPath:!1},o)}),[c,o,a,s]);typeof r=="string"&&(r=uc(r));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:g="default"}=r,m=y.useMemo(()=>{let b=_2(d,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:p,key:g},navigationType:i}},[c,d,f,h,p,g,i]);return m==null?null:y.createElement(Mp.Provider,{value:l},y.createElement(Dp.Provider,{children:n,value:m}))}function V$(t){let{children:e,location:n}=t;return P$(Sy(e),n)}new Promise(()=>{});function Sy(t,e){e===void 0&&(e=[]);let n=[];return y.Children.forEach(t,(r,i)=>{if(!y.isValidElement(r))return;let a=[...e,i];if(r.type===y.Fragment){n.push.apply(n,Sy(r.props.children,a));return}r.type!==rt&&jt(!1),!r.props.index||!r.props.children||jt(!1);let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Sy(r.props.children,a)),n.push(s)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const W$="6";try{window.__reactRouterVersion=W$}catch{}const H$="startTransition",ok=zD[H$];function G$(t){let{basename:e,children:n,future:r,window:i}=t,a=y.useRef();a.current==null&&(a.current=e$({window:i,v5Compat:!0}));let s=a.current,[o,c]=y.useState({action:s.action,location:s.location}),{v7_startTransition:l}=r||{},d=y.useCallback(f=>{l&&ok?ok(()=>c(f)):c(f)},[c,l]);return y.useLayoutEffect(()=>s.listen(d),[s,d]),y.useEffect(()=>z$(r),[r]),y.createElement(q$,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s,future:r})}var ck;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ck||(ck={}));var lk;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(lk||(lk={}));var K$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const J$=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Y$=(t,e)=>{const n=y.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,children:o,...c},l)=>y.createElement("svg",{ref:l,...K$,width:i,height:i,stroke:r,strokeWidth:s?Number(a)*24/Number(i):a,className:`lucide lucide-${J$(t)}`,...c},[...e.map(([d,f])=>y.createElement(d,f)),...(Array.isArray(o)?o:[o])||[]]));return n.displayName=`${t}`,n};var se=Y$;const Jf=se("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),X$=se("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),L2=se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),eo=se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Q$=se("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),ky=se("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),Xt=se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Fr=se("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Z$=se("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),e4=se("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),uk=se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),$x=se("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Ty=se("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),$e=se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),dk=se("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),t4=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),qe=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),n4=se("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Ux=se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),r4=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),i4=se("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),Wl=se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Fx=se("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Bx=se("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),a4=se("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),fk=se("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),zx=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),$2=se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),s4=se("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Qt=se("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),U2=se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),af=se("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),o4=se("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),c4=se("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),l4=se("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),F2=se("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),qx=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),sf=se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),u4=se("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),d4=se("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Yf=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),f4=se("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Hl=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ts=se("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),h4=se("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Oo=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),B2=se("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),Cy=se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),p4=se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),m4=se("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Bs=se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Gn=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),yn=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Br=se("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),g4=se("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ni=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),z2=se("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var eP,tP;const v4=((tP=(eP=import.meta)==null?void 0:eP.env)==null?void 0:tP.VITE_API_BASE_URL)||window.__API_BASE_URL__||"",Da=`${v4}/api/auth`;class y4{constructor(){this.token=localStorage.getItem("token")}setToken(e){this.token=e,localStorage.setItem("token",e)}removeToken(){this.token=null,localStorage.removeItem("token")}getToken(){return this.token||localStorage.getItem("token")}isAuthenticated(){return!!this.getToken()}async makeAuthenticatedRequest(e,n={}){const r=this.getToken();if(!r)throw new Error("No authentication token found");const i={headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`,...n.headers}},a=await fetch(e,{...i,...n});if(a.status===401)throw this.removeToken(),new Error("Authentication failed");return a}async login(e,n){try{console.log("Attempting login to:",`${Da}/login`),console.log("Login data:",{email:e,password:"***"});const r=await fetch(`${Da}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:n})});console.log("Response status:",r.status),console.log("Response headers:",r.headers);let i;try{i=await r.json()}catch{throw new Error(`Invalid server response (${r.status}).`)}if(console.log("Response data:",i),i===void 0)throw console.error("Data is undefined immediately after parsing"),new Error("Server returned undefined response");if(i===null)throw console.error("Data is null immediately after parsing"),new Error("Server returned null response");if(!r.ok)throw new Error(i.message||"Login failed");if(i==null)throw console.error("Data is undefined/null at final check"),new Error("Server returned invalid response");if(i.success&&i.data.token)return this.setToken(i.data.token),{success:!0,user:i.data.user,token:i.data.token};throw new Error("Invalid response from server")}catch(r){throw console.error("Login error:",r),console.error("Error details:",{name:r.name,message:r.message,stack:r.stack}),r}}async register(e,n,r){try{const i=await fetch(`${Da}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:n,password:r})});let a;try{a=await i.json()}catch{throw new Error(`Invalid server response (${i.status}).`)}if(a===void 0)throw console.error("Data is undefined immediately after parsing"),new Error("Server returned undefined response");if(a===null)throw console.error("Data is null immediately after parsing"),new Error("Server returned null response");if(!i.ok)throw new Error(a.message||"Registration failed");if(a==null)throw console.error("Data is undefined/null at final check"),new Error("Server returned invalid response");if(a.success){if(a.data.verificationRequired)return{success:!0,message:a.message,verificationRequired:!0,user:a.data.user};if(a.data.token)return this.setToken(a.data.token),{success:!0,user:a.data.user,token:a.data.token}}throw new Error(a.message||"Invalid response from server")}catch(i){throw console.error("Registration error:",i),i}}async getProfile(){try{const e=await this.makeAuthenticatedRequest(`${Da}/profile`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch profile");return n.data.user}catch(e){throw console.error("Profile fetch error:",e),e}}async updateProfile(e){try{const n=await this.makeAuthenticatedRequest(`${Da}/profile`,{method:"PUT",body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Profile update failed");return r.data.user}catch(n){throw console.error("Profile update error:",n),n}}async logout(){try{this.getToken()&&await this.makeAuthenticatedRequest(`${Da}/logout`,{method:"POST"})}catch(e){console.error("Logout error:",e)}finally{this.removeToken()}}async onboardSolver(e){try{const n=await this.makeAuthenticatedRequest(`${Da}/admin/onboard-solver`,{method:"POST",body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to onboard solver");return r}catch(n){throw console.error("Solver onboarding error:",n),n}}}const Xe=new y4,b4=({email:t,onVerificationSuccess:e,onResendVerification:n})=>{const[r,i]=y.useState(""),[a,s]=y.useState(!1),[o,c]=y.useState(!1),[l,d]=y.useState(""),[f,h]=y.useState(""),p=async m=>{if(m.preventDefault(),!r.trim()){d("Please enter verification code");return}s(!0),d("");try{const v=await(await fetch("http://localhost:5000/api/auth/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,verificationCode:r.trim()})})).json();if(v===void 0){console.error("Data is undefined immediately after parsing"),d("Server returned undefined response");return}if(v===null){console.error("Data is null immediately after parsing"),d("Server returned null response");return}v.success?(h("Email verified successfully!"),setTimeout(()=>{e(v.data)},1500)):d(v.message||"Verification failed")}catch{d("Network error. Please try again.")}finally{s(!1)}},g=async()=>{c(!0),d("");try{const b=await(await fetch("http://localhost:5000/api/auth/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})})).json();if(b===void 0){console.error("Data is undefined immediately after parsing"),d("Server returned undefined response");return}if(b===null){console.error("Data is null immediately after parsing"),d("Server returned null response");return}b.success?h("Verification email sent successfully!"):d(b.message||"Failed to resend verification email")}catch{d("Network error. Please try again.")}finally{c(!1)}};return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:u.jsx($2,{className:"w-8 h-8 text-blue-600"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verify Your Email"}),u.jsx("p",{className:"text-gray-600",children:"We've sent a verification code to"}),u.jsx("p",{className:"font-semibold text-blue-600",children:t})]}),u.jsxs("form",{onSubmit:p,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"verificationCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter Verification Code"}),u.jsx("input",{type:"text",id:"verificationCode",value:r,onChange:m=>i(m.target.value),placeholder:"Enter 6-digit code",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-lg font-mono tracking-widest",maxLength:"6",required:!0})]}),l&&u.jsxs("div",{className:"flex items-center space-x-2 text-red-600 bg-red-50 p-3 rounded-lg",children:[u.jsx(Jf,{className:"w-5 h-5"}),u.jsx("span",{className:"text-sm",children:l})]}),f&&u.jsxs("div",{className:"flex items-center space-x-2 text-green-600 bg-green-50 p-3 rounded-lg",children:[u.jsx($e,{className:"w-5 h-5"}),u.jsx("span",{className:"text-sm",children:f})]}),u.jsx("button",{type:"submit",disabled:a||!r.trim(),className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:a?u.jsxs(u.Fragment,{children:[u.jsx(sf,{className:"w-4 h-4 animate-spin"}),u.jsx("span",{children:"Verifying..."})]}):u.jsxs(u.Fragment,{children:[u.jsx($e,{className:"w-4 h-4"}),u.jsx("span",{children:"Verify Email"})]})})]}),u.jsxs("div",{className:"mt-6 text-center",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Didn't receive the code?"}),u.jsx("button",{onClick:g,disabled:o,className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center justify-center space-x-1 mx-auto disabled:opacity-50",children:o?u.jsxs(u.Fragment,{children:[u.jsx(sf,{className:"w-4 h-4 animate-spin"}),u.jsx("span",{children:"Sending..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(sf,{className:"w-4 h-4"}),u.jsx("span",{children:"Resend Code"})]})})]}),u.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[u.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Important:"}),u.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[u.jsx("li",{children:" Check your spam folder if you don't see the email"}),u.jsx("li",{children:" The code expires in 10 minutes"}),u.jsx("li",{children:" Only verified emails can log in"})]})]})]})})},x4=()=>{const[t,e]=y.useState(!1),[n,r]=y.useState(""),[i,a]=y.useState(""),[s,o]=y.useState(!1),[c,l]=y.useState(""),[d,f]=y.useState(!1),[h,p]=y.useState(""),[g,m]=y.useState(!1),[b,v]=y.useState(""),x=Vt();y.useEffect(()=>{Xe.isAuthenticated()&&x("/dashboard")},[x]);const S=async E=>{E.preventDefault(),o(!0),l("");try{(await Xe.login(n,i)).success&&x("/dashboard")}catch(j){l(j.message||"Login failed. Please try again.")}finally{o(!1)}},T=async E=>{E.preventDefault(),o(!0),l("");try{const j=await Xe.register(h,n,i);j.success&&(j.verificationRequired?(v(n),m(!0)):x("/dashboard"))}catch(j){l(j.message||"Registration failed. Please try again.")}finally{o(!1)}},w=E=>{d?T(E):S(E)},k=E=>{localStorage.setItem("token",E.token),localStorage.setItem("user",JSON.stringify(E.user)),x("/dashboard")},C=()=>{};return g?u.jsx(b4,{email:b,onVerificationSuccess:k,onResendVerification:C}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600 flex items-center justify-center p-4 relative overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-0 opacity-10",children:[u.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full blur-xl"}),u.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-white rounded-full blur-xl"}),u.jsx("div",{className:"absolute top-1/2 left-1/4 w-24 h-24 bg-white rounded-full blur-lg"})]}),u.jsx("div",{className:"absolute right-8 top-1/2 transform -translate-y-1/2 w-80 h-96 bg-white bg-opacity-20 backdrop-blur-sm rounded-lg shadow-lg"}),u.jsx("div",{className:"absolute left-8 bottom-8 w-48 h-32 bg-green-400 bg-opacity-60 rounded-lg backdrop-blur-sm"}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md relative z-10",children:[u.jsx("button",{className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(Ni,{size:24})}),u.jsxs("div",{className:"mb-8",children:[u.jsxs("h1",{className:"text-3xl font-bold text-black",children:[d?"Create":"Get"," ",u.jsx("span",{className:"text-blue-500",children:"Started"})]}),u.jsx("p",{className:"text-gray-500 text-sm mt-1",children:d?"Create a new account":"Sign in to your account"})]}),c&&u.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:u.jsx("p",{className:"text-red-600 text-sm",children:c})}),u.jsxs("form",{onSubmit:w,className:"space-y-6",children:[d&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Full Name"}),u.jsx("input",{type:"text",value:h,onChange:E=>p(E.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your full name",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Email"}),u.jsx("input",{type:"email",value:n,onChange:E=>r(E.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your email",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:t?"text":"password",value:i,onChange:E=>a(E.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all pr-12",placeholder:"Enter your password",required:!0,minLength:6}),u.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:t?u.jsx(n4,{size:20}):u.jsx(Ux,{size:20})})]}),u.jsx("div",{className:"text-right mt-2",children:u.jsx("a",{href:"#",className:"text-blue-500 text-sm hover:text-blue-600 transition-colors",children:"Forgot Password ?"})})]}),u.jsxs("div",{className:"flex gap-4 mt-8",children:[u.jsx("button",{type:"submit",disabled:s,className:"flex-1 bg-blue-500 text-white py-3 rounded-lg font-medium hover:bg-blue-600 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Loading...":d?"SIGN UP":"LOGIN"}),u.jsx("button",{type:"button",onClick:()=>{f(!d),l(""),r(""),a(""),p("")},className:"flex-1 bg-white text-blue-500 py-3 rounded-lg font-medium border-2 border-blue-500 hover:bg-blue-50 transition-colors",children:d?"LOGIN":"SIGN UP"})]}),u.jsxs("div",{className:"flex items-center my-6",children:[u.jsx("div",{className:"flex-1 border-t border-gray-200"}),u.jsx("span",{className:"px-4 text-gray-400 text-sm",children:"other ways to sign in"}),u.jsx("div",{className:"flex-1 border-t border-gray-200"})]}),u.jsxs("button",{type:"button",className:"w-full flex items-center justify-center gap-3 py-3 px-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors shadow-sm",children:[u.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),u.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),u.jsx("span",{className:"text-gray-700 font-medium",children:"Sign Up with Google"})]}),u.jsx("div",{className:"text-center mt-6",children:u.jsx("a",{href:"#",className:"text-blue-500 text-sm hover:text-blue-600 transition-colors",children:"Need help with signing in?"})})]})]})]})};function q2(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=q2(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ne(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=q2(t))&&(r&&(r+=" "),r+=e);return r}var w4=Array.isArray,Tn=w4,S4=typeof ad=="object"&&ad&&ad.Object===Object&&ad,V2=S4,k4=V2,T4=typeof self=="object"&&self&&self.Object===Object&&self,C4=k4||T4||Function("return this")(),ei=C4,E4=ei,j4=E4.Symbol,zu=j4,hk=zu,W2=Object.prototype,N4=W2.hasOwnProperty,P4=W2.toString,Ic=hk?hk.toStringTag:void 0;function _4(t){var e=N4.call(t,Ic),n=t[Ic];try{t[Ic]=void 0;var r=!0}catch{}var i=P4.call(t);return r&&(e?t[Ic]=n:delete t[Ic]),i}var O4=_4,A4=Object.prototype,R4=A4.toString;function I4(t){return R4.call(t)}var M4=I4,pk=zu,D4=O4,L4=M4,$4="[object Null]",U4="[object Undefined]",mk=pk?pk.toStringTag:void 0;function F4(t){return t==null?t===void 0?U4:$4:mk&&mk in Object(t)?D4(t):L4(t)}var Mi=F4;function B4(t){return t!=null&&typeof t=="object"}var Di=B4,z4=Mi,q4=Di,V4="[object Symbol]";function W4(t){return typeof t=="symbol"||q4(t)&&z4(t)==V4}var dc=W4,H4=Tn,G4=dc,K4=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J4=/^\w*$/;function Y4(t,e){if(H4(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||G4(t)?!0:J4.test(t)||!K4.test(t)||e!=null&&t in Object(e)}var Vx=Y4;function X4(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ja=X4;const fc=Ue(ja);var Q4=Mi,Z4=ja,e6="[object AsyncFunction]",t6="[object Function]",n6="[object GeneratorFunction]",r6="[object Proxy]";function i6(t){if(!Z4(t))return!1;var e=Q4(t);return e==t6||e==n6||e==e6||e==r6}var Wx=i6;const me=Ue(Wx);var a6=ei,s6=a6["__core-js_shared__"],o6=s6,Tg=o6,gk=function(){var t=/[^.]+$/.exec(Tg&&Tg.keys&&Tg.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function c6(t){return!!gk&&gk in t}var l6=c6,u6=Function.prototype,d6=u6.toString;function f6(t){if(t!=null){try{return d6.call(t)}catch{}try{return t+""}catch{}}return""}var H2=f6,h6=Wx,p6=l6,m6=ja,g6=H2,v6=/[\\^$.*+?()[\]{}|]/g,y6=/^\[object .+?Constructor\]$/,b6=Function.prototype,x6=Object.prototype,w6=b6.toString,S6=x6.hasOwnProperty,k6=RegExp("^"+w6.call(S6).replace(v6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function T6(t){if(!m6(t)||p6(t))return!1;var e=h6(t)?k6:y6;return e.test(g6(t))}var C6=T6;function E6(t,e){return t==null?void 0:t[e]}var j6=E6,N6=C6,P6=j6;function _6(t,e){var n=P6(t,e);return N6(n)?n:void 0}var Es=_6,O6=Es,A6=O6(Object,"create"),$p=A6,vk=$p;function R6(){this.__data__=vk?vk(null):{},this.size=0}var I6=R6;function M6(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var D6=M6,L6=$p,$6="__lodash_hash_undefined__",U6=Object.prototype,F6=U6.hasOwnProperty;function B6(t){var e=this.__data__;if(L6){var n=e[t];return n===$6?void 0:n}return F6.call(e,t)?e[t]:void 0}var z6=B6,q6=$p,V6=Object.prototype,W6=V6.hasOwnProperty;function H6(t){var e=this.__data__;return q6?e[t]!==void 0:W6.call(e,t)}var G6=H6,K6=$p,J6="__lodash_hash_undefined__";function Y6(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=K6&&e===void 0?J6:e,this}var X6=Y6,Q6=I6,Z6=D6,eU=z6,tU=G6,nU=X6;function hc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}hc.prototype.clear=Q6;hc.prototype.delete=Z6;hc.prototype.get=eU;hc.prototype.has=tU;hc.prototype.set=nU;var rU=hc;function iU(){this.__data__=[],this.size=0}var aU=iU;function sU(t,e){return t===e||t!==t&&e!==e}var Hx=sU,oU=Hx;function cU(t,e){for(var n=t.length;n--;)if(oU(t[n][0],e))return n;return-1}var Up=cU,lU=Up,uU=Array.prototype,dU=uU.splice;function fU(t){var e=this.__data__,n=lU(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():dU.call(e,n,1),--this.size,!0}var hU=fU,pU=Up;function mU(t){var e=this.__data__,n=pU(e,t);return n<0?void 0:e[n][1]}var gU=mU,vU=Up;function yU(t){return vU(this.__data__,t)>-1}var bU=yU,xU=Up;function wU(t,e){var n=this.__data__,r=xU(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var SU=wU,kU=aU,TU=hU,CU=gU,EU=bU,jU=SU;function pc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}pc.prototype.clear=kU;pc.prototype.delete=TU;pc.prototype.get=CU;pc.prototype.has=EU;pc.prototype.set=jU;var Fp=pc,NU=Es,PU=ei,_U=NU(PU,"Map"),Gx=_U,yk=rU,OU=Fp,AU=Gx;function RU(){this.size=0,this.__data__={hash:new yk,map:new(AU||OU),string:new yk}}var IU=RU;function MU(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var DU=MU,LU=DU;function $U(t,e){var n=t.__data__;return LU(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Bp=$U,UU=Bp;function FU(t){var e=UU(this,t).delete(t);return this.size-=e?1:0,e}var BU=FU,zU=Bp;function qU(t){return zU(this,t).get(t)}var VU=qU,WU=Bp;function HU(t){return WU(this,t).has(t)}var GU=HU,KU=Bp;function JU(t,e){var n=KU(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var YU=JU,XU=IU,QU=BU,ZU=VU,eF=GU,tF=YU;function mc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}mc.prototype.clear=XU;mc.prototype.delete=QU;mc.prototype.get=ZU;mc.prototype.has=eF;mc.prototype.set=tF;var Kx=mc,G2=Kx,nF="Expected a function";function Jx(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(nF);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(Jx.Cache||G2),n}Jx.Cache=G2;var K2=Jx;const rF=Ue(K2);var iF=K2,aF=500;function sF(t){var e=iF(t,function(r){return n.size===aF&&n.clear(),r}),n=e.cache;return e}var oF=sF,cF=oF,lF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,uF=/\\(\\)?/g,dF=cF(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(lF,function(n,r,i,a){e.push(i?a.replace(uF,"$1"):r||n)}),e}),fF=dF;function hF(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Yx=hF,bk=zu,pF=Yx,mF=Tn,gF=dc,vF=1/0,xk=bk?bk.prototype:void 0,wk=xk?xk.toString:void 0;function J2(t){if(typeof t=="string")return t;if(mF(t))return pF(t,J2)+"";if(gF(t))return wk?wk.call(t):"";var e=t+"";return e=="0"&&1/t==-vF?"-0":e}var yF=J2,bF=yF;function xF(t){return t==null?"":bF(t)}var Y2=xF,wF=Tn,SF=Vx,kF=fF,TF=Y2;function CF(t,e){return wF(t)?t:SF(t,e)?[t]:kF(TF(t))}var X2=CF,EF=dc,jF=1/0;function NF(t){if(typeof t=="string"||EF(t))return t;var e=t+"";return e=="0"&&1/t==-jF?"-0":e}var zp=NF,PF=X2,_F=zp;function OF(t,e){e=PF(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[_F(e[n++])];return n&&n==r?t:void 0}var Xx=OF,AF=Xx;function RF(t,e,n){var r=t==null?void 0:AF(t,e);return r===void 0?n:r}var Q2=RF;const Xn=Ue(Q2);function IF(t){return t==null}var MF=IF;const ve=Ue(MF);var DF=Mi,LF=Tn,$F=Di,UF="[object String]";function FF(t){return typeof t=="string"||!LF(t)&&$F(t)&&DF(t)==UF}var BF=FF;const ds=Ue(BF);var Z2={exports:{}},Re={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qx=Symbol.for("react.element"),Zx=Symbol.for("react.portal"),qp=Symbol.for("react.fragment"),Vp=Symbol.for("react.strict_mode"),Wp=Symbol.for("react.profiler"),Hp=Symbol.for("react.provider"),Gp=Symbol.for("react.context"),zF=Symbol.for("react.server_context"),Kp=Symbol.for("react.forward_ref"),Jp=Symbol.for("react.suspense"),Yp=Symbol.for("react.suspense_list"),Xp=Symbol.for("react.memo"),Qp=Symbol.for("react.lazy"),qF=Symbol.for("react.offscreen"),eO;eO=Symbol.for("react.module.reference");function nr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Qx:switch(t=t.type,t){case qp:case Wp:case Vp:case Jp:case Yp:return t;default:switch(t=t&&t.$$typeof,t){case zF:case Gp:case Kp:case Qp:case Xp:case Hp:return t;default:return e}}case Zx:return e}}}Re.ContextConsumer=Gp;Re.ContextProvider=Hp;Re.Element=Qx;Re.ForwardRef=Kp;Re.Fragment=qp;Re.Lazy=Qp;Re.Memo=Xp;Re.Portal=Zx;Re.Profiler=Wp;Re.StrictMode=Vp;Re.Suspense=Jp;Re.SuspenseList=Yp;Re.isAsyncMode=function(){return!1};Re.isConcurrentMode=function(){return!1};Re.isContextConsumer=function(t){return nr(t)===Gp};Re.isContextProvider=function(t){return nr(t)===Hp};Re.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qx};Re.isForwardRef=function(t){return nr(t)===Kp};Re.isFragment=function(t){return nr(t)===qp};Re.isLazy=function(t){return nr(t)===Qp};Re.isMemo=function(t){return nr(t)===Xp};Re.isPortal=function(t){return nr(t)===Zx};Re.isProfiler=function(t){return nr(t)===Wp};Re.isStrictMode=function(t){return nr(t)===Vp};Re.isSuspense=function(t){return nr(t)===Jp};Re.isSuspenseList=function(t){return nr(t)===Yp};Re.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===qp||t===Wp||t===Vp||t===Jp||t===Yp||t===qF||typeof t=="object"&&t!==null&&(t.$$typeof===Qp||t.$$typeof===Xp||t.$$typeof===Hp||t.$$typeof===Gp||t.$$typeof===Kp||t.$$typeof===eO||t.getModuleId!==void 0)};Re.typeOf=nr;Z2.exports=Re;var VF=Z2.exports,WF=Mi,HF=Di,GF="[object Number]";function KF(t){return typeof t=="number"||HF(t)&&WF(t)==GF}var tO=KF;const JF=Ue(tO);var YF=tO;function XF(t){return YF(t)&&t!=+t}var QF=XF;const qu=Ue(QF);var br=function(e){return e===0?0:e>0?1:-1},Ga=function(e){return ds(e)&&e.indexOf("%")===e.length-1},te=function(e){return JF(e)&&!qu(e)},ZF=function(e){return ve(e)},Et=function(e){return te(e)||ds(e)},eB=0,Vu=function(e){var n=++eB;return"".concat(e||"").concat(n)},fs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!te(e)&&!ds(e))return r;var a;if(Ga(e)){var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return qu(a)&&(a=r),i&&a>n&&(a=n),a},Qi=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},tB=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},pr=function(e,n){return te(e)&&te(n)?function(r){return e+r*(n-e)}:function(){return n}};function Xf(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Xn(r,e))===n})}var nB=function(e,n){return te(e)&&te(n)?e-n:ds(e)&&ds(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function ho(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function Ey(t){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(t)}var rB=["viewBox","children"],iB=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Sk=["points","pathLength"],Cg={svg:rB,polygon:Sk,polyline:Sk},ew=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Qf=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),!fc(r))return null;var i={};return Object.keys(r).forEach(function(a){ew.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},aB=function(e,n,r){return function(i){return e(n,r,i),null}},Zf=function(e,n,r){if(!fc(e)||Ey(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];ew.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=aB(s,n,r))}),i},sB=["children"],oB=["children"];function kk(t,e){if(t==null)return{};var n=cB(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cB(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function jy(t){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(t)}var Tk={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},xi=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},Ck=null,Eg=null,tw=function t(e){if(e===Ck&&Array.isArray(Eg))return Eg;var n=[];return y.Children.forEach(e,function(r){ve(r)||(VF.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),Eg=n,Ck=e,n};function Qn(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return xi(i)}):r=[xi(e)],tw(t).forEach(function(i){var a=Xn(i,"type.displayName")||Xn(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function Nn(t,e){var n=Qn(t,e);return n&&n[0]}var Ek=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!te(r)||r<=0||!te(i)||i<=0)},lB=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],uB=function(e){return e&&e.type&&ds(e.type)&&lB.indexOf(e.type)>=0},dB=function(e){return e&&jy(e)==="object"&&"clipDot"in e},fB=function(e,n,r,i){var a,s=(a=Cg==null?void 0:Cg[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!me(e)&&(i&&s.includes(n)||iB.includes(n))||r&&ew.includes(n)},Ce=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(y.isValidElement(e)&&(i=e.props),!fc(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;fB((o=i)===null||o===void 0?void 0:o[s],s,n,r)&&(a[s]=i[s])}),a},Ny=function t(e,n){if(e===n)return!0;var r=y.Children.count(e);if(r!==y.Children.count(n))return!1;if(r===0)return!0;if(r===1)return jk(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!jk(a,s))return!1}return!0},jk=function(e,n){if(ve(e)&&ve(n))return!0;if(!ve(e)&&!ve(n)){var r=e.props||{},i=r.children,a=kk(r,sB),s=n.props||{},o=s.children,c=kk(s,oB);return i&&o?ho(a,c)&&Ny(i,o):!i&&!o?ho(a,c):!1}return!1},Nk=function(e,n){var r=[],i={};return tw(e).forEach(function(a,s){if(uB(a))r.push(a);else if(a){var o=xi(a.type),c=n[o]||{},l=c.handler,d=c.once;if(l&&(!d||!i[o])){var f=l(a,o,s);r.push(f),i[o]=!0}}}),r},hB=function(e){var n=e&&e.type;return n&&Tk[n]?Tk[n]:null},pB=function(e,n){return tw(n).indexOf(e)},mB=["children","width","height","viewBox","className","style","title","desc"];function Py(){return Py=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Py.apply(this,arguments)}function gB(t,e){if(t==null)return{};var n=vB(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vB(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function _y(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,s=t.style,o=t.title,c=t.desc,l=gB(t,mB),d=i||{width:n,height:r,x:0,y:0},f=Ne("recharts-surface",a);return M.createElement("svg",Py({},Ce(l,!0,"svg"),{className:f,width:n,height:r,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),M.createElement("title",null,o),M.createElement("desc",null,c),e)}var yB=["children","className"];function Oy(){return Oy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oy.apply(this,arguments)}function bB(t,e){if(t==null)return{};var n=xB(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xB(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var ht=M.forwardRef(function(t,e){var n=t.children,r=t.className,i=bB(t,yB),a=Ne("recharts-layer",r);return M.createElement("g",Oy({className:a},Ce(i,!0),{ref:e}),n)}),wi=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function wB(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}var SB=wB,kB=SB;function TB(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:kB(t,e,n)}var CB=TB,EB="\\ud800-\\udfff",jB="\\u0300-\\u036f",NB="\\ufe20-\\ufe2f",PB="\\u20d0-\\u20ff",_B=jB+NB+PB,OB="\\ufe0e\\ufe0f",AB="\\u200d",RB=RegExp("["+AB+EB+_B+OB+"]");function IB(t){return RB.test(t)}var nO=IB;function MB(t){return t.split("")}var DB=MB,rO="\\ud800-\\udfff",LB="\\u0300-\\u036f",$B="\\ufe20-\\ufe2f",UB="\\u20d0-\\u20ff",FB=LB+$B+UB,BB="\\ufe0e\\ufe0f",zB="["+rO+"]",Ay="["+FB+"]",Ry="\\ud83c[\\udffb-\\udfff]",qB="(?:"+Ay+"|"+Ry+")",iO="[^"+rO+"]",aO="(?:\\ud83c[\\udde6-\\uddff]){2}",sO="[\\ud800-\\udbff][\\udc00-\\udfff]",VB="\\u200d",oO=qB+"?",cO="["+BB+"]?",WB="(?:"+VB+"(?:"+[iO,aO,sO].join("|")+")"+cO+oO+")*",HB=cO+oO+WB,GB="(?:"+[iO+Ay+"?",Ay,aO,sO,zB].join("|")+")",KB=RegExp(Ry+"(?="+Ry+")|"+GB+HB,"g");function JB(t){return t.match(KB)||[]}var YB=JB,XB=DB,QB=nO,ZB=YB;function e8(t){return QB(t)?ZB(t):XB(t)}var t8=e8,n8=CB,r8=nO,i8=t8,a8=Y2;function s8(t){return function(e){e=a8(e);var n=r8(e)?i8(e):void 0,r=n?n[0]:e.charAt(0),i=n?n8(n,1).join(""):e.slice(1);return r[t]()+i}}var o8=s8,c8=o8,l8=c8("toUpperCase"),u8=l8;const Zp=Ue(u8);function Be(t){return function(){return t}}const lO=Math.cos,eh=Math.sin,_r=Math.sqrt,th=Math.PI,em=2*th,Iy=Math.PI,My=2*Iy,Fa=1e-6,d8=My-Fa;function uO(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function f8(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return uO;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class h8{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?uO:f8(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,l=i-n,d=s-e,f=o-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Fa)if(!(Math.abs(f*c-l*d)>Fa)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-s,g=i-o,m=c*c+l*l,b=p*p+g*g,v=Math.sqrt(m),x=Math.sqrt(h),S=a*Math.tan((Iy-Math.acos((m+h-b)/(2*v*x)))/2),T=S/x,w=S/v;Math.abs(T-1)>Fa&&this._append`L${e+T*d},${n+T*f}`,this._append`A${a},${a},0,0,${+(f*p>d*g)},${this._x1=e+w*c},${this._y1=n+w*l}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),l=e+o,d=n+c,f=1^s,h=s?i-a:a-i;this._x1===null?this._append`M${l},${d}`:(Math.abs(this._x1-l)>Fa||Math.abs(this._y1-d)>Fa)&&this._append`L${l},${d}`,r&&(h<0&&(h=h%My+My),h>d8?this._append`A${r},${r},0,1,${f},${e-o},${n-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=d}`:h>Fa&&this._append`A${r},${r},0,${+(h>=Iy)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function nw(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new h8(e)}function rw(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function dO(t){this._context=t}dO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function tm(t){return new dO(t)}function fO(t){return t[0]}function hO(t){return t[1]}function pO(t,e){var n=Be(!0),r=null,i=tm,a=null,s=nw(o);t=typeof t=="function"?t:t===void 0?fO:Be(t),e=typeof e=="function"?e:e===void 0?hO:Be(e);function o(c){var l,d=(c=rw(c)).length,f,h=!1,p;for(r==null&&(a=i(p=s())),l=0;l<=d;++l)!(l<d&&n(f=c[l],l,c))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(f,l,c),+e(f,l,c));if(p)return a=null,p+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:Be(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:Be(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Be(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function kd(t,e,n){var r=null,i=Be(!0),a=null,s=tm,o=null,c=nw(l);t=typeof t=="function"?t:t===void 0?fO:Be(+t),e=typeof e=="function"?e:Be(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?hO:Be(+n);function l(f){var h,p,g,m=(f=rw(f)).length,b,v=!1,x,S=new Array(m),T=new Array(m);for(a==null&&(o=s(x=c())),h=0;h<=m;++h){if(!(h<m&&i(b=f[h],h,f))===v)if(v=!v)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=p;--g)o.point(S[g],T[g]);o.lineEnd(),o.areaEnd()}v&&(S[h]=+t(b,h,f),T[h]=+e(b,h,f),o.point(r?+r(b,h,f):S[h],n?+n(b,h,f):T[h]))}if(x)return o=null,x+""||null}function d(){return pO().defined(i).curve(s).context(a)}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:Be(+f),r=null,l):t},l.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Be(+f),l):t},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Be(+f),l):r},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:Be(+f),n=null,l):e},l.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Be(+f),l):e},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Be(+f),l):n},l.lineX0=l.lineY0=function(){return d().x(t).y(e)},l.lineY1=function(){return d().x(t).y(n)},l.lineX1=function(){return d().x(r).y(e)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Be(!!f),l):i},l.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),l):s},l.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),l):a},l}class mO{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function p8(t){return new mO(t,!0)}function m8(t){return new mO(t,!1)}const iw={draw(t,e){const n=_r(e/th);t.moveTo(n,0),t.arc(0,0,n,0,em)}},g8={draw(t,e){const n=_r(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},gO=_r(1/3),v8=gO*2,y8={draw(t,e){const n=_r(e/v8),r=n*gO;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},b8={draw(t,e){const n=_r(e),r=-n/2;t.rect(r,r,n,n)}},x8=.8908130915292852,vO=eh(th/10)/eh(7*th/10),w8=eh(em/10)*vO,S8=-lO(em/10)*vO,k8={draw(t,e){const n=_r(e*x8),r=w8*n,i=S8*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=em*a/5,o=lO(s),c=eh(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},jg=_r(3),T8={draw(t,e){const n=-_r(e/(jg*3));t.moveTo(0,n*2),t.lineTo(-jg*n,-n),t.lineTo(jg*n,-n),t.closePath()}},$n=-.5,Un=_r(3)/2,Dy=1/_r(12),C8=(Dy/2+1)*3,E8={draw(t,e){const n=_r(e/C8),r=n/2,i=n*Dy,a=r,s=n*Dy+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo($n*r-Un*i,Un*r+$n*i),t.lineTo($n*a-Un*s,Un*a+$n*s),t.lineTo($n*o-Un*c,Un*o+$n*c),t.lineTo($n*r+Un*i,$n*i-Un*r),t.lineTo($n*a+Un*s,$n*s-Un*a),t.lineTo($n*o+Un*c,$n*c-Un*o),t.closePath()}};function j8(t,e){let n=null,r=nw(i);t=typeof t=="function"?t:Be(t||iw),e=typeof e=="function"?e:Be(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Be(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Be(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function nh(){}function rh(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function yO(t){this._context=t}yO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:rh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:rh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function N8(t){return new yO(t)}function bO(t){this._context=t}bO.prototype={areaStart:nh,areaEnd:nh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:rh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function P8(t){return new bO(t)}function xO(t){this._context=t}xO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:rh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _8(t){return new xO(t)}function wO(t){this._context=t}wO.prototype={areaStart:nh,areaEnd:nh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function O8(t){return new wO(t)}function Pk(t){return t<0?-1:1}function _k(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(Pk(a)+Pk(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function Ok(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ng(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function ih(t){this._context=t}ih.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ng(this,this._t0,Ok(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ng(this,Ok(this,n=_k(this,t,e)),n);break;default:Ng(this,this._t0,n=_k(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function SO(t){this._context=new kO(t)}(SO.prototype=Object.create(ih.prototype)).point=function(t,e){ih.prototype.point.call(this,e,t)};function kO(t){this._context=t}kO.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function A8(t){return new ih(t)}function R8(t){return new SO(t)}function TO(t){this._context=t}TO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Ak(t),i=Ak(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Ak(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function I8(t){return new TO(t)}function nm(t,e){this._context=t,this._t=e}nm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function M8(t){return new nm(t,.5)}function D8(t){return new nm(t,0)}function L8(t){return new nm(t,1)}function Ao(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ly(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function $8(t,e){return t[e]}function U8(t){const e=[];return e.key=t,e}function F8(){var t=Be([]),e=Ly,n=Ao,r=$8;function i(a){var s=Array.from(t.apply(this,arguments),U8),o,c=s.length,l=-1,d;for(const f of a)for(o=0,++l;o<c;++o)(s[o][l]=[0,+r(f,s[o].key,l,a)]).data=f;for(o=0,d=rw(e(s));o<c;++o)s[d[o]].index=o;return n(s,d),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Be(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Be(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?Ly:typeof a=="function"?a:Be(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Ao,i):n},i}function B8(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Ao(t,e)}}function z8(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}Ao(t,e)}}function q8(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,l=0;o<s;++o){for(var d=t[e[o]],f=d[r][1]||0,h=d[r-1][1]||0,p=(f-h)/2,g=0;g<o;++g){var m=t[e[g]],b=m[r][1]||0,v=m[r-1][1]||0;p+=b-v}c+=f,l+=p*f}i[r-1][1]+=i[r-1][0]=n,c&&(n-=l/c)}i[r-1][1]+=i[r-1][0]=n,Ao(t,e)}}function Gl(t){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gl(t)}var V8=["type","size","sizeType"];function $y(){return $y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$y.apply(this,arguments)}function Rk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ik(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rk(Object(n),!0).forEach(function(r){W8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W8(t,e,n){return e=H8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H8(t){var e=G8(t,"string");return Gl(e)=="symbol"?e:e+""}function G8(t,e){if(Gl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K8(t,e){if(t==null)return{};var n=J8(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function J8(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var CO={symbolCircle:iw,symbolCross:g8,symbolDiamond:y8,symbolSquare:b8,symbolStar:k8,symbolTriangle:T8,symbolWye:E8},Y8=Math.PI/180,X8=function(e){var n="symbol".concat(Zp(e));return CO[n]||iw},Q8=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Y8;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Z8=function(e,n){CO["symbol".concat(Zp(e))]=n},aw=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,c=K8(e,V8),l=Ik(Ik({},c),{},{type:r,size:a,sizeType:o}),d=function(){var b=X8(r),v=j8().type(b).size(Q8(a,o,r));return v()},f=l.className,h=l.cx,p=l.cy,g=Ce(l,!0);return h===+h&&p===+p&&a===+a?M.createElement("path",$y({},g,{className:Ne("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};aw.registerSymbol=Z8;function Ro(t){"@babel/helpers - typeof";return Ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ro(t)}function Uy(){return Uy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uy.apply(this,arguments)}function Mk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function e7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mk(Object(n),!0).forEach(function(r){Kl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t7(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jO(r.key),r)}}function n7(t,e,n){return e&&Dk(t.prototype,e),n&&Dk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function r7(t,e,n){return e=ah(e),i7(t,EO()?Reflect.construct(e,n||[],ah(t).constructor):e.apply(t,n))}function i7(t,e){if(e&&(Ro(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a7(t)}function a7(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EO=function(){return!!t})()}function ah(t){return ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ah(t)}function s7(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fy(t,e)}function Fy(t,e){return Fy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Fy(t,e)}function Kl(t,e,n){return e=jO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jO(t){var e=o7(t,"string");return Ro(e)=="symbol"?e:e+""}function o7(t,e){if(Ro(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ro(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fn=32,sw=function(t){function e(){return t7(this,e),r7(this,e,arguments)}return s7(e,t),n7(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=Fn/2,s=Fn/6,o=Fn/3,c=r.inactive?i:r.color;if(r.type==="plainline")return M.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Fn,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return M.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Fn,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return M.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Fn/8,"h").concat(Fn,"v").concat(Fn*3/4,"h").concat(-Fn,"z"),className:"recharts-legend-icon"});if(M.isValidElement(r.legendIcon)){var l=e7({},r);return delete l.legendIcon,M.cloneElement(r.legendIcon,l)}return M.createElement(aw,{fill:c,cx:a,cy:a,size:Fn,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,c=i.formatter,l=i.inactiveColor,d={x:0,y:0,width:Fn,height:Fn},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,g){var m=p.formatter||c,b=Ne(Kl(Kl({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",p.inactive));if(p.type==="none")return null;var v=me(p.value)?null:p.value;wi(!me(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=p.inactive?l:p.color;return M.createElement("li",Uy({className:b,style:f,key:"legend-item-".concat(g)},Zf(r.props,p,g)),M.createElement(_y,{width:s,height:s,viewBox:d,style:h},r.renderIcon(p)),M.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},m?m(v,p,g):v))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return M.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(y.PureComponent);Kl(sw,"displayName","Legend");Kl(sw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var c7=Fp;function l7(){this.__data__=new c7,this.size=0}var u7=l7;function d7(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var f7=d7;function h7(t){return this.__data__.get(t)}var p7=h7;function m7(t){return this.__data__.has(t)}var g7=m7,v7=Fp,y7=Gx,b7=Kx,x7=200;function w7(t,e){var n=this.__data__;if(n instanceof v7){var r=n.__data__;if(!y7||r.length<x7-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new b7(r)}return n.set(t,e),this.size=n.size,this}var S7=w7,k7=Fp,T7=u7,C7=f7,E7=p7,j7=g7,N7=S7;function gc(t){var e=this.__data__=new k7(t);this.size=e.size}gc.prototype.clear=T7;gc.prototype.delete=C7;gc.prototype.get=E7;gc.prototype.has=j7;gc.prototype.set=N7;var NO=gc,P7="__lodash_hash_undefined__";function _7(t){return this.__data__.set(t,P7),this}var O7=_7;function A7(t){return this.__data__.has(t)}var R7=A7,I7=Kx,M7=O7,D7=R7;function sh(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new I7;++e<n;)this.add(t[e])}sh.prototype.add=sh.prototype.push=M7;sh.prototype.has=D7;var PO=sh;function L7(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var _O=L7;function $7(t,e){return t.has(e)}var OO=$7,U7=PO,F7=_O,B7=OO,z7=1,q7=2;function V7(t,e,n,r,i,a){var s=n&z7,o=t.length,c=e.length;if(o!=c&&!(s&&c>o))return!1;var l=a.get(t),d=a.get(e);if(l&&d)return l==e&&d==t;var f=-1,h=!0,p=n&q7?new U7:void 0;for(a.set(t,e),a.set(e,t);++f<o;){var g=t[f],m=e[f];if(r)var b=s?r(m,g,f,e,t,a):r(g,m,f,t,e,a);if(b!==void 0){if(b)continue;h=!1;break}if(p){if(!F7(e,function(v,x){if(!B7(p,x)&&(g===v||i(g,v,n,r,a)))return p.push(x)})){h=!1;break}}else if(!(g===m||i(g,m,n,r,a))){h=!1;break}}return a.delete(t),a.delete(e),h}var AO=V7,W7=ei,H7=W7.Uint8Array,G7=H7;function K7(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var J7=K7;function Y7(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var ow=Y7,Lk=zu,$k=G7,X7=Hx,Q7=AO,Z7=J7,e9=ow,t9=1,n9=2,r9="[object Boolean]",i9="[object Date]",a9="[object Error]",s9="[object Map]",o9="[object Number]",c9="[object RegExp]",l9="[object Set]",u9="[object String]",d9="[object Symbol]",f9="[object ArrayBuffer]",h9="[object DataView]",Uk=Lk?Lk.prototype:void 0,Pg=Uk?Uk.valueOf:void 0;function p9(t,e,n,r,i,a,s){switch(n){case h9:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case f9:return!(t.byteLength!=e.byteLength||!a(new $k(t),new $k(e)));case r9:case i9:case o9:return X7(+t,+e);case a9:return t.name==e.name&&t.message==e.message;case c9:case u9:return t==e+"";case s9:var o=Z7;case l9:var c=r&t9;if(o||(o=e9),t.size!=e.size&&!c)return!1;var l=s.get(t);if(l)return l==e;r|=n9,s.set(t,e);var d=Q7(o(t),o(e),r,i,a,s);return s.delete(t),d;case d9:if(Pg)return Pg.call(t)==Pg.call(e)}return!1}var m9=p9;function g9(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var RO=g9,v9=RO,y9=Tn;function b9(t,e,n){var r=e(t);return y9(t)?r:v9(r,n(t))}var x9=b9;function w9(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}var S9=w9;function k9(){return[]}var T9=k9,C9=S9,E9=T9,j9=Object.prototype,N9=j9.propertyIsEnumerable,Fk=Object.getOwnPropertySymbols,P9=Fk?function(t){return t==null?[]:(t=Object(t),C9(Fk(t),function(e){return N9.call(t,e)}))}:E9,_9=P9;function O9(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var A9=O9,R9=Mi,I9=Di,M9="[object Arguments]";function D9(t){return I9(t)&&R9(t)==M9}var L9=D9,Bk=L9,$9=Di,IO=Object.prototype,U9=IO.hasOwnProperty,F9=IO.propertyIsEnumerable,B9=Bk(function(){return arguments}())?Bk:function(t){return $9(t)&&U9.call(t,"callee")&&!F9.call(t,"callee")},cw=B9,oh={exports:{}};function z9(){return!1}var q9=z9;oh.exports;(function(t,e){var n=ei,r=q9,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?n.Buffer:void 0,c=o?o.isBuffer:void 0,l=c||r;t.exports=l})(oh,oh.exports);var MO=oh.exports,V9=9007199254740991,W9=/^(?:0|[1-9]\d*)$/;function H9(t,e){var n=typeof t;return e=e??V9,!!e&&(n=="number"||n!="symbol"&&W9.test(t))&&t>-1&&t%1==0&&t<e}var lw=H9,G9=9007199254740991;function K9(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=G9}var uw=K9,J9=Mi,Y9=uw,X9=Di,Q9="[object Arguments]",Z9="[object Array]",ez="[object Boolean]",tz="[object Date]",nz="[object Error]",rz="[object Function]",iz="[object Map]",az="[object Number]",sz="[object Object]",oz="[object RegExp]",cz="[object Set]",lz="[object String]",uz="[object WeakMap]",dz="[object ArrayBuffer]",fz="[object DataView]",hz="[object Float32Array]",pz="[object Float64Array]",mz="[object Int8Array]",gz="[object Int16Array]",vz="[object Int32Array]",yz="[object Uint8Array]",bz="[object Uint8ClampedArray]",xz="[object Uint16Array]",wz="[object Uint32Array]",Ge={};Ge[hz]=Ge[pz]=Ge[mz]=Ge[gz]=Ge[vz]=Ge[yz]=Ge[bz]=Ge[xz]=Ge[wz]=!0;Ge[Q9]=Ge[Z9]=Ge[dz]=Ge[ez]=Ge[fz]=Ge[tz]=Ge[nz]=Ge[rz]=Ge[iz]=Ge[az]=Ge[sz]=Ge[oz]=Ge[cz]=Ge[lz]=Ge[uz]=!1;function Sz(t){return X9(t)&&Y9(t.length)&&!!Ge[J9(t)]}var kz=Sz;function Tz(t){return function(e){return t(e)}}var DO=Tz,ch={exports:{}};ch.exports;(function(t,e){var n=V2,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o})(ch,ch.exports);var Cz=ch.exports,Ez=kz,jz=DO,zk=Cz,qk=zk&&zk.isTypedArray,Nz=qk?jz(qk):Ez,LO=Nz,Pz=A9,_z=cw,Oz=Tn,Az=MO,Rz=lw,Iz=LO,Mz=Object.prototype,Dz=Mz.hasOwnProperty;function Lz(t,e){var n=Oz(t),r=!n&&_z(t),i=!n&&!r&&Az(t),a=!n&&!r&&!i&&Iz(t),s=n||r||i||a,o=s?Pz(t.length,String):[],c=o.length;for(var l in t)(e||Dz.call(t,l))&&!(s&&(l=="length"||i&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Rz(l,c)))&&o.push(l);return o}var $z=Lz,Uz=Object.prototype;function Fz(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Uz;return t===n}var Bz=Fz;function zz(t,e){return function(n){return t(e(n))}}var $O=zz,qz=$O,Vz=qz(Object.keys,Object),Wz=Vz,Hz=Bz,Gz=Wz,Kz=Object.prototype,Jz=Kz.hasOwnProperty;function Yz(t){if(!Hz(t))return Gz(t);var e=[];for(var n in Object(t))Jz.call(t,n)&&n!="constructor"&&e.push(n);return e}var Xz=Yz,Qz=Wx,Zz=uw;function eq(t){return t!=null&&Zz(t.length)&&!Qz(t)}var Wu=eq,tq=$z,nq=Xz,rq=Wu;function iq(t){return rq(t)?tq(t):nq(t)}var rm=iq,aq=x9,sq=_9,oq=rm;function cq(t){return aq(t,oq,sq)}var lq=cq,Vk=lq,uq=1,dq=Object.prototype,fq=dq.hasOwnProperty;function hq(t,e,n,r,i,a){var s=n&uq,o=Vk(t),c=o.length,l=Vk(e),d=l.length;if(c!=d&&!s)return!1;for(var f=c;f--;){var h=o[f];if(!(s?h in e:fq.call(e,h)))return!1}var p=a.get(t),g=a.get(e);if(p&&g)return p==e&&g==t;var m=!0;a.set(t,e),a.set(e,t);for(var b=s;++f<c;){h=o[f];var v=t[h],x=e[h];if(r)var S=s?r(x,v,h,e,t,a):r(v,x,h,t,e,a);if(!(S===void 0?v===x||i(v,x,n,r,a):S)){m=!1;break}b||(b=h=="constructor")}if(m&&!b){var T=t.constructor,w=e.constructor;T!=w&&"constructor"in t&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof w=="function"&&w instanceof w)&&(m=!1)}return a.delete(t),a.delete(e),m}var pq=hq,mq=Es,gq=ei,vq=mq(gq,"DataView"),yq=vq,bq=Es,xq=ei,wq=bq(xq,"Promise"),Sq=wq,kq=Es,Tq=ei,Cq=kq(Tq,"Set"),UO=Cq,Eq=Es,jq=ei,Nq=Eq(jq,"WeakMap"),Pq=Nq,By=yq,zy=Gx,qy=Sq,Vy=UO,Wy=Pq,FO=Mi,vc=H2,Wk="[object Map]",_q="[object Object]",Hk="[object Promise]",Gk="[object Set]",Kk="[object WeakMap]",Jk="[object DataView]",Oq=vc(By),Aq=vc(zy),Rq=vc(qy),Iq=vc(Vy),Mq=vc(Wy),Ba=FO;(By&&Ba(new By(new ArrayBuffer(1)))!=Jk||zy&&Ba(new zy)!=Wk||qy&&Ba(qy.resolve())!=Hk||Vy&&Ba(new Vy)!=Gk||Wy&&Ba(new Wy)!=Kk)&&(Ba=function(t){var e=FO(t),n=e==_q?t.constructor:void 0,r=n?vc(n):"";if(r)switch(r){case Oq:return Jk;case Aq:return Wk;case Rq:return Hk;case Iq:return Gk;case Mq:return Kk}return e});var Dq=Ba,_g=NO,Lq=AO,$q=m9,Uq=pq,Yk=Dq,Xk=Tn,Qk=MO,Fq=LO,Bq=1,Zk="[object Arguments]",eT="[object Array]",Td="[object Object]",zq=Object.prototype,tT=zq.hasOwnProperty;function qq(t,e,n,r,i,a){var s=Xk(t),o=Xk(e),c=s?eT:Yk(t),l=o?eT:Yk(e);c=c==Zk?Td:c,l=l==Zk?Td:l;var d=c==Td,f=l==Td,h=c==l;if(h&&Qk(t)){if(!Qk(e))return!1;s=!0,d=!1}if(h&&!d)return a||(a=new _g),s||Fq(t)?Lq(t,e,n,r,i,a):$q(t,e,c,n,r,i,a);if(!(n&Bq)){var p=d&&tT.call(t,"__wrapped__"),g=f&&tT.call(e,"__wrapped__");if(p||g){var m=p?t.value():t,b=g?e.value():e;return a||(a=new _g),i(m,b,n,r,a)}}return h?(a||(a=new _g),Uq(t,e,n,r,i,a)):!1}var Vq=qq,Wq=Vq,nT=Di;function BO(t,e,n,r,i){return t===e?!0:t==null||e==null||!nT(t)&&!nT(e)?t!==t&&e!==e:Wq(t,e,n,r,BO,i)}var dw=BO,Hq=NO,Gq=dw,Kq=1,Jq=2;function Yq(t,e,n,r){var i=n.length,a=i,s=!r;if(t==null)return!a;for(t=Object(t);i--;){var o=n[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){o=n[i];var c=o[0],l=t[c],d=o[1];if(s&&o[2]){if(l===void 0&&!(c in t))return!1}else{var f=new Hq;if(r)var h=r(l,d,c,t,e,f);if(!(h===void 0?Gq(d,l,Kq|Jq,r,f):h))return!1}}return!0}var Xq=Yq,Qq=ja;function Zq(t){return t===t&&!Qq(t)}var zO=Zq,eV=zO,tV=rm;function nV(t){for(var e=tV(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,eV(i)]}return e}var rV=nV;function iV(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var qO=iV,aV=Xq,sV=rV,oV=qO;function cV(t){var e=sV(t);return e.length==1&&e[0][2]?oV(e[0][0],e[0][1]):function(n){return n===t||aV(n,t,e)}}var lV=cV;function uV(t,e){return t!=null&&e in Object(t)}var dV=uV,fV=X2,hV=cw,pV=Tn,mV=lw,gV=uw,vV=zp;function yV(t,e,n){e=fV(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var s=vV(e[r]);if(!(a=t!=null&&n(t,s)))break;t=t[s]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&gV(i)&&mV(s,i)&&(pV(t)||hV(t)))}var bV=yV,xV=dV,wV=bV;function SV(t,e){return t!=null&&wV(t,e,xV)}var kV=SV,TV=dw,CV=Q2,EV=kV,jV=Vx,NV=zO,PV=qO,_V=zp,OV=1,AV=2;function RV(t,e){return jV(t)&&NV(e)?PV(_V(t),e):function(n){var r=CV(n,t);return r===void 0&&r===e?EV(n,t):TV(e,r,OV|AV)}}var IV=RV;function MV(t){return t}var yc=MV;function DV(t){return function(e){return e==null?void 0:e[t]}}var LV=DV,$V=Xx;function UV(t){return function(e){return $V(e,t)}}var FV=UV,BV=LV,zV=FV,qV=Vx,VV=zp;function WV(t){return qV(t)?BV(VV(t)):zV(t)}var HV=WV,GV=lV,KV=IV,JV=yc,YV=Tn,XV=HV;function QV(t){return typeof t=="function"?t:t==null?JV:typeof t=="object"?YV(t)?KV(t[0],t[1]):GV(t):XV(t)}var Na=QV;function ZV(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var VO=ZV;function eW(t){return t!==t}var tW=eW;function nW(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var rW=nW,iW=VO,aW=tW,sW=rW;function oW(t,e,n){return e===e?sW(t,e,n):iW(t,aW,n)}var cW=oW,lW=cW;function uW(t,e){var n=t==null?0:t.length;return!!n&&lW(t,e,0)>-1}var dW=uW;function fW(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var hW=fW;function pW(){}var mW=pW,Og=UO,gW=mW,vW=ow,yW=1/0,bW=Og&&1/vW(new Og([,-0]))[1]==yW?function(t){return new Og(t)}:gW,xW=bW,wW=PO,SW=dW,kW=hW,TW=OO,CW=xW,EW=ow,jW=200;function NW(t,e,n){var r=-1,i=SW,a=t.length,s=!0,o=[],c=o;if(n)s=!1,i=kW;else if(a>=jW){var l=e?null:CW(t);if(l)return EW(l);s=!1,i=TW,c=new wW}else c=e?[]:o;e:for(;++r<a;){var d=t[r],f=e?e(d):d;if(d=n||d!==0?d:0,s&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;e&&c.push(f),o.push(d)}else i(c,f,n)||(c!==o&&c.push(f),o.push(d))}return o}var PW=NW,_W=Na,OW=PW;function AW(t,e){return t&&t.length?OW(t,_W(e)):[]}var RW=AW;const rT=Ue(RW);function WO(t,e,n){return e===!0?rT(t,n):me(e)?rT(t,e):t}function Io(t){"@babel/helpers - typeof";return Io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Io(t)}var IW=["ref"];function iT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ii(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iT(Object(n),!0).forEach(function(r){im(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MW(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GO(r.key),r)}}function DW(t,e,n){return e&&aT(t.prototype,e),n&&aT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function LW(t,e,n){return e=lh(e),$W(t,HO()?Reflect.construct(e,n||[],lh(t).constructor):e.apply(t,n))}function $W(t,e){if(e&&(Io(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UW(t)}function UW(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HO=function(){return!!t})()}function lh(t){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lh(t)}function FW(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hy(t,e)}function Hy(t,e){return Hy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Hy(t,e)}function im(t,e,n){return e=GO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GO(t){var e=BW(t,"string");return Io(e)=="symbol"?e:e+""}function BW(t,e){if(Io(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Io(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zW(t,e){if(t==null)return{};var n=qW(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qW(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function VW(t){return t.value}function WW(t,e){if(M.isValidElement(t))return M.cloneElement(t,e);if(typeof t=="function")return M.createElement(t,e);e.ref;var n=zW(e,IW);return M.createElement(sw,n)}var sT=1,po=function(t){function e(){var n;MW(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=LW(this,e,[].concat(i)),im(n,"lastBoundingBox",{width:-1,height:-1}),n}return FW(e,t),DW(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>sT||Math.abs(i.height-this.lastBoundingBox.height)>sT)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ii({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,c=i.margin,l=i.chartWidth,d=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();f={left:((l||0)-p.width)/2}}else f=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var g=this.getBBoxSnapshot();h={top:((d||0)-g.height)/2}}else h=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ii(ii({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,c=i.wrapperStyle,l=i.payloadUniqBy,d=i.payload,f=ii(ii({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return M.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){r.wrapperNode=p}},WW(a,ii(ii({},this.props),{},{payload:WO(d,l,VW)})))}}],[{key:"getWithHeight",value:function(r,i){var a=ii(ii({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&te(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(y.PureComponent);im(po,"displayName","Legend");im(po,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var oT=zu,HW=cw,GW=Tn,cT=oT?oT.isConcatSpreadable:void 0;function KW(t){return GW(t)||HW(t)||!!(cT&&t&&t[cT])}var JW=KW,YW=RO,XW=JW;function KO(t,e,n,r,i){var a=-1,s=t.length;for(n||(n=XW),i||(i=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?KO(o,e-1,n,r,i):YW(i,o):r||(i[i.length]=o)}return i}var JO=KO;function QW(t){return function(e,n,r){for(var i=-1,a=Object(e),s=r(e),o=s.length;o--;){var c=s[t?o:++i];if(n(a[c],c,a)===!1)break}return e}}var ZW=QW,eH=ZW,tH=eH(),nH=tH,rH=nH,iH=rm;function aH(t,e){return t&&rH(t,e,iH)}var YO=aH,sH=Wu;function oH(t,e){return function(n,r){if(n==null)return n;if(!sH(n))return t(n,r);for(var i=n.length,a=e?i:-1,s=Object(n);(e?a--:++a<i)&&r(s[a],a,s)!==!1;);return n}}var cH=oH,lH=YO,uH=cH,dH=uH(lH),fw=dH,fH=fw,hH=Wu;function pH(t,e){var n=-1,r=hH(t)?Array(t.length):[];return fH(t,function(i,a,s){r[++n]=e(i,a,s)}),r}var XO=pH;function mH(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var gH=mH,lT=dc;function vH(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,a=lT(t),s=e!==void 0,o=e===null,c=e===e,l=lT(e);if(!o&&!l&&!a&&t>e||a&&s&&c&&!o&&!l||r&&s&&c||!n&&c||!i)return 1;if(!r&&!a&&!l&&t<e||l&&n&&i&&!r&&!a||o&&n&&i||!s&&i||!c)return-1}return 0}var yH=vH,bH=yH;function xH(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,s=i.length,o=n.length;++r<s;){var c=bH(i[r],a[r]);if(c){if(r>=o)return c;var l=n[r];return c*(l=="desc"?-1:1)}}return t.index-e.index}var wH=xH,Ag=Yx,SH=Xx,kH=Na,TH=XO,CH=gH,EH=DO,jH=wH,NH=yc,PH=Tn;function _H(t,e,n){e.length?e=Ag(e,function(a){return PH(a)?function(s){return SH(s,a.length===1?a[0]:a)}:a}):e=[NH];var r=-1;e=Ag(e,EH(kH));var i=TH(t,function(a,s,o){var c=Ag(e,function(l){return l(a)});return{criteria:c,index:++r,value:a}});return CH(i,function(a,s){return jH(a,s,n)})}var OH=_H;function AH(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var RH=AH,IH=RH,uT=Math.max;function MH(t,e,n){return e=uT(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=uT(r.length-e,0),s=Array(a);++i<a;)s[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(s),IH(t,this,o)}}var DH=MH;function LH(t){return function(){return t}}var $H=LH,UH=Es,FH=function(){try{var t=UH(Object,"defineProperty");return t({},"",{}),t}catch{}}(),QO=FH,BH=$H,dT=QO,zH=yc,qH=dT?function(t,e){return dT(t,"toString",{configurable:!0,enumerable:!1,value:BH(e),writable:!0})}:zH,VH=qH,WH=800,HH=16,GH=Date.now;function KH(t){var e=0,n=0;return function(){var r=GH(),i=HH-(r-n);if(n=r,i>0){if(++e>=WH)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var JH=KH,YH=VH,XH=JH,QH=XH(YH),ZH=QH,eG=yc,tG=DH,nG=ZH;function rG(t,e){return nG(tG(t,e,eG),t+"")}var iG=rG,aG=Hx,sG=Wu,oG=lw,cG=ja;function lG(t,e,n){if(!cG(n))return!1;var r=typeof e;return(r=="number"?sG(n)&&oG(e,n.length):r=="string"&&e in n)?aG(n[e],t):!1}var am=lG,uG=JO,dG=OH,fG=iG,fT=am,hG=fG(function(t,e){if(t==null)return[];var n=e.length;return n>1&&fT(t,e[0],e[1])?e=[]:n>2&&fT(e[0],e[1],e[2])&&(e=[e[0]]),dG(t,uG(e,1),[])}),pG=hG;const hw=Ue(pG);function Jl(t){"@babel/helpers - typeof";return Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jl(t)}function Gy(){return Gy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gy.apply(this,arguments)}function mG(t,e){return bG(t)||yG(t,e)||vG(t,e)||gG()}function gG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vG(t,e){if(t){if(typeof t=="string")return hT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hT(t,e)}}function hT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yG(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){l=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function bG(t){if(Array.isArray(t))return t}function pT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pT(Object(n),!0).forEach(function(r){xG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xG(t,e,n){return e=wG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wG(t){var e=SG(t,"string");return Jl(e)=="symbol"?e:e+""}function SG(t,e){if(Jl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kG(t){return Array.isArray(t)&&Et(t[0])&&Et(t[1])?t.join(" ~ "):t}var TG=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,c=e.labelStyle,l=c===void 0?{}:c,d=e.payload,f=e.formatter,h=e.itemSorter,p=e.wrapperClassName,g=e.labelClassName,m=e.label,b=e.labelFormatter,v=e.accessibilityLayer,x=v===void 0?!1:v,S=function(){if(d&&d.length){var _={padding:0,margin:0},A=(h?hw(d,h):d).map(function(R,L){if(R.type==="none")return null;var U=Rg({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},o),q=R.formatter||f||kG,D=R.value,$=R.name,I=D,V=$;if(q&&I!=null&&V!=null){var J=q(D,$,R,L,d);if(Array.isArray(J)){var ne=mG(J,2);I=ne[0],V=ne[1]}else I=J}return M.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:U},Et(V)?M.createElement("span",{className:"recharts-tooltip-item-name"},V):null,Et(V)?M.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,M.createElement("span",{className:"recharts-tooltip-item-value"},I),M.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return M.createElement("ul",{className:"recharts-tooltip-item-list",style:_},A)}return null},T=Rg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),w=Rg({margin:0},l),k=!ve(m),C=k?m:"",E=Ne("recharts-default-tooltip",p),j=Ne("recharts-tooltip-label",g);k&&b&&d!==void 0&&d!==null&&(C=b(m,d));var P=x?{role:"status","aria-live":"assertive"}:{};return M.createElement("div",Gy({className:E,style:T},P),M.createElement("p",{className:j,style:w},M.isValidElement(C)?C:"".concat(C)),S())};function Yl(t){"@babel/helpers - typeof";return Yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yl(t)}function Cd(t,e,n){return e=CG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CG(t){var e=EG(t,"string");return Yl(e)=="symbol"?e:e+""}function EG(t,e){if(Yl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mc="recharts-tooltip-wrapper",jG={visibility:"hidden"};function NG(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Ne(Mc,Cd(Cd(Cd(Cd({},"".concat(Mc,"-right"),te(n)&&e&&te(e.x)&&n>=e.x),"".concat(Mc,"-left"),te(n)&&e&&te(e.x)&&n<e.x),"".concat(Mc,"-bottom"),te(r)&&e&&te(e.y)&&r>=e.y),"".concat(Mc,"-top"),te(r)&&e&&te(e.y)&&r<e.y))}function mT(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,c=t.viewBox,l=t.viewBoxDimension;if(a&&te(a[r]))return a[r];var d=n[r]-o-i,f=n[r]+i;if(e[r])return s[r]?d:f;if(s[r]){var h=d,p=c[r];return h<p?Math.max(f,c[r]):Math.max(d,c[r])}var g=f+o,m=c[r]+l;return g>m?Math.max(d,c[r]):Math.max(f,c[r])}function PG(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function _G(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,c=t.viewBox,l,d,f;return s.height>0&&s.width>0&&n?(d=mT({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),f=mT({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),l=PG({translateX:d,translateY:f,useTranslate3d:o})):l=jG,{cssProperties:l,cssClasses:NG({translateX:d,translateY:f,coordinate:n})}}function Mo(t){"@babel/helpers - typeof";return Mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mo(t)}function gT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gT(Object(n),!0).forEach(function(r){Jy(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eA(r.key),r)}}function AG(t,e,n){return e&&yT(t.prototype,e),n&&yT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function RG(t,e,n){return e=uh(e),IG(t,ZO()?Reflect.construct(e,n||[],uh(t).constructor):e.apply(t,n))}function IG(t,e){if(e&&(Mo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MG(t)}function MG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZO=function(){return!!t})()}function uh(t){return uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uh(t)}function DG(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ky(t,e)}function Ky(t,e){return Ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ky(t,e)}function Jy(t,e,n){return e=eA(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eA(t){var e=LG(t,"string");return Mo(e)=="symbol"?e:e+""}function LG(t,e){if(Mo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Mo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bT=1,$G=function(t){function e(){var n;OG(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=RG(this,e,[].concat(i)),Jy(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Jy(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,c,l,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(l=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&l!==void 0?l:0}})}}),n}return DG(e,t),AG(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>bT||Math.abs(r.height-this.state.lastBoundingBox.height)>bT)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,l=i.children,d=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,p=i.offset,g=i.position,m=i.reverseDirection,b=i.useTranslate3d,v=i.viewBox,x=i.wrapperStyle,S=_G({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:p,position:g,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:v}),T=S.cssClasses,w=S.cssProperties,k=vT(vT({transition:h&&a?"transform ".concat(o,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},x);return M.createElement("div",{tabIndex:-1,className:T,style:k,ref:function(E){r.wrapperNode=E}},l)}}])}(y.PureComponent),UG=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Si={isSsr:UG(),get:function(e){return Si[e]},set:function(e,n){if(typeof e=="string")Si[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){Si[i]=e[i]})}}};function Do(t){"@babel/helpers - typeof";return Do=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Do(t)}function xT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xT(Object(n),!0).forEach(function(r){pw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ST(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nA(r.key),r)}}function BG(t,e,n){return e&&ST(t.prototype,e),n&&ST(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zG(t,e,n){return e=dh(e),qG(t,tA()?Reflect.construct(e,n||[],dh(t).constructor):e.apply(t,n))}function qG(t,e){if(e&&(Do(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VG(t)}function VG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tA=function(){return!!t})()}function dh(t){return dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dh(t)}function WG(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yy(t,e)}function Yy(t,e){return Yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Yy(t,e)}function pw(t,e,n){return e=nA(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nA(t){var e=HG(t,"string");return Do(e)=="symbol"?e:e+""}function HG(t,e){if(Do(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Do(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GG(t){return t.dataKey}function KG(t,e){return M.isValidElement(t)?M.cloneElement(t,e):typeof t=="function"?M.createElement(t,e):M.createElement(TG,e)}var oi=function(t){function e(){return FG(this,e),zG(this,e,arguments)}return WG(e,t),BG(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,l=i.content,d=i.coordinate,f=i.filterNull,h=i.isAnimationActive,p=i.offset,g=i.payload,m=i.payloadUniqBy,b=i.position,v=i.reverseDirection,x=i.useTranslate3d,S=i.viewBox,T=i.wrapperStyle,w=g??[];f&&w.length&&(w=WO(g.filter(function(C){return C.value!=null&&(C.hide!==!0||r.props.includeHidden)}),m,GG));var k=w.length>0;return M.createElement($G,{allowEscapeViewBox:s,animationDuration:o,animationEasing:c,isAnimationActive:h,active:a,coordinate:d,hasPayload:k,offset:p,position:b,reverseDirection:v,useTranslate3d:x,viewBox:S,wrapperStyle:T},KG(l,wT(wT({},this.props),{},{payload:w})))}}])}(y.PureComponent);pw(oi,"displayName","Tooltip");pw(oi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Si.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var JG=ei,YG=function(){return JG.Date.now()},XG=YG,QG=/\s/;function ZG(t){for(var e=t.length;e--&&QG.test(t.charAt(e)););return e}var eK=ZG,tK=eK,nK=/^\s+/;function rK(t){return t&&t.slice(0,tK(t)+1).replace(nK,"")}var iK=rK,aK=iK,kT=ja,sK=dc,TT=0/0,oK=/^[-+]0x[0-9a-f]+$/i,cK=/^0b[01]+$/i,lK=/^0o[0-7]+$/i,uK=parseInt;function dK(t){if(typeof t=="number")return t;if(sK(t))return TT;if(kT(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=kT(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=aK(t);var n=cK.test(t);return n||lK.test(t)?uK(t.slice(2),n?2:8):oK.test(t)?TT:+t}var rA=dK,fK=ja,Ig=XG,CT=rA,hK="Expected a function",pK=Math.max,mK=Math.min;function gK(t,e,n){var r,i,a,s,o,c,l=0,d=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(hK);e=CT(e)||0,fK(n)&&(d=!!n.leading,f="maxWait"in n,a=f?pK(CT(n.maxWait)||0,e):a,h="trailing"in n?!!n.trailing:h);function p(k){var C=r,E=i;return r=i=void 0,l=k,s=t.apply(E,C),s}function g(k){return l=k,o=setTimeout(v,e),d?p(k):s}function m(k){var C=k-c,E=k-l,j=e-C;return f?mK(j,a-E):j}function b(k){var C=k-c,E=k-l;return c===void 0||C>=e||C<0||f&&E>=a}function v(){var k=Ig();if(b(k))return x(k);o=setTimeout(v,m(k))}function x(k){return o=void 0,h&&r?p(k):(r=i=void 0,s)}function S(){o!==void 0&&clearTimeout(o),l=0,r=c=i=o=void 0}function T(){return o===void 0?s:x(Ig())}function w(){var k=Ig(),C=b(k);if(r=arguments,i=this,c=k,C){if(o===void 0)return g(c);if(f)return clearTimeout(o),o=setTimeout(v,e),p(c)}return o===void 0&&(o=setTimeout(v,e)),s}return w.cancel=S,w.flush=T,w}var vK=gK,yK=vK,bK=ja,xK="Expected a function";function wK(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(xK);return bK(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),yK(t,e,{leading:r,maxWait:e,trailing:i})}var SK=wK;const iA=Ue(SK);function Xl(t){"@babel/helpers - typeof";return Xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xl(t)}function ET(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ed(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ET(Object(n),!0).forEach(function(r){kK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ET(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kK(t,e,n){return e=TK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TK(t){var e=CK(t,"string");return Xl(e)=="symbol"?e:e+""}function CK(t,e){if(Xl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EK(t,e){return _K(t)||PK(t,e)||NK(t,e)||jK()}function jK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NK(t,e){if(t){if(typeof t=="string")return jT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jT(t,e)}}function jT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PK(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){l=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function _K(t){if(Array.isArray(t))return t}var OK=y.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,s=a===void 0?"100%":a,o=t.height,c=o===void 0?"100%":o,l=t.minWidth,d=l===void 0?0:l,f=t.minHeight,h=t.maxHeight,p=t.children,g=t.debounce,m=g===void 0?0:g,b=t.id,v=t.className,x=t.onResize,S=t.style,T=S===void 0?{}:S,w=y.useRef(null),k=y.useRef();k.current=x,y.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var C=y.useState({containerWidth:i.width,containerHeight:i.height}),E=EK(C,2),j=E[0],P=E[1],N=y.useCallback(function(A,R){P(function(L){var U=Math.round(A),q=Math.round(R);return L.containerWidth===U&&L.containerHeight===q?L:{containerWidth:U,containerHeight:q}})},[]);y.useEffect(function(){var A=function($){var I,V=$[0].contentRect,J=V.width,ne=V.height;N(J,ne),(I=k.current)===null||I===void 0||I.call(k,J,ne)};m>0&&(A=iA(A,m,{trailing:!0,leading:!1}));var R=new ResizeObserver(A),L=w.current.getBoundingClientRect(),U=L.width,q=L.height;return N(U,q),R.observe(w.current),function(){R.disconnect()}},[N,m]);var _=y.useMemo(function(){var A=j.containerWidth,R=j.containerHeight;if(A<0||R<0)return null;wi(Ga(s)||Ga(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),wi(!n||n>0,"The aspect(%s) must be greater than zero.",n);var L=Ga(s)?A:s,U=Ga(c)?R:c;n&&n>0&&(L?U=L/n:U&&(L=U*n),h&&U>h&&(U=h)),wi(L>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,U,s,c,d,f,n);var q=!Array.isArray(p)&&xi(p.type).endsWith("Chart");return M.Children.map(p,function(D){return M.isValidElement(D)?y.cloneElement(D,Ed({width:L,height:U},q?{style:Ed({height:"100%",width:"100%",maxHeight:U,maxWidth:L},D.props.style)}:{})):D})},[n,p,c,h,f,d,j,s]);return M.createElement("div",{id:b?"".concat(b):void 0,className:Ne("recharts-responsive-container",v),style:Ed(Ed({},T),{},{width:s,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:w},_)}),aA=function(e){return null};aA.displayName="Cell";function Ql(t){"@babel/helpers - typeof";return Ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ql(t)}function NT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NT(Object(n),!0).forEach(function(r){AK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AK(t,e,n){return e=RK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RK(t){var e=IK(t,"string");return Ql(e)=="symbol"?e:e+""}function IK(t,e){if(Ql(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ql(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rs={widthCache:{},cacheCount:0},MK=2e3,DK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},PT="recharts_measurement_span";function LK(t){var e=Xy({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var gl=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Si.isSsr)return{width:0,height:0};var r=LK(n),i=JSON.stringify({text:e,copyStyle:r});if(Rs.widthCache[i])return Rs.widthCache[i];try{var a=document.getElementById(PT);a||(a=document.createElement("span"),a.setAttribute("id",PT),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=Xy(Xy({},DK),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),c={width:o.width,height:o.height};return Rs.widthCache[i]=c,++Rs.cacheCount>MK&&(Rs.cacheCount=0,Rs.widthCache={}),c}catch{return{width:0,height:0}}},$K=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Zl(t){"@babel/helpers - typeof";return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zl(t)}function fh(t,e){return zK(t)||BK(t,e)||FK(t,e)||UK()}function UK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FK(t,e){if(t){if(typeof t=="string")return _T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _T(t,e)}}function _T(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BK(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){l=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function zK(t){if(Array.isArray(t))return t}function qK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WK(r.key),r)}}function VK(t,e,n){return e&&OT(t.prototype,e),n&&OT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function WK(t){var e=HK(t,"string");return Zl(e)=="symbol"?e:e+""}function HK(t,e){if(Zl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,RT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,GK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,KK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,sA={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},JK=Object.keys(sA),to="NaN";function YK(t,e){return t*sA[e]}var jd=function(){function t(e,n){qK(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!GK.test(n)&&(this.num=NaN,this.unit=""),JK.includes(n)&&(this.num=YK(e,n),this.unit="px")}return VK(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=KK.exec(n))!==null&&r!==void 0?r:[],a=fh(i,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])}();function oA(t){if(t.includes(to))return to;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=AT.exec(e))!==null&&n!==void 0?n:[],i=fh(r,4),a=i[1],s=i[2],o=i[3],c=jd.parse(a??""),l=jd.parse(o??""),d=s==="*"?c.multiply(l):c.divide(l);if(d.isNaN())return to;e=e.replace(AT,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=RT.exec(e))!==null&&f!==void 0?f:[],p=fh(h,4),g=p[1],m=p[2],b=p[3],v=jd.parse(g??""),x=jd.parse(b??""),S=m==="+"?v.add(x):v.subtract(x);if(S.isNaN())return to;e=e.replace(RT,S.toString())}return e}var IT=/\(([^()]*)\)/;function XK(t){for(var e=t;e.includes("(");){var n=IT.exec(e),r=fh(n,2),i=r[1];e=e.replace(IT,oA(i))}return e}function QK(t){var e=t.replace(/\s+/g,"");return e=XK(e),e=oA(e),e}function ZK(t){try{return QK(t)}catch{return to}}function Mg(t){var e=ZK(t.slice(5,-1));return e===to?"":e}var eJ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],tJ=["dx","dy","angle","className","breakAll"];function Qy(){return Qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qy.apply(this,arguments)}function MT(t,e){if(t==null)return{};var n=nJ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nJ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function DT(t,e){return sJ(t)||aJ(t,e)||iJ(t,e)||rJ()}function rJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iJ(t,e){if(t){if(typeof t=="string")return LT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LT(t,e)}}function LT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aJ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){l=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function sJ(t){if(Array.isArray(t))return t}var cA=/[ \f\n\r\t\v\u2028\u2029]+/,lA=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];ve(n)||(r?a=n.toString().split(""):a=n.toString().split(cA));var s=a.map(function(c){return{word:c,width:gl(c,i).width}}),o=r?0:gl("",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},oJ=function(e,n,r,i,a){var s=e.maxLines,o=e.children,c=e.style,l=e.breakAll,d=te(s),f=o,h=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(function(U,q){var D=q.word,$=q.width,I=U[U.length-1];if(I&&(i==null||a||I.width+$+r<Number(i)))I.words.push(D),I.width+=$+r;else{var V={words:[D],width:$};U.push(V)}return U},[])},p=h(n),g=function(L){return L.reduce(function(U,q){return U.width>q.width?U:q})};if(!d)return p;for(var m="",b=function(L){var U=f.slice(0,L),q=lA({breakAll:l,style:c,children:U+m}).wordsWithComputedWidth,D=h(q),$=D.length>s||g(D).width>Number(i);return[$,D]},v=0,x=f.length-1,S=0,T;v<=x&&S<=f.length-1;){var w=Math.floor((v+x)/2),k=w-1,C=b(k),E=DT(C,2),j=E[0],P=E[1],N=b(w),_=DT(N,1),A=_[0];if(!j&&!A&&(v=w+1),j&&A&&(x=w-1),!j&&A){T=P;break}S++}return T||p},$T=function(e){var n=ve(e)?[]:e.toString().split(cA);return[{words:n}]},cJ=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((n||r)&&!Si.isSsr){var c,l,d=lA({breakAll:s,children:i,style:a});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,l=h}else return $T(i);return oJ({breakAll:s,children:i,maxLines:o,style:a},c,l,n,r)}return $T(i)},UT="#808080",hh=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,c=e.capHeight,l=c===void 0?"0.71em":c,d=e.scaleToFit,f=d===void 0?!1:d,h=e.textAnchor,p=h===void 0?"start":h,g=e.verticalAnchor,m=g===void 0?"end":g,b=e.fill,v=b===void 0?UT:b,x=MT(e,eJ),S=y.useMemo(function(){return cJ({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:f,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,f,x.style,x.width]),T=x.dx,w=x.dy,k=x.angle,C=x.className,E=x.breakAll,j=MT(x,tJ);if(!Et(r)||!Et(a))return null;var P=r+(te(T)?T:0),N=a+(te(w)?w:0),_;switch(m){case"start":_=Mg("calc(".concat(l,")"));break;case"middle":_=Mg("calc(".concat((S.length-1)/2," * -").concat(o," + (").concat(l," / 2))"));break;default:_=Mg("calc(".concat(S.length-1," * -").concat(o,")"));break}var A=[];if(f){var R=S[0].width,L=x.width;A.push("scale(".concat((te(L)?L/R:1)/R,")"))}return k&&A.push("rotate(".concat(k,", ").concat(P,", ").concat(N,")")),A.length&&(j.transform=A.join(" ")),M.createElement("text",Qy({},Ce(j,!0),{x:P,y:N,className:Ne("recharts-text",C),textAnchor:p,fill:v.includes("url")?UT:v}),S.map(function(U,q){var D=U.words.join(E?"":" ");return M.createElement("tspan",{x:P,dy:q===0?_:o,key:"".concat(D,"-").concat(q)},D)}))};function ha(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lJ(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mw(t){let e,n,r;t.length!==2?(e=ha,n=(o,c)=>ha(t(o),c),r=(o,c)=>t(o)-c):(e=t===ha||t===lJ?t:uJ,n=t,r=t);function i(o,c,l=0,d=o.length){if(l<d){if(e(c,c)!==0)return d;do{const f=l+d>>>1;n(o[f],c)<0?l=f+1:d=f}while(l<d)}return l}function a(o,c,l=0,d=o.length){if(l<d){if(e(c,c)!==0)return d;do{const f=l+d>>>1;n(o[f],c)<=0?l=f+1:d=f}while(l<d)}return l}function s(o,c,l=0,d=o.length){const f=i(o,c,l,d-1);return f>l&&r(o[f-1],c)>-r(o[f],c)?f-1:f}return{left:i,center:s,right:a}}function uJ(){return 0}function uA(t){return t===null?NaN:+t}function*dJ(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const fJ=mw(ha),hJ=fJ.right;mw(uA).center;const Hu=hJ;class FT extends Map{constructor(e,n=gJ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(BT(this,e))}has(e){return super.has(BT(this,e))}set(e,n){return super.set(pJ(this,e),n)}delete(e){return super.delete(mJ(this,e))}}function BT({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function pJ({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function mJ({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function gJ(t){return t!==null&&typeof t=="object"?t.valueOf():t}function vJ(t=ha){if(t===ha)return dA;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function dA(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const yJ=Math.sqrt(50),bJ=Math.sqrt(10),xJ=Math.sqrt(2);function ph(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=yJ?10:a>=bJ?5:a>=xJ?2:1;let o,c,l;return i<0?(l=Math.pow(10,-i)/s,o=Math.round(t*l),c=Math.round(e*l),o/l<t&&++o,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*s,o=Math.round(t/l),c=Math.round(e/l),o*l<t&&++o,c*l>e&&--c),c<o&&.5<=n&&n<2?ph(t,e,n*2):[o,c,l]}function Zy(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?ph(e,t,n):ph(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let l=0;l<o;++l)c[l]=(a-l)/-s;else for(let l=0;l<o;++l)c[l]=(a-l)*s;else if(s<0)for(let l=0;l<o;++l)c[l]=(i+l)/-s;else for(let l=0;l<o;++l)c[l]=(i+l)*s;return c}function e0(t,e,n){return e=+e,t=+t,n=+n,ph(t,e,n)[2]}function t0(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?e0(e,t,n):e0(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function zT(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function qT(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function fA(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?dA:vJ(i);r>n;){if(r-n>600){const c=r-n+1,l=e-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(l-c/2<0?-1:1),p=Math.max(n,Math.floor(e-l*f/c+h)),g=Math.min(r,Math.floor(e+(c-l)*f/c+h));fA(t,e,p,g,i)}const a=t[e];let s=n,o=r;for(Dc(t,n,e),i(t[r],a)>0&&Dc(t,n,r);s<o;){for(Dc(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?Dc(t,n,o):(++o,Dc(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Dc(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function wJ(t,e,n){if(t=Float64Array.from(dJ(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return qT(t);if(e>=1)return zT(t);var r,i=(r-1)*e,a=Math.floor(i),s=zT(fA(t,a).subarray(0,a+1)),o=qT(t.subarray(a+1));return s+(o-s)*(i-a)}}function SJ(t,e,n=uA){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function kJ(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function rr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Li(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const n0=Symbol("implicit");function gw(){var t=new FT,e=[],n=[],r=n0;function i(a){let s=t.get(a);if(s===void 0){if(r!==n0)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new FT;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return gw(e,n).unknown(r)},rr.apply(i,arguments),i}function eu(){var t=gw().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,l=0,d=.5;delete t.unknown;function f(){var h=e().length,p=i<r,g=p?i:r,m=p?r:i;a=(m-g)/Math.max(1,h-c+l*2),o&&(a=Math.floor(a)),g+=(m-g-a*(h-c))*d,s=a*(1-c),o&&(g=Math.round(g),s=Math.round(s));var b=kJ(h).map(function(v){return g+a*v});return n(p?b.reverse():b)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(h){return arguments.length?(o=!!h,f()):o},t.padding=function(h){return arguments.length?(c=Math.min(1,l=+h),f()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},t.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return eu(e(),[r,i]).round(o).paddingInner(c).paddingOuter(l).align(d)},rr.apply(f(),arguments)}function hA(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return hA(e())},t}function vl(){return hA(eu.apply(null,arguments).paddingInner(1))}function vw(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function pA(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Gu(){}var tu=.7,mh=1/tu,mo="\\s*([+-]?\\d+)\\s*",nu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",TJ=/^#([0-9a-f]{3,8})$/,CJ=new RegExp(`^rgb\\(${mo},${mo},${mo}\\)$`),EJ=new RegExp(`^rgb\\(${Wr},${Wr},${Wr}\\)$`),jJ=new RegExp(`^rgba\\(${mo},${mo},${mo},${nu}\\)$`),NJ=new RegExp(`^rgba\\(${Wr},${Wr},${Wr},${nu}\\)$`),PJ=new RegExp(`^hsl\\(${nu},${Wr},${Wr}\\)$`),_J=new RegExp(`^hsla\\(${nu},${Wr},${Wr},${nu}\\)$`),VT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vw(Gu,ru,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:WT,formatHex:WT,formatHex8:OJ,formatHsl:AJ,formatRgb:HT,toString:HT});function WT(){return this.rgb().formatHex()}function OJ(){return this.rgb().formatHex8()}function AJ(){return mA(this).formatHsl()}function HT(){return this.rgb().formatRgb()}function ru(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=TJ.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?GT(e):n===3?new hn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Nd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Nd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=CJ.exec(t))?new hn(e[1],e[2],e[3],1):(e=EJ.exec(t))?new hn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=jJ.exec(t))?Nd(e[1],e[2],e[3],e[4]):(e=NJ.exec(t))?Nd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=PJ.exec(t))?YT(e[1],e[2]/100,e[3]/100,1):(e=_J.exec(t))?YT(e[1],e[2]/100,e[3]/100,e[4]):VT.hasOwnProperty(t)?GT(VT[t]):t==="transparent"?new hn(NaN,NaN,NaN,0):null}function GT(t){return new hn(t>>16&255,t>>8&255,t&255,1)}function Nd(t,e,n,r){return r<=0&&(t=e=n=NaN),new hn(t,e,n,r)}function RJ(t){return t instanceof Gu||(t=ru(t)),t?(t=t.rgb(),new hn(t.r,t.g,t.b,t.opacity)):new hn}function r0(t,e,n,r){return arguments.length===1?RJ(t):new hn(t,e,n,r??1)}function hn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}vw(hn,r0,pA(Gu,{brighter(t){return t=t==null?mh:Math.pow(mh,t),new hn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?tu:Math.pow(tu,t),new hn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new hn(ns(this.r),ns(this.g),ns(this.b),gh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KT,formatHex:KT,formatHex8:IJ,formatRgb:JT,toString:JT}));function KT(){return`#${Ka(this.r)}${Ka(this.g)}${Ka(this.b)}`}function IJ(){return`#${Ka(this.r)}${Ka(this.g)}${Ka(this.b)}${Ka((isNaN(this.opacity)?1:this.opacity)*255)}`}function JT(){const t=gh(this.opacity);return`${t===1?"rgb(":"rgba("}${ns(this.r)}, ${ns(this.g)}, ${ns(this.b)}${t===1?")":`, ${t})`}`}function gh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ns(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ka(t){return t=ns(t),(t<16?"0":"")+t.toString(16)}function YT(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new mr(t,e,n,r)}function mA(t){if(t instanceof mr)return new mr(t.h,t.s,t.l,t.opacity);if(t instanceof Gu||(t=ru(t)),!t)return new mr;if(t instanceof mr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new mr(s,o,c,t.opacity)}function MJ(t,e,n,r){return arguments.length===1?mA(t):new mr(t,e,n,r??1)}function mr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}vw(mr,MJ,pA(Gu,{brighter(t){return t=t==null?mh:Math.pow(mh,t),new mr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?tu:Math.pow(tu,t),new mr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new hn(Dg(t>=240?t-240:t+120,i,r),Dg(t,i,r),Dg(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new mr(XT(this.h),Pd(this.s),Pd(this.l),gh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=gh(this.opacity);return`${t===1?"hsl(":"hsla("}${XT(this.h)}, ${Pd(this.s)*100}%, ${Pd(this.l)*100}%${t===1?")":`, ${t})`}`}}));function XT(t){return t=(t||0)%360,t<0?t+360:t}function Pd(t){return Math.max(0,Math.min(1,t||0))}function Dg(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const yw=t=>()=>t;function DJ(t,e){return function(n){return t+n*e}}function LJ(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function $J(t){return(t=+t)==1?gA:function(e,n){return n-e?LJ(e,n,t):yw(isNaN(e)?n:e)}}function gA(t,e){var n=e-t;return n?DJ(t,n):yw(isNaN(t)?e:t)}const QT=function t(e){var n=$J(e);function r(i,a){var s=n((i=r0(i)).r,(a=r0(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),l=gA(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=c(d),i.opacity=l(d),i+""}}return r.gamma=t,r}(1);function UJ(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function FJ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function BJ(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=bc(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function zJ(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function vh(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function qJ(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=bc(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var i0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lg=new RegExp(i0.source,"g");function VJ(t){return function(){return t}}function WJ(t){return function(e){return t(e)+""}}function HJ(t,e){var n=i0.lastIndex=Lg.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=i0.exec(t))&&(i=Lg.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:vh(r,i)})),n=Lg.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?WJ(c[0].x):VJ(e):(e=c.length,function(l){for(var d=0,f;d<e;++d)o[(f=c[d]).i]=f.x(l);return o.join("")})}function bc(t,e){var n=typeof e,r;return e==null||n==="boolean"?yw(e):(n==="number"?vh:n==="string"?(r=ru(e))?(e=r,QT):HJ:e instanceof ru?QT:e instanceof Date?zJ:FJ(e)?UJ:Array.isArray(e)?BJ:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?qJ:vh)(t,e)}function bw(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function GJ(t,e){e===void 0&&(e=t,t=bc);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function KJ(t){return function(){return t}}function yh(t){return+t}var ZT=[0,1];function rn(t){return t}function a0(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:KJ(isNaN(e)?NaN:.5)}function JJ(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function YJ(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=a0(i,r),a=n(s,a)):(r=a0(r,i),a=n(a,s)),function(o){return a(r(o))}}function XJ(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=a0(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=Hu(t,o,1,r)-1;return a[c](i[c](o))}}function Ku(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function sm(){var t=ZT,e=ZT,n=bc,r,i,a,s=rn,o,c,l;function d(){var h=Math.min(t.length,e.length);return s!==rn&&(s=JJ(t[0],t[h-1])),o=h>2?XJ:YJ,c=l=null,f}function f(h){return h==null||isNaN(h=+h)?a:(c||(c=o(t.map(r),e,n)))(r(s(h)))}return f.invert=function(h){return s(i((l||(l=o(e,t.map(r),vh)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,yh),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=bw,d()},f.clamp=function(h){return arguments.length?(s=h?!0:rn,d()):s!==rn},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,p){return r=h,i=p,d()}}function xw(){return sm()(rn,rn)}function QJ(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function bh(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Lo(t){return t=bh(Math.abs(t)),t?t[1]:NaN}function ZJ(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function eY(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var tY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function iu(t){if(!(e=tY.exec(t)))throw new Error("invalid format: "+t);var e;return new ww({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}iu.prototype=ww.prototype;function ww(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ww.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nY(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var vA;function rY(t,e){var n=bh(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(vA=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+bh(t,Math.max(0,e+a-1))[0]}function eC(t,e){var n=bh(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const tC={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:QJ,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>eC(t*100,e),r:eC,s:rY,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function nC(t){return t}var rC=Array.prototype.map,iC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function iY(t){var e=t.grouping===void 0||t.thousands===void 0?nC:ZJ(rC.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?nC:eY(rC.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function l(f){f=iu(f);var h=f.fill,p=f.align,g=f.sign,m=f.symbol,b=f.zero,v=f.width,x=f.comma,S=f.precision,T=f.trim,w=f.type;w==="n"?(x=!0,w="g"):tC[w]||(S===void 0&&(S=12),T=!0,w="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var k=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",C=m==="$"?r:/[%p]/.test(w)?s:"",E=tC[w],j=/[defgprs%]/.test(w);S=S===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function P(N){var _=k,A=C,R,L,U;if(w==="c")A=E(N)+A,N="";else{N=+N;var q=N<0||1/N<0;if(N=isNaN(N)?c:E(Math.abs(N),S),T&&(N=nY(N)),q&&+N==0&&g!=="+"&&(q=!1),_=(q?g==="("?g:o:g==="-"||g==="("?"":g)+_,A=(w==="s"?iC[8+vA/3]:"")+A+(q&&g==="("?")":""),j){for(R=-1,L=N.length;++R<L;)if(U=N.charCodeAt(R),48>U||U>57){A=(U===46?i+N.slice(R+1):N.slice(R))+A,N=N.slice(0,R);break}}}x&&!b&&(N=e(N,1/0));var D=_.length+N.length+A.length,$=D<v?new Array(v-D+1).join(h):"";switch(x&&b&&(N=e($+N,$.length?v-A.length:1/0),$=""),p){case"<":N=_+N+A+$;break;case"=":N=_+$+N+A;break;case"^":N=$.slice(0,D=$.length>>1)+_+N+A+$.slice(D);break;default:N=$+_+N+A;break}return a(N)}return P.toString=function(){return f+""},P}function d(f,h){var p=l((f=iu(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Lo(h)/3)))*3,m=Math.pow(10,-g),b=iC[8+g/3];return function(v){return p(m*v)+b}}return{format:l,formatPrefix:d}}var _d,Sw,yA;aY({thousands:",",grouping:[3],currency:["$",""]});function aY(t){return _d=iY(t),Sw=_d.format,yA=_d.formatPrefix,_d}function sY(t){return Math.max(0,-Lo(Math.abs(t)))}function oY(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lo(e)/3)))*3-Lo(Math.abs(t)))}function cY(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Lo(e)-Lo(t))+1}function bA(t,e,n,r){var i=t0(t,e,n),a;switch(r=iu(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=oY(i,s))&&(r.precision=a),yA(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=cY(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=sY(i))&&(r.precision=a-(r.type==="%")*2);break}}return Sw(r)}function Pa(t){var e=t.domain;return t.ticks=function(n){var r=e();return Zy(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return bA(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,l,d=10;for(o<s&&(l=s,s=o,o=l,l=i,i=a,a=l);d-- >0;){if(l=e0(s,o,n),l===c)return r[i]=s,r[a]=o,e(r);if(l>0)s=Math.floor(s/l)*l,o=Math.ceil(o/l)*l;else if(l<0)s=Math.ceil(s*l)/l,o=Math.floor(o*l)/l;else break;c=l}return t},t}function xh(){var t=xw();return t.copy=function(){return Ku(t,xh())},rr.apply(t,arguments),Pa(t)}function xA(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,yh),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return xA(t).unknown(e)},t=arguments.length?Array.from(t,yh):[0,1],Pa(n)}function wA(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function aC(t){return Math.log(t)}function sC(t){return Math.exp(t)}function lY(t){return-Math.log(-t)}function uY(t){return-Math.exp(-t)}function dY(t){return isFinite(t)?+("1e"+t):t<0?0:t}function fY(t){return t===10?dY:t===Math.E?Math.exp:e=>Math.pow(t,e)}function hY(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function oC(t){return(e,n)=>-t(-e,n)}function kw(t){const e=t(aC,sC),n=e.domain;let r=10,i,a;function s(){return i=hY(r),a=fY(r),n()[0]<0?(i=oC(i),a=oC(a),t(lY,uY)):t(aC,sC),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let l=c[0],d=c[c.length-1];const f=d<l;f&&([l,d]=[d,l]);let h=i(l),p=i(d),g,m;const b=o==null?10:+o;let v=[];if(!(r%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),l>0){for(;h<=p;++h)for(g=1;g<r;++g)if(m=h<0?g/a(-h):g*a(h),!(m<l)){if(m>d)break;v.push(m)}}else for(;h<=p;++h)for(g=r-1;g>=1;--g)if(m=h>0?g/a(-h):g*a(h),!(m<l)){if(m>d)break;v.push(m)}v.length*2<b&&(v=Zy(l,d,b))}else v=Zy(h,p,Math.min(p-h,b)).map(a);return f?v.reverse():v},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=iu(c)).precision==null&&(c.trim=!0),c=Sw(c)),o===1/0)return c;const l=Math.max(1,r*o/e.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=l?c(d):""}},e.nice=()=>n(wA(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function SA(){const t=kw(sm()).domain([1,10]);return t.copy=()=>Ku(t,SA()).base(t.base()),rr.apply(t,arguments),t}function cC(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function lC(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Tw(t){var e=1,n=t(cC(e),lC(e));return n.constant=function(r){return arguments.length?t(cC(e=+r),lC(e)):e},Pa(n)}function kA(){var t=Tw(sm());return t.copy=function(){return Ku(t,kA()).constant(t.constant())},rr.apply(t,arguments)}function uC(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function pY(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function mY(t){return t<0?-t*t:t*t}function Cw(t){var e=t(rn,rn),n=1;function r(){return n===1?t(rn,rn):n===.5?t(pY,mY):t(uC(n),uC(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Pa(e)}function Ew(){var t=Cw(sm());return t.copy=function(){return Ku(t,Ew()).exponent(t.exponent())},rr.apply(t,arguments),t}function gY(){return Ew.apply(null,arguments).exponent(.5)}function dC(t){return Math.sign(t)*t*t}function vY(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function TA(){var t=xw(),e=[0,1],n=!1,r;function i(a){var s=vY(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(dC(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,yh)).map(dC)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return TA(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},rr.apply(i,arguments),Pa(i)}function CA(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=SJ(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[Hu(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(ha),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return CA().domain(t).range(e).unknown(r)},rr.apply(a,arguments)}function EA(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[Hu(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var l=i.indexOf(c);return l<0?[NaN,NaN]:l<1?[t,r[0]]:l>=n?[r[n-1],e]:[r[l-1],r[l]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return EA().domain([t,e]).range(i).unknown(a)},rr.apply(Pa(s),arguments)}function jA(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Hu(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return jA().domain(t).range(e).unknown(n)},rr.apply(i,arguments)}const $g=new Date,Ug=new Date;function _t(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let l;do c.push(l=new Date(+a)),e(a,o),t(a);while(l<a&&a<s);return c},i.filter=a=>_t(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>($g.setTime(+a),Ug.setTime(+s),t($g),t(Ug),Math.floor(n($g,Ug))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const wh=_t(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);wh.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_t(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):wh);wh.range;const gi=1e3,Kn=gi*60,vi=Kn*60,Pi=vi*24,jw=Pi*7,fC=Pi*30,Fg=Pi*365,Ja=_t(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*gi)},(t,e)=>(e-t)/gi,t=>t.getUTCSeconds());Ja.range;const Nw=_t(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*gi)},(t,e)=>{t.setTime(+t+e*Kn)},(t,e)=>(e-t)/Kn,t=>t.getMinutes());Nw.range;const Pw=_t(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Kn)},(t,e)=>(e-t)/Kn,t=>t.getUTCMinutes());Pw.range;const _w=_t(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*gi-t.getMinutes()*Kn)},(t,e)=>{t.setTime(+t+e*vi)},(t,e)=>(e-t)/vi,t=>t.getHours());_w.range;const Ow=_t(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*vi)},(t,e)=>(e-t)/vi,t=>t.getUTCHours());Ow.range;const Ju=_t(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Kn)/Pi,t=>t.getDate()-1);Ju.range;const om=_t(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Pi,t=>t.getUTCDate()-1);om.range;const NA=_t(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Pi,t=>Math.floor(t/Pi));NA.range;function js(t){return _t(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Kn)/jw)}const cm=js(0),Sh=js(1),yY=js(2),bY=js(3),$o=js(4),xY=js(5),wY=js(6);cm.range;Sh.range;yY.range;bY.range;$o.range;xY.range;wY.range;function Ns(t){return _t(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/jw)}const lm=Ns(0),kh=Ns(1),SY=Ns(2),kY=Ns(3),Uo=Ns(4),TY=Ns(5),CY=Ns(6);lm.range;kh.range;SY.range;kY.range;Uo.range;TY.range;CY.range;const Aw=_t(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Aw.range;const Rw=_t(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Rw.range;const _i=_t(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());_i.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_t(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});_i.range;const Oi=_t(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Oi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_t(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Oi.range;function PA(t,e,n,r,i,a){const s=[[Ja,1,gi],[Ja,5,5*gi],[Ja,15,15*gi],[Ja,30,30*gi],[a,1,Kn],[a,5,5*Kn],[a,15,15*Kn],[a,30,30*Kn],[i,1,vi],[i,3,3*vi],[i,6,6*vi],[i,12,12*vi],[r,1,Pi],[r,2,2*Pi],[n,1,jw],[e,1,fC],[e,3,3*fC],[t,1,Fg]];function o(l,d,f){const h=d<l;h&&([l,d]=[d,l]);const p=f&&typeof f.range=="function"?f:c(l,d,f),g=p?p.range(l,+d+1):[];return h?g.reverse():g}function c(l,d,f){const h=Math.abs(d-l)/f,p=mw(([,,b])=>b).right(s,h);if(p===s.length)return t.every(t0(l/Fg,d/Fg,f));if(p===0)return wh.every(Math.max(t0(l,d,f),1));const[g,m]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return g.every(m)}return[o,c]}const[EY,jY]=PA(Oi,Rw,lm,NA,Ow,Pw),[NY,PY]=PA(_i,Aw,cm,Ju,_w,Nw);function Bg(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function zg(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Lc(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function _Y(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,l=$c(i),d=Uc(i),f=$c(a),h=Uc(a),p=$c(s),g=Uc(s),m=$c(o),b=Uc(o),v=$c(c),x=Uc(c),S={a:q,A:D,b:$,B:I,c:null,d:yC,e:yC,f:ZY,g:lX,G:dX,H:YY,I:XY,j:QY,L:_A,m:eX,M:tX,p:V,q:J,Q:wC,s:SC,S:nX,u:rX,U:iX,V:aX,w:sX,W:oX,x:null,X:null,y:cX,Y:uX,Z:fX,"%":xC},T={a:ne,A:de,b:xe,B:Se,c:null,d:bC,e:bC,f:gX,g:EX,G:NX,H:hX,I:pX,j:mX,L:AA,m:vX,M:yX,p:ke,q:K,Q:wC,s:SC,S:bX,u:xX,U:wX,V:SX,w:kX,W:TX,x:null,X:null,y:CX,Y:jX,Z:PX,"%":xC},w={a:P,A:N,b:_,B:A,c:R,d:gC,e:gC,f:HY,g:mC,G:pC,H:vC,I:vC,j:zY,L:WY,m:BY,M:qY,p:j,q:FY,Q:KY,s:JY,S:VY,u:MY,U:DY,V:LY,w:IY,W:$Y,x:L,X:U,y:mC,Y:pC,Z:UY,"%":GY};S.x=k(n,S),S.X=k(r,S),S.c=k(e,S),T.x=k(n,T),T.X=k(r,T),T.c=k(e,T);function k(G,ae){return function(oe){var X=[],ce=-1,ue=0,Oe=G.length,lt,ln,zi;for(oe instanceof Date||(oe=new Date(+oe));++ce<Oe;)G.charCodeAt(ce)===37&&(X.push(G.slice(ue,ce)),(ln=hC[lt=G.charAt(++ce)])!=null?lt=G.charAt(++ce):ln=lt==="e"?" ":"0",(zi=ae[lt])&&(lt=zi(oe,ln)),X.push(lt),ue=ce+1);return X.push(G.slice(ue,ce)),X.join("")}}function C(G,ae){return function(oe){var X=Lc(1900,void 0,1),ce=E(X,G,oe+="",0),ue,Oe;if(ce!=oe.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(ae&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(ue=zg(Lc(X.y,0,1)),Oe=ue.getUTCDay(),ue=Oe>4||Oe===0?kh.ceil(ue):kh(ue),ue=om.offset(ue,(X.V-1)*7),X.y=ue.getUTCFullYear(),X.m=ue.getUTCMonth(),X.d=ue.getUTCDate()+(X.w+6)%7):(ue=Bg(Lc(X.y,0,1)),Oe=ue.getDay(),ue=Oe>4||Oe===0?Sh.ceil(ue):Sh(ue),ue=Ju.offset(ue,(X.V-1)*7),X.y=ue.getFullYear(),X.m=ue.getMonth(),X.d=ue.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),Oe="Z"in X?zg(Lc(X.y,0,1)).getUTCDay():Bg(Lc(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(Oe+5)%7:X.w+X.U*7-(Oe+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,zg(X)):Bg(X)}}function E(G,ae,oe,X){for(var ce=0,ue=ae.length,Oe=oe.length,lt,ln;ce<ue;){if(X>=Oe)return-1;if(lt=ae.charCodeAt(ce++),lt===37){if(lt=ae.charAt(ce++),ln=w[lt in hC?ae.charAt(ce++):lt],!ln||(X=ln(G,oe,X))<0)return-1}else if(lt!=oe.charCodeAt(X++))return-1}return X}function j(G,ae,oe){var X=l.exec(ae.slice(oe));return X?(G.p=d.get(X[0].toLowerCase()),oe+X[0].length):-1}function P(G,ae,oe){var X=p.exec(ae.slice(oe));return X?(G.w=g.get(X[0].toLowerCase()),oe+X[0].length):-1}function N(G,ae,oe){var X=f.exec(ae.slice(oe));return X?(G.w=h.get(X[0].toLowerCase()),oe+X[0].length):-1}function _(G,ae,oe){var X=v.exec(ae.slice(oe));return X?(G.m=x.get(X[0].toLowerCase()),oe+X[0].length):-1}function A(G,ae,oe){var X=m.exec(ae.slice(oe));return X?(G.m=b.get(X[0].toLowerCase()),oe+X[0].length):-1}function R(G,ae,oe){return E(G,e,ae,oe)}function L(G,ae,oe){return E(G,n,ae,oe)}function U(G,ae,oe){return E(G,r,ae,oe)}function q(G){return s[G.getDay()]}function D(G){return a[G.getDay()]}function $(G){return c[G.getMonth()]}function I(G){return o[G.getMonth()]}function V(G){return i[+(G.getHours()>=12)]}function J(G){return 1+~~(G.getMonth()/3)}function ne(G){return s[G.getUTCDay()]}function de(G){return a[G.getUTCDay()]}function xe(G){return c[G.getUTCMonth()]}function Se(G){return o[G.getUTCMonth()]}function ke(G){return i[+(G.getUTCHours()>=12)]}function K(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var ae=k(G+="",S);return ae.toString=function(){return G},ae},parse:function(G){var ae=C(G+="",!1);return ae.toString=function(){return G},ae},utcFormat:function(G){var ae=k(G+="",T);return ae.toString=function(){return G},ae},utcParse:function(G){var ae=C(G+="",!0);return ae.toString=function(){return G},ae}}}var hC={"-":"",_:" ",0:"0"},Lt=/^\s*\d+/,OY=/^%/,AY=/[\\^$*+?|[\]().{}]/g;function Pe(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function RY(t){return t.replace(AY,"\\$&")}function $c(t){return new RegExp("^(?:"+t.map(RY).join("|")+")","i")}function Uc(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function IY(t,e,n){var r=Lt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function MY(t,e,n){var r=Lt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function DY(t,e,n){var r=Lt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function LY(t,e,n){var r=Lt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function $Y(t,e,n){var r=Lt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function pC(t,e,n){var r=Lt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function mC(t,e,n){var r=Lt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function UY(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function FY(t,e,n){var r=Lt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function BY(t,e,n){var r=Lt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function gC(t,e,n){var r=Lt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function zY(t,e,n){var r=Lt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function vC(t,e,n){var r=Lt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function qY(t,e,n){var r=Lt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function VY(t,e,n){var r=Lt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function WY(t,e,n){var r=Lt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function HY(t,e,n){var r=Lt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function GY(t,e,n){var r=OY.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function KY(t,e,n){var r=Lt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function JY(t,e,n){var r=Lt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function yC(t,e){return Pe(t.getDate(),e,2)}function YY(t,e){return Pe(t.getHours(),e,2)}function XY(t,e){return Pe(t.getHours()%12||12,e,2)}function QY(t,e){return Pe(1+Ju.count(_i(t),t),e,3)}function _A(t,e){return Pe(t.getMilliseconds(),e,3)}function ZY(t,e){return _A(t,e)+"000"}function eX(t,e){return Pe(t.getMonth()+1,e,2)}function tX(t,e){return Pe(t.getMinutes(),e,2)}function nX(t,e){return Pe(t.getSeconds(),e,2)}function rX(t){var e=t.getDay();return e===0?7:e}function iX(t,e){return Pe(cm.count(_i(t)-1,t),e,2)}function OA(t){var e=t.getDay();return e>=4||e===0?$o(t):$o.ceil(t)}function aX(t,e){return t=OA(t),Pe($o.count(_i(t),t)+(_i(t).getDay()===4),e,2)}function sX(t){return t.getDay()}function oX(t,e){return Pe(Sh.count(_i(t)-1,t),e,2)}function cX(t,e){return Pe(t.getFullYear()%100,e,2)}function lX(t,e){return t=OA(t),Pe(t.getFullYear()%100,e,2)}function uX(t,e){return Pe(t.getFullYear()%1e4,e,4)}function dX(t,e){var n=t.getDay();return t=n>=4||n===0?$o(t):$o.ceil(t),Pe(t.getFullYear()%1e4,e,4)}function fX(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Pe(e/60|0,"0",2)+Pe(e%60,"0",2)}function bC(t,e){return Pe(t.getUTCDate(),e,2)}function hX(t,e){return Pe(t.getUTCHours(),e,2)}function pX(t,e){return Pe(t.getUTCHours()%12||12,e,2)}function mX(t,e){return Pe(1+om.count(Oi(t),t),e,3)}function AA(t,e){return Pe(t.getUTCMilliseconds(),e,3)}function gX(t,e){return AA(t,e)+"000"}function vX(t,e){return Pe(t.getUTCMonth()+1,e,2)}function yX(t,e){return Pe(t.getUTCMinutes(),e,2)}function bX(t,e){return Pe(t.getUTCSeconds(),e,2)}function xX(t){var e=t.getUTCDay();return e===0?7:e}function wX(t,e){return Pe(lm.count(Oi(t)-1,t),e,2)}function RA(t){var e=t.getUTCDay();return e>=4||e===0?Uo(t):Uo.ceil(t)}function SX(t,e){return t=RA(t),Pe(Uo.count(Oi(t),t)+(Oi(t).getUTCDay()===4),e,2)}function kX(t){return t.getUTCDay()}function TX(t,e){return Pe(kh.count(Oi(t)-1,t),e,2)}function CX(t,e){return Pe(t.getUTCFullYear()%100,e,2)}function EX(t,e){return t=RA(t),Pe(t.getUTCFullYear()%100,e,2)}function jX(t,e){return Pe(t.getUTCFullYear()%1e4,e,4)}function NX(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Uo(t):Uo.ceil(t),Pe(t.getUTCFullYear()%1e4,e,4)}function PX(){return"+0000"}function xC(){return"%"}function wC(t){return+t}function SC(t){return Math.floor(+t/1e3)}var Is,IA,MA;_X({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _X(t){return Is=_Y(t),IA=Is.format,Is.parse,MA=Is.utcFormat,Is.utcParse,Is}function OX(t){return new Date(t)}function AX(t){return t instanceof Date?+t:+new Date(+t)}function Iw(t,e,n,r,i,a,s,o,c,l){var d=xw(),f=d.invert,h=d.domain,p=l(".%L"),g=l(":%S"),m=l("%I:%M"),b=l("%I %p"),v=l("%a %d"),x=l("%b %d"),S=l("%B"),T=l("%Y");function w(k){return(c(k)<k?p:o(k)<k?g:s(k)<k?m:a(k)<k?b:r(k)<k?i(k)<k?v:x:n(k)<k?S:T)(k)}return d.invert=function(k){return new Date(f(k))},d.domain=function(k){return arguments.length?h(Array.from(k,AX)):h().map(OX)},d.ticks=function(k){var C=h();return t(C[0],C[C.length-1],k??10)},d.tickFormat=function(k,C){return C==null?w:l(C)},d.nice=function(k){var C=h();return(!k||typeof k.range!="function")&&(k=e(C[0],C[C.length-1],k??10)),k?h(wA(C,k)):d},d.copy=function(){return Ku(d,Iw(t,e,n,r,i,a,s,o,c,l))},d}function RX(){return rr.apply(Iw(NY,PY,_i,Aw,cm,Ju,_w,Nw,Ja,IA).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function IX(){return rr.apply(Iw(EY,jY,Oi,Rw,lm,om,Ow,Pw,Ja,MA).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function um(){var t=0,e=1,n,r,i,a,s=rn,o=!1,c;function l(f){return f==null||isNaN(f=+f)?c:s(i===0?.5:(f=(a(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),l):[t,e]},l.clamp=function(f){return arguments.length?(o=!!f,l):o},l.interpolator=function(f){return arguments.length?(s=f,l):s};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,s=f(p,g),l):[s(0),s(1)]}}return l.range=d(bc),l.rangeRound=d(bw),l.unknown=function(f){return arguments.length?(c=f,l):c},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),l}}function _a(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function DA(){var t=Pa(um()(rn));return t.copy=function(){return _a(t,DA())},Li.apply(t,arguments)}function LA(){var t=kw(um()).domain([1,10]);return t.copy=function(){return _a(t,LA()).base(t.base())},Li.apply(t,arguments)}function $A(){var t=Tw(um());return t.copy=function(){return _a(t,$A()).constant(t.constant())},Li.apply(t,arguments)}function Mw(){var t=Cw(um());return t.copy=function(){return _a(t,Mw()).exponent(t.exponent())},Li.apply(t,arguments)}function MX(){return Mw.apply(null,arguments).exponent(.5)}function UA(){var t=[],e=rn;function n(r){if(r!=null&&!isNaN(r=+r))return e((Hu(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ha),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>wJ(t,a/r))},n.copy=function(){return UA(e).domain(t)},Li.apply(n,arguments)}function dm(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,l=rn,d,f=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+d(m))-a)*(r*m<r*a?o:c),l(f?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([t,e,n]=m,i=d(t=+t),a=d(e=+e),s=d(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,p):[t,e,n]},p.clamp=function(m){return arguments.length?(f=!!m,p):f},p.interpolator=function(m){return arguments.length?(l=m,p):l};function g(m){return function(b){var v,x,S;return arguments.length?([v,x,S]=b,l=GJ(m,[v,x,S]),p):[l(0),l(.5),l(1)]}}return p.range=g(bc),p.rangeRound=g(bw),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return d=m,i=m(t),a=m(e),s=m(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,p}}function FA(){var t=Pa(dm()(rn));return t.copy=function(){return _a(t,FA())},Li.apply(t,arguments)}function BA(){var t=kw(dm()).domain([.1,1,10]);return t.copy=function(){return _a(t,BA()).base(t.base())},Li.apply(t,arguments)}function zA(){var t=Tw(dm());return t.copy=function(){return _a(t,zA()).constant(t.constant())},Li.apply(t,arguments)}function Dw(){var t=Cw(dm());return t.copy=function(){return _a(t,Dw()).exponent(t.exponent())},Li.apply(t,arguments)}function DX(){return Dw.apply(null,arguments).exponent(.5)}const kC=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:eu,scaleDiverging:FA,scaleDivergingLog:BA,scaleDivergingPow:Dw,scaleDivergingSqrt:DX,scaleDivergingSymlog:zA,scaleIdentity:xA,scaleImplicit:n0,scaleLinear:xh,scaleLog:SA,scaleOrdinal:gw,scalePoint:vl,scalePow:Ew,scaleQuantile:CA,scaleQuantize:EA,scaleRadial:TA,scaleSequential:DA,scaleSequentialLog:LA,scaleSequentialPow:Mw,scaleSequentialQuantile:UA,scaleSequentialSqrt:MX,scaleSequentialSymlog:$A,scaleSqrt:gY,scaleSymlog:kA,scaleThreshold:jA,scaleTime:RX,scaleUtc:IX,tickFormat:bA},Symbol.toStringTag,{value:"Module"}));var LX=dc;function $X(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],s=e(a);if(s!=null&&(o===void 0?s===s&&!LX(s):n(s,o)))var o=s,c=a}return c}var qA=$X;function UX(t,e){return t>e}var FX=UX,BX=qA,zX=FX,qX=yc;function VX(t){return t&&t.length?BX(t,qX,zX):void 0}var WX=VX;const fm=Ue(WX);function HX(t,e){return t<e}var GX=HX,KX=qA,JX=GX,YX=yc;function XX(t){return t&&t.length?KX(t,YX,JX):void 0}var QX=XX;const hm=Ue(QX);var ZX=Yx,eQ=Na,tQ=XO,nQ=Tn;function rQ(t,e){var n=nQ(t)?ZX:tQ;return n(t,eQ(e))}var iQ=rQ,aQ=JO,sQ=iQ;function oQ(t,e){return aQ(sQ(t,e),1)}var cQ=oQ;const lQ=Ue(cQ);var uQ=dw;function dQ(t,e){return uQ(t,e)}var fQ=dQ;const pm=Ue(fQ);var xc=1e9,hQ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},$w,Ze=!0,tr="[DecimalError] ",rs=tr+"Invalid argument: ",Lw=tr+"Exponent out of range: ",wc=Math.floor,za=Math.pow,pQ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Pn,Ot=1e7,Ke=7,VA=9007199254740991,Th=wc(VA/Ke),ie={};ie.absoluteValue=ie.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ie.comparedTo=ie.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};ie.decimalPlaces=ie.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Ke;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ie.dividedBy=ie.div=function(t){return ki(this,new this.constructor(t))};ie.dividedToIntegerBy=ie.idiv=function(t){var e=this,n=e.constructor;return Le(ki(e,new n(t),0,1),n.precision)};ie.equals=ie.eq=function(t){return!this.cmp(t)};ie.exponent=function(){return yt(this)};ie.greaterThan=ie.gt=function(t){return this.cmp(t)>0};ie.greaterThanOrEqualTo=ie.gte=function(t){return this.cmp(t)>=0};ie.isInteger=ie.isint=function(){return this.e>this.d.length-2};ie.isNegative=ie.isneg=function(){return this.s<0};ie.isPositive=ie.ispos=function(){return this.s>0};ie.isZero=function(){return this.s===0};ie.lessThan=ie.lt=function(t){return this.cmp(t)<0};ie.lessThanOrEqualTo=ie.lte=function(t){return this.cmp(t)<1};ie.logarithm=ie.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Pn))throw Error(tr+"NaN");if(n.s<1)throw Error(tr+(n.s?"NaN":"-Infinity"));return n.eq(Pn)?new r(0):(Ze=!1,e=ki(au(n,a),au(t,a),a),Ze=!0,Le(e,i))};ie.minus=ie.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?GA(e,t):WA(e,(t.s=-t.s,t))};ie.modulo=ie.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(tr+"NaN");return n.s?(Ze=!1,e=ki(n,t,0,1).times(t),Ze=!0,n.minus(e)):Le(new r(n),i)};ie.naturalExponential=ie.exp=function(){return HA(this)};ie.naturalLogarithm=ie.ln=function(){return au(this)};ie.negated=ie.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ie.plus=ie.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?WA(e,t):GA(e,(t.s=-t.s,t))};ie.precision=ie.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(rs+t);if(e=yt(i)+1,r=i.d.length-1,n=r*Ke+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};ie.squareRoot=ie.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(tr+"NaN")}for(t=yt(o),Ze=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=zr(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=wc((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(ki(o,a,s+2)).times(.5),zr(a.d).slice(0,s)===(e=zr(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Le(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return Ze=!0,Le(r,n)};ie.times=ie.mul=function(t){var e,n,r,i,a,s,o,c,l,d=this,f=d.constructor,h=d.d,p=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,n=d.e+t.e,c=h.length,l=p.length,c<l&&(a=h,h=p,p=a,s=c,c=l,l=s),a=[],s=c+l,r=s;r--;)a.push(0);for(r=l;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+p[r]*h[i-r-1]+e,a[i--]=o%Ot|0,e=o/Ot|0;a[i]=(a[i]+e)%Ot|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Ze?Le(t,f.precision):t};ie.toDecimalPlaces=ie.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Yr(t,0,xc),e===void 0?e=r.rounding:Yr(e,0,8),Le(n,t+yt(n)+1,e))};ie.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=hs(r,!0):(Yr(t,0,xc),e===void 0?e=i.rounding:Yr(e,0,8),r=Le(new i(r),t+1,e),n=hs(r,!0,t+1)),n};ie.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?hs(i):(Yr(t,0,xc),e===void 0?e=a.rounding:Yr(e,0,8),r=Le(new a(i),t+yt(i)+1,e),n=hs(r.abs(),!1,t+yt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};ie.toInteger=ie.toint=function(){var t=this,e=t.constructor;return Le(new e(t),yt(t)+1,e.rounding)};ie.toNumber=function(){return+this};ie.toPower=ie.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,l=12,d=+(t=new c(t));if(!t.s)return new c(Pn);if(o=new c(o),!o.s){if(t.s<1)throw Error(tr+"Infinity");return o}if(o.eq(Pn))return o;if(r=c.precision,t.eq(Pn))return Le(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=d<0?-d:d)<=VA){for(i=new c(Pn),e=Math.ceil(r/Ke+4),Ze=!1;n%2&&(i=i.times(o),CC(i.d,e)),n=wc(n/2),n!==0;)o=o.times(o),CC(o.d,e);return Ze=!0,t.s<0?new c(Pn).div(i):Le(i,r)}}else if(a<0)throw Error(tr+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Ze=!1,i=t.times(au(o,r+l)),Ze=!0,i=HA(i),i.s=a,i};ie.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=yt(i),r=hs(i,n<=a.toExpNeg||n>=a.toExpPos)):(Yr(t,1,xc),e===void 0?e=a.rounding:Yr(e,0,8),i=Le(new a(i),t,e),n=yt(i),r=hs(i,t<=n||n<=a.toExpNeg,t)),r};ie.toSignificantDigits=ie.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Yr(t,1,xc),e===void 0?e=r.rounding:Yr(e,0,8)),Le(new r(n),t,e)};ie.toString=ie.valueOf=ie.val=ie.toJSON=ie[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=yt(t),n=t.constructor;return hs(t,e<=n.toExpNeg||e>=n.toExpPos)};function WA(t,e){var n,r,i,a,s,o,c,l,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Ze?Le(e,f):e;if(c=t.d,l=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=l.length):(r=l,i=s,o=c.length),s=Math.ceil(f/Ke),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=l.length,o-a<0&&(a=o,r=l,l=c,c=r),n=0;a;)n=(c[--a]=c[a]+l[a]+n)/Ot|0,c[a]%=Ot;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,Ze?Le(e,f):e}function Yr(t,e,n){if(t!==~~t||t<e||t>n)throw Error(rs+t)}function zr(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=Ke-r.length,n&&(a+=Ji(n)),a+=r;s=t[e],r=s+"",n=Ke-r.length,n&&(a+=Ji(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var ki=function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Ot|0,s=a/Ot|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Ot+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,l,d,f,h,p,g,m,b,v,x,S,T,w,k,C,E,j=r.constructor,P=r.s==i.s?1:-1,N=r.d,_=i.d;if(!r.s)return new j(r);if(!i.s)throw Error(tr+"Division by zero");for(c=r.e-i.e,C=_.length,w=N.length,p=new j(P),g=p.d=[],l=0;_[l]==(N[l]||0);)++l;if(_[l]>(N[l]||0)&&--c,a==null?x=a=j.precision:s?x=a+(yt(r)-yt(i))+1:x=a,x<0)return new j(0);if(x=x/Ke+2|0,l=0,C==1)for(d=0,_=_[0],x++;(l<w||d)&&x--;l++)S=d*Ot+(N[l]||0),g[l]=S/_|0,d=S%_|0;else{for(d=Ot/(_[0]+1)|0,d>1&&(_=t(_,d),N=t(N,d),C=_.length,w=N.length),T=C,m=N.slice(0,C),b=m.length;b<C;)m[b++]=0;E=_.slice(),E.unshift(0),k=_[0],_[1]>=Ot/2&&++k;do d=0,o=e(_,m,C,b),o<0?(v=m[0],C!=b&&(v=v*Ot+(m[1]||0)),d=v/k|0,d>1?(d>=Ot&&(d=Ot-1),f=t(_,d),h=f.length,b=m.length,o=e(f,m,h,b),o==1&&(d--,n(f,C<h?E:_,h))):(d==0&&(o=d=1),f=_.slice()),h=f.length,h<b&&f.unshift(0),n(m,f,b),o==-1&&(b=m.length,o=e(_,m,C,b),o<1&&(d++,n(m,C<b?E:_,b))),b=m.length):o===0&&(d++,m=[0]),g[l++]=d,o&&m[0]?m[b++]=N[T]||0:(m=[N[T]],b=1);while((T++<w||m[0]!==void 0)&&x--)}return g[0]||g.shift(),p.e=c,Le(p,s?a+yt(p)+1:a)}}();function HA(t,e){var n,r,i,a,s,o,c=0,l=0,d=t.constructor,f=d.precision;if(yt(t)>16)throw Error(Lw+yt(t));if(!t.s)return new d(Pn);for(e==null?(Ze=!1,o=f):o=e,s=new d(.03125);t.abs().gte(.1);)t=t.times(s),l+=5;for(r=Math.log(za(2,l))/Math.LN10*2+5|0,o+=r,n=i=a=new d(Pn),d.precision=o;;){if(i=Le(i.times(t),o),n=n.times(++c),s=a.plus(ki(i,n,o)),zr(s.d).slice(0,o)===zr(a.d).slice(0,o)){for(;l--;)a=Le(a.times(a),o);return d.precision=f,e==null?(Ze=!0,Le(a,f)):a}a=s}}function yt(t){for(var e=t.e*Ke,n=t.d[0];n>=10;n/=10)e++;return e}function qg(t,e,n){if(e>t.LN10.sd())throw Ze=!0,n&&(t.precision=n),Error(tr+"LN10 precision limit exceeded");return Le(new t(t.LN10),e)}function Ji(t){for(var e="";t--;)e+="0";return e}function au(t,e){var n,r,i,a,s,o,c,l,d,f=1,h=10,p=t,g=p.d,m=p.constructor,b=m.precision;if(p.s<1)throw Error(tr+(p.s?"NaN":"-Infinity"));if(p.eq(Pn))return new m(0);if(e==null?(Ze=!1,l=b):l=e,p.eq(10))return e==null&&(Ze=!0),qg(m,l);if(l+=h,m.precision=l,n=zr(g),r=n.charAt(0),a=yt(p),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=zr(p.d),r=n.charAt(0),f++;a=yt(p),r>1?(p=new m("0."+n),a++):p=new m(r+"."+n.slice(1))}else return c=qg(m,l+2,b).times(a+""),p=au(new m(r+"."+n.slice(1)),l-h).plus(c),m.precision=b,e==null?(Ze=!0,Le(p,b)):p;for(o=s=p=ki(p.minus(Pn),p.plus(Pn),l),d=Le(p.times(p),l),i=3;;){if(s=Le(s.times(d),l),c=o.plus(ki(s,new m(i),l)),zr(c.d).slice(0,l)===zr(o.d).slice(0,l))return o=o.times(2),a!==0&&(o=o.plus(qg(m,l+2,b).times(a+""))),o=ki(o,new m(f),l),m.precision=b,e==null?(Ze=!0,Le(o,b)):o;o=c,i+=2}}function TC(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=wc(n/Ke),t.d=[],r=(n+1)%Ke,n<0&&(r+=Ke),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Ke;r<i;)t.d.push(+e.slice(r,r+=Ke));e=e.slice(r),r=Ke-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Ze&&(t.e>Th||t.e<-Th))throw Error(Lw+n)}else t.s=0,t.e=0,t.d=[0];return t}function Le(t,e,n){var r,i,a,s,o,c,l,d,f=t.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=Ke,i=e,l=f[d=0];else{if(d=Math.ceil((r+1)/Ke),a=f.length,d>=a)return t;for(l=a=f[d],s=1;a>=10;a/=10)s++;r%=Ke,i=r-Ke+s}if(n!==void 0&&(a=za(10,s-i-1),o=l/a%10|0,c=e<0||f[d+1]!==void 0||l%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?l/za(10,s-i):0:f[d-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return c?(a=yt(t),f.length=1,e=e-a-1,f[0]=za(10,(Ke-e%Ke)%Ke),t.e=wc(-e/Ke)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=d,a=1,d--):(f.length=d+1,a=za(10,Ke-r),f[d]=i>0?(l/za(10,s-i)%za(10,i)|0)*a:0),c)for(;;)if(d==0){(f[0]+=a)==Ot&&(f[0]=1,++t.e);break}else{if(f[d]+=a,f[d]!=Ot)break;f[d--]=0,a=1}for(r=f.length;f[--r]===0;)f.pop();if(Ze&&(t.e>Th||t.e<-Th))throw Error(Lw+yt(t));return t}function GA(t,e){var n,r,i,a,s,o,c,l,d,f,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),Ze?Le(e,p):e;if(c=t.d,f=e.d,r=e.e,l=t.e,c=c.slice(),s=l-r,s){for(d=s<0,d?(n=c,s=-s,o=f.length):(n=f,r=l,o=c.length),i=Math.max(Math.ceil(p/Ke),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}s=0}for(d&&(n=c,c=f,f=n,e.s=-e.s),o=c.length,i=f.length-o;i>0;--i)c[o++]=0;for(i=f.length;i>s;){if(c[--i]<f[i]){for(a=i;a&&c[--a]===0;)c[a]=Ot-1;--c[a],c[i]+=Ot}c[i]-=f[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Ze?Le(e,p):e):new h(0)}function hs(t,e,n){var r,i=yt(t),a=zr(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Ji(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Ji(-i-1)+a,n&&(r=n-s)>0&&(a+=Ji(r))):i>=s?(a+=Ji(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Ji(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Ji(r))),t.s<0?"-"+a:a}function CC(t,e){if(t.length>e)return t.length=e,!0}function KA(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(rs+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return TC(s,a.toString())}else if(typeof a!="string")throw Error(rs+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,pQ.test(a))TC(s,a);else throw Error(rs+a)}if(i.prototype=ie,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=KA,i.config=i.set=mQ,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function mQ(t){if(!t||typeof t!="object")throw Error(tr+"Object expected");var e,n,r,i=["precision",1,xc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(wc(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(rs+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(rs+n+": "+r);return this}var $w=KA(hQ);Pn=new $w(1);const Ie=$w;function gQ(t){return xQ(t)||bQ(t)||yQ(t)||vQ()}function vQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yQ(t,e){if(t){if(typeof t=="string")return s0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s0(t,e)}}function bQ(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function xQ(t){if(Array.isArray(t))return s0(t)}function s0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var wQ=function(e){return e},JA={"@@functional/placeholder":!0},YA=function(e){return e===JA},EC=function(e){return function n(){return arguments.length===0||arguments.length===1&&YA(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},SQ=function t(e,n){return e===1?n:EC(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==JA}).length;return s>=e?n.apply(void 0,i):t(e-s,EC(function(){for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];var d=i.map(function(f){return YA(f)?c.shift():f});return n.apply(void 0,gQ(d).concat(c))}))})},mm=function(e){return SQ(e.length,e)},o0=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},kQ=mm(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),TQ=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return wQ;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,c){return c(o)},a.apply(void 0,arguments))}},c0=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},XA=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(o,c){return o===n[c]})||(n=a,r=e.apply(void 0,a)),r}};function CQ(t){var e;return t===0?e=1:e=Math.floor(new Ie(t).abs().log(10).toNumber())+1,e}function EQ(t,e,n){for(var r=new Ie(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var jQ=mm(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),NQ=mm(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),PQ=mm(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const gm={rangeStep:EQ,getDigitCount:CQ,interpolateNumber:jQ,uninterpolateNumber:NQ,uninterpolateTruncation:PQ};function l0(t){return AQ(t)||OQ(t)||QA(t)||_Q()}function _Q(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OQ(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function AQ(t){if(Array.isArray(t))return u0(t)}function su(t,e){return MQ(t)||IQ(t,e)||QA(t,e)||RQ()}function RQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QA(t,e){if(t){if(typeof t=="string")return u0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u0(t,e)}}function u0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function IQ(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function MQ(t){if(Array.isArray(t))return t}function ZA(t){var e=su(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function eR(t,e,n){if(t.lte(0))return new Ie(0);var r=gm.getDigitCount(t.toNumber()),i=new Ie(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new Ie(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?c:new Ie(Math.ceil(c))}function DQ(t,e,n){var r=1,i=new Ie(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Ie(10).pow(gm.getDigitCount(t)-1),i=new Ie(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Ie(Math.floor(t)))}else t===0?i=new Ie(Math.floor((e-1)/2)):n||(i=new Ie(Math.floor(t)));var s=Math.floor((e-1)/2),o=TQ(kQ(function(c){return i.add(new Ie(c-s).mul(r)).toNumber()}),o0);return o(0,e)}function tR(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Ie(0),tickMin:new Ie(0),tickMax:new Ie(0)};var a=eR(new Ie(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new Ie(0):(s=new Ie(t).add(e).div(2),s=s.sub(new Ie(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),c=Math.ceil(new Ie(e).sub(s).div(a).toNumber()),l=o+c+1;return l>n?tR(t,e,n,r,i+1):(l<n&&(c=e>0?c+(n-l):c,o=e>0?o:o+(n-l)),{step:a,tickMin:s.sub(new Ie(o).mul(a)),tickMax:s.add(new Ie(c).mul(a))})}function LQ(t){var e=su(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=ZA([n,r]),c=su(o,2),l=c[0],d=c[1];if(l===-1/0||d===1/0){var f=d===1/0?[l].concat(l0(o0(0,i-1).map(function(){return 1/0}))):[].concat(l0(o0(0,i-1).map(function(){return-1/0})),[d]);return n>r?c0(f):f}if(l===d)return DQ(l,i,a);var h=tR(l,d,s,a),p=h.step,g=h.tickMin,m=h.tickMax,b=gm.rangeStep(g,m.add(new Ie(.1).mul(p)),p);return n>r?c0(b):b}function $Q(t,e){var n=su(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=ZA([r,i]),o=su(s,2),c=o[0],l=o[1];if(c===-1/0||l===1/0)return[r,i];if(c===l)return[c];var d=Math.max(e,2),f=eR(new Ie(l).sub(c).div(d-1),a,0),h=[].concat(l0(gm.rangeStep(new Ie(c),new Ie(l).sub(new Ie(.99).mul(f)),f)),[l]);return r>i?c0(h):h}var UQ=XA(LQ),FQ=XA($Q),BQ=!0,Vg="Invariant failed";function ps(t,e){if(!t){if(BQ)throw new Error(Vg);var n=typeof e=="function"?e():e,r=n?"".concat(Vg,": ").concat(n):Vg;throw new Error(r)}}var zQ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Fo(t){"@babel/helpers - typeof";return Fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fo(t)}function Ch(){return Ch=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ch.apply(this,arguments)}function qQ(t,e){return GQ(t)||HQ(t,e)||WQ(t,e)||VQ()}function VQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WQ(t,e){if(t){if(typeof t=="string")return jC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jC(t,e)}}function jC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function HQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){l=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function GQ(t){if(Array.isArray(t))return t}function KQ(t,e){if(t==null)return{};var n=JQ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function JQ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function YQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iR(r.key),r)}}function XQ(t,e,n){return e&&NC(t.prototype,e),n&&NC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function QQ(t,e,n){return e=Eh(e),ZQ(t,nR()?Reflect.construct(e,n||[],Eh(t).constructor):e.apply(t,n))}function ZQ(t,e){if(e&&(Fo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eZ(t)}function eZ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nR=function(){return!!t})()}function Eh(t){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Eh(t)}function tZ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d0(t,e)}function d0(t,e){return d0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},d0(t,e)}function rR(t,e,n){return e=iR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iR(t){var e=nZ(t,"string");return Fo(e)=="symbol"?e:e+""}function nZ(t,e){if(Fo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Fo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yu=function(t){function e(){return YQ(this,e),QQ(this,e,arguments)}return tZ(e,t),XQ(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,c=r.data,l=r.dataPointFormatter,d=r.xAxis,f=r.yAxis,h=KQ(r,zQ),p=Ce(h,!1);this.props.direction==="x"&&d.type!=="number"&&ps(!1);var g=c.map(function(m){var b=l(m,o),v=b.x,x=b.y,S=b.value,T=b.errorVal;if(!T)return null;var w=[],k,C;if(Array.isArray(T)){var E=qQ(T,2);k=E[0],C=E[1]}else k=C=T;if(a==="vertical"){var j=d.scale,P=x+i,N=P+s,_=P-s,A=j(S-k),R=j(S+C);w.push({x1:R,y1:N,x2:R,y2:_}),w.push({x1:A,y1:P,x2:R,y2:P}),w.push({x1:A,y1:N,x2:A,y2:_})}else if(a==="horizontal"){var L=f.scale,U=v+i,q=U-s,D=U+s,$=L(S-k),I=L(S+C);w.push({x1:q,y1:I,x2:D,y2:I}),w.push({x1:U,y1:$,x2:U,y2:I}),w.push({x1:q,y1:$,x2:D,y2:$})}return M.createElement(ht,Ch({className:"recharts-errorBar",key:"bar-".concat(w.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},p),w.map(function(V){return M.createElement("line",Ch({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return M.createElement(ht,{className:"recharts-errorBars"},g)}}])}(M.Component);rR(Yu,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});rR(Yu,"displayName","ErrorBar");function ou(t){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ou(t)}function PC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function La(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PC(Object(n),!0).forEach(function(r){rZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rZ(t,e,n){return e=iZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iZ(t){var e=aZ(t,"string");return ou(e)=="symbol"?e:e+""}function aZ(t,e){if(ou(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ou(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aR=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=Nn(n,po);if(!s)return null;var o=po.defaultProps,c=o!==void 0?La(La({},o),s.props):{},l;return s.props&&s.props.payload?l=s.props&&s.props.payload:a==="children"?l=(r||[]).reduce(function(d,f){var h=f.item,p=f.props,g=p.sectors||p.data||[];return d.concat(g.map(function(m){return{type:s.props.iconType||h.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):l=(r||[]).map(function(d){var f=d.item,h=f.type.defaultProps,p=h!==void 0?La(La({},h),f.props):{},g=p.dataKey,m=p.name,b=p.legendType,v=p.hide;return{inactive:v,dataKey:g,type:c.iconType||b||"square",color:Uw(f),value:m||g,payload:p}}),La(La(La({},c),po.getWithHeight(s,i)),{},{payload:l,item:s})};function cu(t){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cu(t)}function _C(t){return lZ(t)||cZ(t)||oZ(t)||sZ()}function sZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oZ(t,e){if(t){if(typeof t=="string")return f0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f0(t,e)}}function cZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lZ(t){if(Array.isArray(t))return f0(t)}function f0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function OC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OC(Object(n),!0).forEach(function(r){go(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function go(t,e,n){return e=uZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uZ(t){var e=dZ(t,"string");return cu(e)=="symbol"?e:e+""}function dZ(t,e){if(cu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mn(t,e,n){return ve(t)||ve(e)?n:Et(e)?Xn(t,e,n):me(e)?e(t):n}function yl(t,e,n,r){var i=lQ(t,function(o){return Mn(o,e)});if(n==="number"){var a=i.filter(function(o){return te(o)||parseFloat(o)});return a.length?[hm(a),fm(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!ve(o)}):i;return s.map(function(o){return Et(o)||o instanceof Date?o:""})}var fZ=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,l=0;l<o;l++){var d=l>0?i[l-1].coordinate:i[o-1].coordinate,f=i[l].coordinate,h=l>=o-1?i[0].coordinate:i[l+1].coordinate,p=void 0;if(br(f-d)!==br(h-f)){var g=[];if(br(h-f)===br(c[1]-c[0])){p=h;var m=f+c[1]-c[0];g[0]=Math.min(m,(m+d)/2),g[1]=Math.max(m,(m+d)/2)}else{p=d;var b=h+c[1]-c[0];g[0]=Math.min(f,(b+f)/2),g[1]=Math.max(f,(b+f)/2)}var v=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(e>v[0]&&e<=v[1]||e>=g[0]&&e<=g[1]){s=i[l].index;break}}else{var x=Math.min(d,h),S=Math.max(d,h);if(e>(x+f)/2&&e<=(S+f)/2){s=i[l].index;break}}}else for(var T=0;T<o;T++)if(T===0&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T>0&&T<o-1&&e>(r[T].coordinate+r[T-1].coordinate)/2&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T===o-1&&e>(r[T].coordinate+r[T-1].coordinate)/2){s=r[T].index;break}return s},Uw=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?st(st({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,c;switch(i){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:o;break;default:c=o;break}return c},hZ=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),c=0,l=o.length;c<l;c++)for(var d=a[o[c]].stackGroups,f=Object.keys(d),h=0,p=f.length;h<p;h++){var g=d[f[h]],m=g.items,b=g.cateAxisId,v=m.filter(function(C){return xi(C.type).indexOf("Bar")>=0});if(v&&v.length){var x=v[0].type.defaultProps,S=x!==void 0?st(st({},x),v[0].props):v[0].props,T=S.barSize,w=S[b];s[w]||(s[w]=[]);var k=ve(T)?n:T;s[w].push({item:v[0],stackList:v.slice(1),barSize:ve(k)?void 0:fs(k,r,0)})}}return s},pZ=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,c=s.length;if(c<1)return null;var l=fs(n,i,0,!0),d,f=[];if(s[0].barSize===+s[0].barSize){var h=!1,p=i/c,g=s.reduce(function(T,w){return T+w.barSize||0},0);g+=(c-1)*l,g>=i&&(g-=(c-1)*l,l=0),g>=i&&p>0&&(h=!0,p*=.9,g=c*p);var m=(i-g)/2>>0,b={offset:m-l,size:0};d=s.reduce(function(T,w){var k={item:w.item,position:{offset:b.offset+b.size+l,size:h?p:w.barSize}},C=[].concat(_C(T),[k]);return b=C[C.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(E){C.push({item:E,position:b})}),C},f)}else{var v=fs(r,i,0,!0);i-2*v-(c-1)*l<=0&&(l=0);var x=(i-2*v-(c-1)*l)/c;x>1&&(x>>=0);var S=o===+o?Math.min(x,o):x;d=s.reduce(function(T,w,k){var C=[].concat(_C(T),[{item:w.item,position:{offset:v+(x+l)*k+(x-S)/2,size:S}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(E){C.push({item:E,position:C[C.length-1].position})}),C},f)}return d},mZ=function(e,n,r,i){var a=r.children,s=r.width,o=r.margin,c=s-(o.left||0)-(o.right||0),l=aR({children:a,legendWidth:c});if(l){var d=i||{},f=d.width,h=d.height,p=l.align,g=l.verticalAlign,m=l.layout;if((m==="vertical"||m==="horizontal"&&g==="middle")&&p!=="center"&&te(e[p]))return st(st({},e),{},go({},p,e[p]+(f||0)));if((m==="horizontal"||m==="vertical"&&p==="center")&&g!=="middle"&&te(e[g]))return st(st({},e),{},go({},g,e[g]+(h||0)))}return e},gZ=function(e,n,r){return ve(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},sR=function(e,n,r,i,a){var s=n.props.children,o=Qn(s,Yu).filter(function(l){return gZ(i,a,l.props.direction)});if(o&&o.length){var c=o.map(function(l){return l.props.dataKey});return e.reduce(function(l,d){var f=Mn(d,r);if(ve(f))return l;var h=Array.isArray(f)?[hm(f),fm(f)]:[f,f],p=c.reduce(function(g,m){var b=Mn(d,m,0),v=h[0]-Math.abs(Array.isArray(b)?b[0]:b),x=h[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(v,g[0]),Math.max(x,g[1])]},[1/0,-1/0]);return[Math.min(p[0],l[0]),Math.max(p[1],l[1])]},[1/0,-1/0])}return null},vZ=function(e,n,r,i,a){var s=n.map(function(o){return sR(e,o,r,a,i)}).filter(function(o){return!ve(o)});return s&&s.length?s.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},oR=function(e,n,r,i,a){var s=n.map(function(c){var l=c.props.dataKey;return r==="number"&&l&&sR(e,c,l,i)||yl(e,l,r,a)});if(r==="number")return s.reduce(function(c,l){return[Math.min(c[0],l[0]),Math.max(c[1],l[1])]},[1/0,-1/0]);var o={};return s.reduce(function(c,l){for(var d=0,f=l.length;d<f;d++)o[l[d]]||(o[l[d]]=!0,c.push(l[d]));return c},[])},cR=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},lR=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var a,s,o=e.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===r&&(s=!0),c.coordinate});return a||o.push(n),s||o.push(r),o},yi=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,l=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/c:0;if(l=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?br(o[0]-o[1])*2*l:l,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var h=a?a.indexOf(f):f;return{coordinate:i(h)+l,value:f,offset:l}});return d.filter(function(f){return!qu(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+l,value:f,index:h,offset:l}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+l,value:f,offset:l}}):i.domain().map(function(f,h){return{coordinate:i(f)+l,value:a?a[f]:f,index:h,offset:l}})},Wg=new WeakMap,Od=function(e,n){if(typeof n!="function")return e;Wg.has(e)||Wg.set(e,new WeakMap);var r=Wg.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},yZ=function(e,n,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:eu(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:xh(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:vl(),realScaleType:"point"}:a==="category"?{scale:eu(),realScaleType:"band"}:{scale:xh(),realScaleType:"linear"};if(ds(i)){var c="scale".concat(Zp(i));return{scale:(kC[c]||vl)(),realScaleType:kC[c]?c:"point"}}return me(i)?{scale:i}:{scale:vl(),realScaleType:"point"}},AC=1e-4,bZ=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-AC,s=Math.max(i[0],i[1])+AC,o=e(n[0]),c=e(n[r-1]);(o<a||o>s||c<a||c>s)&&e.domain([n[0],n[r-1]])}},xZ=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},wZ=function(e,n){if(!n||n.length!==2||!te(n[0])||!te(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!te(e[0])||e[0]<r)&&(a[0]=r),(!te(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},SZ=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<n;++o){var c=qu(e[o][r][1])?e[o][r][0]:e[o][r][1];c>=0?(e[o][r][0]=a,e[o][r][1]=a+c,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+c,s=e[o][r][1])}},kZ=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var o=qu(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},TZ={sign:SZ,expand:B8,none:Ao,silhouette:z8,wiggle:q8,positive:kZ},CZ=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),a=TZ[r],s=F8().keys(i).value(function(o,c){return+Mn(o,c,0)}).order(Ly).offset(a);return s(e)},EZ=function(e,n,r,i,a,s){if(!e)return null;var o=s?n.reverse():n,c={},l=o.reduce(function(f,h){var p,g=(p=h.type)!==null&&p!==void 0&&p.defaultProps?st(st({},h.type.defaultProps),h.props):h.props,m=g.stackId,b=g.hide;if(b)return f;var v=g[r],x=f[v]||{hasStack:!1,stackGroups:{}};if(Et(m)){var S=x.stackGroups[m]||{numericAxisId:r,cateAxisId:i,items:[]};S.items.push(h),x.hasStack=!0,x.stackGroups[m]=S}else x.stackGroups[Vu("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return st(st({},f),{},go({},v,x))},c),d={};return Object.keys(l).reduce(function(f,h){var p=l[h];if(p.hasStack){var g={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(m,b){var v=p.stackGroups[b];return st(st({},m),{},go({},b,{numericAxisId:r,cateAxisId:i,items:v.items,stackedData:CZ(e,v.items,a)}))},g)}return st(st({},f),{},go({},h,p))},d)},jZ=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var l=e.domain();if(!l.length)return null;var d=UQ(l,a,o);return e.domain([hm(d),fm(d)]),{niceTicks:d}}if(a&&i==="number"){var f=e.domain(),h=FQ(f,a,o);return{niceTicks:h}}return null};function RC(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ve(i[e.dataKey])){var o=Xf(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var c=Mn(i,ve(s)?e.dataKey:s);return ve(c)?null:e.scale(c)}var IC=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var c=Mn(s,n.dataKey,n.domain[o]);return ve(c)?null:n.scale(c)-a/2+i},NZ=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},PZ=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?st(st({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Et(a)){var s=n[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},_Z=function(e){return e.reduce(function(n,r){return[hm(r.concat([n[0]]).filter(te)),fm(r.concat([n[1]]).filter(te))]},[1/0,-1/0])},uR=function(e,n,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,c=o.reduce(function(l,d){var f=_Z(d.slice(n,r+1));return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},MC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,DC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,h0=function(e,n,r){if(me(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(te(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(MC.test(e[0])){var a=+MC.exec(e[0])[1];i[0]=n[0]-a}else me(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(te(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(DC.test(e[1])){var s=+DC.exec(e[1])[1];i[1]=n[1]+s}else me(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},jh=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=hw(n,function(f){return f.coordinate}),s=1/0,o=1,c=a.length;o<c;o++){var l=a[o],d=a[o-1];s=Math.min((l.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},LC=function(e,n,r){return!e||!e.length||pm(e,Xn(r,"type.defaultProps.domain"))?n:e},dR=function(e,n){var r=e.type.defaultProps?st(st({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,c=r.tooltipType,l=r.chartType,d=r.hide;return st(st({},Ce(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:Uw(e),value:Mn(n,i),type:c,payload:n,chartType:l,hide:d})};function lu(t){"@babel/helpers - typeof";return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lu(t)}function $C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$C(Object(n),!0).forEach(function(r){OZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$C(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OZ(t,e,n){return e=AZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AZ(t){var e=RZ(t,"string");return lu(e)=="symbol"?e:e+""}function RZ(t,e){if(lu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nh=Math.PI/180,IZ=function(e){return e*180/Math.PI},Ft=function(e,n,r,i){return{x:e+Math.cos(-Nh*i)*r,y:n+Math.sin(-Nh*i)*r}},MZ=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},DZ=function(e,n){var r=e.x,i=e.y,a=n.cx,s=n.cy,o=MZ({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var c=(r-a)/o,l=Math.acos(c);return i>s&&(l=2*Math.PI-l),{radius:o,angle:IZ(l),angleInRadian:l}},LZ=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},$Z=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},FC=function(e,n){var r=e.x,i=e.y,a=DZ({x:r,y:i},n),s=a.radius,o=a.angle,c=n.innerRadius,l=n.outerRadius;if(s<c||s>l)return!1;if(s===0)return!0;var d=LZ(n),f=d.startAngle,h=d.endAngle,p=o,g;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=f}return g?UC(UC({},n),{},{radius:s,angle:$Z(p,n)}):null};function uu(t){"@babel/helpers - typeof";return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uu(t)}var UZ=["offset"];function FZ(t){return VZ(t)||qZ(t)||zZ(t)||BZ()}function BZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zZ(t,e){if(t){if(typeof t=="string")return p0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p0(t,e)}}function qZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VZ(t){if(Array.isArray(t))return p0(t)}function p0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function WZ(t,e){if(t==null)return{};var n=HZ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HZ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function BC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BC(Object(n),!0).forEach(function(r){GZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GZ(t,e,n){return e=KZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KZ(t){var e=JZ(t,"string");return uu(e)=="symbol"?e:e+""}function JZ(t,e){if(uu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function du(){return du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},du.apply(this,arguments)}var YZ=function(e){var n=e.value,r=e.formatter,i=ve(e.children)?n:e.children;return me(r)?r(i):i},XZ=function(e,n){var r=br(n-e),i=Math.min(Math.abs(n-e),360);return r*i},QZ=function(e,n,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,c=a,l=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,p=c.startAngle,g=c.endAngle,m=c.clockWise,b=(f+h)/2,v=XZ(p,g),x=v>=0?1:-1,S,T;i==="insideStart"?(S=p+x*s,T=m):i==="insideEnd"?(S=g-x*s,T=!m):i==="end"&&(S=g+x*s,T=m),T=v<=0?T:!T;var w=Ft(l,d,b,S),k=Ft(l,d,b,S+(T?1:-1)*359),C="M".concat(w.x,",").concat(w.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(k.x,",").concat(k.y),E=ve(e.id)?Vu("recharts-radial-line-"):e.id;return M.createElement("text",du({},r,{dominantBaseline:"central",className:Ne("recharts-radial-bar-label",o)}),M.createElement("defs",null,M.createElement("path",{id:E,d:C})),M.createElement("textPath",{xlinkHref:"#".concat(E)},n))},ZZ=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,s=a.cx,o=a.cy,c=a.innerRadius,l=a.outerRadius,d=a.startAngle,f=a.endAngle,h=(d+f)/2;if(i==="outside"){var p=Ft(s,o,l+r,h),g=p.x,m=p.y;return{x:g,y:m,textAnchor:g>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var b=(c+l)/2,v=Ft(s,o,b,h),x=v.x,S=v.y;return{x,y:S,textAnchor:"middle",verticalAnchor:"middle"}},eee=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=n,o=s.x,c=s.y,l=s.width,d=s.height,f=d>=0?1:-1,h=f*i,p=f>0?"end":"start",g=f>0?"start":"end",m=l>=0?1:-1,b=m*i,v=m>0?"end":"start",x=m>0?"start":"end";if(a==="top"){var S={x:o+l/2,y:c-f*i,textAnchor:"middle",verticalAnchor:p};return wt(wt({},S),r?{height:Math.max(c-r.y,0),width:l}:{})}if(a==="bottom"){var T={x:o+l/2,y:c+d+h,textAnchor:"middle",verticalAnchor:g};return wt(wt({},T),r?{height:Math.max(r.y+r.height-(c+d),0),width:l}:{})}if(a==="left"){var w={x:o-b,y:c+d/2,textAnchor:v,verticalAnchor:"middle"};return wt(wt({},w),r?{width:Math.max(w.x-r.x,0),height:d}:{})}if(a==="right"){var k={x:o+l+b,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return wt(wt({},k),r?{width:Math.max(r.x+r.width-k.x,0),height:d}:{})}var C=r?{width:l,height:d}:{};return a==="insideLeft"?wt({x:o+b,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},C):a==="insideRight"?wt({x:o+l-b,y:c+d/2,textAnchor:v,verticalAnchor:"middle"},C):a==="insideTop"?wt({x:o+l/2,y:c+h,textAnchor:"middle",verticalAnchor:g},C):a==="insideBottom"?wt({x:o+l/2,y:c+d-h,textAnchor:"middle",verticalAnchor:p},C):a==="insideTopLeft"?wt({x:o+b,y:c+h,textAnchor:x,verticalAnchor:g},C):a==="insideTopRight"?wt({x:o+l-b,y:c+h,textAnchor:v,verticalAnchor:g},C):a==="insideBottomLeft"?wt({x:o+b,y:c+d-h,textAnchor:x,verticalAnchor:p},C):a==="insideBottomRight"?wt({x:o+l-b,y:c+d-h,textAnchor:v,verticalAnchor:p},C):fc(a)&&(te(a.x)||Ga(a.x))&&(te(a.y)||Ga(a.y))?wt({x:o+fs(a.x,l),y:c+fs(a.y,d),textAnchor:"end",verticalAnchor:"end"},C):wt({x:o+l/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},C)},tee=function(e){return"cx"in e&&te(e.cx)};function Jt(t){var e=t.offset,n=e===void 0?5:e,r=WZ(t,UZ),i=wt({offset:n},r),a=i.viewBox,s=i.position,o=i.value,c=i.children,l=i.content,d=i.className,f=d===void 0?"":d,h=i.textBreakAll;if(!a||ve(o)&&ve(c)&&!y.isValidElement(l)&&!me(l))return null;if(y.isValidElement(l))return y.cloneElement(l,i);var p;if(me(l)){if(p=y.createElement(l,i),y.isValidElement(p))return p}else p=YZ(i);var g=tee(a),m=Ce(i,!0);if(g&&(s==="insideStart"||s==="insideEnd"||s==="end"))return QZ(i,p,m);var b=g?ZZ(i):eee(i);return M.createElement(hh,du({className:Ne("recharts-label",f)},m,b,{breakAll:h}),p)}Jt.displayName="Label";var fR=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,c=e.radius,l=e.innerRadius,d=e.outerRadius,f=e.x,h=e.y,p=e.top,g=e.left,m=e.width,b=e.height,v=e.clockWise,x=e.labelViewBox;if(x)return x;if(te(m)&&te(b)){if(te(f)&&te(h))return{x:f,y:h,width:m,height:b};if(te(p)&&te(g))return{x:p,y:g,width:m,height:b}}return te(f)&&te(h)?{x:f,y:h,width:0,height:0}:te(n)&&te(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:l||0,outerRadius:d||c||o||0,clockWise:v}:e.viewBox?e.viewBox:{}},nee=function(e,n){return e?e===!0?M.createElement(Jt,{key:"label-implicit",viewBox:n}):Et(e)?M.createElement(Jt,{key:"label-implicit",viewBox:n,value:e}):y.isValidElement(e)?e.type===Jt?y.cloneElement(e,{key:"label-implicit",viewBox:n}):M.createElement(Jt,{key:"label-implicit",content:e,viewBox:n}):me(e)?M.createElement(Jt,{key:"label-implicit",content:e,viewBox:n}):fc(e)?M.createElement(Jt,du({viewBox:n},e,{key:"label-implicit"})):null:null},ree=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=fR(e),s=Qn(i,Jt).map(function(c,l){return y.cloneElement(c,{viewBox:n||a,key:"label-".concat(l)})});if(!r)return s;var o=nee(e.label,n||a);return[o].concat(FZ(s))};Jt.parseViewBox=fR;Jt.renderCallByParent=ree;function iee(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var aee=iee;const see=Ue(aee);function fu(t){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fu(t)}var oee=["valueAccessor"],cee=["data","dataKey","clockWise","id","textBreakAll"];function lee(t){return hee(t)||fee(t)||dee(t)||uee()}function uee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dee(t,e){if(t){if(typeof t=="string")return m0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m0(t,e)}}function fee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hee(t){if(Array.isArray(t))return m0(t)}function m0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ph(){return Ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ph.apply(this,arguments)}function zC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zC(Object(n),!0).forEach(function(r){pee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pee(t,e,n){return e=mee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mee(t){var e=gee(t,"string");return fu(e)=="symbol"?e:e+""}function gee(t,e){if(fu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VC(t,e){if(t==null)return{};var n=vee(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var yee=function(e){return Array.isArray(e.value)?see(e.value):e.value};function pa(t){var e=t.valueAccessor,n=e===void 0?yee:e,r=VC(t,oee),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,c=r.textBreakAll,l=VC(r,cee);return!i||!i.length?null:M.createElement(ht,{className:"recharts-label-list"},i.map(function(d,f){var h=ve(a)?n(d,f):Mn(d&&d.payload,a),p=ve(o)?{}:{id:"".concat(o,"-").concat(f)};return M.createElement(Jt,Ph({},Ce(d,!0),l,p,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:Jt.parseViewBox(ve(s)?d:qC(qC({},d),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}pa.displayName="LabelList";function bee(t,e){return t?t===!0?M.createElement(pa,{key:"labelList-implicit",data:e}):M.isValidElement(t)||me(t)?M.createElement(pa,{key:"labelList-implicit",data:e,content:t}):fc(t)?M.createElement(pa,Ph({data:e},t,{key:"labelList-implicit"})):null:null}function xee(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Qn(r,pa).map(function(s,o){return y.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var a=bee(t.label,e);return[a].concat(lee(i))}pa.renderCallByParent=xee;function hu(t){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hu(t)}function g0(){return g0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g0.apply(this,arguments)}function WC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WC(Object(n),!0).forEach(function(r){wee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wee(t,e,n){return e=See(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function See(t){var e=kee(t,"string");return hu(e)=="symbol"?e:e+""}function kee(t,e){if(hu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tee=function(e,n){var r=br(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Ad=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,c=e.cornerRadius,l=e.cornerIsExternal,d=c*(o?1:-1)+i,f=Math.asin(c/d)/Nh,h=l?a:a+s*f,p=Ft(n,r,d,h),g=Ft(n,r,i,h),m=l?a-s*f:a,b=Ft(n,r,d*Math.cos(f*Nh),m);return{center:p,circleTangency:g,lineTangency:b,theta:f}},hR=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,c=Tee(s,o),l=s+c,d=Ft(n,r,a,s),f=Ft(n,r,a,l),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>l),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var p=Ft(n,r,i,s),g=Ft(n,r,i,l);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=l),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},Cee=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,c=e.cornerIsExternal,l=e.startAngle,d=e.endAngle,f=br(d-l),h=Ad({cx:n,cy:r,radius:a,angle:l,sign:f,cornerRadius:s,cornerIsExternal:c}),p=h.circleTangency,g=h.lineTangency,m=h.theta,b=Ad({cx:n,cy:r,radius:a,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:c}),v=b.circleTangency,x=b.lineTangency,S=b.theta,T=c?Math.abs(l-d):Math.abs(l-d)-m-S;if(T<0)return o?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):hR({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:l,endAngle:d});var w="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(T>180),",").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
  `);if(i>0){var k=Ad({cx:n,cy:r,radius:i,angle:l,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),C=k.circleTangency,E=k.lineTangency,j=k.theta,P=Ad({cx:n,cy:r,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),N=P.circleTangency,_=P.lineTangency,A=P.theta,R=c?Math.abs(l-d):Math.abs(l-d)-j-A;if(R<0&&s===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(R>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},Eee={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},pR=function(e){var n=HC(HC({},Eee),e),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,c=n.forceCornerRadius,l=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,h=n.className;if(s<a||d===f)return null;var p=Ne("recharts-sector",h),g=s-a,m=fs(o,g,0,!0),b;return m>0&&Math.abs(d-f)<360?b=Cee({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,g/2),forceCornerRadius:c,cornerIsExternal:l,startAngle:d,endAngle:f}):b=hR({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:f}),M.createElement("path",g0({},Ce(n,!0),{className:p,d:b,role:"img"}))};function pu(t){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pu(t)}function v0(){return v0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v0.apply(this,arguments)}function GC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GC(Object(n),!0).forEach(function(r){jee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jee(t,e,n){return e=Nee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nee(t){var e=Pee(t,"string");return pu(e)=="symbol"?e:e+""}function Pee(t,e){if(pu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JC={curveBasisClosed:P8,curveBasisOpen:_8,curveBasis:N8,curveBumpX:p8,curveBumpY:m8,curveLinearClosed:O8,curveLinear:tm,curveMonotoneX:A8,curveMonotoneY:R8,curveNatural:I8,curveStep:M8,curveStepAfter:L8,curveStepBefore:D8},Rd=function(e){return e.x===+e.x&&e.y===+e.y},Fc=function(e){return e.x},Bc=function(e){return e.y},_ee=function(e,n){if(me(e))return e;var r="curve".concat(Zp(e));return(r==="curveMonotone"||r==="curveBump")&&n?JC["".concat(r).concat(n==="vertical"?"Y":"X")]:JC[r]||tm},Oee=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,c=e.connectNulls,l=c===void 0?!1:c,d=_ee(r,o),f=l?a.filter(function(m){return Rd(m)}):a,h;if(Array.isArray(s)){var p=l?s.filter(function(m){return Rd(m)}):s,g=f.map(function(m,b){return KC(KC({},m),{},{base:p[b]})});return o==="vertical"?h=kd().y(Bc).x1(Fc).x0(function(m){return m.base.x}):h=kd().x(Fc).y1(Bc).y0(function(m){return m.base.y}),h.defined(Rd).curve(d),h(g)}return o==="vertical"&&te(s)?h=kd().y(Bc).x1(Fc).x0(s):te(s)?h=kd().x(Fc).y1(Bc).y0(s):h=pO().x(Fc).y(Bc),h.defined(Rd).curve(d),h(f)},y0=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?Oee(e):i;return y.createElement("path",v0({},Ce(e,!1),Qf(e),{className:Ne("recharts-curve",n),d:s,ref:a}))},mR={exports:{}},Aee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ree=Aee,Iee=Ree;function gR(){}function vR(){}vR.resetWarningCache=gR;var Mee=function(){function t(r,i,a,s,o,c){if(c!==Iee){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:vR,resetWarningCache:gR};return n.PropTypes=n,n};mR.exports=Mee();var Dee=mR.exports;const _e=Ue(Dee);var Lee=Object.getOwnPropertyNames,$ee=Object.getOwnPropertySymbols,Uee=Object.prototype.hasOwnProperty;function YC(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function Id(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);var c=t(n,r,i);return a.delete(n),a.delete(r),c}}function Fee(t){return t!=null?t[Symbol.toStringTag]:void 0}function XC(t){return Lee(t).concat($ee(t))}var Bee=Object.hasOwn||function(t,e){return Uee.call(t,e)};function Ps(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var zee="__v",qee="__o",Vee="_owner",QC=Object.getOwnPropertyDescriptor,ZC=Object.keys;function Wee(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function Hee(t,e){return Ps(t.getTime(),e.getTime())}function Gee(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Kee(t,e){return t===e}function eE(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),s,o,c=0;(s=a.next())&&!s.done;){for(var l=e.entries(),d=!1,f=0;(o=l.next())&&!o.done;){if(i[f]){f++;continue}var h=s.value,p=o.value;if(n.equals(h[0],p[0],c,f,t,e,n)&&n.equals(h[1],p[1],h[0],p[0],t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1;c++}return!0}var Jee=Ps;function Yee(t,e,n){var r=ZC(t),i=r.length;if(ZC(e).length!==i)return!1;for(;i-- >0;)if(!yR(t,e,n,r[i]))return!1;return!0}function zc(t,e,n){var r=XC(t),i=r.length;if(XC(e).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=r[i],!yR(t,e,n,a)||(s=QC(t,a),o=QC(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function Xee(t,e){return Ps(t.valueOf(),e.valueOf())}function Qee(t,e){return t.source===e.source&&t.flags===e.flags}function tE(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),s,o;(s=a.next())&&!s.done;){for(var c=e.values(),l=!1,d=0;(o=c.next())&&!o.done;){if(!i[d]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){l=i[d]=!0;break}d++}if(!l)return!1}return!0}function Zee(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function ete(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function yR(t,e,n,r){return(r===Vee||r===qee||r===zee)&&(t.$$typeof||e.$$typeof)?!0:Bee(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var tte="[object Arguments]",nte="[object Boolean]",rte="[object Date]",ite="[object Error]",ate="[object Map]",ste="[object Number]",ote="[object Object]",cte="[object RegExp]",lte="[object Set]",ute="[object String]",dte="[object URL]",fte=Array.isArray,nE=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,rE=Object.assign,hte=Object.prototype.toString.call.bind(Object.prototype.toString);function pte(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,s=t.areNumbersEqual,o=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,l=t.areRegExpsEqual,d=t.areSetsEqual,f=t.areTypedArraysEqual,h=t.areUrlsEqual,p=t.unknownTagComparators;return function(m,b,v){if(m===b)return!0;if(m==null||b==null)return!1;var x=typeof m;if(x!==typeof b)return!1;if(x!=="object")return x==="number"?s(m,b,v):x==="function"?i(m,b,v):!1;var S=m.constructor;if(S!==b.constructor)return!1;if(S===Object)return o(m,b,v);if(fte(m))return e(m,b,v);if(nE!=null&&nE(m))return f(m,b,v);if(S===Date)return n(m,b,v);if(S===RegExp)return l(m,b,v);if(S===Map)return a(m,b,v);if(S===Set)return d(m,b,v);var T=hte(m);if(T===rte)return n(m,b,v);if(T===cte)return l(m,b,v);if(T===ate)return a(m,b,v);if(T===lte)return d(m,b,v);if(T===ote)return typeof m.then!="function"&&typeof b.then!="function"&&o(m,b,v);if(T===dte)return h(m,b,v);if(T===ite)return r(m,b,v);if(T===tte)return o(m,b,v);if(T===nte||T===ste||T===ute)return c(m,b,v);if(p){var w=p[T];if(!w){var k=Fee(m);k&&(w=p[k])}if(w)return w(m,b,v)}return!1}}function mte(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?zc:Wee,areDatesEqual:Hee,areErrorsEqual:Gee,areFunctionsEqual:Kee,areMapsEqual:r?YC(eE,zc):eE,areNumbersEqual:Jee,areObjectsEqual:r?zc:Yee,arePrimitiveWrappersEqual:Xee,areRegExpsEqual:Qee,areSetsEqual:r?YC(tE,zc):tE,areTypedArraysEqual:r?zc:Zee,areUrlsEqual:ete,unknownTagComparators:void 0};if(n&&(i=rE({},i,n(i))),e){var a=Id(i.areArraysEqual),s=Id(i.areMapsEqual),o=Id(i.areObjectsEqual),c=Id(i.areSetsEqual);i=rE({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:c})}return i}function gte(t){return function(e,n,r,i,a,s,o){return t(e,n,o)}}function vte(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(c,l){var d=r(),f=d.cache,h=f===void 0?e?new WeakMap:void 0:f,p=d.meta;return n(c,l,{cache:h,equals:i,meta:p,strict:a})};if(e)return function(c,l){return n(c,l,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,l){return n(c,l,s)}}var yte=Oa();Oa({strict:!0});Oa({circular:!0});Oa({circular:!0,strict:!0});Oa({createInternalComparator:function(){return Ps}});Oa({strict:!0,createInternalComparator:function(){return Ps}});Oa({circular:!0,createInternalComparator:function(){return Ps}});Oa({circular:!0,createInternalComparator:function(){return Ps},strict:!0});function Oa(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,s=a===void 0?!1:a,o=mte(t),c=pte(o),l=r?r(c):gte(c);return vte({circular:n,comparator:c,createState:i,equals:l,strict:s})}function bte(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function iE(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):bte(i)};requestAnimationFrame(r)}function b0(t){"@babel/helpers - typeof";return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b0(t)}function xte(t){return Tte(t)||kte(t)||Ste(t)||wte()}function wte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ste(t,e){if(t){if(typeof t=="string")return aE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aE(t,e)}}function aE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kte(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Tte(t){if(Array.isArray(t))return t}function Cte(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=xte(s),c=o[0],l=o.slice(1);if(typeof c=="number"){iE(i.bind(null,l),c);return}i(c),iE(i.bind(null,l));return}b0(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function mu(t){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mu(t)}function sE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sE(Object(n),!0).forEach(function(r){bR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bR(t,e,n){return e=Ete(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ete(t){var e=jte(t,"string");return mu(e)==="symbol"?e:String(e)}function jte(t,e){if(mu(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nte=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},Pte=function(e){return e},_te=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},bl=function(e,n){return Object.keys(n).reduce(function(r,i){return oE(oE({},r),{},bR({},i,e(i,n[i])))},{})},cE=function(e,n,r){return e.map(function(i){return"".concat(_te(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Ote(t,e){return Ite(t)||Rte(t,e)||xR(t,e)||Ate()}function Ate(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rte(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){l=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function Ite(t){if(Array.isArray(t))return t}function Mte(t){return $te(t)||Lte(t)||xR(t)||Dte()}function Dte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xR(t,e){if(t){if(typeof t=="string")return x0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x0(t,e)}}function Lte(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $te(t){if(Array.isArray(t))return x0(t)}function x0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _h=1e-4,wR=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},SR=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},lE=function(e,n){return function(r){var i=wR(e,n);return SR(i,r)}},Ute=function(e,n){return function(r){var i=wR(e,n),a=[].concat(Mte(i.map(function(s,o){return s*o}).slice(1)),[0]);return SR(a,r)}},uE=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var l=c[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),d=Ote(l,4);i=d[0],a=d[1],s=d[2],o=d[3]}}}var f=lE(i,s),h=lE(a,o),p=Ute(i,s),g=function(v){return v>1?1:v<0?0:v},m=function(v){for(var x=v>1?1:v,S=x,T=0;T<8;++T){var w=f(S)-x,k=p(S);if(Math.abs(w-x)<_h||k<_h)return h(S);S=g(S-w/k)}return h(S)};return m.isStepper=!1,m},Fte=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,c=function(d,f,h){var p=-(d-f)*r,g=h*a,m=h+(p-g)*o/1e3,b=h*o/1e3+d;return Math.abs(b-f)<_h&&Math.abs(m)<_h?[f,0]:[b,m]};return c.isStepper=!0,c.dt=o,c},Bte=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return uE(i);case"spring":return Fte();default:if(i.split("(")[0]==="cubic-bezier")return uE(i)}return typeof i=="function"?i:null};function gu(t){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gu(t)}function dE(t){return Vte(t)||qte(t)||kR(t)||zte()}function zte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qte(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vte(t){if(Array.isArray(t))return S0(t)}function fE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $t(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fE(Object(n),!0).forEach(function(r){w0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function w0(t,e,n){return e=Wte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wte(t){var e=Hte(t,"string");return gu(e)==="symbol"?e:String(e)}function Hte(t,e){if(gu(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gte(t,e){return Yte(t)||Jte(t,e)||kR(t,e)||Kte()}function Kte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kR(t,e){if(t){if(typeof t=="string")return S0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S0(t,e)}}function S0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Jte(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){l=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function Yte(t){if(Array.isArray(t))return t}var Oh=function(e,n,r){return e+(n-e)*r},k0=function(e){var n=e.from,r=e.to;return n!==r},Xte=function t(e,n,r){var i=bl(function(a,s){if(k0(s)){var o=e(s.from,s.to,s.velocity),c=Gte(o,2),l=c[0],d=c[1];return $t($t({},s),{},{from:l,velocity:d})}return s},n);return r<1?bl(function(a,s){return k0(s)?$t($t({},s),{},{velocity:Oh(s.velocity,i[a].velocity,r),from:Oh(s.from,i[a].from,r)}):s},n):t(e,i,r-1)};const Qte=function(t,e,n,r,i){var a=Nte(t,e),s=a.reduce(function(b,v){return $t($t({},b),{},w0({},v,[t[v],e[v]]))},{}),o=a.reduce(function(b,v){return $t($t({},b),{},w0({},v,{from:t[v],velocity:0,to:e[v]}))},{}),c=-1,l,d,f=function(){return null},h=function(){return bl(function(v,x){return x.from},o)},p=function(){return!Object.values(o).filter(k0).length},g=function(v){l||(l=v);var x=v-l,S=x/n.dt;o=Xte(n,o,S),i($t($t($t({},t),e),h())),l=v,p()||(c=requestAnimationFrame(f))},m=function(v){d||(d=v);var x=(v-d)/r,S=bl(function(w,k){return Oh.apply(void 0,dE(k).concat([n(x)]))},s);if(i($t($t($t({},t),e),S)),x<1)c=requestAnimationFrame(f);else{var T=bl(function(w,k){return Oh.apply(void 0,dE(k).concat([n(1)]))},s);i($t($t($t({},t),e),T))}};return f=n.isStepper?g:m,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function Bo(t){"@babel/helpers - typeof";return Bo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bo(t)}var Zte=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function ene(t,e){if(t==null)return{};var n=tne(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tne(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Hg(t){return ane(t)||ine(t)||rne(t)||nne()}function nne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rne(t,e){if(t){if(typeof t=="string")return T0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T0(t,e)}}function ine(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ane(t){if(Array.isArray(t))return T0(t)}function T0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ar(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hE(Object(n),!0).forEach(function(r){rl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rl(t,e,n){return e=TR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TR(r.key),r)}}function one(t,e,n){return e&&pE(t.prototype,e),n&&pE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function TR(t){var e=cne(t,"string");return Bo(e)==="symbol"?e:String(e)}function cne(t,e){if(Bo(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Bo(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C0(t,e)}function C0(t,e){return C0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},C0(t,e)}function une(t){var e=dne();return function(){var r=Ah(t),i;if(e){var a=Ah(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return E0(this,i)}}function E0(t,e){if(e&&(Bo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j0(t)}function j0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ah(t){return Ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ah(t)}var vm=function(t){lne(n,t);var e=une(n);function n(r,i){var a;sne(this,n),a=e.call(this,r,i);var s=a.props,o=s.isActive,c=s.attributeName,l=s.from,d=s.to,f=s.steps,h=s.children,p=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(j0(a)),a.changeStyle=a.changeStyle.bind(j0(a)),!o||p<=0)return a.state={style:{}},typeof h=="function"&&(a.state={style:d}),E0(a);if(f&&f.length)a.state={style:f[0].style};else if(l){if(typeof h=="function")return a.state={style:l},E0(a);a.state={style:c?rl({},c,l):l}}else a.state={style:{}};return a}return one(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,c=a.attributeName,l=a.shouldReAnimate,d=a.to,f=a.from,h=this.state.style;if(o){if(!s){var p={style:c?rl({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(p);return}if(!(yte(i.to,d)&&i.canBegin&&i.isActive)){var g=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=g||l?f:i.to;if(this.state&&h){var b={style:c?rl({},c,m):m};(c&&h[c]!==m||!c&&h!==m)&&this.setState(b)}this.runAnimation(ar(ar({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,c=i.duration,l=i.easing,d=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,p=Qte(s,o,Bte(l),c,this.changeStyle),g=function(){a.stopJSAnimation=p()};this.manager.start([h,d,g,c,f])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,c=i.onAnimationStart,l=s[0],d=l.style,f=l.duration,h=f===void 0?0:f,p=function(m,b,v){if(v===0)return m;var x=b.duration,S=b.easing,T=S===void 0?"ease":S,w=b.style,k=b.properties,C=b.onAnimationEnd,E=v>0?s[v-1]:b,j=k||Object.keys(w);if(typeof T=="function"||T==="spring")return[].concat(Hg(m),[a.runJSAnimation.bind(a,{from:E.style,to:w,duration:x,easing:T}),x]);var P=cE(j,x,T),N=ar(ar(ar({},E.style),w),{},{transition:P});return[].concat(Hg(m),[N,x,C]).filter(Pte)};return this.manager.start([c].concat(Hg(s.reduce(p,[d,Math.max(h,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Cte());var a=i.begin,s=i.duration,o=i.attributeName,c=i.to,l=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,p=i.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof l=="function"||typeof p=="function"||l==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var m=o?rl({},o,c):c,b=cE(Object.keys(m),s,l);g.start([d,a,ar(ar({},m),{},{transition:b}),s,f])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=ene(i,Zte),l=y.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!o||l===0||s<=0)return a;var f=function(p){var g=p.props,m=g.style,b=m===void 0?{}:m,v=g.className,x=y.cloneElement(p,ar(ar({},c),{},{style:ar(ar({},b),d),className:v}));return x};return l===1?f(y.Children.only(a)):M.createElement("div",null,y.Children.map(a,function(h){return f(h)}))}}]),n}(y.PureComponent);vm.displayName="Animate";vm.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};vm.propTypes={from:_e.oneOfType([_e.object,_e.string]),to:_e.oneOfType([_e.object,_e.string]),attributeName:_e.string,duration:_e.number,begin:_e.number,easing:_e.oneOfType([_e.string,_e.func]),steps:_e.arrayOf(_e.shape({duration:_e.number.isRequired,style:_e.object.isRequired,easing:_e.oneOfType([_e.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),_e.func]),properties:_e.arrayOf("string"),onAnimationEnd:_e.func})),children:_e.oneOfType([_e.node,_e.func]),isActive:_e.bool,canBegin:_e.bool,onAnimationEnd:_e.func,shouldReAnimate:_e.bool,onAnimationStart:_e.func,onAnimationReStart:_e.func};const zo=vm;function vu(t){"@babel/helpers - typeof";return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vu(t)}function Rh(){return Rh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rh.apply(this,arguments)}function fne(t,e){return gne(t)||mne(t,e)||pne(t,e)||hne()}function hne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pne(t,e){if(t){if(typeof t=="string")return mE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mE(t,e)}}function mE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mne(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){l=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function gne(t){if(Array.isArray(t))return t}function gE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gE(Object(n),!0).forEach(function(r){vne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vne(t,e,n){return e=yne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yne(t){var e=bne(t,"string");return vu(e)=="symbol"?e:e+""}function bne(t,e){if(vu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yE=function(e,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,c=r>=0?1:-1,l=i>=0&&r>=0||i<0&&r<0?1:0,d;if(s>0&&a instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=a[h]>s?s:a[h];d="M".concat(e,",").concat(n+o*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(l,",").concat(e+c*f[0],",").concat(n)),d+="L ".concat(e+r-c*f[1],",").concat(n),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(n+o*f[1])),d+="L ".concat(e+r,",").concat(n+i-o*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(l,`,
        `).concat(e+r-c*f[2],",").concat(n+i)),d+="L ".concat(e+c*f[3],",").concat(n+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(n+i-o*f[3])),d+="Z"}else if(s>0&&a===+a&&a>0){var g=Math.min(s,a);d="M ".concat(e,",").concat(n+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e+c*g,",").concat(n,`
            L `).concat(e+r-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e+r,",").concat(n+o*g,`
            L `).concat(e+r,",").concat(n+i-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e+r-c*g,",").concat(n+i,`
            L `).concat(e+c*g,",").concat(n+i,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e,",").concat(n+i-o*g," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},xne=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,s=n.y,o=n.width,c=n.height;if(Math.abs(o)>0&&Math.abs(c)>0){var l=Math.min(a,a+o),d=Math.max(a,a+o),f=Math.min(s,s+c),h=Math.max(s,s+c);return r>=l&&r<=d&&i>=f&&i<=h}return!1},wne={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Fw=function(e){var n=vE(vE({},wne),e),r=y.useRef(),i=y.useState(-1),a=fne(i,2),s=a[0],o=a[1];y.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&o(T)}catch{}},[]);var c=n.x,l=n.y,d=n.width,f=n.height,h=n.radius,p=n.className,g=n.animationEasing,m=n.animationDuration,b=n.animationBegin,v=n.isAnimationActive,x=n.isUpdateAnimationActive;if(c!==+c||l!==+l||d!==+d||f!==+f||d===0||f===0)return null;var S=Ne("recharts-rectangle",p);return x?M.createElement(zo,{canBegin:s>0,from:{width:d,height:f,x:c,y:l},to:{width:d,height:f,x:c,y:l},duration:m,animationEasing:g,isActive:x},function(T){var w=T.width,k=T.height,C=T.x,E=T.y;return M.createElement(zo,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:m,isActive:v,easing:g},M.createElement("path",Rh({},Ce(n,!0),{className:S,d:yE(C,E,w,k,h),ref:r})))}):M.createElement("path",Rh({},Ce(n,!0),{className:S,d:yE(c,l,d,f,h)}))};function N0(){return N0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N0.apply(this,arguments)}var Bw=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,s=Ne("recharts-dot",a);return n===+n&&r===+r&&i===+i?y.createElement("circle",N0({},Ce(e,!1),Qf(e),{className:s,cx:n,cy:r,r:i})):null};function yu(t){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yu(t)}var Sne=["x","y","top","left","width","height","className"];function P0(){return P0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P0.apply(this,arguments)}function bE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bE(Object(n),!0).forEach(function(r){Tne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tne(t,e,n){return e=Cne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cne(t){var e=Ene(t,"string");return yu(e)=="symbol"?e:e+""}function Ene(t,e){if(yu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jne(t,e){if(t==null)return{};var n=Nne(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Nne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Pne=function(e,n,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},_ne=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,c=e.left,l=c===void 0?0:c,d=e.width,f=d===void 0?0:d,h=e.height,p=h===void 0?0:h,g=e.className,m=jne(e,Sne),b=kne({x:r,y:a,top:o,left:l,width:f,height:p},m);return!te(r)||!te(a)||!te(f)||!te(p)||!te(o)||!te(l)?null:M.createElement("path",P0({},Ce(b,!0),{className:Ne("recharts-cross",g),d:Pne(r,a,f,p,o,l)}))},One=$O,Ane=One(Object.getPrototypeOf,Object),Rne=Ane,Ine=Mi,Mne=Rne,Dne=Di,Lne="[object Object]",$ne=Function.prototype,Une=Object.prototype,CR=$ne.toString,Fne=Une.hasOwnProperty,Bne=CR.call(Object);function zne(t){if(!Dne(t)||Ine(t)!=Lne)return!1;var e=Mne(t);if(e===null)return!0;var n=Fne.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&CR.call(n)==Bne}var qne=zne;const Vne=Ue(qne);var Wne=Mi,Hne=Di,Gne="[object Boolean]";function Kne(t){return t===!0||t===!1||Hne(t)&&Wne(t)==Gne}var Jne=Kne;const Yne=Ue(Jne);function bu(t){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bu(t)}function Ih(){return Ih=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ih.apply(this,arguments)}function Xne(t,e){return tre(t)||ere(t,e)||Zne(t,e)||Qne()}function Qne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zne(t,e){if(t){if(typeof t=="string")return xE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xE(t,e)}}function xE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ere(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){l=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function tre(t){if(Array.isArray(t))return t}function wE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wE(Object(n),!0).forEach(function(r){nre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nre(t,e,n){return e=rre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rre(t){var e=ire(t,"string");return bu(e)=="symbol"?e:e+""}function ire(t,e){if(bu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kE=function(e,n,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-s/2,",").concat(n+a),o+="L ".concat(e+r-s/2-i,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},are={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sre=function(e){var n=SE(SE({},are),e),r=y.useRef(),i=y.useState(-1),a=Xne(i,2),s=a[0],o=a[1];y.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&o(S)}catch{}},[]);var c=n.x,l=n.y,d=n.upperWidth,f=n.lowerWidth,h=n.height,p=n.className,g=n.animationEasing,m=n.animationDuration,b=n.animationBegin,v=n.isUpdateAnimationActive;if(c!==+c||l!==+l||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var x=Ne("recharts-trapezoid",p);return v?M.createElement(zo,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:l},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:l},duration:m,animationEasing:g,isActive:v},function(S){var T=S.upperWidth,w=S.lowerWidth,k=S.height,C=S.x,E=S.y;return M.createElement(zo,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:m,easing:g},M.createElement("path",Ih({},Ce(n,!0),{className:x,d:kE(C,E,T,w,k),ref:r})))}):M.createElement("g",null,M.createElement("path",Ih({},Ce(n,!0),{className:x,d:kE(c,l,d,f,h)})))},ore=["option","shapeType","propTransformer","activeClassName","isActive"];function xu(t){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xu(t)}function cre(t,e){if(t==null)return{};var n=lre(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function TE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TE(Object(n),!0).forEach(function(r){ure(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ure(t,e,n){return e=dre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dre(t){var e=fre(t,"string");return xu(e)=="symbol"?e:e+""}function fre(t,e){if(xu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hre(t,e){return Mh(Mh({},e),t)}function pre(t,e){return t==="symbols"}function CE(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return M.createElement(Fw,n);case"trapezoid":return M.createElement(sre,n);case"sector":return M.createElement(pR,n);case"symbols":if(pre(e))return M.createElement(aw,n);break;default:return null}}function mre(t){return y.isValidElement(t)?t.props:t}function gre(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?hre:r,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,c=cre(t,ore),l;if(y.isValidElement(e))l=y.cloneElement(e,Mh(Mh({},c),mre(e)));else if(me(e))l=e(c);else if(Vne(e)&&!Yne(e)){var d=i(e,c);l=M.createElement(CE,{shapeType:n,elementProps:d})}else{var f=c;l=M.createElement(CE,{shapeType:n,elementProps:f})}return o?M.createElement(ht,{className:s},l):l}function ym(t,e){return e!=null&&"trapezoids"in t.props}function bm(t,e){return e!=null&&"sectors"in t.props}function wu(t,e){return e!=null&&"points"in t.props}function vre(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function yre(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function bre(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function xre(t,e){var n;return ym(t,e)?n=vre:bm(t,e)?n=yre:wu(t,e)&&(n=bre),n}function wre(t,e){var n;return ym(t,e)?n="trapezoids":bm(t,e)?n="sectors":wu(t,e)&&(n="points"),n}function Sre(t,e){if(ym(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(bm(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return wu(t,e)?e.payload:{}}function kre(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=wre(n,e),a=Sre(n,e),s=r.filter(function(c,l){var d=pm(a,c),f=n.props[i].filter(function(g){var m=xre(n,e);return m(g,e)}),h=n.props[i].indexOf(f[f.length-1]),p=l===h;return d&&p}),o=r.indexOf(s[s.length-1]);return o}var Tre=Math.ceil,Cre=Math.max;function Ere(t,e,n,r){for(var i=-1,a=Cre(Tre((e-t)/(n||1)),0),s=Array(a);a--;)s[r?a:++i]=t,t+=n;return s}var jre=Ere,Nre=rA,EE=1/0,Pre=17976931348623157e292;function _re(t){if(!t)return t===0?t:0;if(t=Nre(t),t===EE||t===-EE){var e=t<0?-1:1;return e*Pre}return t===t?t:0}var ER=_re,Ore=jre,Are=am,Gg=ER;function Rre(t){return function(e,n,r){return r&&typeof r!="number"&&Are(e,n,r)&&(n=r=void 0),e=Gg(e),n===void 0?(n=e,e=0):n=Gg(n),r=r===void 0?e<n?1:-1:Gg(r),Ore(e,n,r,t)}}var Ire=Rre,Mre=Ire,Dre=Mre(),Lre=Dre;const Dh=Ue(Lre);function Su(t){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Su(t)}function jE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jE(Object(n),!0).forEach(function(r){jR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jR(t,e,n){return e=$re(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $re(t){var e=Ure(t,"string");return Su(e)=="symbol"?e:e+""}function Ure(t,e){if(Su(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Su(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fre=["Webkit","Moz","O","ms"],Bre=function(e,n){if(!e)return null;var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=Fre.reduce(function(a,s){return NE(NE({},a),{},jR({},s+r,n))},{});return i[e]=n,i};function qo(t){"@babel/helpers - typeof";return qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(t)}function Lh(){return Lh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lh.apply(this,arguments)}function PE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PE(Object(n),!0).forEach(function(r){En(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,PR(r.key),r)}}function qre(t,e,n){return e&&_E(t.prototype,e),n&&_E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vre(t,e,n){return e=$h(e),Wre(t,NR()?Reflect.construct(e,n||[],$h(t).constructor):e.apply(t,n))}function Wre(t,e){if(e&&(qo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hre(t)}function Hre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NR=function(){return!!t})()}function $h(t){return $h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$h(t)}function Gre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_0(t,e)}function _0(t,e){return _0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_0(t,e)}function En(t,e,n){return e=PR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PR(t){var e=Kre(t,"string");return qo(e)=="symbol"?e:e+""}function Kre(t,e){if(qo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jre=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,l=vl().domain(Dh(0,c)).range([a,a+s-o]),d=l.domain().map(function(f){return l(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(r),endX:l(i),scale:l,scaleValues:d}},OE=function(e){return e.changedTouches&&!!e.changedTouches.length},Vo=function(t){function e(n){var r;return zre(this,e),r=Vre(this,e,[n]),En(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),En(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),En(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s==null||s({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),En(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),En(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),En(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),En(r,"handleSlideDragStart",function(i){var a=OE(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Gre(e,t),qre(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,c=o.gap,l=o.data,d=l.length-1,f=Math.min(i,a),h=Math.max(i,a),p=e.getIndexInRange(s,f),g=e.getIndexInRange(s,h);return{startIndex:p-p%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,c=Mn(a[r],o,r);return me(s)?s(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,c=this.props,l=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,p=c.endIndex,g=c.onChange,m=r.pageX-a;m>0?m=Math.min(m,l+d-f-o,l+d-f-s):m<0&&(m=Math.max(m,l-s,l-o));var b=this.getIndex({startX:s+m,endX:o+m});(b.startIndex!==h||b.endIndex!==p)&&g&&g(b),this.setState({startX:s+m,endX:o+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=OE(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,c=i.startX,l=this.state[s],d=this.props,f=d.x,h=d.width,p=d.travellerWidth,g=d.onChange,m=d.gap,b=d.data,v={startX:this.state.startX,endX:this.state.endX},x=r.pageX-a;x>0?x=Math.min(x,f+h-p-l):x<0&&(x=Math.max(x,f-l)),v[s]=l+x;var S=this.getIndex(v),T=S.startIndex,w=S.endIndex,k=function(){var E=b.length-1;return s==="startX"&&(o>c?T%m===0:w%m===0)||o<c&&w===E||s==="endX"&&(o>c?w%m===0:T%m===0)||o>c&&w===E};this.setState(En(En({},s,l+x),"brushMoveStartX",r.pageX),function(){g&&k()&&g(S)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,c=s.startX,l=s.endX,d=this.state[i],f=o.indexOf(d);if(f!==-1){var h=f+r;if(!(h===-1||h>=o.length)){var p=o[h];i==="startX"&&p>=l||i==="endX"&&p<=c||this.setState(En({},i,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.fill,l=r.stroke;return M.createElement("rect",{stroke:l,fill:c,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.data,l=r.children,d=r.padding,f=y.Children.only(l);return f?M.cloneElement(f,{x:i,y:a,width:s,height:o,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,c=this.props,l=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,p=c.ariaLabel,g=c.data,m=c.startIndex,b=c.endIndex,v=Math.max(r,this.props.x),x=Kg(Kg({},Ce(this.props,!1)),{},{x:v,y:l,width:d,height:f}),S=p||"Min value: ".concat((a=g[m])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=g[b])===null||s===void 0?void 0:s.name);return M.createElement(ht,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),o.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,x))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,c=a.stroke,l=a.travellerWidth,d=Math.min(r,i)+l,f=Math.max(Math.abs(i-r)-l,0);return M.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:s,width:f,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,c=r.travellerWidth,l=r.stroke,d=this.state,f=d.startX,h=d.endX,p=5,g={pointerEvents:"none",fill:l};return M.createElement(ht,{className:"recharts-brush-texts"},M.createElement(hh,Lh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:s+o/2},g),this.getTextOfTick(i)),M.createElement(hh,Lh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+p,y:s+o/2},g),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,c=r.y,l=r.width,d=r.height,f=r.alwaysShowText,h=this.state,p=h.startX,g=h.endX,m=h.isTextActive,b=h.isSlideMoving,v=h.isTravellerMoving,x=h.isTravellerFocused;if(!i||!i.length||!te(o)||!te(c)||!te(l)||!te(d)||l<=0||d<=0)return null;var S=Ne("recharts-brush",a),T=M.Children.count(s)===1,w=Bre("userSelect","none");return M.createElement(ht,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(p,g),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(g,"endX"),(m||b||v||x||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,c=r.stroke,l=Math.floor(a+o/2)-1;return M.createElement(M.Fragment,null,M.createElement("rect",{x:i,y:a,width:s,height:o,fill:c,stroke:"none"}),M.createElement("line",{x1:i+1,y1:l,x2:i+s-1,y2:l,fill:"none",stroke:"#fff"}),M.createElement("line",{x1:i+1,y1:l+2,x2:i+s-1,y2:l+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return M.isValidElement(r)?a=M.cloneElement(r,i):me(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,c=r.travellerWidth,l=r.updateId,d=r.startIndex,f=r.endIndex;if(a!==i.prevData||l!==i.prevUpdateId)return Kg({prevData:a,prevTravellerWidth:c,prevUpdateId:l,prevX:o,prevWidth:s},a&&a.length?Jre({data:a,width:s,x:o,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([o,o+s-c]);var h=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:l,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var c=Math.floor((s+o)/2);r[c]>i?o=c:s=c}return i>=r[o]?o:s}}])}(y.PureComponent);En(Vo,"displayName","Brush");En(Vo,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Yre=fw;function Xre(t,e){var n;return Yre(t,function(r,i,a){return n=e(r,i,a),!n}),!!n}var Qre=Xre,Zre=_O,eie=Na,tie=Qre,nie=Tn,rie=am;function iie(t,e,n){var r=nie(t)?Zre:tie;return n&&rie(t,e,n)&&(e=void 0),r(t,eie(e))}var aie=iie;const sie=Ue(aie);var Hr=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},AE=QO;function oie(t,e,n){e=="__proto__"&&AE?AE(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var cie=oie,lie=cie,uie=YO,die=Na;function fie(t,e){var n={};return e=die(e),uie(t,function(r,i,a){lie(n,i,e(r,i,a))}),n}var hie=fie;const pie=Ue(hie);function mie(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var gie=mie,vie=fw;function yie(t,e){var n=!0;return vie(t,function(r,i,a){return n=!!e(r,i,a),n}),n}var bie=yie,xie=gie,wie=bie,Sie=Na,kie=Tn,Tie=am;function Cie(t,e,n){var r=kie(t)?xie:wie;return n&&Tie(t,e,n)&&(e=void 0),r(t,Sie(e))}var Eie=Cie;const _R=Ue(Eie);var jie=["x","y"];function ku(t){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ku(t)}function O0(){return O0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O0.apply(this,arguments)}function RE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RE(Object(n),!0).forEach(function(r){Nie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nie(t,e,n){return e=Pie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pie(t){var e=_ie(t,"string");return ku(e)=="symbol"?e:e+""}function _ie(t,e){if(ku(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ku(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oie(t,e){if(t==null)return{};var n=Aie(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Aie(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Rie(t,e){var n=t.x,r=t.y,i=Oie(t,jie),a="".concat(n),s=parseInt(a,10),o="".concat(r),c=parseInt(o,10),l="".concat(e.height||i.height),d=parseInt(l,10),f="".concat(e.width||i.width),h=parseInt(f,10);return qc(qc(qc(qc(qc({},e),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:h,name:e.name,radius:e.radius})}function IE(t){return M.createElement(gre,O0({shapeType:"rectangle",propTransformer:Rie,activeClassName:"recharts-active-bar"},t))}var Iie=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=te(r)||ZF(r);return a?e(r,i):(a||ps(!1),n)}},Mie=["value","background"],OR;function Wo(t){"@babel/helpers - typeof";return Wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wo(t)}function Die(t,e){if(t==null)return{};var n=Lie(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lie(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Uh(){return Uh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uh.apply(this,arguments)}function ME(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ME(Object(n),!0).forEach(function(r){ra(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ME(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RR(r.key),r)}}function Uie(t,e,n){return e&&DE(t.prototype,e),n&&DE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fie(t,e,n){return e=Fh(e),Bie(t,AR()?Reflect.construct(e,n||[],Fh(t).constructor):e.apply(t,n))}function Bie(t,e){if(e&&(Wo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zie(t)}function zie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AR=function(){return!!t})()}function Fh(t){return Fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fh(t)}function qie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A0(t,e)}function A0(t,e){return A0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},A0(t,e)}function ra(t,e,n){return e=RR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RR(t){var e=Vie(t,"string");return Wo(e)=="symbol"?e:e+""}function Vie(t,e){if(Wo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xu=function(t){function e(){var n;$ie(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Fie(this,e,[].concat(i)),ra(n,"state",{isAnimationFinished:!1}),ra(n,"id",Vu("recharts-bar-")),ra(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),ra(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return qie(e,t),Uie(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,c=a.activeIndex,l=a.activeBar,d=Ce(this.props,!1);return r&&r.map(function(f,h){var p=h===c,g=p?l:s,m=pt(pt(pt({},d),f),{},{isActive:p,option:g,index:h,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return M.createElement(ht,Uh({className:"recharts-bar-rectangle"},Zf(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),M.createElement(IE,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,c=i.animationBegin,l=i.animationDuration,d=i.animationEasing,f=i.animationId,h=this.state.prevData;return M.createElement(zo,{begin:c,duration:l,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var g=p.t,m=a.map(function(b,v){var x=h&&h[v];if(x){var S=pr(x.x,b.x),T=pr(x.y,b.y),w=pr(x.width,b.width),k=pr(x.height,b.height);return pt(pt({},b),{},{x:S(g),y:T(g),width:w(g),height:k(g)})}if(s==="horizontal"){var C=pr(0,b.height),E=C(g);return pt(pt({},b),{},{y:b.y+b.height-E,height:E})}var j=pr(0,b.width),P=j(g);return pt(pt({},b),{},{width:P})});return M.createElement(ht,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!pm(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,c=Ce(this.props.background,!1);return a.map(function(l,d){l.value;var f=l.background,h=Die(l,Mie);if(!f)return null;var p=pt(pt(pt(pt(pt({},h),{},{fill:"#eee"},f),c),Zf(r.props,l,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return M.createElement(IE,Uh({key:"background-bar-".concat(d),option:r.props.background,isActive:d===o},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,c=a.yAxis,l=a.layout,d=a.children,f=Qn(d,Yu);if(!f)return null;var h=l==="vertical"?s[0].height/2:s[0].width/2,p=function(b,v){var x=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:x,errorVal:Mn(b,v)}},g={clipPath:r?"url(#clipPath-".concat(i,")"):null};return M.createElement(ht,g,f.map(function(m){return M.cloneElement(m,{key:"error-bar-".concat(i,"-").concat(m.props.dataKey),data:s,xAxis:o,yAxis:c,layout:l,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,c=r.yAxis,l=r.left,d=r.top,f=r.width,h=r.height,p=r.isAnimationActive,g=r.background,m=r.id;if(i||!a||!a.length)return null;var b=this.state.isAnimationFinished,v=Ne("recharts-bar",s),x=o&&o.allowDataOverflow,S=c&&c.allowDataOverflow,T=x||S,w=ve(m)?this.id:m;return M.createElement(ht,{className:v},x||S?M.createElement("defs",null,M.createElement("clipPath",{id:"clipPath-".concat(w)},M.createElement("rect",{x:x?l:l-f/2,y:S?d:d-h/2,width:x?f:f*2,height:S?h:h*2}))):null,M.createElement(ht,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(w,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,w),(!p||b)&&pa.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(y.PureComponent);OR=Xu;ra(Xu,"displayName","Bar");ra(Xu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Si.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ra(Xu,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,c=t.yAxisTicks,l=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,p=xZ(r,n);if(!p)return null;var g=e.layout,m=n.type.defaultProps,b=m!==void 0?pt(pt({},m),n.props):n.props,v=b.dataKey,x=b.children,S=b.minPointSize,T=g==="horizontal"?s:a,w=l?T.scale.domain():null,k=NZ({numericAxis:T}),C=Qn(x,aA),E=f.map(function(j,P){var N,_,A,R,L,U;l?N=wZ(l[d+P],w):(N=Mn(j,v),Array.isArray(N)||(N=[k,N]));var q=Iie(S,OR.defaultProps.minPointSize)(N[1],P);if(g==="horizontal"){var D,$=[s.scale(N[0]),s.scale(N[1])],I=$[0],V=$[1];_=IC({axis:a,ticks:o,bandSize:i,offset:p.offset,entry:j,index:P}),A=(D=V??I)!==null&&D!==void 0?D:void 0,R=p.size;var J=I-V;if(L=Number.isNaN(J)?0:J,U={x:_,y:s.y,width:R,height:s.height},Math.abs(q)>0&&Math.abs(L)<Math.abs(q)){var ne=br(L||q)*(Math.abs(q)-Math.abs(L));A-=ne,L+=ne}}else{var de=[a.scale(N[0]),a.scale(N[1])],xe=de[0],Se=de[1];if(_=xe,A=IC({axis:s,ticks:c,bandSize:i,offset:p.offset,entry:j,index:P}),R=Se-xe,L=p.size,U={x:a.x,y:A,width:a.width,height:L},Math.abs(q)>0&&Math.abs(R)<Math.abs(q)){var ke=br(R||q)*(Math.abs(q)-Math.abs(R));R+=ke}}return pt(pt(pt({},j),{},{x:_,y:A,width:R,height:L,value:l?N:N[1],payload:j,background:U},C&&C[P]&&C[P].props),{},{tooltipPayload:[dR(n,j)],tooltipPosition:{x:_+R/2,y:A+L/2}})});return pt({data:E,layout:g},h)});function Tu(t){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tu(t)}function Wie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IR(r.key),r)}}function Hie(t,e,n){return e&&LE(t.prototype,e),n&&LE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$E(Object(n),!0).forEach(function(r){xm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$E(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xm(t,e,n){return e=IR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IR(t){var e=Gie(t,"string");return Tu(e)=="symbol"?e:e+""}function Gie(t,e){if(Tu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Tu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kie=function(e,n,r,i,a){var s=e.width,o=e.height,c=e.layout,l=e.children,d=Object.keys(n),f={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},h=!!Nn(l,Xu);return d.reduce(function(p,g){var m=n[g],b=m.orientation,v=m.domain,x=m.padding,S=x===void 0?{}:x,T=m.mirror,w=m.reversed,k="".concat(b).concat(T?"Mirror":""),C,E,j,P,N;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var _=v[1]-v[0],A=1/0,R=m.categoricalDomain.sort(nB);if(R.forEach(function(de,xe){xe>0&&(A=Math.min((de||0)-(R[xe-1]||0),A))}),Number.isFinite(A)){var L=A/_,U=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&(C=L*U/2),m.padding==="no-gap"){var q=fs(e.barCategoryGap,L*U),D=L*U/2;C=D-q-(D-q)/U*q}}}i==="xAxis"?E=[r.left+(S.left||0)+(C||0),r.left+r.width-(S.right||0)-(C||0)]:i==="yAxis"?E=c==="horizontal"?[r.top+r.height-(S.bottom||0),r.top+(S.top||0)]:[r.top+(S.top||0)+(C||0),r.top+r.height-(S.bottom||0)-(C||0)]:E=m.range,w&&(E=[E[1],E[0]]);var $=yZ(m,a,h),I=$.scale,V=$.realScaleType;I.domain(v).range(E),bZ(I);var J=jZ(I,lr(lr({},m),{},{realScaleType:V}));i==="xAxis"?(N=b==="top"&&!T||b==="bottom"&&T,j=r.left,P=f[k]-N*m.height):i==="yAxis"&&(N=b==="left"&&!T||b==="right"&&T,j=f[k]-N*m.width,P=r.top);var ne=lr(lr(lr({},m),J),{},{realScaleType:V,x:j,y:P,scale:I,width:i==="xAxis"?r.width:m.width,height:i==="yAxis"?r.height:m.height});return ne.bandSize=jh(ne,J),!m.hide&&i==="xAxis"?f[k]+=(N?-1:1)*ne.height:m.hide||(f[k]+=(N?-1:1)*ne.width),lr(lr({},p),{},xm({},g,ne))},{})},MR=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},Jie=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return MR({x:n,y:r},{x:i,y:a})},DR=function(){function t(e){Wie(this,t),this.scale=e}return Hie(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();xm(DR,"EPS",1e-4);var zw=function(e){var n=Object.keys(e).reduce(function(r,i){return lr(lr({},r),{},xm({},i,DR.create(e[i])))},{});return lr(lr({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return pie(i,function(c,l){return n[l].apply(c,{bandAware:s,position:o})})},isInRange:function(i){return _R(i,function(a,s){return n[s].isInRange(a)})}})};function Yie(t){return(t%180+180)%180}var Xie=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Yie(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},Qie=Na,Zie=Wu,eae=rm;function tae(t){return function(e,n,r){var i=Object(e);if(!Zie(e)){var a=Qie(n);e=eae(e),n=function(o){return a(i[o],o,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:void 0}}var nae=tae,rae=ER;function iae(t){var e=rae(t),n=e%1;return e===e?n?e-n:e:0}var aae=iae,sae=VO,oae=Na,cae=aae,lae=Math.max;function uae(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:cae(n);return i<0&&(i=lae(r+i,0)),sae(t,oae(e),i)}var dae=uae,fae=nae,hae=dae,pae=fae(hae),mae=pae;const gae=Ue(mae);var vae=rF(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),qw=y.createContext(void 0),Vw=y.createContext(void 0),LR=y.createContext(void 0),$R=y.createContext({}),UR=y.createContext(void 0),FR=y.createContext(0),BR=y.createContext(0),UE=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=e.clipPathId,o=e.children,c=e.width,l=e.height,d=vae(a);return M.createElement(qw.Provider,{value:r},M.createElement(Vw.Provider,{value:i},M.createElement($R.Provider,{value:a},M.createElement(LR.Provider,{value:d},M.createElement(UR.Provider,{value:s},M.createElement(FR.Provider,{value:l},M.createElement(BR.Provider,{value:c},o)))))))},yae=function(){return y.useContext(UR)},zR=function(e){var n=y.useContext(qw);n==null&&ps(!1);var r=n[e];return r==null&&ps(!1),r},bae=function(){var e=y.useContext(qw);return Qi(e)},xae=function(){var e=y.useContext(Vw),n=gae(e,function(r){return _R(r.domain,Number.isFinite)});return n||Qi(e)},qR=function(e){var n=y.useContext(Vw);n==null&&ps(!1);var r=n[e];return r==null&&ps(!1),r},wae=function(){var e=y.useContext(LR);return e},Sae=function(){return y.useContext($R)},Ww=function(){return y.useContext(BR)},Hw=function(){return y.useContext(FR)};function Ho(t){"@babel/helpers - typeof";return Ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ho(t)}function kae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WR(r.key),r)}}function Tae(t,e,n){return e&&FE(t.prototype,e),n&&FE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cae(t,e,n){return e=Bh(e),Eae(t,VR()?Reflect.construct(e,n||[],Bh(t).constructor):e.apply(t,n))}function Eae(t,e){if(e&&(Ho(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jae(t)}function jae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VR=function(){return!!t})()}function Bh(t){return Bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bh(t)}function Nae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R0(t,e)}function R0(t,e){return R0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},R0(t,e)}function BE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BE(Object(n),!0).forEach(function(r){Gw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gw(t,e,n){return e=WR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WR(t){var e=Pae(t,"string");return Ho(e)=="symbol"?e:e+""}function Pae(t,e){if(Ho(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ho(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _ae(t,e){return Iae(t)||Rae(t,e)||Aae(t,e)||Oae()}function Oae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aae(t,e){if(t){if(typeof t=="string")return qE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qE(t,e)}}function qE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){l=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function Iae(t){if(Array.isArray(t))return t}function I0(){return I0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I0.apply(this,arguments)}var Mae=function(e,n){var r;return M.isValidElement(e)?r=M.cloneElement(e,n):me(e)?r=e(n):r=M.createElement("line",I0({},n,{className:"recharts-reference-line-line"})),r},Dae=function(e,n,r,i,a,s,o,c,l){var d=a.x,f=a.y,h=a.width,p=a.height;if(r){var g=l.y,m=e.y.apply(g,{position:s});if(Hr(l,"discard")&&!e.y.isInRange(m))return null;var b=[{x:d+h,y:m},{x:d,y:m}];return c==="left"?b.reverse():b}if(n){var v=l.x,x=e.x.apply(v,{position:s});if(Hr(l,"discard")&&!e.x.isInRange(x))return null;var S=[{x,y:f+p},{x,y:f}];return o==="top"?S.reverse():S}if(i){var T=l.segment,w=T.map(function(k){return e.apply(k,{position:s})});return Hr(l,"discard")&&sie(w,function(k){return!e.isInRange(k)})?null:w}return null};function Lae(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,c=t.alwaysShow,l=yae(),d=zR(i),f=qR(a),h=wae();if(!l||!h)return null;wi(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=zw({x:d.scale,y:f.scale}),g=Et(e),m=Et(n),b=r&&r.length===2,v=Dae(p,g,m,b,h,t.position,d.orientation,f.orientation,t);if(!v)return null;var x=_ae(v,2),S=x[0],T=S.x,w=S.y,k=x[1],C=k.x,E=k.y,j=Hr(t,"hidden")?"url(#".concat(l,")"):void 0,P=zE(zE({clipPath:j},Ce(t,!0)),{},{x1:T,y1:w,x2:C,y2:E});return M.createElement(ht,{className:Ne("recharts-reference-line",o)},Mae(s,P),Jt.renderCallByParent(t,Jie({x1:T,y1:w,x2:C,y2:E})))}var Kw=function(t){function e(){return kae(this,e),Cae(this,e,arguments)}return Nae(e,t),Tae(e,[{key:"render",value:function(){return M.createElement(Lae,this.props)}}])}(M.Component);Gw(Kw,"displayName","ReferenceLine");Gw(Kw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function M0(){return M0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},M0.apply(this,arguments)}function Go(t){"@babel/helpers - typeof";return Go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go(t)}function VE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VE(Object(n),!0).forEach(function(r){wm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GR(r.key),r)}}function Uae(t,e,n){return e&&HE(t.prototype,e),n&&HE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fae(t,e,n){return e=zh(e),Bae(t,HR()?Reflect.construct(e,n||[],zh(t).constructor):e.apply(t,n))}function Bae(t,e){if(e&&(Go(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zae(t)}function zae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HR=function(){return!!t})()}function zh(t){return zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zh(t)}function qae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D0(t,e)}function D0(t,e){return D0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},D0(t,e)}function wm(t,e,n){return e=GR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GR(t){var e=Vae(t,"string");return Go(e)=="symbol"?e:e+""}function Vae(t,e){if(Go(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Go(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wae=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=zw({x:i.scale,y:a.scale}),o=s.apply({x:n,y:r},{bandAware:!0});return Hr(e,"discard")&&!s.isInRange(o)?null:o},Sm=function(t){function e(){return $ae(this,e),Fae(this,e,arguments)}return qae(e,t),Uae(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,c=r.clipPathId,l=Et(i),d=Et(a);if(wi(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!d)return null;var f=Wae(this.props);if(!f)return null;var h=f.x,p=f.y,g=this.props,m=g.shape,b=g.className,v=Hr(this.props,"hidden")?"url(#".concat(c,")"):void 0,x=WE(WE({clipPath:v},Ce(this.props,!0)),{},{cx:h,cy:p});return M.createElement(ht,{className:Ne("recharts-reference-dot",b)},e.renderDot(m,x),Jt.renderCallByParent(this.props,{x:h-s,y:p-s,width:2*s,height:2*s}))}}])}(M.Component);wm(Sm,"displayName","ReferenceDot");wm(Sm,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});wm(Sm,"renderDot",function(t,e){var n;return M.isValidElement(t)?n=M.cloneElement(t,e):me(t)?n=t(e):n=M.createElement(Bw,M0({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function L0(){return L0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L0.apply(this,arguments)}function Ko(t){"@babel/helpers - typeof";return Ko=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ko(t)}function GE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GE(Object(n),!0).forEach(function(r){km(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JR(r.key),r)}}function Gae(t,e,n){return e&&JE(t.prototype,e),n&&JE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kae(t,e,n){return e=qh(e),Jae(t,KR()?Reflect.construct(e,n||[],qh(t).constructor):e.apply(t,n))}function Jae(t,e){if(e&&(Ko(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yae(t)}function Yae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KR=function(){return!!t})()}function qh(t){return qh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qh(t)}function Xae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$0(t,e)}function $0(t,e){return $0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$0(t,e)}function km(t,e,n){return e=JR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JR(t){var e=Qae(t,"string");return Ko(e)=="symbol"?e:e+""}function Qae(t,e){if(Ko(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ko(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zae=function(e,n,r,i,a){var s=a.x1,o=a.x2,c=a.y1,l=a.y2,d=a.xAxis,f=a.yAxis;if(!d||!f)return null;var h=zw({x:d.scale,y:f.scale}),p={x:e?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:n?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(l,{position:"end"}):h.y.rangeMax};return Hr(a,"discard")&&(!h.isInRange(p)||!h.isInRange(g))?null:MR(p,g)},Tm=function(t){function e(){return Hae(this,e),Kae(this,e,arguments)}return Xae(e,t),Gae(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,c=r.className,l=r.alwaysShow,d=r.clipPathId;wi(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Et(i),h=Et(a),p=Et(s),g=Et(o),m=this.props.shape;if(!f&&!h&&!p&&!g&&!m)return null;var b=Zae(f,h,p,g,this.props);if(!b&&!m)return null;var v=Hr(this.props,"hidden")?"url(#".concat(d,")"):void 0;return M.createElement(ht,{className:Ne("recharts-reference-area",c)},e.renderRect(m,KE(KE({clipPath:v},Ce(this.props,!0)),b)),Jt.renderCallByParent(this.props,b))}}])}(M.Component);km(Tm,"displayName","ReferenceArea");km(Tm,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});km(Tm,"renderRect",function(t,e){var n;return M.isValidElement(t)?n=M.cloneElement(t,e):me(t)?n=t(e):n=M.createElement(Fw,L0({},e,{className:"recharts-reference-area-rect"})),n});function YR(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)if(n===void 0||n(t[i])===!0)r.push(t[i]);else return;return r}function ese(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Xie(r,n)}function tse(t,e,n){var r=n==="width",i=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function Vh(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function nse(t,e){return YR(t,e+1)}function rse(t,e,n,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,c=0,l=1,d=s,f=function(){var g=r==null?void 0:r[c];if(g===void 0)return{v:YR(r,l)};var m=c,b,v=function(){return b===void 0&&(b=n(g,m)),b},x=g.coordinate,S=c===0||Vh(t,x,v,d,o);S||(c=0,d=s,l+=1),S&&(d=x+t*(v()/2+i),c+=l)},h;l<=a.length;)if(h=f(),h)return h.v;return[]}function Cu(t){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cu(t)}function YE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YE(Object(n),!0).forEach(function(r){ise(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ise(t,e,n){return e=ase(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ase(t){var e=sse(t,"string");return Cu(e)=="symbol"?e:e+""}function sse(t,e){if(Cu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ose(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,c=e.end,l=function(h){var p=a[h],g,m=function(){return g===void 0&&(g=n(p,h)),g};if(h===s-1){var b=t*(p.coordinate+t*m()/2-c);a[h]=p=Gt(Gt({},p),{},{tickCoord:b>0?p.coordinate-b*t:p.coordinate})}else a[h]=p=Gt(Gt({},p),{},{tickCoord:p.coordinate});var v=Vh(t,p.tickCoord,m,o,c);v&&(c=p.tickCoord-t*(m()/2+i),a[h]=Gt(Gt({},p),{},{isShow:!0}))},d=s-1;d>=0;d--)l(d);return a}function cse(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,c=e.start,l=e.end;if(a){var d=r[o-1],f=n(d,o-1),h=t*(d.coordinate+t*f/2-l);s[o-1]=d=Gt(Gt({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate});var p=Vh(t,d.tickCoord,function(){return f},c,l);p&&(l=d.tickCoord-t*(f/2+i),s[o-1]=Gt(Gt({},d),{},{isShow:!0}))}for(var g=a?o-1:o,m=function(x){var S=s[x],T,w=function(){return T===void 0&&(T=n(S,x)),T};if(x===0){var k=t*(S.coordinate-t*w()/2-c);s[x]=S=Gt(Gt({},S),{},{tickCoord:k<0?S.coordinate-k*t:S.coordinate})}else s[x]=S=Gt(Gt({},S),{},{tickCoord:S.coordinate});var C=Vh(t,S.tickCoord,w,c,l);C&&(c=S.tickCoord+t*(w()/2+i),s[x]=Gt(Gt({},S),{},{isShow:!0}))},b=0;b<g;b++)m(b);return s}function Jw(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,c=t.interval,l=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(te(c)||Si.isSsr)return nse(i,typeof c=="number"&&te(c)?c:0);var h=[],p=o==="top"||o==="bottom"?"width":"height",g=d&&p==="width"?gl(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(S,T){var w=me(l)?l(S.value,T):S.value;return p==="width"?ese(gl(w,{fontSize:e,letterSpacing:n}),g,f):gl(w,{fontSize:e,letterSpacing:n})[p]},b=i.length>=2?br(i[1].coordinate-i[0].coordinate):1,v=tse(a,b,p);return c==="equidistantPreserveStart"?rse(b,v,m,i,s):(c==="preserveStart"||c==="preserveStartEnd"?h=cse(b,v,m,i,s,c==="preserveStartEnd"):h=ose(b,v,m,i,s),h.filter(function(x){return x.isShow}))}var lse=["viewBox"],use=["viewBox"],dse=["ticks"];function Jo(t){"@babel/helpers - typeof";return Jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jo(t)}function no(){return no=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},no.apply(this,arguments)}function XE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XE(Object(n),!0).forEach(function(r){Yw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jg(t,e){if(t==null)return{};var n=fse(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fse(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function hse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QR(r.key),r)}}function pse(t,e,n){return e&&QE(t.prototype,e),n&&QE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mse(t,e,n){return e=Wh(e),gse(t,XR()?Reflect.construct(e,n||[],Wh(t).constructor):e.apply(t,n))}function gse(t,e){if(e&&(Jo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vse(t)}function vse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XR=function(){return!!t})()}function Wh(t){return Wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wh(t)}function yse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U0(t,e)}function U0(t,e){return U0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},U0(t,e)}function Yw(t,e,n){return e=QR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QR(t){var e=bse(t,"string");return Jo(e)=="symbol"?e:e+""}function bse(t,e){if(Jo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sc=function(t){function e(n){var r;return hse(this,e),r=mse(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return yse(e,t),pse(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=Jg(r,lse),o=this.props,c=o.viewBox,l=Jg(o,use);return!ho(a,c)||!ho(s,l)||!ho(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,c=i.height,l=i.orientation,d=i.tickSize,f=i.mirror,h=i.tickMargin,p,g,m,b,v,x,S=f?-1:1,T=r.tickSize||d,w=te(r.tickCoord)?r.tickCoord:r.coordinate;switch(l){case"top":p=g=r.coordinate,b=s+ +!f*c,m=b-S*T,x=m-S*h,v=w;break;case"left":m=b=r.coordinate,g=a+ +!f*o,p=g-S*T,v=p-S*h,x=w;break;case"right":m=b=r.coordinate,g=a+ +f*o,p=g+S*T,v=p+S*h,x=w;break;default:p=g=r.coordinate,b=s+ +f*c,m=b+S*T,x=m+S*h,v=w;break}return{line:{x1:p,y1:m,x2:g,y2:b},tick:{x:v,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.orientation,l=r.mirror,d=r.axisLine,f=xt(xt(xt({},Ce(this.props,!1)),Ce(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!l||c==="bottom"&&l);f=xt(xt({},f),{},{x1:i,y1:a+h*o,x2:i+s,y2:a+h*o})}else{var p=+(c==="left"&&!l||c==="right"&&l);f=xt(xt({},f),{},{x1:i+p*s,y1:a,x2:i+p*s,y2:a+o})}return M.createElement("line",no({},f,{className:Ne("recharts-cartesian-axis-line",Xn(d,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,c=o.tickLine,l=o.stroke,d=o.tick,f=o.tickFormatter,h=o.unit,p=Jw(xt(xt({},this.props),{},{ticks:r}),i,a),g=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),b=Ce(this.props,!1),v=Ce(d,!1),x=xt(xt({},b),{},{fill:"none"},Ce(c,!1)),S=p.map(function(T,w){var k=s.getTickLineCoord(T),C=k.line,E=k.tick,j=xt(xt(xt(xt({textAnchor:g,verticalAnchor:m},b),{},{stroke:"none",fill:l},v),E),{},{index:w,payload:T,visibleTicksCount:p.length,tickFormatter:f});return M.createElement(ht,no({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},Zf(s.props,T,w)),c&&M.createElement("line",no({},x,C,{className:Ne("recharts-cartesian-axis-tick-line",Xn(c,"className"))})),d&&e.renderTickItem(d,j,"".concat(me(f)?f(T.value,w):T.value).concat(h||"")))});return M.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,c=i.ticksGenerator,l=i.className,d=i.hide;if(d)return null;var f=this.props,h=f.ticks,p=Jg(f,dse),g=h;return me(c)&&(g=h&&h.length>0?c(this.props):c(p)),s<=0||o<=0||!g||!g.length?null:M.createElement(ht,{className:Ne("recharts-cartesian-axis",l),ref:function(b){r.layerReference=b}},a&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Jt.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s,o=Ne(i.className,"recharts-cartesian-axis-tick-value");return M.isValidElement(r)?s=M.cloneElement(r,xt(xt({},i),{},{className:o})):me(r)?s=r(xt(xt({},i),{},{className:o})):s=M.createElement(hh,no({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(y.Component);Yw(Sc,"displayName","CartesianAxis");Yw(Sc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var xse=["x1","y1","x2","y2","key"],wse=["offset"];function ms(t){"@babel/helpers - typeof";return ms=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ms(t)}function ZE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZE(Object(n),!0).forEach(function(r){Sse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sse(t,e,n){return e=kse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kse(t){var e=Tse(t,"string");return ms(e)=="symbol"?e:e+""}function Tse(t,e){if(ms(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ms(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ya(){return Ya=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ya.apply(this,arguments)}function ej(t,e){if(t==null)return{};var n=Cse(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cse(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Ese=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,c=e.ry;return M.createElement("rect",{x:i,y:a,ry:c,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function ZR(t,e){var n;if(M.isValidElement(t))n=M.cloneElement(t,e);else if(me(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,c=ej(e,xse),l=Ce(c,!1);l.offset;var d=ej(l,wse);n=M.createElement("line",Ya({},d,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function jse(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,c){var l=Yt(Yt({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(c),index:c});return ZR(i,l)});return M.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Nse(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,c){var l=Yt(Yt({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(c),index:c});return ZR(i,l)});return M.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Pse(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,s=t.height,o=t.horizontalPoints,c=t.horizontal,l=c===void 0?!0:c;if(!l||!e||!e.length)return null;var d=o.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var g=!d[p+1],m=g?i+s-h:d[p+1]-h;if(m<=0)return null;var b=p%e.length;return M.createElement("rect",{key:"react-".concat(p),y:h,x:r,height:m,width:a,stroke:"none",fill:e[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return M.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function _se(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,c=t.height,l=t.verticalPoints;if(!n||!r||!r.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var g=!d[p+1],m=g?a+o-h:d[p+1]-h;if(m<=0)return null;var b=p%r.length;return M.createElement("rect",{key:"react-".concat(p),x:h,y:s,width:m,height:c,stroke:"none",fill:r[b],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return M.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Ose=function(e,n){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return lR(Jw(Yt(Yt(Yt({},Sc.defaultProps),r),{},{ticks:yi(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},Ase=function(e,n){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return lR(Jw(Yt(Yt(Yt({},Sc.defaultProps),r),{},{ticks:yi(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},Ms={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function eI(t){var e,n,r,i,a,s,o=Ww(),c=Hw(),l=Sae(),d=Yt(Yt({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Ms.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Ms.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Ms.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Ms.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Ms.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:Ms.verticalFill,x:te(t.x)?t.x:l.left,y:te(t.y)?t.y:l.top,width:te(t.width)?t.width:l.width,height:te(t.height)?t.height:l.height}),f=d.x,h=d.y,p=d.width,g=d.height,m=d.syncWithTicks,b=d.horizontalValues,v=d.verticalValues,x=bae(),S=xae();if(!te(p)||p<=0||!te(g)||g<=0||!te(f)||f!==+f||!te(h)||h!==+h)return null;var T=d.verticalCoordinatesGenerator||Ose,w=d.horizontalCoordinatesGenerator||Ase,k=d.horizontalPoints,C=d.verticalPoints;if((!k||!k.length)&&me(w)){var E=b&&b.length,j=w({yAxis:S?Yt(Yt({},S),{},{ticks:E?b:S.ticks}):void 0,width:o,height:c,offset:l},E?!0:m);wi(Array.isArray(j),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ms(j),"]")),Array.isArray(j)&&(k=j)}if((!C||!C.length)&&me(T)){var P=v&&v.length,N=T({xAxis:x?Yt(Yt({},x),{},{ticks:P?v:x.ticks}):void 0,width:o,height:c,offset:l},P?!0:m);wi(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ms(N),"]")),Array.isArray(N)&&(C=N)}return M.createElement("g",{className:"recharts-cartesian-grid"},M.createElement(Ese,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),M.createElement(jse,Ya({},d,{offset:l,horizontalPoints:k,xAxis:x,yAxis:S})),M.createElement(Nse,Ya({},d,{offset:l,verticalPoints:C,xAxis:x,yAxis:S})),M.createElement(Pse,Ya({},d,{horizontalPoints:k})),M.createElement(_se,Ya({},d,{verticalPoints:C})))}eI.displayName="CartesianGrid";var Rse=["type","layout","connectNulls","ref"],Ise=["key"];function Yo(t){"@babel/helpers - typeof";return Yo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yo(t)}function tj(t,e){if(t==null)return{};var n=Mse(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mse(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xl(){return xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xl.apply(this,arguments)}function nj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nj(Object(n),!0).forEach(function(r){ur(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ds(t){return Use(t)||$se(t)||Lse(t)||Dse()}function Dse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lse(t,e){if(t){if(typeof t=="string")return F0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F0(t,e)}}function $se(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Use(t){if(Array.isArray(t))return F0(t)}function F0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nI(r.key),r)}}function Bse(t,e,n){return e&&rj(t.prototype,e),n&&rj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zse(t,e,n){return e=Hh(e),qse(t,tI()?Reflect.construct(e,n||[],Hh(t).constructor):e.apply(t,n))}function qse(t,e){if(e&&(Yo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vse(t)}function Vse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tI=function(){return!!t})()}function Hh(t){return Hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hh(t)}function Wse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B0(t,e)}function B0(t,e){return B0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},B0(t,e)}function ur(t,e,n){return e=nI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nI(t){var e=Hse(t,"string");return Yo(e)=="symbol"?e:e+""}function Hse(t,e){if(Yo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qu=function(t){function e(){var n;Fse(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=zse(this,e,[].concat(i)),ur(n,"state",{isAnimationFinished:!0,totalLength:0}),ur(n,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),ur(n,"getStrokeDasharray",function(s,o,c){var l=c.reduce(function(v,x){return v+x});if(!l)return n.generateSimpleStrokeDasharray(o,s);for(var d=Math.floor(s/l),f=s%l,h=o-s,p=[],g=0,m=0;g<c.length;m+=c[g],++g)if(m+c[g]>f){p=[].concat(Ds(c.slice(0,g)),[f-m]);break}var b=p.length%2===0?[0,h]:[h];return[].concat(Ds(e.repeat(c,d)),Ds(p),b).map(function(v){return"".concat(v,"px")}).join(", ")}),ur(n,"id",Vu("recharts-line-")),ur(n,"pathRef",function(s){n.mainCurve=s}),ur(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),ur(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Wse(e,t),Bse(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,o=a.xAxis,c=a.yAxis,l=a.layout,d=a.children,f=Qn(d,Yu);if(!f)return null;var h=function(m,b){return{x:m.x,y:m.y,value:m.value,errorVal:Mn(m.payload,b)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return M.createElement(ht,p,f.map(function(g){return M.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:s,xAxis:o,yAxis:c,layout:l,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,l=o.points,d=o.dataKey,f=Ce(this.props,!1),h=Ce(c,!0),p=l.map(function(m,b){var v=Cn(Cn(Cn({key:"dot-".concat(b),r:3},f),h),{},{index:b,cx:m.x,cy:m.y,value:m.value,dataKey:d,payload:m.payload,points:l});return e.renderDotItem(c,v)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return M.createElement(ht,xl({className:"recharts-line-dots",key:"dots"},g),p)}},{key:"renderCurveStatically",value:function(r,i,a,s){var o=this.props,c=o.type,l=o.layout,d=o.connectNulls;o.ref;var f=tj(o,Rse),h=Cn(Cn(Cn({},Ce(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:c,layout:l,connectNulls:d});return M.createElement(y0,xl({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,c=s.strokeDasharray,l=s.isAnimationActive,d=s.animationBegin,f=s.animationDuration,h=s.animationEasing,p=s.animationId,g=s.animateNewValues,m=s.width,b=s.height,v=this.state,x=v.prevPoints,S=v.totalLength;return M.createElement(zo,{begin:d,duration:f,isActive:l,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(T){var w=T.t;if(x){var k=x.length/o.length,C=o.map(function(_,A){var R=Math.floor(A*k);if(x[R]){var L=x[R],U=pr(L.x,_.x),q=pr(L.y,_.y);return Cn(Cn({},_),{},{x:U(w),y:q(w)})}if(g){var D=pr(m*2,_.x),$=pr(b/2,_.y);return Cn(Cn({},_),{},{x:D(w),y:$(w)})}return Cn(Cn({},_),{},{x:_.x,y:_.y})});return a.renderCurveStatically(C,r,i)}var E=pr(0,S),j=E(w),P;if(c){var N="".concat(c).split(/[,\s]+/gim).map(function(_){return parseFloat(_)});P=a.getStrokeDasharray(j,S,N)}else P=a.generateSimpleStrokeDasharray(S,j);return a.renderCurveStatically(o,r,i,{strokeDasharray:P})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,o=a.isAnimationActive,c=this.state,l=c.prevPoints,d=c.totalLength;return o&&s&&s.length&&(!l&&d>0||!pm(l,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,c=i.className,l=i.xAxis,d=i.yAxis,f=i.top,h=i.left,p=i.width,g=i.height,m=i.isAnimationActive,b=i.id;if(a||!o||!o.length)return null;var v=this.state.isAnimationFinished,x=o.length===1,S=Ne("recharts-line",c),T=l&&l.allowDataOverflow,w=d&&d.allowDataOverflow,k=T||w,C=ve(b)?this.id:b,E=(r=Ce(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},j=E.r,P=j===void 0?3:j,N=E.strokeWidth,_=N===void 0?2:N,A=dB(s)?s:{},R=A.clipDot,L=R===void 0?!0:R,U=P*2+_;return M.createElement(ht,{className:S},T||w?M.createElement("defs",null,M.createElement("clipPath",{id:"clipPath-".concat(C)},M.createElement("rect",{x:T?h:h-p/2,y:w?f:f-g/2,width:T?p:p*2,height:w?g:g*2})),!L&&M.createElement("clipPath",{id:"clipPath-dots-".concat(C)},M.createElement("rect",{x:h-U/2,y:f-U/2,width:p+U,height:g+U}))):null,!x&&this.renderCurve(k,C),this.renderErrorBar(k,C),(x||s)&&this.renderDots(k,L,C),(!m||v)&&pa.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Ds(r),[0]):r,s=[],o=0;o<i;++o)s=[].concat(Ds(s),Ds(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(M.isValidElement(r))a=M.cloneElement(r,i);else if(me(r))a=r(i);else{var s=i.key,o=tj(i,Ise),c=Ne("recharts-line-dot",typeof r!="boolean"?r.className:"");a=M.createElement(Bw,xl({key:s},o,{className:c}))}return a}}])}(y.PureComponent);ur(Qu,"displayName","Line");ur(Qu,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Si.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ur(Qu,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,s=t.dataKey,o=t.bandSize,c=t.displayedData,l=t.offset,d=e.layout,f=c.map(function(h,p){var g=Mn(h,s);return d==="horizontal"?{x:RC({axis:n,ticks:i,bandSize:o,entry:h,index:p}),y:ve(g)?null:r.scale(g),value:g,payload:h}:{x:ve(g)?null:n.scale(g),y:RC({axis:r,ticks:a,bandSize:o,entry:h,index:p}),value:g,payload:h}});return Cn({points:f,layout:d},l)});function Xo(t){"@babel/helpers - typeof";return Xo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xo(t)}function Gse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ij(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aI(r.key),r)}}function Kse(t,e,n){return e&&ij(t.prototype,e),n&&ij(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jse(t,e,n){return e=Gh(e),Yse(t,rI()?Reflect.construct(e,n||[],Gh(t).constructor):e.apply(t,n))}function Yse(t,e){if(e&&(Xo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xse(t)}function Xse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rI=function(){return!!t})()}function Gh(t){return Gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gh(t)}function Qse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z0(t,e)}function z0(t,e){return z0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},z0(t,e)}function iI(t,e,n){return e=aI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aI(t){var e=Zse(t,"string");return Xo(e)=="symbol"?e:e+""}function Zse(t,e){if(Xo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function q0(){return q0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q0.apply(this,arguments)}function eoe(t){var e=t.xAxisId,n=Ww(),r=Hw(),i=zR(e);return i==null?null:y.createElement(Sc,q0({},i,{className:Ne("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return yi(s,!0)}}))}var Cm=function(t){function e(){return Gse(this,e),Jse(this,e,arguments)}return Qse(e,t),Kse(e,[{key:"render",value:function(){return y.createElement(eoe,this.props)}}])}(y.Component);iI(Cm,"displayName","XAxis");iI(Cm,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Qo(t){"@babel/helpers - typeof";return Qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(t)}function toe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cI(r.key),r)}}function noe(t,e,n){return e&&aj(t.prototype,e),n&&aj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function roe(t,e,n){return e=Kh(e),ioe(t,sI()?Reflect.construct(e,n||[],Kh(t).constructor):e.apply(t,n))}function ioe(t,e){if(e&&(Qo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aoe(t)}function aoe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sI=function(){return!!t})()}function Kh(t){return Kh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kh(t)}function soe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V0(t,e)}function V0(t,e){return V0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},V0(t,e)}function oI(t,e,n){return e=cI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cI(t){var e=ooe(t,"string");return Qo(e)=="symbol"?e:e+""}function ooe(t,e){if(Qo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W0(){return W0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W0.apply(this,arguments)}var coe=function(e){var n=e.yAxisId,r=Ww(),i=Hw(),a=qR(n);return a==null?null:y.createElement(Sc,W0({},a,{className:Ne("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return yi(o,!0)}}))},Em=function(t){function e(){return toe(this,e),roe(this,e,arguments)}return soe(e,t),noe(e,[{key:"render",value:function(){return y.createElement(coe,this.props)}}])}(y.Component);oI(Em,"displayName","YAxis");oI(Em,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function sj(t){return foe(t)||doe(t)||uoe(t)||loe()}function loe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uoe(t,e){if(t){if(typeof t=="string")return H0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H0(t,e)}}function doe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function foe(t){if(Array.isArray(t))return H0(t)}function H0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var G0=function(e,n,r,i,a){var s=Qn(e,Kw),o=Qn(e,Sm),c=[].concat(sj(s),sj(o)),l=Qn(e,Tm),d="".concat(i,"Id"),f=i[0],h=n;if(c.length&&(h=c.reduce(function(m,b){if(b.props[d]===r&&Hr(b.props,"extendDomain")&&te(b.props[f])){var v=b.props[f];return[Math.min(m[0],v),Math.max(m[1],v)]}return m},h)),l.length){var p="".concat(f,"1"),g="".concat(f,"2");h=l.reduce(function(m,b){if(b.props[d]===r&&Hr(b.props,"extendDomain")&&te(b.props[p])&&te(b.props[g])){var v=b.props[p],x=b.props[g];return[Math.min(m[0],v,x),Math.max(m[1],v,x)]}return m},h)}return a&&a.length&&(h=a.reduce(function(m,b){return te(b)?[Math.min(m[0],b),Math.max(m[1],b)]:m},h)),h},lI={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,l,d){this.fn=c,this.context=l,this.once=d||!1}function a(c,l,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,f||c,h),g=n?n+l:l;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function s(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],d,f;if(this._eventsCount===0)return l;for(f in d=this._events)e.call(d,f)&&l.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(d)):l},o.prototype.listeners=function(l){var d=n?n+l:l,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(l){var d=n?n+l:l,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(l,d,f,h,p,g){var m=n?n+l:l;if(!this._events[m])return!1;var b=this._events[m],v=arguments.length,x,S;if(b.fn){switch(b.once&&this.removeListener(l,b.fn,void 0,!0),v){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,h),!0;case 5:return b.fn.call(b.context,d,f,h,p),!0;case 6:return b.fn.call(b.context,d,f,h,p,g),!0}for(S=1,x=new Array(v-1);S<v;S++)x[S-1]=arguments[S];b.fn.apply(b.context,x)}else{var T=b.length,w;for(S=0;S<T;S++)switch(b[S].once&&this.removeListener(l,b[S].fn,void 0,!0),v){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,d);break;case 3:b[S].fn.call(b[S].context,d,f);break;case 4:b[S].fn.call(b[S].context,d,f,h);break;default:if(!x)for(w=1,x=new Array(v-1);w<v;w++)x[w-1]=arguments[w];b[S].fn.apply(b[S].context,x)}}return!0},o.prototype.on=function(l,d,f){return a(this,l,d,f,!1)},o.prototype.once=function(l,d,f){return a(this,l,d,f,!0)},o.prototype.removeListener=function(l,d,f,h){var p=n?n+l:l;if(!this._events[p])return this;if(!d)return s(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&s(this,p);else{for(var m=0,b=[],v=g.length;m<v;m++)(g[m].fn!==d||h&&!g[m].once||f&&g[m].context!==f)&&b.push(g[m]);b.length?this._events[p]=b.length===1?b[0]:b:s(this,p)}return this},o.prototype.removeAllListeners=function(l){var d;return l?(d=n?n+l:l,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(lI);var hoe=lI.exports;const poe=Ue(hoe);var Yg=new poe,Xg="recharts.syncMouseEvents";function Eu(t){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eu(t)}function moe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uI(r.key),r)}}function goe(t,e,n){return e&&oj(t.prototype,e),n&&oj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qg(t,e,n){return e=uI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uI(t){var e=voe(t,"string");return Eu(e)=="symbol"?e:e+""}function voe(t,e){if(Eu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Eu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yoe=function(){function t(){moe(this,t),Qg(this,"activeIndex",0),Qg(this,"coordinateList",[]),Qg(this,"layout","horizontal")}return goe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,o=s===void 0?null:s,c=n.layout,l=c===void 0?null:c,d=n.offset,f=d===void 0?null:d,h=n.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=l??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,c=this.coordinateList[this.activeIndex].coordinate,l=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=a+c+l,h=s+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function boe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&te(r)&&te(i))return!0}return!1}function xoe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function dI(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,s=Ft(e,n,r,i),o=Ft(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function woe(t,e,n){var r,i,a,s;if(t==="horizontal")r=e.x,a=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,c=e.cy,l=e.innerRadius,d=e.outerRadius,f=e.angle,h=Ft(o,c,l,f),p=Ft(o,c,d,f);r=h.x,i=h.y,a=p.x,s=p.y}else return dI(e);return[{x:r,y:i},{x:a,y:s}]}function ju(t){"@babel/helpers - typeof";return ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ju(t)}function cj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Md(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cj(Object(n),!0).forEach(function(r){Soe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Soe(t,e,n){return e=koe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function koe(t){var e=Toe(t,"string");return ju(e)=="symbol"?e:e+""}function Toe(t,e){if(ju(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ju(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Coe(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,c=t.offset,l=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!a||!s||h!=="ScatterChart"&&i!=="axis")return null;var g,m=y0;if(h==="ScatterChart")g=s,m=_ne;else if(h==="BarChart")g=xoe(f,s,c,d),m=Fw;else if(f==="radial"){var b=dI(s),v=b.cx,x=b.cy,S=b.radius,T=b.startAngle,w=b.endAngle;g={cx:v,cy:x,startAngle:T,endAngle:w,innerRadius:S,outerRadius:S},m=pR}else g={points:woe(f,s,c)},m=y0;var k=Md(Md(Md(Md({stroke:"#ccc",pointerEvents:"none"},c),g),Ce(p,!1)),{},{payload:o,payloadIndex:l,className:Ne("recharts-tooltip-cursor",p.className)});return y.isValidElement(p)?y.cloneElement(p,k):y.createElement(m,k)}var Eoe=["item"],joe=["children","className","width","height","style","compact","title","desc"];function Zo(t){"@babel/helpers - typeof";return Zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zo(t)}function ro(){return ro=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ro.apply(this,arguments)}function lj(t,e){return _oe(t)||Poe(t,e)||hI(t,e)||Noe()}function Noe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Poe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){l=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function _oe(t){if(Array.isArray(t))return t}function uj(t,e){if(t==null)return{};var n=Ooe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ooe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Aoe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pI(r.key),r)}}function Roe(t,e,n){return e&&dj(t.prototype,e),n&&dj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ioe(t,e,n){return e=Jh(e),Moe(t,fI()?Reflect.construct(e,n||[],Jh(t).constructor):e.apply(t,n))}function Moe(t,e){if(e&&(Zo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Doe(t)}function Doe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fI=function(){return!!t})()}function Jh(t){return Jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jh(t)}function Loe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K0(t,e)}function K0(t,e){return K0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},K0(t,e)}function ec(t){return Foe(t)||Uoe(t)||hI(t)||$oe()}function $oe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hI(t,e){if(t){if(typeof t=="string")return J0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J0(t,e)}}function Uoe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Foe(t){if(Array.isArray(t))return J0(t)}function J0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fj(Object(n),!0).forEach(function(r){le(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function le(t,e,n){return e=pI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pI(t){var e=Boe(t,"string");return Zo(e)=="symbol"?e:e+""}function Boe(t,e){if(Zo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zoe={xAxis:["bottom","top"],yAxis:["left","right"]},qoe={width:"100%",height:"100%"},mI={x:0,y:0};function Dd(t){return t}var Voe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},Woe=function(e,n,r,i){var a=n.find(function(d){return d&&d.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return W(W(W({},i),Ft(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var c=a.coordinate,l=i.angle;return W(W(W({},i),Ft(i.cx,i.cy,c,l)),{},{angle:l,radius:c})}return mI},jm=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(o,c){var l=c.props.data;return l&&l.length?[].concat(ec(o),ec(l)):o},[]);return s.length>0?s:e&&e.length&&te(i)&&te(a)?e.slice(i,a+1):[]};function gI(t){return t==="number"?[0,"auto"]:void 0}var Y0=function(e,n,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=jm(n,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(c,l){var d,f=(d=l.props.data)!==null&&d!==void 0?d:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(s.dataKey&&!s.allowDuplicatedCategory){var p=f===void 0?o:f;h=Xf(p,s.dataKey,i)}else h=f&&f[r]||o[r];return h?[].concat(ec(c),[dR(l,h)]):c},[])},hj=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},s=Voe(a,r),o=e.orderedTooltipTicks,c=e.tooltipAxis,l=e.tooltipTicks,d=fZ(s,o,l,c);if(d>=0&&l){var f=l[d]&&l[d].value,h=Y0(e,n,d,f),p=Woe(r,o,d,a);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},Hoe=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,l=n.dataEndIndex,d=e.layout,f=e.children,h=e.stackOffset,p=cR(d,a);return r.reduce(function(g,m){var b,v=m.type.defaultProps!==void 0?W(W({},m.type.defaultProps),m.props):m.props,x=v.type,S=v.dataKey,T=v.allowDataOverflow,w=v.allowDuplicatedCategory,k=v.scale,C=v.ticks,E=v.includeHidden,j=v[s];if(g[j])return g;var P=jm(e.data,{graphicalItems:i.filter(function(J){var ne,de=s in J.props?J.props[s]:(ne=J.type.defaultProps)===null||ne===void 0?void 0:ne[s];return de===j}),dataStartIndex:c,dataEndIndex:l}),N=P.length,_,A,R;boe(v.domain,T,x)&&(_=h0(v.domain,null,T),p&&(x==="number"||k!=="auto")&&(R=yl(P,S,"category")));var L=gI(x);if(!_||_.length===0){var U,q=(U=v.domain)!==null&&U!==void 0?U:L;if(S){if(_=yl(P,S,x),x==="category"&&p){var D=tB(_);w&&D?(A=_,_=Dh(0,N)):w||(_=LC(q,_,m).reduce(function(J,ne){return J.indexOf(ne)>=0?J:[].concat(ec(J),[ne])},[]))}else if(x==="category")w?_=_.filter(function(J){return J!==""&&!ve(J)}):_=LC(q,_,m).reduce(function(J,ne){return J.indexOf(ne)>=0||ne===""||ve(ne)?J:[].concat(ec(J),[ne])},[]);else if(x==="number"){var $=vZ(P,i.filter(function(J){var ne,de,xe=s in J.props?J.props[s]:(ne=J.type.defaultProps)===null||ne===void 0?void 0:ne[s],Se="hide"in J.props?J.props.hide:(de=J.type.defaultProps)===null||de===void 0?void 0:de.hide;return xe===j&&(E||!Se)}),S,a,d);$&&(_=$)}p&&(x==="number"||k!=="auto")&&(R=yl(P,S,"category"))}else p?_=Dh(0,N):o&&o[j]&&o[j].hasStack&&x==="number"?_=h==="expand"?[0,1]:uR(o[j].stackGroups,c,l):_=oR(P,i.filter(function(J){var ne=s in J.props?J.props[s]:J.type.defaultProps[s],de="hide"in J.props?J.props.hide:J.type.defaultProps.hide;return ne===j&&(E||!de)}),x,d,!0);if(x==="number")_=G0(f,_,j,a,C),q&&(_=h0(q,_,T));else if(x==="category"&&q){var I=q,V=_.every(function(J){return I.indexOf(J)>=0});V&&(_=I)}}return W(W({},g),{},le({},j,W(W({},v),{},{axisType:a,domain:_,categoricalDomain:R,duplicateDomain:A,originalDomain:(b=v.domain)!==null&&b!==void 0?b:L,isCategorical:p,layout:d})))},{})},Goe=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,l=n.dataEndIndex,d=e.layout,f=e.children,h=jm(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:l}),p=h.length,g=cR(d,a),m=-1;return r.reduce(function(b,v){var x=v.type.defaultProps!==void 0?W(W({},v.type.defaultProps),v.props):v.props,S=x[s],T=gI("number");if(!b[S]){m++;var w;return g?w=Dh(0,p):o&&o[S]&&o[S].hasStack?(w=uR(o[S].stackGroups,c,l),w=G0(f,w,S,a)):(w=h0(T,oR(h,r.filter(function(k){var C,E,j=s in k.props?k.props[s]:(C=k.type.defaultProps)===null||C===void 0?void 0:C[s],P="hide"in k.props?k.props.hide:(E=k.type.defaultProps)===null||E===void 0?void 0:E.hide;return j===S&&!P}),"number",d),i.defaultProps.allowDataOverflow),w=G0(f,w,S,a)),W(W({},b),{},le({},S,W(W({axisType:a},i.defaultProps),{},{hide:!0,orientation:Xn(zoe,"".concat(a,".").concat(m%2),null),domain:w,originalDomain:T,isCategorical:g,layout:d})))}return b},{})},Koe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,c=n.dataStartIndex,l=n.dataEndIndex,d=e.children,f="".concat(i,"Id"),h=Qn(d,a),p={};return h&&h.length?p=Hoe(e,{axes:h,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:l}):s&&s.length&&(p=Goe(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:l})),p},Joe=function(e){var n=Qi(e),r=yi(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:hw(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:jh(n,r)}},pj=function(e){var n=e.children,r=e.defaultShowTooltip,i=Nn(n,Vo),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},Yoe=function(e){return!e||!e.length?!1:e.some(function(n){var r=xi(n&&n.type);return r&&r.indexOf("Bar")>=0})},mj=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Xoe=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,c=o===void 0?{}:o,l=r.width,d=r.height,f=r.children,h=r.margin||{},p=Nn(f,Vo),g=Nn(f,po),m=Object.keys(c).reduce(function(w,k){var C=c[k],E=C.orientation;return!C.mirror&&!C.hide?W(W({},w),{},le({},E,w[E]+C.width)):w},{left:h.left||0,right:h.right||0}),b=Object.keys(s).reduce(function(w,k){var C=s[k],E=C.orientation;return!C.mirror&&!C.hide?W(W({},w),{},le({},E,Xn(w,"".concat(E))+C.height)):w},{top:h.top||0,bottom:h.bottom||0}),v=W(W({},b),m),x=v.bottom;p&&(v.bottom+=p.props.height||Vo.defaultProps.height),g&&n&&(v=mZ(v,i,r,n));var S=l-v.left-v.right,T=d-v.top-v.bottom;return W(W({brushBottom:x},v),{},{width:Math.max(S,0),height:Math.max(T,0)})},Qoe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},Zoe=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,c=e.axisComponents,l=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,h=function(v,x){var S=x.graphicalItems,T=x.stackGroups,w=x.offset,k=x.updateId,C=x.dataStartIndex,E=x.dataEndIndex,j=v.barSize,P=v.layout,N=v.barGap,_=v.barCategoryGap,A=v.maxBarSize,R=mj(P),L=R.numericAxisName,U=R.cateAxisName,q=Yoe(S),D=[];return S.forEach(function($,I){var V=jm(v.data,{graphicalItems:[$],dataStartIndex:C,dataEndIndex:E}),J=$.type.defaultProps!==void 0?W(W({},$.type.defaultProps),$.props):$.props,ne=J.dataKey,de=J.maxBarSize,xe=J["".concat(L,"Id")],Se=J["".concat(U,"Id")],ke={},K=c.reduce(function(Ia,Ma){var Ym=x["".concat(Ma.axisType,"Map")],V1=J["".concat(Ma.axisType,"Id")];Ym&&Ym[V1]||Ma.axisType==="zAxis"||ps(!1);var W1=Ym[V1];return W(W({},Ia),{},le(le({},Ma.axisType,W1),"".concat(Ma.axisType,"Ticks"),yi(W1)))},ke),G=K[U],ae=K["".concat(U,"Ticks")],oe=T&&T[xe]&&T[xe].hasStack&&PZ($,T[xe].stackGroups),X=xi($.type).indexOf("Bar")>=0,ce=jh(G,ae),ue=[],Oe=q&&hZ({barSize:j,stackGroups:T,totalSize:Qoe(K,U)});if(X){var lt,ln,zi=ve(de)?A:de,Os=(lt=(ln=jh(G,ae,!0))!==null&&ln!==void 0?ln:zi)!==null&&lt!==void 0?lt:0;ue=pZ({barGap:N,barCategoryGap:_,bandSize:Os!==ce?Os:ce,sizeList:Oe[Se],maxBarSize:zi}),Os!==ce&&(ue=ue.map(function(Ia){return W(W({},Ia),{},{position:W(W({},Ia.position),{},{offset:Ia.position.offset-Os/2})})}))}var id=$&&$.type&&$.type.getComposedData;id&&D.push({props:W(W({},id(W(W({},K),{},{displayedData:V,props:v,dataKey:ne,item:$,bandSize:ce,barPosition:ue,offset:w,stackedData:oe,layout:P,dataStartIndex:C,dataEndIndex:E}))),{},le(le(le({key:$.key||"item-".concat(I)},L,K[L]),U,K[U]),"animationId",k)),childIndex:pB($,v.children),item:$})}),D},p=function(v,x){var S=v.props,T=v.dataStartIndex,w=v.dataEndIndex,k=v.updateId;if(!Ek({props:S}))return null;var C=S.children,E=S.layout,j=S.stackOffset,P=S.data,N=S.reverseStackOrder,_=mj(E),A=_.numericAxisName,R=_.cateAxisName,L=Qn(C,r),U=EZ(P,L,"".concat(A,"Id"),"".concat(R,"Id"),j,N),q=c.reduce(function(J,ne){var de="".concat(ne.axisType,"Map");return W(W({},J),{},le({},de,Koe(S,W(W({},ne),{},{graphicalItems:L,stackGroups:ne.axisType===A&&U,dataStartIndex:T,dataEndIndex:w}))))},{}),D=Xoe(W(W({},q),{},{props:S,graphicalItems:L}),x==null?void 0:x.legendBBox);Object.keys(q).forEach(function(J){q[J]=d(S,q[J],D,J.replace("Map",""),n)});var $=q["".concat(R,"Map")],I=Joe($),V=h(S,W(W({},q),{},{dataStartIndex:T,dataEndIndex:w,updateId:k,graphicalItems:L,stackGroups:U,offset:D}));return W(W({formattedGraphicalItems:V,graphicalItems:L,offset:D,stackGroups:U},I),q)},g=function(b){function v(x){var S,T,w;return Aoe(this,v),w=Ioe(this,v,[x]),le(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),le(w,"accessibilityManager",new yoe),le(w,"handleLegendBBoxUpdate",function(k){if(k){var C=w.state,E=C.dataStartIndex,j=C.dataEndIndex,P=C.updateId;w.setState(W({legendBBox:k},p({props:w.props,dataStartIndex:E,dataEndIndex:j,updateId:P},W(W({},w.state),{},{legendBBox:k}))))}}),le(w,"handleReceiveSyncEvent",function(k,C,E){if(w.props.syncId===k){if(E===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(C)}}),le(w,"handleBrushChange",function(k){var C=k.startIndex,E=k.endIndex;if(C!==w.state.dataStartIndex||E!==w.state.dataEndIndex){var j=w.state.updateId;w.setState(function(){return W({dataStartIndex:C,dataEndIndex:E},p({props:w.props,dataStartIndex:C,dataEndIndex:E,updateId:j},w.state))}),w.triggerSyncEvent({dataStartIndex:C,dataEndIndex:E})}}),le(w,"handleMouseEnter",function(k){var C=w.getMouseInfo(k);if(C){var E=W(W({},C),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var j=w.props.onMouseEnter;me(j)&&j(E,k)}}),le(w,"triggeredAfterMouseMove",function(k){var C=w.getMouseInfo(k),E=C?W(W({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(E),w.triggerSyncEvent(E);var j=w.props.onMouseMove;me(j)&&j(E,k)}),le(w,"handleItemMouseEnter",function(k){w.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),le(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),le(w,"handleMouseMove",function(k){k.persist(),w.throttleTriggeredAfterMouseMove(k)}),le(w,"handleMouseLeave",function(k){w.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};w.setState(C),w.triggerSyncEvent(C);var E=w.props.onMouseLeave;me(E)&&E(C,k)}),le(w,"handleOuterEvent",function(k){var C=hB(k),E=Xn(w.props,"".concat(C));if(C&&me(E)){var j,P;/.*touch.*/i.test(C)?P=w.getMouseInfo(k.changedTouches[0]):P=w.getMouseInfo(k),E((j=P)!==null&&j!==void 0?j:{},k)}}),le(w,"handleClick",function(k){var C=w.getMouseInfo(k);if(C){var E=W(W({},C),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var j=w.props.onClick;me(j)&&j(E,k)}}),le(w,"handleMouseDown",function(k){var C=w.props.onMouseDown;if(me(C)){var E=w.getMouseInfo(k);C(E,k)}}),le(w,"handleMouseUp",function(k){var C=w.props.onMouseUp;if(me(C)){var E=w.getMouseInfo(k);C(E,k)}}),le(w,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),le(w,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&w.handleMouseDown(k.changedTouches[0])}),le(w,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&w.handleMouseUp(k.changedTouches[0])}),le(w,"handleDoubleClick",function(k){var C=w.props.onDoubleClick;if(me(C)){var E=w.getMouseInfo(k);C(E,k)}}),le(w,"handleContextMenu",function(k){var C=w.props.onContextMenu;if(me(C)){var E=w.getMouseInfo(k);C(E,k)}}),le(w,"triggerSyncEvent",function(k){w.props.syncId!==void 0&&Yg.emit(Xg,w.props.syncId,k,w.eventEmitterSymbol)}),le(w,"applySyncEvent",function(k){var C=w.props,E=C.layout,j=C.syncMethod,P=w.state.updateId,N=k.dataStartIndex,_=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)w.setState(W({dataStartIndex:N,dataEndIndex:_},p({props:w.props,dataStartIndex:N,dataEndIndex:_,updateId:P},w.state)));else if(k.activeTooltipIndex!==void 0){var A=k.chartX,R=k.chartY,L=k.activeTooltipIndex,U=w.state,q=U.offset,D=U.tooltipTicks;if(!q)return;if(typeof j=="function")L=j(D,k);else if(j==="value"){L=-1;for(var $=0;$<D.length;$++)if(D[$].value===k.activeLabel){L=$;break}}var I=W(W({},q),{},{x:q.left,y:q.top}),V=Math.min(A,I.x+I.width),J=Math.min(R,I.y+I.height),ne=D[L]&&D[L].value,de=Y0(w.state,w.props.data,L),xe=D[L]?{x:E==="horizontal"?D[L].coordinate:V,y:E==="horizontal"?J:D[L].coordinate}:mI;w.setState(W(W({},k),{},{activeLabel:ne,activeCoordinate:xe,activePayload:de,activeTooltipIndex:L}))}else w.setState(k)}),le(w,"renderCursor",function(k){var C,E=w.state,j=E.isTooltipActive,P=E.activeCoordinate,N=E.activePayload,_=E.offset,A=E.activeTooltipIndex,R=E.tooltipAxisBandSize,L=w.getTooltipEventType(),U=(C=k.props.active)!==null&&C!==void 0?C:j,q=w.props.layout,D=k.key||"_recharts-cursor";return M.createElement(Coe,{key:D,activeCoordinate:P,activePayload:N,activeTooltipIndex:A,chartName:n,element:k,isActive:U,layout:q,offset:_,tooltipAxisBandSize:R,tooltipEventType:L})}),le(w,"renderPolarAxis",function(k,C,E){var j=Xn(k,"type.axisType"),P=Xn(w.state,"".concat(j,"Map")),N=k.type.defaultProps,_=N!==void 0?W(W({},N),k.props):k.props,A=P&&P[_["".concat(j,"Id")]];return y.cloneElement(k,W(W({},A),{},{className:Ne(j,A.className),key:k.key||"".concat(C,"-").concat(E),ticks:yi(A,!0)}))}),le(w,"renderPolarGrid",function(k){var C=k.props,E=C.radialLines,j=C.polarAngles,P=C.polarRadius,N=w.state,_=N.radiusAxisMap,A=N.angleAxisMap,R=Qi(_),L=Qi(A),U=L.cx,q=L.cy,D=L.innerRadius,$=L.outerRadius;return y.cloneElement(k,{polarAngles:Array.isArray(j)?j:yi(L,!0).map(function(I){return I.coordinate}),polarRadius:Array.isArray(P)?P:yi(R,!0).map(function(I){return I.coordinate}),cx:U,cy:q,innerRadius:D,outerRadius:$,key:k.key||"polar-grid",radialLines:E})}),le(w,"renderLegend",function(){var k=w.state.formattedGraphicalItems,C=w.props,E=C.children,j=C.width,P=C.height,N=w.props.margin||{},_=j-(N.left||0)-(N.right||0),A=aR({children:E,formattedGraphicalItems:k,legendWidth:_,legendContent:l});if(!A)return null;var R=A.item,L=uj(A,Eoe);return y.cloneElement(R,W(W({},L),{},{chartWidth:j,chartHeight:P,margin:N,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),le(w,"renderTooltip",function(){var k,C=w.props,E=C.children,j=C.accessibilityLayer,P=Nn(E,oi);if(!P)return null;var N=w.state,_=N.isTooltipActive,A=N.activeCoordinate,R=N.activePayload,L=N.activeLabel,U=N.offset,q=(k=P.props.active)!==null&&k!==void 0?k:_;return y.cloneElement(P,{viewBox:W(W({},U),{},{x:U.left,y:U.top}),active:q,label:L,payload:q?R:[],coordinate:A,accessibilityLayer:j})}),le(w,"renderBrush",function(k){var C=w.props,E=C.margin,j=C.data,P=w.state,N=P.offset,_=P.dataStartIndex,A=P.dataEndIndex,R=P.updateId;return y.cloneElement(k,{key:k.key||"_recharts-brush",onChange:Od(w.handleBrushChange,k.props.onChange),data:j,x:te(k.props.x)?k.props.x:N.left,y:te(k.props.y)?k.props.y:N.top+N.height+N.brushBottom-(E.bottom||0),width:te(k.props.width)?k.props.width:N.width,startIndex:_,endIndex:A,updateId:"brush-".concat(R)})}),le(w,"renderReferenceElement",function(k,C,E){if(!k)return null;var j=w,P=j.clipPathId,N=w.state,_=N.xAxisMap,A=N.yAxisMap,R=N.offset,L=k.type.defaultProps||{},U=k.props,q=U.xAxisId,D=q===void 0?L.xAxisId:q,$=U.yAxisId,I=$===void 0?L.yAxisId:$;return y.cloneElement(k,{key:k.key||"".concat(C,"-").concat(E),xAxis:_[D],yAxis:A[I],viewBox:{x:R.left,y:R.top,width:R.width,height:R.height},clipPathId:P})}),le(w,"renderActivePoints",function(k){var C=k.item,E=k.activePoint,j=k.basePoint,P=k.childIndex,N=k.isRange,_=[],A=C.props.key,R=C.item.type.defaultProps!==void 0?W(W({},C.item.type.defaultProps),C.item.props):C.item.props,L=R.activeDot,U=R.dataKey,q=W(W({index:P,dataKey:U,cx:E.x,cy:E.y,r:4,fill:Uw(C.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},Ce(L,!1)),Qf(L));return _.push(v.renderActiveDot(L,q,"".concat(A,"-activePoint-").concat(P))),j?_.push(v.renderActiveDot(L,W(W({},q),{},{cx:j.x,cy:j.y}),"".concat(A,"-basePoint-").concat(P))):N&&_.push(null),_}),le(w,"renderGraphicChild",function(k,C,E){var j=w.filterFormatItem(k,C,E);if(!j)return null;var P=w.getTooltipEventType(),N=w.state,_=N.isTooltipActive,A=N.tooltipAxis,R=N.activeTooltipIndex,L=N.activeLabel,U=w.props.children,q=Nn(U,oi),D=j.props,$=D.points,I=D.isRange,V=D.baseLine,J=j.item.type.defaultProps!==void 0?W(W({},j.item.type.defaultProps),j.item.props):j.item.props,ne=J.activeDot,de=J.hide,xe=J.activeBar,Se=J.activeShape,ke=!!(!de&&_&&q&&(ne||xe||Se)),K={};P!=="axis"&&q&&q.props.trigger==="click"?K={onClick:Od(w.handleItemMouseEnter,k.props.onClick)}:P!=="axis"&&(K={onMouseLeave:Od(w.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:Od(w.handleItemMouseEnter,k.props.onMouseEnter)});var G=y.cloneElement(k,W(W({},j.props),K));function ae(Ma){return typeof A.dataKey=="function"?A.dataKey(Ma.payload):null}if(ke)if(R>=0){var oe,X;if(A.dataKey&&!A.allowDuplicatedCategory){var ce=typeof A.dataKey=="function"?ae:"payload.".concat(A.dataKey.toString());oe=Xf($,ce,L),X=I&&V&&Xf(V,ce,L)}else oe=$==null?void 0:$[R],X=I&&V&&V[R];if(Se||xe){var ue=k.props.activeIndex!==void 0?k.props.activeIndex:R;return[y.cloneElement(k,W(W(W({},j.props),K),{},{activeIndex:ue})),null,null]}if(!ve(oe))return[G].concat(ec(w.renderActivePoints({item:j,activePoint:oe,basePoint:X,childIndex:R,isRange:I})))}else{var Oe,lt=(Oe=w.getItemByXY(w.state.activeCoordinate))!==null&&Oe!==void 0?Oe:{graphicalItem:G},ln=lt.graphicalItem,zi=ln.item,Os=zi===void 0?k:zi,id=ln.childIndex,Ia=W(W(W({},j.props),K),{},{activeIndex:id});return[y.cloneElement(Os,Ia),null,null]}return I?[G,null,null]:[G,null]}),le(w,"renderCustomized",function(k,C,E){return y.cloneElement(k,W(W({key:"recharts-customized-".concat(E)},w.props),w.state))}),le(w,"renderMap",{CartesianGrid:{handler:Dd,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Dd},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Dd},YAxis:{handler:Dd},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((S=x.id)!==null&&S!==void 0?S:Vu("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=iA(w.triggeredAfterMouseMove,(T=x.throttleDelay)!==null&&T!==void 0?T:1e3/60),w.state={},w}return Loe(v,b),Roe(v,[{key:"componentDidMount",value:function(){var S,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var S=this.props,T=S.children,w=S.data,k=S.height,C=S.layout,E=Nn(T,oi);if(E){var j=E.props.defaultIndex;if(!(typeof j!="number"||j<0||j>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[j]&&this.state.tooltipTicks[j].value,N=Y0(this.state,w,j,P),_=this.state.tooltipTicks[j].coordinate,A=(this.state.offset.top+k)/2,R=C==="horizontal",L=R?{x:_,y:A}:{y:_,x:A},U=this.state.formattedGraphicalItems.find(function(D){var $=D.item;return $.type.name==="Scatter"});U&&(L=W(W({},L),U.props.points[j].tooltipPosition),N=U.props.points[j].tooltipPayload);var q={activeTooltipIndex:j,isTooltipActive:!0,activeLabel:P,activePayload:N,activeCoordinate:L};this.setState(q),this.renderCursor(E),this.accessibilityManager.setIndex(j)}}}},{key:"getSnapshotBeforeUpdate",value:function(S,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==S.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==S.margin){var w,k;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(S){Ny([Nn(S.children,oi)],[Nn(this.props.children,oi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var S=Nn(this.props.children,oi);if(S&&typeof S.props.shared=="boolean"){var T=S.props.shared?"axis":"item";return o.indexOf(T)>=0?T:a}return a}},{key:"getMouseInfo",value:function(S){if(!this.container)return null;var T=this.container,w=T.getBoundingClientRect(),k=$K(w),C={chartX:Math.round(S.pageX-k.left),chartY:Math.round(S.pageY-k.top)},E=w.width/T.offsetWidth||1,j=this.inRange(C.chartX,C.chartY,E);if(!j)return null;var P=this.state,N=P.xAxisMap,_=P.yAxisMap,A=this.getTooltipEventType(),R=hj(this.state,this.props.data,this.props.layout,j);if(A!=="axis"&&N&&_){var L=Qi(N).scale,U=Qi(_).scale,q=L&&L.invert?L.invert(C.chartX):null,D=U&&U.invert?U.invert(C.chartY):null;return W(W({},C),{},{xValue:q,yValue:D},R)}return R?W(W({},C),R):null}},{key:"inRange",value:function(S,T){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,C=S/w,E=T/w;if(k==="horizontal"||k==="vertical"){var j=this.state.offset,P=C>=j.left&&C<=j.left+j.width&&E>=j.top&&E<=j.top+j.height;return P?{x:C,y:E}:null}var N=this.state,_=N.angleAxisMap,A=N.radiusAxisMap;if(_&&A){var R=Qi(_);return FC({x:C,y:E},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var S=this.props.children,T=this.getTooltipEventType(),w=Nn(S,oi),k={};w&&T==="axis"&&(w.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=Qf(this.props,this.handleOuterEvent);return W(W({},C),k)}},{key:"addListener",value:function(){Yg.on(Xg,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Yg.removeListener(Xg,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(S,T,w){for(var k=this.state.formattedGraphicalItems,C=0,E=k.length;C<E;C++){var j=k[C];if(j.item===S||j.props.key===S.key||T===xi(j.item.type)&&w===j.childIndex)return j}return null}},{key:"renderClipPath",value:function(){var S=this.clipPathId,T=this.state.offset,w=T.left,k=T.top,C=T.height,E=T.width;return M.createElement("defs",null,M.createElement("clipPath",{id:S},M.createElement("rect",{x:w,y:k,height:C,width:E})))}},{key:"getXScales",value:function(){var S=this.state.xAxisMap;return S?Object.entries(S).reduce(function(T,w){var k=lj(w,2),C=k[0],E=k[1];return W(W({},T),{},le({},C,E.scale))},{}):null}},{key:"getYScales",value:function(){var S=this.state.yAxisMap;return S?Object.entries(S).reduce(function(T,w){var k=lj(w,2),C=k[0],E=k[1];return W(W({},T),{},le({},C,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(S){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[S])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(S){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[S])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(S){var T=this.state,w=T.formattedGraphicalItems,k=T.activeItem;if(w&&w.length)for(var C=0,E=w.length;C<E;C++){var j=w[C],P=j.props,N=j.item,_=N.type.defaultProps!==void 0?W(W({},N.type.defaultProps),N.props):N.props,A=xi(N.type);if(A==="Bar"){var R=(P.data||[]).find(function(D){return xne(S,D)});if(R)return{graphicalItem:j,payload:R}}else if(A==="RadialBar"){var L=(P.data||[]).find(function(D){return FC(S,D)});if(L)return{graphicalItem:j,payload:L}}else if(ym(j,k)||bm(j,k)||wu(j,k)){var U=kre({graphicalItem:j,activeTooltipItem:k,itemData:_.data}),q=_.activeIndex===void 0?U:_.activeIndex;return{graphicalItem:W(W({},j),{},{childIndex:q}),payload:wu(j,k)?_.data[U]:j.props.data[U]}}}return null}},{key:"render",value:function(){var S=this;if(!Ek(this))return null;var T=this.props,w=T.children,k=T.className,C=T.width,E=T.height,j=T.style,P=T.compact,N=T.title,_=T.desc,A=uj(T,joe),R=Ce(A,!1);if(P)return M.createElement(UE,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},M.createElement(_y,ro({},R,{width:C,height:E,title:N,desc:_}),this.renderClipPath(),Nk(w,this.renderMap)));if(this.props.accessibilityLayer){var L,U;R.tabIndex=(L=this.props.tabIndex)!==null&&L!==void 0?L:0,R.role=(U=this.props.role)!==null&&U!==void 0?U:"application",R.onKeyDown=function(D){S.accessibilityManager.keyboardEvent(D)},R.onFocus=function(){S.accessibilityManager.focus()}}var q=this.parseEventsOfWrapper();return M.createElement(UE,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},M.createElement("div",ro({className:Ne("recharts-wrapper",k),style:W({position:"relative",cursor:"default",width:C,height:E},j)},q,{ref:function($){S.container=$}}),M.createElement(_y,ro({},R,{width:C,height:E,title:N,desc:_,style:qoe}),this.renderClipPath(),Nk(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(y.Component);le(g,"displayName",n),le(g,"defaultProps",W({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),le(g,"getDerivedStateFromProps",function(b,v){var x=b.dataKey,S=b.data,T=b.children,w=b.width,k=b.height,C=b.layout,E=b.stackOffset,j=b.margin,P=v.dataStartIndex,N=v.dataEndIndex;if(v.updateId===void 0){var _=pj(b);return W(W(W({},_),{},{updateId:0},p(W(W({props:b},_),{},{updateId:0}),v)),{},{prevDataKey:x,prevData:S,prevWidth:w,prevHeight:k,prevLayout:C,prevStackOffset:E,prevMargin:j,prevChildren:T})}if(x!==v.prevDataKey||S!==v.prevData||w!==v.prevWidth||k!==v.prevHeight||C!==v.prevLayout||E!==v.prevStackOffset||!ho(j,v.prevMargin)){var A=pj(b),R={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},L=W(W({},hj(v,S,C)),{},{updateId:v.updateId+1}),U=W(W(W({},A),R),L);return W(W(W({},U),p(W({props:b},U),v)),{},{prevDataKey:x,prevData:S,prevWidth:w,prevHeight:k,prevLayout:C,prevStackOffset:E,prevMargin:j,prevChildren:T})}if(!Ny(T,v.prevChildren)){var q,D,$,I,V=Nn(T,Vo),J=V&&(q=(D=V.props)===null||D===void 0?void 0:D.startIndex)!==null&&q!==void 0?q:P,ne=V&&($=(I=V.props)===null||I===void 0?void 0:I.endIndex)!==null&&$!==void 0?$:N,de=J!==P||ne!==N,xe=!ve(S),Se=xe&&!de?v.updateId:v.updateId+1;return W(W({updateId:Se},p(W(W({props:b},v),{},{updateId:Se,dataStartIndex:J,dataEndIndex:ne}),v)),{},{prevChildren:T,dataStartIndex:J,dataEndIndex:ne})}return null}),le(g,"renderActiveDot",function(b,v,x){var S;return y.isValidElement(b)?S=y.cloneElement(b,v):me(b)?S=b(v):S=M.createElement(Bw,v),M.createElement(ht,{className:"recharts-active-dot",key:x},S)});var m=y.forwardRef(function(v,x){return M.createElement(g,ro({},v,{ref:x}))});return m.displayName=g.displayName,m},ece=Zoe({chartName:"LineChart",GraphicalChild:Qu,axisComponents:[{axisType:"xAxis",AxisComp:Cm},{axisType:"yAxis",AxisComp:Em}],formatAxisMap:Kie});const Xr=Object.create(null);Xr.open="0";Xr.close="1";Xr.ping="2";Xr.pong="3";Xr.message="4";Xr.upgrade="5";Xr.noop="6";const of=Object.create(null);Object.keys(Xr).forEach(t=>{of[Xr[t]]=t});const X0={type:"error",data:"parser error"},vI=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",yI=typeof ArrayBuffer=="function",bI=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Xw=({type:t,data:e},n,r)=>vI&&e instanceof Blob?n?r(e):gj(e,r):yI&&(e instanceof ArrayBuffer||bI(e))?n?r(e):gj(new Blob([e]),r):r(Xr[t]+(e||"")),gj=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function vj(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Zg;function tce(t,e){if(vI&&t.data instanceof Blob)return t.data.arrayBuffer().then(vj).then(e);if(yI&&(t.data instanceof ArrayBuffer||bI(t.data)))return e(vj(t.data));Xw(t,!1,n=>{Zg||(Zg=new TextEncoder),e(Zg.encode(n))})}const yj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",il=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<yj.length;t++)il[yj.charCodeAt(t)]=t;const nce=t=>{let e=t.length*.75,n=t.length,r,i=0,a,s,o,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),d=new Uint8Array(l);for(r=0;r<n;r+=4)a=il[t.charCodeAt(r)],s=il[t.charCodeAt(r+1)],o=il[t.charCodeAt(r+2)],c=il[t.charCodeAt(r+3)],d[i++]=a<<2|s>>4,d[i++]=(s&15)<<4|o>>2,d[i++]=(o&3)<<6|c&63;return l},rce=typeof ArrayBuffer=="function",Qw=(t,e)=>{if(typeof t!="string")return{type:"message",data:xI(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:ice(t.substring(1),e)}:of[n]?t.length>1?{type:of[n],data:t.substring(1)}:{type:of[n]}:X0},ice=(t,e)=>{if(rce){const n=nce(t);return xI(n,e)}else return{base64:!0,data:t}},xI=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},wI=String.fromCharCode(30),ace=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((a,s)=>{Xw(a,!1,o=>{r[s]=o,++i===n&&e(r.join(wI))})})},sce=(t,e)=>{const n=t.split(wI),r=[];for(let i=0;i<n.length;i++){const a=Qw(n[i],e);if(r.push(a),a.type==="error")break}return r};function oce(){return new TransformStream({transform(t,e){tce(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,r)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let ev;function Ld(t){return t.reduce((e,n)=>e+n.length,0)}function $d(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function cce(t,e){ev||(ev=new TextDecoder);const n=[];let r=0,i=-1,a=!1;return new TransformStream({transform(s,o){for(n.push(s);;){if(r===0){if(Ld(n)<1)break;const c=$d(n,1);a=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Ld(n)<2)break;const c=$d(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Ld(n)<8)break;const c=$d(n,8),l=new DataView(c.buffer,c.byteOffset,c.length),d=l.getUint32(0);if(d>Math.pow(2,53-32)-1){o.enqueue(X0);break}i=d*Math.pow(2,32)+l.getUint32(4),r=3}else{if(Ld(n)<i)break;const c=$d(n,i);o.enqueue(Qw(a?c:ev.decode(c),e)),r=0}if(i===0||i>t){o.enqueue(X0);break}}}})}const SI=4;function vt(t){if(t)return lce(t)}function lce(t){for(var e in vt.prototype)t[e]=vt.prototype[e];return t}vt.prototype.on=vt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};vt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};vt.prototype.off=vt.prototype.removeListener=vt.prototype.removeAllListeners=vt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};vt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};vt.prototype.emitReserved=vt.prototype.emit;vt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};vt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Nm=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0))(),Wn=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),uce="arraybuffer";function kI(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const dce=Wn.setTimeout,fce=Wn.clearTimeout;function Pm(t,e){e.useNativeTimers?(t.setTimeoutFn=dce.bind(Wn),t.clearTimeoutFn=fce.bind(Wn)):(t.setTimeoutFn=Wn.setTimeout.bind(Wn),t.clearTimeoutFn=Wn.clearTimeout.bind(Wn))}const hce=1.33;function pce(t){return typeof t=="string"?mce(t):Math.ceil((t.byteLength||t.size)*hce)}function mce(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function TI(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function gce(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function vce(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let a=n[r].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}class yce extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class Zw extends vt{constructor(e){super(),this.writable=!1,Pm(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new yce(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Qw(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=gce(e);return n.length?"?"+n:""}}class bce extends Zw{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};sce(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,ace(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=TI()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let CI=!1;try{CI=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const xce=CI;function wce(){}class Sce extends bce{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Gr extends vt{constructor(e,n,r){super(),this.createRequest=e,Pm(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=kI(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Gr.requestsCount++,Gr.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=wce,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Gr.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Gr.requestsCount=0;Gr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",bj);else if(typeof addEventListener=="function"){const t="onpagehide"in Wn?"pagehide":"unload";addEventListener(t,bj,!1)}}function bj(){for(let t in Gr.requests)Gr.requests.hasOwnProperty(t)&&Gr.requests[t].abort()}const kce=function(){const t=EI({xdomain:!1});return t&&t.responseType!==null}();class Tce extends Sce{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=kce&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Gr(EI,this.uri(),e)}}function EI(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||xce))return new XMLHttpRequest}catch{}if(!e)try{return new Wn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const jI=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Cce extends Zw{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=jI?{}:kI(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;Xw(r,this.supportsBinary,a=>{try{this.doWrite(r,a)}catch{}i&&Nm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=TI()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const tv=Wn.WebSocket||Wn.MozWebSocket;class Ece extends Cce{createSocket(e,n,r){return jI?new tv(e,n,r):n?new tv(e,n):new tv(e)}doWrite(e,n){this.ws.send(n)}}class jce extends Zw{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=cce(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=oce();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const a=()=>{r.read().then(({done:o,value:c})=>{o||(this.onPacket(c),a())}).catch(o=>{})};a();const s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Nm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Nce={websocket:Ece,webtransport:jce,polling:Tce},Pce=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_ce=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Q0(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=Pce.exec(t||""),a={},s=14;for(;s--;)a[_ce[s]]=i[s]||"";return n!=-1&&r!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=Oce(a,a.path),a.queryKey=Ace(a,a.query),a}function Oce(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Ace(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,a){i&&(n[i]=a)}),n}const Z0=typeof addEventListener=="function"&&typeof removeEventListener=="function",cf=[];Z0&&addEventListener("offline",()=>{cf.forEach(t=>t())},!1);class ma extends vt{constructor(e,n){if(super(),this.binaryType=uce,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=Q0(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Q0(n.host).host);Pm(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=vce(this.opts.query)),Z0&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},cf.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=SI,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ma.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ma.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=pce(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Nm(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const a={type:e,data:n,options:r};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ma.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Z0&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=cf.indexOf(this._offlineEventListener);r!==-1&&cf.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}ma.protocol=SI;class Rce extends ma{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;ma.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ma.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function a(){r||(r=!0,d(),n.close(),n=null)}const s=f=>{const h=new Error("probe error: "+f);h.transport=n.name,a(),this.emitReserved("upgradeError",h)};function o(){s("transport closed")}function c(){s("socket closed")}function l(f){n&&f.name!==n.name&&a()}const d=()=>{n.removeListener("open",i),n.removeListener("error",s),n.removeListener("close",o),this.off("close",c),this.off("upgrading",l)};n.once("open",i),n.once("error",s),n.once("close",o),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let Ice=class extends Rce{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>Nce[i]).filter(i=>!!i)),super(e,r)}};function Mce(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Q0(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const a=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+e,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}const Dce=typeof ArrayBuffer=="function",Lce=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,NI=Object.prototype.toString,$ce=typeof Blob=="function"||typeof Blob<"u"&&NI.call(Blob)==="[object BlobConstructor]",Uce=typeof File=="function"||typeof File<"u"&&NI.call(File)==="[object FileConstructor]";function e1(t){return Dce&&(t instanceof ArrayBuffer||Lce(t))||$ce&&t instanceof Blob||Uce&&t instanceof File}function lf(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(lf(t[n]))return!0;return!1}if(e1(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return lf(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&lf(t[n]))return!0;return!1}function Fce(t){const e=[],n=t.data,r=t;return r.data=eb(n,e),r.attachments=e.length,{packet:r,buffers:e}}function eb(t,e){if(!t)return t;if(e1(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=eb(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=eb(t[r],e));return n}return t}function Bce(t,e){return t.data=tb(t.data,e),delete t.attachments,t}function tb(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=tb(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=tb(t[n],e));return t}const zce=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],qce=5;var Te;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Te||(Te={}));class Vce{constructor(e){this.replacer=e}encode(e){return(e.type===Te.EVENT||e.type===Te.ACK)&&lf(e)?this.encodeAsBinary({type:e.type===Te.EVENT?Te.BINARY_EVENT:Te.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Te.BINARY_EVENT||e.type===Te.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Fce(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function xj(t){return Object.prototype.toString.call(t)==="[object Object]"}class t1 extends vt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Te.BINARY_EVENT;r||n.type===Te.BINARY_ACK?(n.type=r?Te.EVENT:Te.ACK,this.reconstructor=new Wce(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(e1(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Te[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Te.BINARY_EVENT||r.type===Te.BINARY_ACK){const a=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const s=e.substring(a,n);if(s!=Number(s)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(s)}if(e.charAt(n+1)==="/"){const a=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(a,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const a=n+1;for(;++n;){const s=e.charAt(n);if(s==null||Number(s)!=s){--n;break}if(n===e.length)break}r.id=Number(e.substring(a,n+1))}if(e.charAt(++n)){const a=this.tryParse(e.substr(n));if(t1.isPayloadValid(r.type,a))r.data=a;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Te.CONNECT:return xj(n);case Te.DISCONNECT:return n===void 0;case Te.CONNECT_ERROR:return typeof n=="string"||xj(n);case Te.EVENT:case Te.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&zce.indexOf(n[0])===-1);case Te.ACK:case Te.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Wce{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=Bce(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Hce=Object.freeze(Object.defineProperty({__proto__:null,Decoder:t1,Encoder:Vce,get PacketType(){return Te},protocol:qce},Symbol.toStringTag,{value:"Module"}));function dr(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Gce=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class PI extends vt{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[dr(e,"open",this.onopen.bind(this)),dr(e,"packet",this.onpacket.bind(this)),dr(e,"error",this.onerror.bind(this)),dr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,a;if(Gce.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const s={type:Te.EVENT,data:n};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,f=n.pop();this._registerAckCallback(d,f),s.id=d}const o=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},i),s=(...o)=>{this.io.clearTimeoutFn(a),n.apply(this,o)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...n){return new Promise((r,i)=>{const a=(s,o)=>s?i(s):r(o);a.withError=!0,n.push(a),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...a)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...a)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Te.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Te.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Te.EVENT:case Te.BINARY_EVENT:this.onevent(e);break;case Te.ACK:case Te.BINARY_ACK:this.onack(e);break;case Te.DISCONNECT:this.ondisconnect();break;case Te.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Te.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Te.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function kc(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}kc.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};kc.prototype.reset=function(){this.attempts=0};kc.prototype.setMin=function(t){this.ms=t};kc.prototype.setMax=function(t){this.max=t};kc.prototype.setJitter=function(t){this.jitter=t};class nb extends vt{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Pm(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new kc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||Hce;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Ice(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=dr(n,"open",function(){r.onopen(),e&&e()}),a=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},s=dr(n,"error",a);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),n.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(dr(e,"ping",this.onping.bind(this)),dr(e,"data",this.ondata.bind(this)),dr(e,"error",this.onerror.bind(this)),dr(e,"close",this.onclose.bind(this)),dr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Nm(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new PI(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Vc={};function wl(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Mce(t,e.path||"/socket.io"),r=n.source,i=n.id,a=n.path,s=Vc[i]&&a in Vc[i].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||s;let c;return o?c=new nb(r,e):(Vc[i]||(Vc[i]=new nb(r,e)),c=Vc[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(wl,{Manager:nb,Socket:PI,io:wl,connect:wl});var nP,rP;const Kce=((rP=(nP=import.meta)==null?void 0:nP.env)==null?void 0:rP.VITE_API_BASE_URL)||window.__API_BASE_URL__||"",Ir=`${Kce}/api/doubts`;class Jce{constructor(){this.token=localStorage.getItem("token")}getToken(){return this.token||localStorage.getItem("token")}async makeAuthenticatedRequest(e,n={}){const r=this.getToken();if(console.log("Making authenticated request to:",e),console.log("Using token:",r?"Token present":"No token"),!r)throw new Error("No authentication token found");const i={headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`,...n.headers}};console.log("Request headers:",i.headers);const a=await fetch(e,{...i,...n});if(console.log("Response status:",a.status),a.status===401)throw new Error("Authentication failed");return a}async createDoubt(e){try{console.log(" Creating doubt with data:",e),console.log(" API URL:",`${Ir}/create`);const n=new AbortController,r=setTimeout(()=>n.abort(),3e4),i=await this.makeAuthenticatedRequest(`${Ir}/create`,{method:"POST",body:JSON.stringify(e),signal:n.signal});clearTimeout(r),console.log(" Doubt creation response status:",i.status);const a=await i.json();if(console.log(" Doubt creation response data:",a),!i.ok)throw console.error(" API Error:",a),new Error(a.message||"Failed to create doubt");return console.log(" Doubt created successfully, returning:",a.data),a.data}catch(n){throw console.error(" Create doubt error:",n),n.name==="AbortError"?new Error("Request timeout. Please try again."):(console.error(" Error details:",{name:n.name,message:n.message,stack:n.stack}),n)}}async getMyDoubts(e=1,n=10,r={}){try{const i=new URLSearchParams({page:e.toString(),limit:n.toString(),...r});console.log("Fetching my doubts with params:",i.toString());const a=await this.makeAuthenticatedRequest(`${Ir}/my-doubts?${i}`);console.log("Get my doubts response status:",a.status);const s=await a.json();if(console.log("Get my doubts response data:",s),!a.ok)throw new Error(s.message||"Failed to fetch doubts");return s.data}catch(i){throw console.error("Get my doubts error:",i),i}}async getAllDoubts(e=1,n=10,r={}){try{const i=new URLSearchParams({page:e.toString(),limit:n.toString(),...r}),a=await this.makeAuthenticatedRequest(`${Ir}/all?${i}`),s=await a.json();if(!a.ok)throw new Error(s.message||"Failed to fetch doubts");return s.data}catch(i){throw console.error("Get all doubts error:",i),i}}async getDoubtById(e){try{const n=await this.makeAuthenticatedRequest(`${Ir}/by-id/${e}`),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to fetch doubt");return r.data.doubt}catch(n){throw console.error("Get doubt error:",n),n}}async answerDoubt(e,n){try{const r=await this.makeAuthenticatedRequest(`${Ir}/${e}/answer`,{method:"POST",body:JSON.stringify({answer:n})}),i=await r.json();if(!r.ok)throw new Error(i.message||"Failed to submit answer");return i.data.doubt}catch(r){throw console.error("Answer doubt error:",r),r}}async acceptAnswer(e,n){try{const r=await this.makeAuthenticatedRequest(`${Ir}/${e}/accept-answer/${n}`,{method:"POST"}),i=await r.json();if(!r.ok)throw new Error(i.message||"Failed to accept answer");return i.data.doubt}catch(r){throw console.error("Accept answer error:",r),r}}async updateDoubtStatus(e,n){try{const r=await this.makeAuthenticatedRequest(`${Ir}/${e}/status`,{method:"PATCH",body:JSON.stringify({status:n})}),i=await r.json();if(!r.ok)throw new Error(i.message||"Failed to update doubt status");return i.data.doubt}catch(r){throw console.error("Update doubt status error:",r),r}}async deleteDoubt(e){try{const n=await this.makeAuthenticatedRequest(`${Ir}/${e}`,{method:"DELETE"}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to delete doubt");return!0}catch(n){throw console.error("Delete doubt error:",n),n}}async submitFeedback(e,{rating:n,comment:r}){try{const i=await this.makeAuthenticatedRequest(`${Ir}/feedback`,{method:"POST",body:JSON.stringify({doubtId:e,rating:n,comment:r})}),a=await i.json();if(!i.ok)throw new Error(a.message||"Failed to submit feedback");return a}catch(i){throw console.error("Submit feedback error:",i),i}}}const tc=new Jce,Yce=()=>{const[t,e]=y.useState(!1),[n,r]=y.useState(""),[i,a]=y.useState(""),[s,o]=y.useState("small"),[c,l]=y.useState(""),[d,f]=y.useState(null),[h,p]=y.useState(null),[g,m]=y.useState(!1),b=x=>{if(!x.target.files||x.target.files.length===0)return;const S=x.target.files[0];if(S.size>2*1024*1024){alert("File size exceeds 2MB limit.");return}f(S),h&&URL.revokeObjectURL(h);const T=URL.createObjectURL(S);p(T)},v=async x=>{if(x.preventDefault(),!n||!i||!s||!c){alert("Please fill all required fields: Title, Subject, Category, and Description.");return}m(!0);try{const S={title:n,subject:i,category:s,description:c,imagePath:null,tags:[]},w=(await tc.createDoubt(S)).doubtId;if(w){window.location.href=`/dashboard/awaiting/${w}`;return}window.location.href=`/dashboard/awaiting/temp-${Date.now()}`}catch(S){alert(`Failed to submit doubt: ${S.message}`)}finally{m(!1)}};return t?u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white text-gray-800 border border-gray-200 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[u.jsx("div",{className:"border-b border-gray-200 p-6",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Ask Your Doubt"}),u.jsx("p",{className:"text-gray-600 mt-1",children:"Fill in the details below to get help with your doubt."})]}),u.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(Ni,{className:"w-5 h-5"})})]})}),u.jsxs("form",{id:"askDoubtForm",onSubmit:v,className:"p-6 space-y-6 overflow-y-auto max-h-[60vh]",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"title",className:"block text-gray-700 text-sm font-medium",children:"Doubt Title"}),u.jsx("input",{type:"text",id:"title",value:n,onChange:x=>r(x.target.value),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter a clear title for your doubt",required:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"subject",className:"block text-gray-700 text-sm font-medium",children:"Subject"}),u.jsxs("select",{id:"subject",value:i,onChange:x=>a(x.target.value),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,children:[u.jsx("option",{value:"",children:"Select a subject"}),u.jsx("option",{value:"operating systems",children:"Operating Systems"}),u.jsx("option",{value:"artificial intelligence",children:"Artificial Intelligence"}),u.jsx("option",{value:"database management systems",children:"Database Management Systems"}),u.jsx("option",{value:"data structures and algorithms",children:"Data Structures and Algorithms"}),u.jsx("option",{value:"java",children:"Java"}),u.jsx("option",{value:"mern",children:"MERN"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"block text-gray-700 text-sm font-medium",children:"Doubt Category"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"doubtCategory",value:"small",checked:s==="small",onChange:x=>o(x.target.value),className:"text-blue-500 focus:ring-blue-500"}),u.jsx("span",{className:"text-gray-700",children:"Quick 20-Minute Session"})]}),u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"doubtCategory",value:"medium",checked:s==="medium",onChange:x=>o(x.target.value),className:"text-blue-500 focus:ring-blue-500"}),u.jsx("span",{className:"text-gray-700",children:"Medium Topic  Unpacking Concepts in 30 Minutes"})]}),u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"doubtCategory",value:"large",checked:s==="large",onChange:x=>o(x.target.value),className:"text-blue-500 focus:ring-blue-500"}),u.jsx("span",{className:"text-gray-700",children:"Large Topic  Understand the Entire Chapter in 60 Minutes"})]})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"description",className:"block text-gray-700 text-sm font-medium",children:"Describe your doubt"}),u.jsx("textarea",{id:"description",value:c,onChange:x=>l(x.target.value),placeholder:"What are you having trouble with? Be as detailed as possible.",className:"w-full min-h-[100px] bg-gray-50 border border-gray-300 text-gray-900 rounded-md px-3 py-2 placeholder:text-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-vertical",required:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"block text-gray-700 text-sm font-medium",children:"Upload reference image (optional)"}),u.jsxs("div",{className:"border border-gray-300 bg-gray-50 rounded-md p-4",children:[u.jsx("input",{type:"file",id:"image-upload",accept:"image/png, image/jpeg",className:"hidden",onChange:b,onClick:x=>x.currentTarget.value=""}),u.jsx("label",{htmlFor:"image-upload",className:"flex flex-col items-center justify-center cursor-pointer group",children:h?u.jsxs("div",{className:"relative w-full text-center",children:[u.jsx("img",{src:h,alt:"Doubt reference preview",className:"mx-auto max-h-[200px] w-auto object-contain rounded"}),u.jsx("p",{className:"text-sm text-center mt-2 text-gray-600 break-all",children:d==null?void 0:d.name}),u.jsx("button",{type:"button",onClick:x=>{x.preventDefault(),f(null),h&&URL.revokeObjectURL(h),p(null)},className:"mt-2 border border-gray-300 text-gray-600 hover:bg-gray-100 hover:text-gray-800 bg-white rounded-md px-3 py-1 text-sm",children:"Remove Image"})]}):u.jsxs("div",{className:"py-8 flex flex-col items-center text-center",children:[u.jsx(p4,{className:"h-10 w-10 text-gray-400 mb-2 group-hover:text-gray-600 transition-colors"}),u.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Click to upload an image"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF up to 2MB"})]})})]})]})]}),u.jsxs("div",{className:"border-t border-gray-200 p-6 flex justify-end space-x-2",children:[u.jsx("button",{type:"button",onClick:()=>e(!1),className:"border border-gray-300 text-gray-700 hover:bg-gray-50 hover:text-gray-900 bg-white rounded-md px-4 py-2 transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",form:"askDoubtForm",disabled:g,className:"bg-blue-500 border border-blue-600 hover:bg-blue-600 hover:border-blue-700 text-white rounded-md px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Submitting...":"Submit Doubt"})]})]})}):u.jsxs("button",{onClick:()=>e(!0),className:"flex items-center border bg-blue-500 border-blue-600 hover:bg-blue-600 transition-colors text-white rounded-md h-9 px-4 py-2 cursor-pointer",children:["Ask a Doubt",u.jsx(Fx,{className:"ml-2 w-5 h-5"})]})},Xce=()=>{const[t,e]=y.useState([]),[n,r]=y.useState(!0),[i,a]=y.useState("");y.useEffect(()=>{s()},[]);const s=async()=>{try{r(!0);const d=await tc.getMyDoubts(1,10);e(d.doubts)}catch(d){console.error("Error fetching doubts:",d),a("Failed to load doubts")}finally{r(!1)}},o=d=>{switch(d){case"pending":return u.jsx(qe,{className:"w-4 h-4 text-yellow-500"});case"answered":return u.jsx(Qt,{className:"w-4 h-4 text-blue-500"});case"resolved":return u.jsx($e,{className:"w-4 h-4 text-green-500"});case"closed":return u.jsx(g4,{className:"w-4 h-4 text-gray-500"});default:return u.jsx(qe,{className:"w-4 h-4 text-gray-500"})}},c=d=>{switch(d){case"pending":return"bg-yellow-100 text-yellow-800";case"answered":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},l=d=>{const f=new Date(d),p=Math.abs(new Date-f),g=Math.ceil(p/(1e3*60*60*24));return g===1?"Yesterday":g<7?`${g} days ago`:f.toLocaleDateString()};return n?u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"My Doubts"}),u.jsx("div",{className:"space-y-3",children:[1,2,3].map(d=>u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},d))})]}):i?u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"My Doubts"}),u.jsx("div",{className:"text-red-500 text-sm",children:i})]}):u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"My Doubts"}),u.jsxs("span",{className:"text-sm text-gray-500",children:[t.length," doubts"]})]}),t.length===0?u.jsxs("div",{className:"text-center py-8",children:[u.jsx(Qt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500 text-sm",children:"No doubts yet"}),u.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Ask your first doubt to get started!"})]}):u.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.map(d=>u.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors cursor-pointer",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsx("h4",{className:"text-sm font-medium text-gray-900 line-clamp-2 flex-1 mr-2",children:d.title}),u.jsx("div",{className:"flex items-center space-x-1",children:o(d.status)})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[u.jsx("span",{className:"capitalize",children:d.subject}),u.jsx("span",{className:"capitalize",children:d.category})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c(d.status)}`,children:d.status}),u.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-400",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(Ux,{className:"w-3 h-3"}),u.jsx("span",{children:d.views})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(B2,{className:"w-3 h-3"}),u.jsx("span",{children:d.upvotes})]})]})]}),u.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:[l(d.createdAt),d.answers&&d.answers.length>0&&u.jsxs("span",{className:"ml-2",children:[" ",d.answers.length," answer",d.answers.length!==1?"s":""]})]})]},d.id))})]})};var iP,aP;const Qce=((aP=(iP=import.meta)==null?void 0:iP.env)==null?void 0:aP.VITE_API_BASE_URL)||window.__API_BASE_URL__||"",Ls=`${Qce}/api/solver`;class Zce{constructor(){this.token=localStorage.getItem("token")}getToken(){return this.token||localStorage.getItem("token")}async makeAuthenticatedRequest(e,n={}){const r=this.getToken();if(!r)throw new Error("No authentication token found");const i={headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`,...n.headers}};try{const a=await fetch(e,{...i,...n});if(a.status===401)throw new Error("Authentication failed");return a}catch(a){throw console.error("Network request failed:",a),a.name==="TypeError"&&a.message.includes("fetch")?new Error("Network error: Unable to connect to server"):a}}async acceptDoubt(e,n=0){try{console.log("Accepting doubt:",e,"retry:",n);const r=this.getToken();if(!r)throw console.error("No authentication token found"),new Error("No authentication token found. Please log in again.");console.log("Authentication token found, length:",r.length);try{const l=r.split(".");if(l.length!==3)throw console.error("Invalid token format:",l.length,"parts"),localStorage.removeItem("token"),new Error("Invalid token format. Please log in again.");console.log("Token format is valid");try{const d=JSON.parse(atob(l[1])),f=Math.floor(Date.now()/1e3);if(d.exp&&d.exp<f)throw console.error("Token is expired"),localStorage.removeItem("token"),new Error("Your session has expired. Please log in again.")}catch(d){console.error("Token expiration check failed:",d)}}catch(l){throw console.error("Token validation error:",l),localStorage.removeItem("token"),new Error("Invalid authentication token. Please log in again.")}const i=new AbortController,a=setTimeout(()=>i.abort(),15e3),s=await this.makeAuthenticatedRequest(`${Ls}/accept-doubt`,{method:"POST",body:JSON.stringify({doubtId:e}),signal:i.signal});clearTimeout(a),console.log("Accept doubt response status:",s.status),console.log("Accept doubt response headers:",s.headers);const o=s.headers.get("content-type");if(console.log("Response content type:",o),!o||!o.includes("application/json")){const l=await s.text();throw console.log("Non-JSON response:",l),new Error("Server returned non-JSON response")}let c;try{if(c=await s.json(),console.log("=== ACCEPT DOUBT DEBUG ==="),console.log("Response status:",s.status),console.log("Response ok:",s.ok),console.log("Response headers:",s.headers),console.log("Accept doubt response data:",c),console.log("Data type:",typeof c),console.log("Data is null:",c===null),console.log("Data is undefined:",c===void 0),console.log("Data keys:",c?Object.keys(c):"No keys"),console.log("=== END DEBUG ==="),c===void 0)throw console.error("Data is undefined immediately after parsing"),new Error("Server returned undefined response");if(c===null)throw console.error("Data is null immediately after parsing"),new Error("Server returned null response");if(typeof c=="object"&&Object.keys(c).length===0)throw console.error("Data is empty object"),new Error("Server returned empty response");if(typeof c!="object")throw console.error("Data is not an object:",typeof c),new Error("Server returned invalid response format")}catch(l){console.error("Failed to parse JSON response:",l);const d=await s.text();throw console.log("Raw response text:",d),new Error("Server returned invalid JSON response")}if(!s.ok){let l;if(console.log("=== ERROR RESPONSE DEBUG ==="),console.log("Response status:",s.status),console.log("Response ok:",s.ok),console.log("Data type:",typeof c),console.log("Data is undefined:",c===void 0),console.log("Data is null:",c===null),console.log("Data value:",c),console.log("=== END ERROR DEBUG ==="),c===void 0?l=`Server error (${s.status}): ${s.statusText} - No response data`:c===null?l=`Server error (${s.status}): ${s.statusText} - Null response data`:l=c&&c.message||`Server error (${s.status}): ${s.statusText}`,c==null)throw console.error("Data is undefined/null in error handling"),new Error("Server returned invalid response");if(s.status===429||c&&c.message&&c.message.includes("Too many requests")){if(console.error("Rate limiting error:",l),n<2)return console.log("Retrying after rate limit..."),await new Promise(d=>setTimeout(d,2e3)),this.acceptDoubt(e,n+1);throw new Error("Too many requests. Please wait a moment and try again.")}throw s.status===401||c&&c.message&&c.message.includes("token")?(console.error("Authentication error:",l),localStorage.removeItem("token"),new Error("Authentication failed. Please log in again.")):new Error(l)}if(!c||typeof c!="object")throw console.error("Invalid response structure:",c),console.error("Data is null:",c===null),console.error("Data is undefined:",c===void 0),console.error("Data type:",typeof c),new Error("Invalid response format from server");if(!c)throw console.error("Data is still undefined after validation"),new Error("No response data received from server");if(c==null)throw console.error("Data is undefined/null at final check"),new Error("Server returned invalid response");if(console.log("=== SUCCESS PATH DEBUG ==="),console.log("Data type:",typeof c),console.log("Data is undefined:",c===void 0),console.log("Data is null:",c===null),console.log("Data value:",c),console.log("Data keys:",c?Object.keys(c):"No keys"),console.log("=== END SUCCESS DEBUG ==="),c.success===void 0&&(console.warn("Response missing success property:",c),c.success=!0),!c.success){const l=c.message||"Request failed";throw new Error(l)}return c}catch(r){throw console.error("Accept doubt error:",r),r.name==="AbortError"?new Error("Request timeout. Please try again."):r.message.includes("Network error")?new Error("Unable to connect to server. Please check your connection and try again."):r}}async getAssignedDoubts(e="all"){try{const n=await this.makeAuthenticatedRequest(`${Ls}/assigned-doubts?status=${e}`),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to fetch assigned doubts");return r.data}catch(n){throw console.error("Get assigned doubts error:",n),n}}async getAvailableDoubts(){try{const e=await this.makeAuthenticatedRequest(`${Ls}/available-doubts`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch available doubts");return n.data}catch(e){throw console.error("Get available doubts error:",e),e}}async registerSolver(e){try{const n=await this.makeAuthenticatedRequest(`${Ls}/register`,{method:"POST",body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to register as solver");return r}catch(n){throw console.error("Register solver error:",n),n}}async completeDoubt(e,n={}){try{const r=await this.makeAuthenticatedRequest(`${Ls}/complete-doubt`,{method:"POST",body:JSON.stringify({doubtId:e,...n})}),i=await r.json();if(!r.ok)throw new Error(i.message||"Failed to complete doubt");return i}catch(r){throw console.error("Complete doubt error:",r),r}}async getSolvedDoubts(e=1,n=10){try{const r=await this.makeAuthenticatedRequest(`${Ls}/solved-doubts?page=${e}&limit=${n}`),i=await r.json();if(!r.ok)throw new Error(i.message||"Failed to fetch solved doubts");return i.data}catch(r){throw console.error("Get solved doubts error:",r),r}}}const Xa=new Zce,_I=({defaultOpen:t=!1})=>{const[e,n]=y.useState(t),[r,i]=y.useState({name:"",email:"",subjects:[],experience:"",bio:""}),[a,s]=y.useState(!1),[o,c]=y.useState(""),l=["Operating Systems","Artificial Intelligence","Database Management Systems","Data Structures and Algorithms","Java","MERN","Python","Machine Learning","Web Development","Mobile Development"],d=g=>{const{name:m,value:b}=g.target;i(v=>({...v,[m]:b}))},f=g=>{i(m=>({...m,subjects:m.subjects.includes(g)?m.subjects.filter(b=>b!==g):[...m.subjects,g]}))},h=async g=>{if(g.preventDefault(),!r.name||!r.email||r.subjects.length===0){c("Please fill all required fields and select at least one subject.");return}s(!0),c("");try{const m=await Xa.registerSolver(r);m.success?(c("Solver registration successful! You will now receive notifications for doubts in your subjects."),i({name:"",email:"",subjects:[],experience:"",bio:""}),setTimeout(()=>{n(!1),c("")},3e3)):c(m.message||"Registration failed. Please try again.")}catch(m){console.error("Registration error:",m),c("Registration failed. Please try again.")}finally{s(!1)}},p=()=>{i({name:"",email:"",subjects:[],experience:"",bio:""}),c("")};return e?u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white text-gray-800 border border-gray-200 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[u.jsx("div",{className:"border-b border-gray-200 p-6",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Register as Solver"}),u.jsx("p",{className:"text-gray-600 mt-1",children:"Help students by solving their doubts in your expertise areas."})]}),u.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(Ni,{className:"w-5 h-5"})})]})}),u.jsxs("form",{onSubmit:h,className:"p-6 space-y-6 overflow-y-auto max-h-[60vh]",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"name",className:"block text-gray-700 text-sm font-medium",children:"Full Name *"}),u.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:d,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 rounded-md px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none",placeholder:"Enter your full name",required:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium",children:"Email Address *"}),u.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:d,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 rounded-md px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none",placeholder:"Enter your email address",required:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"block text-gray-700 text-sm font-medium",children:"Select Your Expertise Areas *"}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.map(g=>u.jsxs("label",{className:`flex items-center space-x-2 p-3 border rounded-md cursor-pointer transition-colors ${r.subjects.includes(g)?"bg-green-50 border-green-500 text-green-700":"bg-gray-50 border-gray-300 hover:bg-gray-100"}`,children:[u.jsx("input",{type:"checkbox",checked:r.subjects.includes(g),onChange:()=>f(g),className:"text-green-500 focus:ring-green-500"}),u.jsx("span",{className:"text-sm font-medium",children:g})]},g))}),u.jsx("p",{className:"text-xs text-gray-500",children:"You will receive notifications for doubts in these subjects."})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"experience",className:"block text-gray-700 text-sm font-medium",children:"Experience Level"}),u.jsxs("select",{id:"experience",name:"experience",value:r.experience,onChange:d,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 rounded-md px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none",children:[u.jsx("option",{value:"",children:"Select experience level"}),u.jsx("option",{value:"beginner",children:"Beginner (0-1 years)"}),u.jsx("option",{value:"intermediate",children:"Intermediate (1-3 years)"}),u.jsx("option",{value:"advanced",children:"Advanced (3-5 years)"}),u.jsx("option",{value:"expert",children:"Expert (5+ years)"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"bio",className:"block text-gray-700 text-sm font-medium",children:"Bio (Optional)"}),u.jsx("textarea",{id:"bio",name:"bio",value:r.bio,onChange:d,placeholder:"Tell us about your background and expertise...",className:"w-full min-h-[80px] bg-gray-50 border border-gray-300 text-gray-900 rounded-md px-3 py-2 placeholder:text-gray-500 focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none resize-vertical"})]}),o&&u.jsxs("div",{className:`p-3 rounded-md flex items-center space-x-2 ${o.includes("successful")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[o.includes("successful")?u.jsx($e,{className:"w-4 h-4"}):u.jsx(Ni,{className:"w-4 h-4"}),u.jsx("span",{className:"text-sm",children:o})]})]}),u.jsxs("div",{className:"border-t border-gray-200 p-6 flex justify-end space-x-2",children:[u.jsx("button",{type:"button",onClick:()=>{n(!1),p()},className:"border border-gray-300 text-gray-700 hover:bg-gray-50 hover:text-gray-900 bg-white rounded-md px-4 py-2 transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",onClick:h,disabled:a,className:"bg-green-500 border border-green-600 hover:bg-green-600 hover:border-green-700 text-white rounded-md px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a?"Registering...":"Register as Solver"})]})]})}):u.jsxs("button",{onClick:()=>n(!0),className:"px-2 py-1.5 border border-green-500 text-green-500 rounded-md font-medium hover:bg-green-50 flex items-center gap-1 transition-colors whitespace-nowrap text-xs",children:[u.jsx(Bs,{className:"w-3 h-3"}),"Register as Solver"]})},ele=()=>{const[t,e]=y.useState("Overall"),[n,r]=y.useState(null),[i,a]=y.useState(!0),[s,o]=y.useState(0),[c,l]=y.useState(null),[d,f]=y.useState(null),[h,p]=y.useState(!1),[g,m]=y.useState(!1),b=y.useRef(null),v=y.useRef(null),x=y.useRef(new Set),S=Vt();y.useEffect(()=>{(async()=>{try{if(!Xe.isAuthenticated()){S("/");return}const P=await Xe.getProfile();r(P)}catch(P){console.error("Error fetching user data:",P),Xe.logout(),S("/")}finally{a(!1)}})(),(async()=>{var P,N;try{const _=localStorage.getItem("token");if(!_)return;const R=await(await fetch("http://localhost:5000/api/solver/metrics",{headers:{Authorization:`Bearer ${_}`}})).json();R!=null&&R.success&&(o(((P=R.data)==null?void 0:P.solvedCount)||0),l(((N=R.data)==null?void 0:N.avgRating)??null))}catch{}})();try{const P=wl("http://localhost:5000",{withCredentials:!0});b.current=P,(async()=>{var N;try{const _=await Xe.getProfile(),A=(_==null?void 0:_.id)||(_==null?void 0:_._id);let R=[];try{const U=await(await fetch("http://localhost:5000/api/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json(),q=(N=U==null?void 0:U.data)==null?void 0:N.strongSubject;R=q?[String(q).toLowerCase()]:[]}catch{}P.emit("registerSolver",{userId:A,subjects:R})}catch{P.emit("registerSolver",{userId:null,subjects:[]})}})(),P.on("doubt:available",N=>{f(N),p(!0)}),P.on("doubt:assigned",({doubtId:N})=>{d&&String(d.doubtId)===String(N)&&(p(!1),f(null))})}catch{}return b.current&&b.current.on("doubt:completed",async()=>{var P,N;try{const _=localStorage.getItem("token");if(!_)return;const R=await(await fetch("http://localhost:5000/api/solver/metrics",{headers:{Authorization:`Bearer ${_}`}})).json();R!=null&&R.success&&(o(((P=R.data)==null?void 0:P.solvedCount)||0),l(((N=R.data)==null?void 0:N.avgRating)??null))}catch{}}),v.current||(v.current=setInterval(async()=>{var P,N;try{const _=localStorage.getItem("token");if(!_)return;const R=await(await fetch("http://localhost:5000/api/solver/available-doubts",{headers:{Authorization:`Bearer ${_}`}})).json(),L=(R==null?void 0:R.data)||[];if(x.current.size===0)L.forEach(U=>x.current.add(String(U._id||U.id)));else{const U=L.find(q=>!x.current.has(String(q._id||q.id)));U&&(x.current.add(String(U._id||U.id)),f({doubtId:String(U._id||U.id),subject:U.subject,description:U.description,status:U.status,createdAt:U.createdAt}),p(!0))}}catch{}try{const _=localStorage.getItem("token");if(!_)return;const R=await(await fetch("http://localhost:5000/api/solver/metrics",{headers:{Authorization:`Bearer ${_}`}})).json();R!=null&&R.success&&(o(((P=R.data)==null?void 0:P.solvedCount)||0),l(((N=R.data)==null?void 0:N.avgRating)??null))}catch{}},15e3)),()=>{b.current&&(b.current.disconnect(),b.current=null),v.current&&(clearInterval(v.current),v.current=null)}},[S,d]);const T=async()=>{if(d)try{m(!0);const j=localStorage.getItem("token");await fetch("http://localhost:5000/api/solver/accept-doubt",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j}`},body:JSON.stringify({doubtId:d.doubtId})}),await new Promise(N=>setTimeout(N,1200));const P=d.doubtId;p(!1),f(null),S(`/dashboard/session/${P}`)}catch{m(!1)}},w=async()=>{try{await Xe.logout(),S("/")}catch(j){console.error("Logout error:",j),S("/")}};if(i)return u.jsx("div",{className:"flex h-screen bg-gray-50 items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});const k=[{name:"Mon",value:2.8},{name:"Tue",value:2.2},{name:"Wed",value:2},{name:"Thu",value:2.1},{name:"Fri",value:3.8},{name:"Sat",value:2}],C=[{id:1,name:"Mayowa Ade",initials:"MA",message:"Hey! I just finished solving the numerical",subtitle:"First Chapter of Project .doc",time:"09:34 am",color:"bg-orange-500"},{id:2,name:"Olawuyi Tobi",initials:"OT",message:"Can you check out the formulas in these images att...",subtitle:"Image .jpg    Form .jpg    Image 2 .jpg",time:"12:30 pm",color:"bg-pink-500"}],E=()=>{const j=(n==null?void 0:n.id)||"default_user",P=[{icon:Bx,label:"Home",active:!0,path:"/dashboard"},{icon:Fr,label:"My Doubts",path:"/dashboard/doubts"},{icon:Br,label:"Live PYQ",path:"/dashboard/pyq"},{icon:Br,label:"Solve Doubts",path:"/dashboard/doubts"},{icon:Fr,label:"Solved Doubts",path:"/dashboard/solved-doubts"},{icon:ts,label:"Educational Social",path:`/dashboard/social/${j}`},{icon:Xt,label:"Notifications",path:"/dashboard/notifications"},{icon:Qt,label:"Messages",badge:4},{icon:Hl,label:"Settings"},{icon:zx,label:"Logout",onClick:w}];return(n==null?void 0:n.role)==="admin"&&P.splice(-2,0,{icon:yn,label:"Admin Panel",path:"/admin/panel"}),P};return u.jsxs("div",{className:"flex h-screen bg-gray-50",children:[h&&d&&u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4",children:[u.jsxs("div",{className:"p-6 border-b",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"New Doubt Available"}),u.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Subject: ",d.subject]})]}),u.jsx("div",{className:"p-6 text-sm text-gray-700",children:d.description}),u.jsxs("div",{className:"p-6 pt-0 flex gap-2",children:[u.jsx("button",{onClick:T,disabled:g,className:`flex-1 px-4 py-2 text-white rounded-lg ${g?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"}`,children:g?"Joining session":"Accept & Join"}),u.jsx("button",{onClick:()=>{g||(p(!1),f(null))},disabled:g,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50",children:"Dismiss"})]})]})}),u.jsxs("div",{className:"w-64 bg-white shadow-sm border-r border-gray-200",children:[u.jsx("div",{className:"p-6",children:u.jsxs("h1",{className:"text-xl font-semibold text-gray-800",children:["Hi ",u.jsx("span",{className:"text-blue-500",children:(n==null?void 0:n.name)||"User"})]})}),u.jsx("nav",{className:"mt-6",children:E().map((j,P)=>u.jsxs("div",{onClick:()=>{j.onClick?j.onClick():j.path&&S(j.path)},className:`flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50 cursor-pointer relative ${j.active?"text-blue-500 bg-blue-50 border-r-2 border-blue-500":""} ${j.label==="Logout"?"text-red-600 hover:text-red-700 hover:bg-red-50":""}`,children:[u.jsx(j.icon,{className:"w-5 h-5 mr-3"}),u.jsx("span",{className:"font-medium",children:j.label}),j.badge&&u.jsx("span",{className:"ml-auto bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:j.badge})]},P))})]}),u.jsxs("div",{className:"flex-1 overflow-hidden",children:[u.jsx("div",{className:"bg-white border-b border-gray-200",children:u.jsx("div",{className:"px-2 py-2",children:u.jsx("div",{className:"flex items-center justify-center",children:u.jsxs("div",{className:"flex items-center gap-1 justify-center overflow-x-auto w-full",children:[u.jsxs("button",{onClick:()=>S("/dashboard/corporate-connect"),className:"px-2 py-1.5 border border-emerald-600 text-emerald-600 rounded-md font-medium hover:bg-emerald-50 flex items-center gap-1 transition-colors whitespace-nowrap text-xs",children:[u.jsx(Br,{className:"w-3 h-3"}),"Corporate Connect"]}),u.jsxs("button",{onClick:()=>S("/dashboard/referral-system"),className:"px-2 py-1.5 border border-purple-600 text-purple-600 rounded-md font-medium hover:bg-purple-50 flex items-center gap-1 transition-colors whitespace-nowrap text-xs",children:[u.jsx(yn,{className:"w-3 h-3"}),"Online Referral System"]}),u.jsxs("button",{onClick:()=>S(`/dashboard/social/${(n==null?void 0:n.id)||"default_user"}`),className:"px-2 py-1.5 border border-green-500 text-green-500 rounded-md font-medium hover:bg-green-50 flex items-center gap-1 transition-colors whitespace-nowrap text-xs",children:[u.jsx(ts,{className:"w-3 h-3"}),"Educational Social"]}),u.jsxs("button",{onClick:()=>S("/dashboard/pyq"),className:"px-2 py-1.5 border border-emerald-600 text-emerald-600 rounded-md font-medium hover:bg-emerald-50 flex items-center gap-1 transition-colors whitespace-nowrap text-xs",children:[u.jsx(Br,{className:"w-3 h-3"}),"Previous Year Live"]}),u.jsxs("button",{className:"px-2 py-1.5 bg-blue-500 border border-blue-600 text-white rounded-md font-medium hover:bg-blue-600 flex items-center gap-1 transition-colors whitespace-nowrap text-xs",children:[u.jsx(Fr,{className:"w-3 h-3"}),"Solve a Doubt"]}),u.jsx(Yce,{}),u.jsx(_I,{})]})})})}),u.jsxs("div",{className:"p-6 overflow-y-auto h-full",children:[u.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 rounded-2xl p-8 text-white mb-6 relative overflow-hidden",children:[u.jsxs("div",{className:"relative z-10",children:[u.jsxs("h2",{className:"text-3xl font-bold mb-2 flex items-center",children:["Welcome back, ",(n==null?void 0:n.name)||"User"," ",u.jsx("span",{className:"ml-2",children:""})]}),u.jsxs("p",{className:"text-blue-100 mb-1",children:["You've cleared ",u.jsx("span",{className:"font-semibold",children:s})," doubts this month"]}),u.jsxs("p",{className:"text-blue-100",children:["Average rating: ",u.jsx("span",{className:"font-semibold",children:c?c.toFixed(1):""})]})]}),u.jsxs("div",{className:"absolute right-8 top-4",children:[u.jsx("div",{className:"w-32 h-32 bg-blue-300 rounded-full opacity-30"}),u.jsx("div",{className:"absolute top-4 right-4 w-20 h-20 bg-white rounded-full opacity-20"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl shadow-sm border border-green-200 p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:u.jsx(ts,{className:"w-6 h-6 text-green-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Educational Social"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Connect, share, and learn together"})]})]}),u.jsx("button",{onClick:()=>S(`/dashboard/social/${(n==null?void 0:n.id)||"default_user"}`),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:"Explore"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[u.jsx(yn,{className:"w-4 h-4"}),u.jsx("span",{children:"Create study circles with friends"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[u.jsx(Fr,{className:"w-4 h-4"}),u.jsx("span",{children:"Share educational content and notes"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[u.jsx(Qt,{className:"w-4 h-4"}),u.jsx("span",{children:"Discuss topics and get help"})]})]})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Performance"}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"flex space-x-2",children:["Overall","Completed"].map(j=>u.jsx("button",{onClick:()=>e(j),className:`px-3 py-1 text-sm font-medium rounded ${t===j?"text-blue-500 bg-blue-50":"text-gray-500 hover:text-gray-700"}`,children:j},j))}),u.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:u.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),u.jsx("div",{className:"h-64",children:u.jsx(OK,{width:"100%",height:"100%",children:u.jsxs(ece,{data:k,children:[u.jsx(eI,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),u.jsx(Cm,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#9ca3af",fontSize:12}}),u.jsx(Em,{axisLine:!1,tickLine:!1,tick:{fill:"#9ca3af",fontSize:12},domain:[1,4]}),u.jsx(Qu,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",strokeWidth:2,r:4},fill:"url(#gradient)"}),u.jsx("defs",{children:u.jsxs("linearGradient",{id:"gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),u.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]})})]})})})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsx(Xce,{}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[u.jsx("h4",{className:"font-semibold text-gray-800",children:"Life Sciences"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Chapter 12"})]}),u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[u.jsx("h4",{className:"font-semibold text-gray-800",children:"Social Science"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Chapter 8"})]}),u.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[u.jsx("h4",{className:"font-semibold text-gray-800",children:"Advanced Math"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Module 3"})]})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Messages"}),u.jsx("button",{className:"text-blue-500 text-sm font-medium hover:text-blue-600",children:"View All"})]}),u.jsx("div",{className:"space-y-4",children:C.map(j=>u.jsxs("div",{className:"flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[u.jsx("div",{className:`w-10 h-10 ${j.color} rounded-full flex items-center justify-center text-white font-semibold text-sm`,children:j.initials}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("p",{className:"text-sm font-semibold text-gray-800 truncate",children:j.name}),u.jsx("p",{className:"text-xs text-gray-500",children:j.time})]}),u.jsx("p",{className:"text-sm text-gray-600 truncate",children:j.message}),u.jsx("p",{className:"text-xs text-blue-500 mt-1",children:j.subtitle})]})]},j.id))})]})]})]})]})]})]})};var sP,oP;const tle=((oP=(sP=import.meta)==null?void 0:sP.env)==null?void 0:oP.VITE_API_BASE_URL)||window.__API_BASE_URL__||"",wj=`${tle}/api/profile`;class nle{constructor(){this.token=localStorage.getItem("token")}getToken(){return this.token||localStorage.getItem("token")}async makeAuthenticatedRequest(e,n={}){const r=this.getToken();if(!r)throw new Error("No authentication token found");const i={headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`,...n.headers}},a=await fetch(e,{...i,...n});if(a.status===401)throw new Error("Authentication failed");return a}async createProfile(e){try{const n=await this.makeAuthenticatedRequest(`${wj}/create`,{method:"POST",body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to create profile");return r}catch(n){throw console.error("Create profile error:",n),n}}async getProfile(){try{const e=await this.makeAuthenticatedRequest(`${wj}`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch profile");return n.data}catch(e){throw console.error("Get profile error:",e),e}}}const rle=new nle,ile=()=>{const[t,e]=y.useState({mobileNumber:"",strongSubject:"",universityName:"",course:""}),[n,r]=y.useState({}),[i,a]=y.useState(!1),s=Vt(),o=["Operating Systems","Artificial Intelligence","Database Management Systems","Data Structures and Algorithms","Java","MERN"],c=["Kalinga Institute of Industrial Technology"],l=f=>{const{name:h,value:p}=f.target;e(g=>({...g,[h]:p})),n[h]&&r(g=>({...g,[h]:""}))},d=async f=>{f.preventDefault(),a(!0),r({});try{await rle.createProfile(t),s("/dashboard")}catch(h){console.error("Profile creation error:",h),r({form:h.message||"Failed to create profile. Please try again."})}finally{a(!1)}};return u.jsxs("div",{className:"relative min-h-screen w-full bg-[#171717] text-gray-200",children:[u.jsx("div",{className:"absolute top-0 bottom-0 left-[calc(50%-220px)] border-t-3 border-l-3 border-dotted border-[#2b2b2b]"}),u.jsx("div",{className:"absolute top-0 bottom-0 right-[calc(50%-220px)] border-t-3 border-l-3 border-dotted border-[#2b2b2b]"}),u.jsx("div",{className:"absolute left-0 right-0 top-[15%] border-t-3 border-l-3 border-dotted border-[#2b2b2b]"}),u.jsx("div",{className:"absolute left-0 right-0 bottom-[15%] border-t-3 border-l-3 border-dotted border-[#2b2b2b]"}),u.jsx("div",{className:"flex items-center justify-center min-h-screen py-12 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-md w-full space-y-8 bg-transparent p-8 rounded-lg relative z-10",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-200",children:"Welcome!"}),u.jsx("p",{className:"mt-2 text-gray-300",children:"We would love to know more about you"})]}),u.jsxs("form",{onSubmit:d,className:"mt-8 space-y-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"mobileNumber",className:"block text-sm font-medium text-gray-200",children:"What is your mobile number?"}),u.jsx("input",{id:"mobileNumber",name:"mobileNumber",type:"tel",required:!0,value:t.mobileNumber,onChange:l,className:"mt-1 block w-full px-3 py-2 border border-[#343434] rounded-md shadow-sm focus:outline-none focus:ring-gray-300 focus:border-gray-300"}),n.mobileNumber&&u.jsx("p",{className:"text-sm text-red-400",children:n.mobileNumber})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"strongSubject",className:"block text-sm font-medium text-gray-200",children:"What is your strong subject?"}),u.jsxs("select",{id:"strongSubject",name:"strongSubject",required:!0,value:t.strongSubject,onChange:l,className:"mt-1 block w-full px-3 py-2 border bg-[#1d1d1d] border-[#343434] text-gray-200 rounded-md shadow-sm",children:[u.jsx("option",{value:"",children:"Select a subject"}),o.map(f=>u.jsx("option",{className:"bg-[#1d1d1d] border-[#343434] text-gray-200",value:f.toLowerCase(),children:f},f))]}),n.strongSubject&&u.jsx("p",{className:"text-sm text-red-400",children:n.strongSubject})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"universityName",className:"block text-sm font-medium text-gray-200",children:"What is your university name?"}),u.jsxs("select",{id:"universityName",name:"universityName",required:!0,value:t.universityName,onChange:l,className:"mt-1 block w-full px-3 py-2 border rounded-md shadow-sm bg-[#1d1d1d] border-[#343434] text-gray-200",children:[u.jsx("option",{value:"",children:"Select a university"}),c.map(f=>u.jsx("option",{className:"bg-[#1d1d1d] border-[#343434] text-gray-200",value:f.toLowerCase(),children:f},f))]}),n.universityName&&u.jsx("p",{className:"text-sm text-red-400",children:n.universityName})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"course",className:"block text-sm font-medium text-gray-200",children:"What is your course?"}),u.jsx("input",{id:"course",name:"course",type:"text",required:!0,value:t.course,onChange:l,className:"mt-1 block w-full px-3 py-2 border border-[#343434] rounded-md shadow-sm focus:outline-none focus:ring-gray-300 focus:border-gray-300"}),n.course&&u.jsx("p",{className:"text-sm text-red-400",children:n.course})]})]}),n.form&&u.jsx("div",{className:"bg-red-50 p-4 rounded-md",children:u.jsx("p",{className:"text-sm text-red-700",children:n.form})}),u.jsx("div",{children:u.jsx("button",{type:"submit",disabled:i,className:"w-full bg-[#2b2b2b] py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:ring-2 hover:ring-gray-300 transition-all cursor-pointer disabled:opacity-50",children:i?"Submitting...":"Submit"})})]})]})})]})};function ale({status:t}){if(!t)return null;let e="text-xs font-medium px-2 py-0.5 rounded-full capitalize border whitespace-nowrap ",n=t.toString().replace("_"," ");switch(t.toLowerCase()){case"open":e+="bg-blue-900/60 text-blue-300 border-blue-800/70";break;case"assigned":e+="bg-yellow-900/60 text-yellow-300 border-yellow-800/70";break;case"resolved":e+="bg-green-900/60 text-green-300 border-green-800/70";break;case"closed":e+="bg-neutral-700 text-neutral-400 border-neutral-600";break;case"needs_info":e+="bg-purple-900/60 text-purple-300 border-purple-800/70";break;default:e+="bg-neutral-800 text-neutral-300 border-neutral-700",n="Unknown";break}return u.jsx("span",{className:e,children:n})}function sle({status:t}){if(!t)return null;let e="text-[11px] font-medium px-1.5 py-0.5 rounded-full capitalize border whitespace-nowrap ",n=t.toString().replace("_"," ");switch(t.toLowerCase()){case"pending":e+="bg-neutral-700 text-neutral-300 border-neutral-600";break;case"session_scheduled":e+="bg-blue-900/70 text-blue-300 border-blue-800/80";break;case"session_completed":e+="bg-green-900/70 text-green-300 border-green-800/80";break;case"accepted":e+="bg-green-900/70 text-green-300 border-green-800/80";break;case"rejected":e+="bg-red-900/70 text-red-300 border-red-800/80";break;case"needs_revision":e+="bg-yellow-900/70 text-yellow-300 border-yellow-800/80";break;default:e+="bg-neutral-800 text-neutral-300 border-neutral-700",n="Unknown";break}return u.jsx("span",{className:e,children:n})}const ole=()=>{const t=Vt(),[e,n]=y.useState("my-doubts"),[r,i]=y.useState([]),[a,s]=y.useState([]),[o,c]=y.useState([]),[l,d]=y.useState(!0),[f,h]=y.useState(null),[p,g]=y.useState(null),[m,b]=y.useState(!1),[v,x]=y.useState(!1),S=y.useRef(null),T=y.useRef(new Set),w=y.useRef(null),k=async()=>{var A;try{console.log(" Fetching my doubts...");const R=await tc.getMyDoubts();console.log(" Received doubt data:",R),console.log(" Number of doubts:",((A=R.doubts)==null?void 0:A.length)||0),i(R.doubts||[]),console.log(" Doubts state updated")}catch(R){console.error(" Error fetching my doubts:",R),h(R.message||"Failed to load your doubts.")}},C=async()=>{try{const A=await Xa.getAvailableDoubts();s(A||[])}catch(A){console.error("Error fetching available doubts:",A),h(A.message||"Failed to load available doubts.")}},E=async()=>{try{const A=await Xa.getAssignedDoubts();c(A||[])}catch(A){console.error("Error fetching assigned doubts:",A),h(A.message||"Failed to load assigned doubts.")}},j=async A=>{try{await Xa.acceptDoubt(A),C(),E()}catch(R){console.error("Error accepting doubt:",R),h(R.message||"Failed to accept doubt.")}};y.useEffect(()=>{(async()=>{d(!0),h(null);try{await Promise.all([k(),C(),E()])}catch($){console.error("Error loading data:",$),h("Failed to load data.")}finally{d(!1)}})();try{const $=wl("http://localhost:5000",{withCredentials:!0});S.current=$,$.on("connect",()=>{console.log(" Solver socket connected",$.id)}),$.on("connect_error",I=>{console.error(" Solver socket connect_error",I)}),(async()=>{var I;try{const V=await Xe.getProfile(),J=(V==null?void 0:V.id)||(V==null?void 0:V._id);let ne=[];try{const xe=await(await fetch("http://localhost:5000/api/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json(),Se=(I=xe==null?void 0:xe.data)==null?void 0:I.strongSubject;ne=Se?[String(Se).toLowerCase()]:[]}catch{}$.emit("registerSolver",{userId:J,subjects:ne})}catch{$.emit("registerSolver",{userId:null,subjects:[]})}})(),$.on("doubt:available",I=>{console.log(" doubt:available",I),g(I),b(!0),s(V=>V.some(ne=>String(ne._id||ne.id)===String(I.doubtId))?V:[{_id:I.doubtId,subject:I.subject,description:I.description,status:I.status,createdAt:I.createdAt},...V])}),$.on("doubt:assigned",({doubtId:I})=>{s(V=>V.filter(J=>String(J._id||J.id)!==String(I))),p&&String(p.doubtId)===String(I)&&(b(!1),g(null))})}catch($){console.error("Socket setup error:",$)}w.current||(w.current=setInterval(async()=>{try{const $=await Xa.getAvailableDoubts();T.current.size===0&&$.forEach(V=>T.current.add(String(V._id||V.id)));const I=$.find(V=>!T.current.has(String(V._id||V.id)));I&&(T.current.add(String(I._id||I.id)),s(V=>V.some(ne=>String(ne._id||ne.id)===String(I._id||I.id))?V:[I,...V]),g({doubtId:String(I._id||I.id),subject:I.subject,description:I.description,status:I.status,createdAt:I.createdAt}),b(!0))}catch{}},5e3));const R=()=>{console.log(" Callback: Doubt created, refreshing doubts list..."),k()},L=$=>{console.log(" Event: Doubt created event received:",$.detail),k()},U=$=>{$.key==="doubtCreated"&&(console.log(" Storage: Doubt created flag detected, refreshing doubts list..."),k())};window.onDoubtCreated=R,window.addEventListener("doubtCreated",L),window.addEventListener("storage",U);const q=setInterval(()=>{localStorage.getItem("doubtCreated")&&(console.log(" Periodic: Doubt created flag found, refreshing..."),k(),localStorage.removeItem("doubtCreated"))},1e3),D=()=>{console.log(" Page focused, checking for new doubts..."),k()};return window.addEventListener("focus",D),()=>{window.onDoubtCreated=null,window.removeEventListener("doubtCreated",L),window.removeEventListener("storage",U),window.removeEventListener("focus",D),clearInterval(q),S.current&&(S.current.disconnect(),S.current=null),w.current&&(clearInterval(w.current),w.current=null)}},[]);const P=(A,R)=>{const L=new Date(R),U=new Date;if(A==="resolved"||A==="closed")return"Completed";const q=U.getTime()-L.getTime(),D=Math.floor(q/1e3),$=Math.floor(D/60),I=Math.floor($/60),V=Math.floor(I/24);return V>1?`${V} days ago`:V===1?"Yesterday":I>=1?`${I} hour${I>1?"s":""} ago`:$>=1?`${$} min${$>1?"s":""} ago`:"Just now"},N=(A,R)=>{var q,D;const L=R==="assigned"&&((q=A.solverDoubt)==null?void 0:q.resolution_status)==="session_scheduled",U=R==="available";return u.jsxs("div",{className:`rounded-xl shadow-sm border p-6 hover:shadow-md transition-shadow ${U?"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200 hover:shadow-lg":"bg-white border-gray-200 hover:shadow-md"}`,children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:A.subject}),U&&u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Available"})]}),u.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:A.description})]}),u.jsxs("div",{className:"ml-4 flex flex-col items-end space-y-2",children:[u.jsx(ale,{status:A.status}),A.solverDoubt&&u.jsx(sle,{status:A.solverDoubt.resolution_status})]})]}),u.jsx("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("span",{className:"flex items-center",children:[u.jsx(qe,{className:"w-4 h-4 mr-1"}),P(A.status,A.createdAt)]}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(Ux,{className:"w-4 h-4 mr-1"}),A.views||0]}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(Qt,{className:"w-4 h-4 mr-1"}),((D=A.answers)==null?void 0:D.length)||0]})]})}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex space-x-2",children:[R==="available"&&u.jsx("button",{onClick:()=>j(A._id),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium shadow-md hover:shadow-lg",children:"Accept & Solve"}),L&&u.jsxs("button",{onClick:()=>t(`/dashboard/session/${A._id}`),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium flex items-center",children:[u.jsx(Br,{className:"w-4 h-4 mr-2"}),"Join Session"]})]}),u.jsx("span",{className:"text-xs text-gray-400",children:new Date(A.createdAt).toLocaleDateString()})]})]},A._id)},_=async()=>{if(p)try{x(!0),await j(p.doubtId),await new Promise(A=>setTimeout(A,1500)),b(!1),g(null),t(`/dashboard/session/${p.doubtId}`)}catch{x(!1)}};return l?u.jsxs("div",{className:"flex items-center justify-center min-h-64",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),u.jsx("span",{className:"ml-3 text-gray-600",children:"Loading doubts..."})]}):f?u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[u.jsx("p",{className:"text-red-600",children:f}),u.jsx("button",{onClick:()=>window.location.reload(),className:"mt-3 text-blue-500 hover:underline text-sm",children:"Try again"})]}):u.jsxs("div",{className:"space-y-6",children:[m&&p&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"New Doubt Available"}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Subject: ",p.subject]})]}),u.jsx("div",{className:"text-sm text-gray-700 mb-6 line-clamp-4",children:p.description}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:_,disabled:v,className:`flex-1 px-4 py-2 text-white rounded-lg ${v?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"}`,children:v?"Joining session":"Accept & Join"}),u.jsx("button",{onClick:()=>{v||(b(!1),g(null))},disabled:v,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50",children:"Dismiss"})]})]})}),v&&u.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/30",children:u.jsxs("div",{className:"bg-white rounded-lg shadow p-4 flex items-center gap-3",children:[u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),u.jsx("span",{className:"text-sm text-gray-700",children:"Preparing your session"})]})}),u.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[u.jsxs("button",{onClick:()=>n("my-doubts"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e==="my-doubts"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["My Doubts (",r.length,")"]}),u.jsxs("button",{onClick:()=>n("available"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e==="available"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Available (",a.length,")"]}),u.jsxs("button",{onClick:()=>n("assigned"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e==="assigned"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Assigned (",o.length,")"]})]}),u.jsxs("div",{children:[e==="my-doubts"&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"My Doubts"}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{onClick:k,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium",children:"Refresh"}),u.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium flex items-center",children:[u.jsx(qx,{className:"w-4 h-4 mr-2"}),"Ask New Doubt"]})]})]}),r.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(Qt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500",children:"You haven't asked any doubts yet."})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(A=>N(A,"my-doubts"))})]}),e==="available"&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Available Doubts"}),a.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx($e,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500",children:"No available doubts matching your skills."})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(A=>N(A,"available"))})]}),e==="assigned"&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Assigned Doubts"}),o.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(qe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500",children:"No assigned doubts."})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(A=>N(A,"assigned"))})]})]})]})};var cP,lP;const cle=((lP=(cP=import.meta)==null?void 0:cP.env)==null?void 0:lP.VITE_API_BASE_URL)||window.__API_BASE_URL__||"",nv=`${cle}/api/notifications`;class lle{constructor(){this.token=localStorage.getItem("token")}getToken(){return this.token||localStorage.getItem("token")}async makeAuthenticatedRequest(e,n={}){const r=this.getToken();if(!r)throw new Error("No authentication token found");const i={headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`,...n.headers}},a=await fetch(e,{...i,...n});if(a.status===401)throw new Error("Authentication failed");return a}async getNotifications(e=1,n=20){try{const r=await this.makeAuthenticatedRequest(`${nv}?page=${e}&limit=${n}`),i=await r.json();if(!r.ok)throw new Error(i.message||"Failed to fetch notifications");return i.data}catch(r){throw console.error("Get notifications error:",r),r}}async markAllAsRead(){try{const e=await this.makeAuthenticatedRequest(`${nv}/mark-read`,{method:"PATCH"}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to mark notifications as read");return n}catch(e){throw console.error("Mark all as read error:",e),e}}async markAsRead(e){try{const n=await this.makeAuthenticatedRequest(`${nv}/${e}/read`,{method:"PATCH"}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to mark notification as read");return r.data}catch(n){throw console.error("Mark as read error:",n),n}}}const rb=new lle,ule=t=>{const n=Math.floor((new Date-new Date(t))/1e3);return n<60?"Just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<2592e3?`${Math.floor(n/86400)}d ago`:new Date(t).toLocaleDateString()},dle=()=>{const[t,e]=y.useState([]),[n,r]=y.useState(!0),[i,a]=y.useState(null),[s,o]=y.useState(!1),c=async()=>{try{const h=await rb.getNotifications();e(h||[])}catch(h){console.error("Error fetching notifications:",h),a(h.message||"Failed to load notifications.")}finally{r(!1)}},l=async()=>{if(!s){o(!0);try{await rb.markAllAsRead(),e(h=>h.map(p=>({...p,is_read:!0})))}catch(h){console.error("Error marking notifications as read:",h),a("Failed to mark notifications as read.")}finally{o(!1)}}},d=h=>{switch(h){case"ASSIGNED_TO_SOLVER":return u.jsx(Gn,{className:"h-5 w-5 text-blue-400"});case"SOLUTION_SUBMITTED":return u.jsx(U2,{className:"h-5 w-5 text-yellow-400"});case"SOLUTION_ACCEPTED":return u.jsx($e,{className:"h-5 w-5 text-green-400"});case"DOUBT_SUBMITTED":return u.jsx(Xt,{className:"h-5 w-5 text-blue-400"});case"DOUBT_ASSIGNED":return u.jsx(Gn,{className:"h-5 w-5 text-green-400"});case"DOUBT_AVAILABLE":return u.jsx(Xt,{className:"h-5 w-5 text-yellow-400"});default:return u.jsx(Xt,{className:"h-5 w-5 text-gray-400"})}};if(y.useEffect(()=>{c()},[]),n)return u.jsxs("div",{className:"flex items-center justify-center min-h-64",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),u.jsx("span",{className:"ml-3 text-gray-600",children:"Loading notifications..."})]});if(i)return u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[u.jsx(X$,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),u.jsx("p",{className:"text-red-600",children:i}),u.jsx("button",{onClick:c,className:"mt-3 text-blue-500 hover:underline text-sm",children:"Try again"})]});const f=t.filter(h=>!h.is_read).length;return u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[u.jsx(Xt,{className:"h-5 w-5 mr-2"}),"Notifications",f>0&&u.jsx("span",{className:"ml-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:f})]}),f>0&&u.jsx("button",{onClick:l,disabled:s,className:"text-sm text-blue-600 hover:text-blue-700 disabled:opacity-50",children:s?"Marking...":"Mark all as read"})]}),t.length===0?u.jsxs("div",{className:"p-8 text-center",children:[u.jsx(Xt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500",children:"No notifications yet."}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Updates about your doubts will appear here."})]}):u.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.map(h=>u.jsxs("div",{className:`flex items-start gap-4 p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors ${h.is_read?"":"bg-blue-50"}`,children:[u.jsx("div",{className:"flex-shrink-0 mt-1",children:d(h.message_type)}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:`text-sm ${h.is_read?"text-gray-700":"text-gray-900 font-medium"}`,children:h.content}),u.jsxs("div",{className:"flex items-center justify-between mt-2",children:[u.jsx("span",{className:"text-xs text-gray-500",children:ule(h.createdAt)}),!h.is_read&&u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})]},h._id))})]})};function fle(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var hle=Object.defineProperty,ple=(t,e,n)=>e in t?hle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sj=(t,e,n)=>ple(t,typeof e!="symbol"?e+"":e,n);class bn{constructor(){Sj(this,"_locking"),Sj(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(i=>e=()=>{this._locks-=1,i()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),r}}function ot(t,e){if(!t)throw new Error(e)}const mle=34028234663852886e22,gle=-34028234663852886e22,vle=4294967295,yle=2147483647,ble=-2147483648;function uf(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>yle||t<ble)throw new Error("invalid int 32: "+t)}function ib(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>vle||t<0)throw new Error("invalid uint 32: "+t)}function OI(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>mle||t<gle))throw new Error("invalid float 32: "+t)}const AI=Symbol("@bufbuild/protobuf/enum-type");function xle(t){const e=t[AI];return ot(e,"missing enum type on enum object"),e}function RI(t,e,n,r){t[AI]=II(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function II(t,e,n){const r=Object.create(null),i=Object.create(null),a=[];for(const s of e){const o=MI(s);a.push(o),r[s.name]=o,i[s.no]=o}return{typeName:t,values:a,findName(s){return r[s]},findNumber(s){return i[s]}}}function wle(t,e,n){const r={};for(const i of e){const a=MI(i);r[a.localName]=a.no,r[a.no]=a.localName}return RI(r,t,e),r}function MI(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class n1{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,a=i.makeReadOptions(n);return i.readMessage(this,a.readerFactory(e),e.byteLength,a),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,a=i.makeReadOptions(n);return i.readMessage(r,e,a,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),a=i.writerFactory();return r.writeMessage(this,a,i),a.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function Sle(t,e,n,r){var i;const a=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),s={[a]:function(o){t.util.initFields(this),t.util.initPartial(o,this)}}[a];return Object.setPrototypeOf(s.prototype,new n1),Object.assign(s,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(o,c){return new s().fromBinary(o,c)},fromJson(o,c){return new s().fromJson(o,c)},fromJsonString(o,c){return new s().fromJsonString(o,c)},equals(o,c){return t.util.equals(s,o,c)}}),s}function kle(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function rv(t,e,n){for(let a=0;a<28;a=a+7){const s=t>>>a,o=!(!(s>>>7)&&e==0),c=(o?s|128:s)&255;if(n.push(c),!o)return}const r=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(n.push((i?r|128:r)&255),!!i){for(let a=3;a<31;a=a+7){const s=e>>>a,o=!!(s>>>7),c=(o?s|128:s)&255;if(n.push(c),!o)return}n.push(e>>>31&1)}}const df=4294967296;function kj(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function a(s,o){const c=Number(t.slice(s,o));i*=n,r=r*n+c,r>=df&&(i=i+(r/df|0),r=r%df)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),e?LI(r,i):r1(r,i)}function Tle(t,e){let n=r1(t,e);const r=n.hi&2147483648;r&&(n=LI(n.lo,n.hi));const i=DI(n.lo,n.hi);return r?"-"+i:i}function DI(t,e){if({lo:t,hi:e}=Cle(t,e),e<=2097151)return String(df*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let a=n+r*6777216+i*6710656,s=r+i*8147497,o=i*2;const c=1e7;return a>=c&&(s+=Math.floor(a/c),a%=c),s>=c&&(o+=Math.floor(s/c),s%=c),o.toString()+Tj(s)+Tj(a)}function Cle(t,e){return{lo:t>>>0,hi:e>>>0}}function r1(t,e){return{lo:t|0,hi:e|0}}function LI(t,e){return e=~e,t?t=~t+1:e+=1,r1(t,e)}const Tj=t=>{const e=String(t);return"0000000".slice(e.length)+e};function Cj(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function Ele(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function jle(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof{}!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),a=BigInt("9223372036854775807"),s=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>a||l<i)throw new Error("int64 invalid: ".concat(c));return l},uParse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>o||l<s)throw new Error("uint64 invalid: ".concat(c));return l},enc(c){return t.setBigInt64(0,this.parse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(c){return t.setBigInt64(0,this.uParse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigInt64(0,!0)},uDec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigUint64(0,!0)}}}const n=i=>ot(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>ot(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),kj(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),kj(i)},dec(i,a){return Tle(i,a)},uDec(i,a){return DI(i,a)}}}const Qe=jle();var Y;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(Y||(Y={}));var Sa;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(Sa||(Sa={}));function Vi(t,e,n){if(e===n)return!0;if(t==Y.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case Y.UINT64:case Y.FIXED64:case Y.INT64:case Y.SFIXED64:case Y.SINT64:return e==n}return!1}function nc(t,e){switch(t){case Y.BOOL:return!1;case Y.UINT64:case Y.FIXED64:case Y.INT64:case Y.SFIXED64:case Y.SINT64:return e==0?Qe.zero:"0";case Y.DOUBLE:case Y.FLOAT:return 0;case Y.BYTES:return new Uint8Array(0);case Y.STRING:return"";default:return 0}}function $I(t,e){switch(t){case Y.BOOL:return e===!1;case Y.STRING:return e==="";case Y.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var ft;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(ft||(ft={}));class Nle{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(ib(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return uf(e),Cj(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){OI(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){ib(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){uf(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return uf(e),e=(e<<1^e>>31)>>>0,Cj(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Qe.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Qe.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=Qe.enc(e);return rv(n.lo,n.hi,this.buf),this}sint64(e){let n=Qe.enc(e),r=n.hi>>31,i=n.lo<<1^r,a=(n.hi<<1|n.lo>>>31)^r;return rv(i,a,this.buf),this}uint64(e){let n=Qe.uEnc(e);return rv(n.lo,n.hi,this.buf),this}}class Ple{constructor(e,n){this.varint64=kle,this.uint32=Ele,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e,n){let r=this.pos;switch(e){case ft.Varint:for(;this.buf[this.pos++]&128;);break;case ft.Bit64:this.pos+=4;case ft.Bit32:this.pos+=4;break;case ft.LengthDelimited:let i=this.uint32();this.pos+=i;break;case ft.StartGroup:for(;;){const[a,s]=this.tag();if(s===ft.EndGroup){if(n!==void 0&&a!==n)throw new Error("invalid end group tag");break}this.skip(s,a)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Qe.dec(...this.varint64())}uint64(){return Qe.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,Qe.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Qe.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Qe.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function _le(t,e,n,r){let i;return{typeName:e,extendee:n,get field(){if(!i){const a=typeof r=="function"?r():r;a.name=e.split(".").pop(),a.jsonName="[".concat(e,"]"),i=t.util.newFieldList([a]).list()[0]}return i},runtime:t}}function UI(t){const e=t.field.localName,n=Object.create(null);return n[e]=Ole(t),[n,()=>n[e]]}function Ole(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return nc(e.T,e.L);case"message":const n=e.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function Ale(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let ui="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),_m=[];for(let t=0;t<ui.length;t++)_m[ui[t].charCodeAt(0)]=t;_m["-".charCodeAt(0)]=ui.indexOf("+");_m["_".charCodeAt(0)]=ui.indexOf("/");const FI={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,a,s=0;for(let o=0;o<t.length;o++){if(a=_m[t.charCodeAt(o)],a===void 0)switch(t[o]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:s=a,i=1;break;case 1:n[r++]=s<<2|(a&48)>>4,s=a,i=2;break;case 2:n[r++]=(s&15)<<4|(a&60)>>2,s=a,i=3;break;case 3:n[r++]=(s&3)<<6|a,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let a=0;a<t.length;a++)switch(r=t[a],n){case 0:e+=ui[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=ui[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=ui[i|r>>6],e+=ui[r&63],n=0;break}return n&&(e+=ui[i],e+="=",n==1&&(e+="=")),e}};function Rle(t,e,n){zI(e,t);const r=e.runtime.bin.makeReadOptions(n),i=Ale(t.getType().runtime.bin.listUnknownFields(t),e.field),[a,s]=UI(e);for(const o of i)e.runtime.bin.readField(a,r.readerFactory(o.data),e.field,o.wireType,r);return s()}function Ile(t,e,n,r){zI(e,t);const i=e.runtime.bin.makeReadOptions(r),a=e.runtime.bin.makeWriteOptions(r);if(BI(t,e)){const l=t.getType().runtime.bin.listUnknownFields(t).filter(d=>d.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const d of l)t.getType().runtime.bin.onUnknownField(t,d.no,d.wireType,d.data)}const s=a.writerFactory();let o=e.field;!o.opt&&!o.repeated&&(o.kind=="enum"||o.kind=="scalar")&&(o=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(o,n,s,a);const c=i.readerFactory(s.finish());for(;c.pos<c.len;){const[l,d]=c.tag(),f=c.skip(d,l);t.getType().runtime.bin.onUnknownField(t,l,d,f)}}function BI(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(r=>r.no==e.field.no)}function zI(t,e){ot(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function qI(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!$I(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function Ej(t,e){const n=t.localName,r=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=r?t.T.values[0].no:void 0;break;case"scalar":e[n]=r?nc(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function di(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(n1.prototype).every(r=>r in t&&typeof t[r]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function VI(t,e){return di(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}Y.DOUBLE,Y.FLOAT,Y.INT64,Y.UINT64,Y.INT32,Y.UINT32,Y.BOOL,Y.STRING,Y.BYTES;const jj={ignoreUnknownFields:!1},Nj={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Mle(t){return t?Object.assign(Object.assign({},jj),t):jj}function Dle(t){return t?Object.assign(Object.assign({},Nj),t):Nj}const Yh=Symbol(),ff=Symbol();function Lle(){return{makeReadOptions:Mle,makeWriteOptions:Dle,readMessage(t,e,n,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(Lr(e)));r=r??new t;const i=new Map,a=n.typeRegistry;for(const[s,o]of Object.entries(e)){const c=t.fields.findJsonName(s);if(c){if(c.oneof){if(o===null&&c.kind=="scalar")continue;const l=i.get(c.oneof);if(l!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(c.oneof.name,'" present: "').concat(l,'", "').concat(s,'"'));i.set(c.oneof,s)}Pj(r,o,c,n,t)}else{let l=!1;if(a!=null&&a.findExtension&&s.startsWith("[")&&s.endsWith("]")){const d=a.findExtension(s.substring(1,s.length-1));if(d&&d.extendee.typeName==t.typeName){l=!0;const[f,h]=UI(d);Pj(f,o,d.field,n,d),Ile(r,d,h(),n)}}if(!l&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(s,'" is unknown'))}}return r},writeMessage(t,e){const n=t.getType(),r={};let i;try{for(i of n.fields.byNumber()){if(!qI(i,t)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!Ule(i))continue}const s=i.oneof?t[i.oneof.localName].value:t[i.localName],o=_j(i,s,e);o!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=o)}const a=e.typeRegistry;if(a!=null&&a.findExtensionFor)for(const s of n.runtime.bin.listUnknownFields(t)){const o=a.findExtensionFor(n.typeName,s.no);if(o&&BI(t,o)){const c=Rle(t,o,e),l=_j(o.field,c,e);l!==void 0&&(r[o.field.jsonName]=l)}}}catch(a){const s=i?"cannot encode field ".concat(n.typeName,".").concat(i.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),o=a instanceof Error?a.message:String(a);throw new Error(s+(o.length>0?": ".concat(o):""))}return r},readScalar(t,e,n){return Sl(t,e,n??Sa.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||$I(t,e)))return hf(t,e)},debug:Lr}}function Lr(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function Pj(t,e,n,r,i){let a=n.localName;if(n.repeated){if(ot(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Lr(e)));const s=t[a];for(const o of e){if(o===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Lr(o)));switch(n.kind){case"message":s.push(n.T.fromJson(o,r));break;case"enum":const c=iv(n.T,o,r.ignoreUnknownFields,!0);c!==ff&&s.push(c);break;case"scalar":try{s.push(Sl(n.T,o,n.L,!0))}catch(l){let d="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Lr(o));throw l instanceof Error&&l.message.length>0&&(d+=": ".concat(l.message)),new Error(d)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Lr(e)));const s=t[a];for(const[o,c]of Object.entries(e)){if(c===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: map value null"));let l;try{l=$le(n.K,o)}catch(d){let f="cannot decode map key for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Lr(e));throw d instanceof Error&&d.message.length>0&&(f+=": ".concat(d.message)),new Error(f)}switch(n.V.kind){case"message":s[l]=n.V.T.fromJson(c,r);break;case"enum":const d=iv(n.V.T,c,r.ignoreUnknownFields,!0);d!==ff&&(s[l]=d);break;case"scalar":try{s[l]=Sl(n.V.T,c,Sa.BIGINT,!0)}catch(f){let h="cannot decode map value for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Lr(e));throw f instanceof Error&&f.message.length>0&&(h+=": ".concat(f.message)),new Error(h)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:a},a="value"),n.kind){case"message":const s=n.T;if(e===null&&s.typeName!="google.protobuf.Value")return;let o=t[a];di(o)?o.fromJson(e,r):(t[a]=o=s.fromJson(e,r),s.fieldWrapper&&!n.oneof&&(t[a]=s.fieldWrapper.unwrapField(o)));break;case"enum":const c=iv(n.T,e,r.ignoreUnknownFields,!1);switch(c){case Yh:Ej(n,t);break;case ff:break;default:t[a]=c;break}break;case"scalar":try{const l=Sl(n.T,e,n.L,!1);switch(l){case Yh:Ej(n,t);break;default:t[a]=l;break}}catch(l){let d="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Lr(e));throw l instanceof Error&&l.message.length>0&&(d+=": ".concat(l.message)),new Error(d)}break}}function $le(t,e){if(t===Y.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Sl(t,e,Sa.BIGINT,!0).toString()}function Sl(t,e,n,r){if(e===null)return r?nc(t,n):Yh;switch(t){case Y.DOUBLE:case Y.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return t==Y.FLOAT&&OI(i),i;case Y.INT32:case Y.FIXED32:case Y.SFIXED32:case Y.SINT32:case Y.UINT32:let a;if(typeof e=="number"?a=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(a=Number(e)),a===void 0)break;return t==Y.UINT32||t==Y.FIXED32?ib(a):uf(a),a;case Y.INT64:case Y.SFIXED64:case Y.SINT64:if(typeof e!="number"&&typeof e!="string")break;const s=Qe.parse(e);return n?s.toString():s;case Y.FIXED64:case Y.UINT64:if(typeof e!="number"&&typeof e!="string")break;const o=Qe.uParse(e);return n?o.toString():o;case Y.BOOL:if(typeof e!="boolean")break;return e;case Y.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case Y.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return FI.dec(e)}throw new Error}function iv(t,e,n,r){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:r?t.values[0].no:Yh;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=t.findName(e);if(i!==void 0)return i.no;if(n)return ff;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(Lr(e)))}function Ule(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function _j(t,e,n){if(t.kind=="map"){ot(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(t.V.kind){case"scalar":for(const[s,o]of i)r[s.toString()]=hf(t.V.T,o);break;case"message":for(const[s,o]of i)r[s.toString()]=o.toJson(n);break;case"enum":const a=t.V.T;for(const[s,o]of i)r[s.toString()]=av(a,o,n.enumAsInteger);break}return n.emitDefaultValues||i.length>0?r:void 0}if(t.repeated){ot(Array.isArray(e));const r=[];switch(t.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(hf(t.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(av(t.T,e[i],n.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(t.kind){case"scalar":return hf(t.T,e);case"enum":return av(t.T,e,n.enumAsInteger);case"message":return VI(t.T,e).toJson(n)}}function av(t,e,n){var r;if(ot(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const i=t.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function hf(t,e){switch(t){case Y.INT32:case Y.SFIXED32:case Y.SINT32:case Y.FIXED32:case Y.UINT32:return ot(typeof e=="number"),e;case Y.FLOAT:case Y.DOUBLE:return ot(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case Y.STRING:return ot(typeof e=="string"),e;case Y.BOOL:return ot(typeof e=="boolean"),e;case Y.UINT64:case Y.FIXED64:case Y.INT64:case Y.SFIXED64:case Y.SINT64:return ot(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case Y.BYTES:return ot(e instanceof Uint8Array),FI.enc(e)}}const $s=Symbol("@bufbuild/protobuf/unknown-fields"),Oj={readUnknownFields:!0,readerFactory:t=>new Ple(t)},Aj={writeUnknownFields:!0,writerFactory:()=>new Nle};function Fle(t){return t?Object.assign(Object.assign({},Oj),t):Oj}function Ble(t){return t?Object.assign(Object.assign({},Aj),t):Aj}function zle(){return{makeReadOptions:Fle,makeWriteOptions:Ble,listUnknownFields(t){var e;return(e=t[$s])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[$s]},writeUnknownFields(t,e){const r=t[$s];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[$s])||(i[$s]=[]),i[$s].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r,i){const a=t.getType(),s=i?e.len:e.pos+n;let o,c;for(;e.pos<s&&([o,c]=e.tag(),!(i===!0&&c==ft.EndGroup));){const l=a.fields.find(o);if(!l){const d=e.skip(c,o);r.readUnknownFields&&this.onUnknownField(t,o,c,d);continue}Rj(t,e,l,c,r)}if(i&&(c!=ft.EndGroup||o!==n))throw new Error("invalid end group tag")},readField:Rj,writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){if(!qI(i,t)){if(i.req)throw new Error("cannot encode field ".concat(r.typeName,".").concat(i.name," to binary: required field not set"));continue}const a=i.oneof?t[i.oneof.localName].value:t[i.localName];Ij(i,a,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,r){e!==void 0&&Ij(t,e,n,r)}}}function Rj(t,e,n,r,i){let{repeated:a,localName:s}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=s&&delete t.value,t.case=s,s="value"),n.kind){case"scalar":case"enum":const o=n.kind=="enum"?Y.INT32:n.T;let c=Xh;if(n.kind=="scalar"&&n.L>0&&(c=Vle),a){let h=t[s];if(r==ft.LengthDelimited&&o!=Y.STRING&&o!=Y.BYTES){let g=e.uint32()+e.pos;for(;e.pos<g;)h.push(c(e,o))}else h.push(c(e,o))}else t[s]=c(e,o);break;case"message":const l=n.T;a?t[s].push(pf(e,new l,i,n)):di(t[s])?pf(e,t[s],i,n):(t[s]=pf(e,new l,i,n),l.fieldWrapper&&!n.oneof&&!n.repeated&&(t[s]=l.fieldWrapper.unwrapField(t[s])));break;case"map":let[d,f]=qle(n,e,i);t[s][d]=f;break}}function pf(t,e,n,r){const i=e.getType().runtime.bin,a=r==null?void 0:r.delimited;return i.readMessage(e,t,a?r.no:t.uint32(),n,a),e}function qle(t,e,n){const r=e.uint32(),i=e.pos+r;let a,s;for(;e.pos<i;){const[o]=e.tag();switch(o){case 1:a=Xh(e,t.K);break;case 2:switch(t.V.kind){case"scalar":s=Xh(e,t.V.T);break;case"enum":s=e.int32();break;case"message":s=pf(e,new t.V.T,n,void 0);break}break}}if(a===void 0&&(a=nc(t.K,Sa.BIGINT)),typeof a!="string"&&typeof a!="number"&&(a=a.toString()),s===void 0)switch(t.V.kind){case"scalar":s=nc(t.V.T,Sa.BIGINT);break;case"enum":s=t.V.T.values[0].no;break;case"message":s=new t.V.T;break}return[a,s]}function Vle(t,e){const n=Xh(t,e);return typeof n=="bigint"?n.toString():n}function Xh(t,e){switch(e){case Y.STRING:return t.string();case Y.BOOL:return t.bool();case Y.DOUBLE:return t.double();case Y.FLOAT:return t.float();case Y.INT32:return t.int32();case Y.INT64:return t.int64();case Y.UINT64:return t.uint64();case Y.FIXED64:return t.fixed64();case Y.BYTES:return t.bytes();case Y.FIXED32:return t.fixed32();case Y.SFIXED32:return t.sfixed32();case Y.SFIXED64:return t.sfixed64();case Y.SINT64:return t.sint64();case Y.UINT32:return t.uint32();case Y.SINT32:return t.sint32()}}function Ij(t,e,n,r){ot(e!==void 0);const i=t.repeated;switch(t.kind){case"scalar":case"enum":let a=t.kind=="enum"?Y.INT32:t.T;if(i)if(ot(Array.isArray(e)),t.packed)Hle(n,a,t.no,e);else for(const s of e)kl(n,a,t.no,s);else kl(n,a,t.no,e);break;case"message":if(i){ot(Array.isArray(e));for(const s of e)Mj(n,r,t,s)}else Mj(n,r,t,e);break;case"map":ot(typeof e=="object"&&e!=null);for(const[s,o]of Object.entries(e))Wle(n,r,t,s,o);break}}function Wle(t,e,n,r,i){t.tag(n.no,ft.LengthDelimited),t.fork();let a=r;switch(n.K){case Y.INT32:case Y.FIXED32:case Y.UINT32:case Y.SFIXED32:case Y.SINT32:a=Number.parseInt(r);break;case Y.BOOL:ot(r=="true"||r=="false"),a=r=="true";break}switch(kl(t,n.K,1,a),n.V.kind){case"scalar":kl(t,n.V.T,2,i);break;case"enum":kl(t,Y.INT32,2,i);break;case"message":ot(i!==void 0),t.tag(2,ft.LengthDelimited).bytes(i.toBinary(e));break}t.join()}function Mj(t,e,n,r){const i=VI(n.T,r);n.delimited?t.tag(n.no,ft.StartGroup).raw(i.toBinary(e)).tag(n.no,ft.EndGroup):t.tag(n.no,ft.LengthDelimited).bytes(i.toBinary(e))}function kl(t,e,n,r){ot(r!==void 0);let[i,a]=WI(e);t.tag(n,i)[a](r)}function Hle(t,e,n,r){if(!r.length)return;t.tag(n,ft.LengthDelimited).fork();let[,i]=WI(e);for(let a=0;a<r.length;a++)t[i](r[a]);t.join()}function WI(t){let e=ft.Varint;switch(t){case Y.BYTES:case Y.STRING:e=ft.LengthDelimited;break;case Y.DOUBLE:case Y.FIXED64:case Y.SFIXED64:e=ft.Bit64;break;case Y.FIXED32:case Y.SFIXED32:case Y.FLOAT:e=ft.Bit32;break}const n=Y[t].toLowerCase();return[e,n]}function Gle(){return{setEnumType:RI,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,a=e,s=t;if(s[i]!=null)switch(r.kind){case"oneof":const o=s[i].case;if(o===void 0)continue;const c=r.findField(o);let l=s[i].value;c&&c.kind=="message"&&!di(l,c.T)?l=new c.T(l):c&&c.kind==="scalar"&&c.T===Y.BYTES&&(l=Wc(l)),a[i]={case:o,value:l};break;case"scalar":case"enum":let d=s[i];r.T===Y.BYTES&&(d=r.repeated?d.map(Wc):Wc(d)),a[i]=d;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===Y.BYTES)for(const[p,g]of Object.entries(s[i]))a[i][p]=Wc(g);else Object.assign(a[i],s[i]);break;case"message":const h=r.V.T;for(const p of Object.keys(s[i])){let g=s[i][p];h.fieldWrapper||(g=new h(g)),a[i][p]=g}break}break;case"message":const f=r.T;if(r.repeated)a[i]=s[i].map(h=>di(h,f)?h:new f(h));else{const h=s[i];f.fieldWrapper?f.typeName==="google.protobuf.BytesValue"?a[i]=Wc(h):a[i]=h:a[i]=di(h,f)?h:new f(h)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],a=n[r.localName];if(r.repeated){if(i.length!==a.length)return!1;switch(r.kind){case"message":return i.every((s,o)=>r.T.equals(s,a[o]));case"scalar":return i.every((s,o)=>Vi(r.T,s,a[o]));case"enum":return i.every((s,o)=>Vi(Y.INT32,s,a[o]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":let s=i,o=a;return r.T.fieldWrapper&&(s!==void 0&&!di(s)&&(s=r.T.fieldWrapper.wrapField(s)),o!==void 0&&!di(o)&&(o=r.T.fieldWrapper.wrapField(o))),r.T.equals(s,o);case"enum":return Vi(Y.INT32,i,a);case"scalar":return Vi(r.T,i,a);case"oneof":if(i.case!==a.case)return!1;const c=r.findField(i.case);if(c===void 0)return!0;switch(c.kind){case"message":return c.T.equals(i.value,a.value);case"enum":return Vi(Y.INT32,i.value,a.value);case"scalar":return Vi(c.T,i.value,a.value)}throw new Error("oneof cannot contain ".concat(c.kind));case"map":const l=Object.keys(i).concat(Object.keys(a));switch(r.V.kind){case"message":const d=r.V.T;return l.every(h=>d.equals(i[h],a[h]));case"enum":return l.every(h=>Vi(Y.INT32,i[h],a[h]));case"scalar":const f=r.V.T;return l.every(h=>Vi(f,i[h],a[h]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const a=t[i.localName];let s;if(i.repeated)s=a.map(Ud);else if(i.kind=="map"){s=r[i.localName];for(const[o,c]of Object.entries(a))s[o]=Ud(c)}else i.kind=="oneof"?s=i.findField(a.case)?{case:a.case,value:Ud(a.value)}:{case:void 0}:s=Ud(a);r[i.localName]=s}for(const i of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return n}}}function Ud(t){if(t===void 0)return t;if(di(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Wc(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Kle(t,e,n){return{syntax:t,json:Lle(),bin:zle(),util:Object.assign(Object.assign({},Gle()),{newFieldList:e,initFields:n}),makeMessageType(r,i,a){return Sle(this,r,i,a)},makeEnum:wle,makeEnumType:II,getEnumType:xle,makeExtension(r,i,a){return _le(this,r,i,a)}}}class Jle{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function HI(t,e){const n=GI(t);return e?n:tue(eue(n))}function Yle(t){return HI(t,!1)}const Xle=GI;function GI(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const Qle=new Set(["constructor","toString","toJSON","valueOf"]),Zle=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),KI=t=>"".concat(t,"$"),eue=t=>Zle.has(t)?KI(t):t,tue=t=>Qle.has(t)?KI(t):t;class nue{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Yle(e)}addField(e){ot(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function rue(t,e){var n,r,i,a,s,o;const c=[];let l;for(const d of typeof t=="function"?t():t){const f=d;if(f.localName=HI(d.name,d.oneof!==void 0),f.jsonName=(n=d.jsonName)!==null&&n!==void 0?n:Xle(d.name),f.repeated=(r=d.repeated)!==null&&r!==void 0?r:!1,d.kind=="scalar"&&(f.L=(i=d.L)!==null&&i!==void 0?i:Sa.BIGINT),f.delimited=(a=d.delimited)!==null&&a!==void 0?a:!1,f.req=(s=d.req)!==null&&s!==void 0?s:!1,f.opt=(o=d.opt)!==null&&o!==void 0?o:!1,d.packed===void 0&&(f.packed=d.kind=="enum"||d.kind=="scalar"&&d.T!=Y.BYTES&&d.T!=Y.STRING),d.oneof!==void 0){const h=typeof d.oneof=="string"?d.oneof:d.oneof.name;(!l||l.name!=h)&&(l=new nue(h)),f.oneof=l,l.addField(f)}c.push(f)}return c}const B=Kle("proto3",t=>new Jle(t,e=>rue(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=nc(e.T,e.L);break}}});class dn extends n1{constructor(e){super(),this.seconds=Qe.zero,this.nanos=0,B.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(B.json.debug(e)));const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Qe.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return dn.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new dn({seconds:Qe.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new dn().fromBinary(e,n)}static fromJson(e,n){return new dn().fromJson(e,n)}static fromJsonString(e,n){return new dn().fromJsonString(e,n)}static equals(e,n){return B.util.equals(dn,e,n)}}dn.runtime=B;dn.typeName="google.protobuf.Timestamp";dn.fields=B.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const iue=B.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:dn},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:aue,repeated:!0},{no:5,name:"events",kind:"message",T:oue,repeated:!0}]),aue=B.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:sue,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),sue=B.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:dn},{no:3,name:"value",kind:"scalar",T:2}]),oue=B.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:dn},{no:7,name:"normalized_end_timestamp",kind:"message",T:dn,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),JI=B.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),gr=B.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),mt=B.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),i1=B.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),al=B.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),Nu=B.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),xr=B.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),Us=B.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),cue=B.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Rt=B.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),Om=B.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Qh,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:oM}]),Qh=B.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),lue=B.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:B.getEnumType(mt),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),gs=B.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:B.getEnumType(vo)},{no:4,name:"tracks",kind:"message",T:io,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:lue},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:B.getEnumType(Pu)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:B.getEnumType(xr)},{no:18,name:"kind_details",kind:"enum",T:B.getEnumType(uue),repeated:!0}]),vo=B.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),Pu=B.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),uue=B.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),Tt=B.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),due=B.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:ga,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:B.getEnumType(YI)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),io=B.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:B.getEnumType(gr)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:B.getEnumType(mt)},{no:10,name:"layers",kind:"message",T:ga,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:due,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:B.getEnumType(Tt)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:oM},{no:19,name:"audio_features",kind:"enum",T:B.getEnumType(Rt),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:B.getEnumType(JI)}]),ga=B.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:B.getEnumType(i1)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),YI=B.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),nn=B.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:B.getEnumType(pe)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:a1,oneof:"value"},{no:3,name:"speaker",kind:"message",T:fue,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:eM,oneof:"value"},{no:7,name:"transcription",kind:"message",T:hue,oneof:"value"},{no:8,name:"metrics",kind:"message",T:iue,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Zh,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:s1,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:o1,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:c1,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:ep,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:tp,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:np,oneof:"value"},{no:18,name:"encrypted_packet",kind:"message",T:XI,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),pe=B.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),XI=B.makeMessageType("livekit.EncryptedPacket",()=>[{no:1,name:"encryption_type",kind:"enum",T:B.getEnumType(Tt)},{no:2,name:"iv",kind:"scalar",T:12},{no:3,name:"key_index",kind:"scalar",T:13},{no:4,name:"encrypted_value",kind:"scalar",T:12}]),QI=B.makeMessageType("livekit.EncryptedPacketPayload",()=>[{no:1,name:"user",kind:"message",T:a1,oneof:"value"},{no:3,name:"chat_message",kind:"message",T:Zh,oneof:"value"},{no:4,name:"rpc_request",kind:"message",T:s1,oneof:"value"},{no:5,name:"rpc_ack",kind:"message",T:o1,oneof:"value"},{no:6,name:"rpc_response",kind:"message",T:c1,oneof:"value"},{no:7,name:"stream_header",kind:"message",T:ep,oneof:"value"},{no:8,name:"stream_chunk",kind:"message",T:tp,oneof:"value"},{no:9,name:"stream_trailer",kind:"message",T:np,oneof:"value"}]),fue=B.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:ZI,repeated:!0}]),ZI=B.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),a1=B.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),eM=B.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),hue=B.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:pue,repeated:!0}]),pue=B.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Zh=B.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),s1=B.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),o1=B.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),c1=B.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:tM,oneof:"value"}]),tM=B.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),nM=B.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),rM=B.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:B.getEnumType(iM)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),iM=B.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),mue=B.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:B.getEnumType(aM)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),aM=B.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),sM=B.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:Dj},{no:2,name:"screen",kind:"message",T:Dj},{no:3,name:"resume_connection",kind:"enum",T:B.getEnumType(Nu)},{no:4,name:"disabled_codecs",kind:"message",T:gue},{no:5,name:"force_relay",kind:"enum",T:B.getEnumType(Nu)}]),Dj=B.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:B.getEnumType(Nu)}]),gue=B.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Qh,repeated:!0},{no:2,name:"publish",kind:"message",T:Qh,repeated:!0}]),oM=B.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),ab=B.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),cM=B.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:B.getEnumType(ab)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),lM=B.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),ep=B.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:B.getEnumType(Tt)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:cM,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:lM,oneof:"content_header"}],{localName:"DataStream_Header"}),tp=B.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),np=B.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),vue=B.makeMessageType("livekit.SubscribedAudioCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"enabled",kind:"scalar",T:8}]),vr=B.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),sb=B.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),yue=B.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),bue=B.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:vs,oneof:"message"},{no:2,name:"answer",kind:"message",T:vs,oneof:"message"},{no:3,name:"trickle",kind:"message",T:Am,oneof:"message"},{no:4,name:"add_track",kind:"message",T:rp,oneof:"message"},{no:5,name:"mute",kind:"message",T:Rm,oneof:"message"},{no:6,name:"subscription",kind:"message",T:Im,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:uM,oneof:"message"},{no:8,name:"leave",kind:"message",T:Mm,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:fM,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:mM,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:gM,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Mr,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:d1,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:bM,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:u1,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:dM,oneof:"message"}]),Lj=B.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:xue,oneof:"message"},{no:2,name:"answer",kind:"message",T:vs,oneof:"message"},{no:3,name:"offer",kind:"message",T:vs,oneof:"message"},{no:4,name:"trickle",kind:"message",T:Am,oneof:"message"},{no:5,name:"update",kind:"message",T:kue,oneof:"message"},{no:6,name:"track_published",kind:"message",T:l1,oneof:"message"},{no:8,name:"leave",kind:"message",T:Mm,oneof:"message"},{no:9,name:"mute",kind:"message",T:Rm,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:Tue,oneof:"message"},{no:11,name:"room_update",kind:"message",T:Cue,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:jue,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:Pue,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:Oue,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:Rue,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:Sue,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:wue,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:Mue,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:$ue,oneof:"message"},{no:22,name:"request_response",kind:"message",T:Uue,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:Fue,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:Iue,oneof:"message"},{no:25,name:"media_sections_requirement",kind:"message",T:Bue,oneof:"message"},{no:26,name:"subscribed_audio_codec_update",kind:"message",T:Aue,oneof:"message"}]),ob=B.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:ga,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:B.getEnumType(YI)}]),rp=B.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:B.getEnumType(gr)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:B.getEnumType(mt)},{no:9,name:"layers",kind:"message",T:ga,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:ob,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:B.getEnumType(Tt)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:B.getEnumType(JI)},{no:17,name:"audio_features",kind:"enum",T:B.getEnumType(Rt),repeated:!0}]),Am=B.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:B.getEnumType(vr)},{no:3,name:"final",kind:"scalar",T:8}]),Rm=B.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),xue=B.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:Om},{no:2,name:"participant",kind:"message",T:gs},{no:3,name:"other_participants",kind:"message",T:gs,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:hM,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:sM},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:rM},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Qh,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),wue=B.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:hM,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:sM},{no:3,name:"server_info",kind:"message",T:rM},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),l1=B.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:io}]),Sue=B.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),vs=B.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13}]),kue=B.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:gs,repeated:!0}]),Im=B.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:nM,repeated:!0}]),uM=B.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:B.getEnumType(i1)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),u1=B.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:B.getEnumType(Rt),repeated:!0}]),dM=B.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),Mm=B.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:B.getEnumType(xr)},{no:3,name:"action",kind:"enum",T:B.getEnumType(yo)},{no:4,name:"regions",kind:"message",T:Due}]),yo=B.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),fM=B.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:ga,repeated:!0}]),d1=B.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),hM=B.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),Tue=B.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:ZI,repeated:!0}]),Cue=B.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:Om}]),Eue=B.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:B.getEnumType(al)},{no:3,name:"score",kind:"scalar",T:2}]),jue=B.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:Eue,repeated:!0}]),Nue=B.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:B.getEnumType(sb)}]),Pue=B.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:Nue,repeated:!0}]),f1=B.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:B.getEnumType(i1)},{no:2,name:"enabled",kind:"scalar",T:8}]),_ue=B.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:f1,repeated:!0}]),Oue=B.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:f1,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:_ue,repeated:!0}]),Aue=B.makeMessageType("livekit.SubscribedAudioCodecUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_audio_codecs",kind:"message",T:vue,repeated:!0}]),pM=B.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),mM=B.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:pM,repeated:!0}]),Rue=B.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),Iue=B.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:Om},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:gs},{no:4,name:"other_participants",kind:"message",T:gs,repeated:!0}]),gM=B.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:vs},{no:2,name:"subscription",kind:"message",T:Im},{no:3,name:"publish_tracks",kind:"message",T:l1,repeated:!0},{no:4,name:"data_channels",kind:"message",T:yM,repeated:!0},{no:5,name:"offer",kind:"message",T:vs},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:vM,repeated:!0}]),vM=B.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),yM=B.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:B.getEnumType(vr)}]),Mr=B.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:B.getEnumType(yue),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),bM=B.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),Mue=B.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),Due=B.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:Lue,repeated:!0}]),Lue=B.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),$ue=B.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:B.getEnumType(cue)}]),Uue=B.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:B.getEnumType(h1)},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"trickle",kind:"message",T:Am,oneof:"request"},{no:5,name:"add_track",kind:"message",T:rp,oneof:"request"},{no:6,name:"mute",kind:"message",T:Rm,oneof:"request"},{no:7,name:"update_metadata",kind:"message",T:d1,oneof:"request"},{no:8,name:"update_audio_track",kind:"message",T:u1,oneof:"request"},{no:9,name:"update_video_track",kind:"message",T:dM,oneof:"request"}]),h1=B.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"},{no:4,name:"QUEUED"},{no:5,name:"UNSUPPORTED_TYPE"},{no:6,name:"UNCLASSIFIED_ERROR"}]),Fue=B.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),Bue=B.makeMessageType("livekit.MediaSectionsRequirement",()=>[{no:1,name:"num_audios",kind:"scalar",T:13},{no:2,name:"num_videos",kind:"scalar",T:13}]);function zue(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mf={exports:{}},que=mf.exports,$j;function Vue(){return $j||($j=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(que,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],a={},s=null;function o(m,b){var v=m[b];if(typeof v.bind=="function")return v.bind(m);try{return Function.prototype.bind.call(v,m)}catch{return function(){return Function.prototype.apply.apply(v,[m,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?c:console[m]!==void 0?o(console,m):console.log!==void 0?o(console,"log"):e}function d(){for(var m=this.getLevel(),b=0;b<i.length;b++){var v=i[b];this[v]=b<m?e:this.methodFactory(v,m,this.name)}if(this.log=this.debug,typeof console===n&&m<this.levels.SILENT)return"No console available for logging"}function f(m){return function(){typeof console!==n&&(d.call(this),this[m].apply(this,arguments))}}function h(m,b,v){return l(m)||f.apply(this,arguments)}function p(m,b){var v=this,x,S,T,w="loglevel";typeof m=="string"?w+=":"+m:typeof m=="symbol"&&(w=void 0);function k(N){var _=(i[N]||"silent").toUpperCase();if(!(typeof window===n||!w)){try{window.localStorage[w]=_;return}catch{}try{window.document.cookie=encodeURIComponent(w)+"="+_+";"}catch{}}}function C(){var N;if(!(typeof window===n||!w)){try{N=window.localStorage[w]}catch{}if(typeof N===n)try{var _=window.document.cookie,A=encodeURIComponent(w),R=_.indexOf(A+"=");R!==-1&&(N=/^([^;]+)/.exec(_.slice(R+A.length+1))[1])}catch{}return v.levels[N]===void 0&&(N=void 0),N}}function E(){if(!(typeof window===n||!w)){try{window.localStorage.removeItem(w)}catch{}try{window.document.cookie=encodeURIComponent(w)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function j(N){var _=N;if(typeof _=="string"&&v.levels[_.toUpperCase()]!==void 0&&(_=v.levels[_.toUpperCase()]),typeof _=="number"&&_>=0&&_<=v.levels.SILENT)return _;throw new TypeError("log.setLevel() called with invalid level: "+N)}v.name=m,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=b||h,v.getLevel=function(){return T??S??x},v.setLevel=function(N,_){return T=j(N),_!==!1&&k(T),d.call(v)},v.setDefaultLevel=function(N){S=j(N),C()||v.setLevel(N,!1)},v.resetLevel=function(){T=null,E(),d.call(v)},v.enableAll=function(N){v.setLevel(v.levels.TRACE,N)},v.disableAll=function(N){v.setLevel(v.levels.SILENT,N)},v.rebuild=function(){if(s!==v&&(x=j(s.getLevel())),d.call(v),s===v)for(var N in a)a[N].rebuild()},x=j(s?s.getLevel():"WARN");var P=C();P!=null&&(T=j(P)),d.call(v)}s=new p,s.getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var v=a[b];return v||(v=a[b]=new p(b,s.methodFactory)),v};var g=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=g),s},s.getLoggers=function(){return a},s.default=s,s})}(mf)),mf.exports}var Dm=Vue(),cb;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(cb||(cb={}));var Tr;(function(t){t.Default="livekit",t.Room="livekit-room",t.TokenSource="livekit-token-source",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(Tr||(Tr={}));let fe=Dm.getLogger("livekit");Object.values(Tr).map(t=>Dm.getLogger(t));fe.setDefaultLevel(cb.info);function Ai(t){const e=Dm.getLogger(t);return e.setDefaultLevel(fe.getLevel()),e}const Wue=Dm.getLogger("lk-e2ee"),Hc=7e3,Hue=[0,300,2*2*300,3*3*300,4*4*300,Hc,Hc,Hc,Hc,Hc];class Gue{constructor(e){this._retryDelays=e!==void 0?[...e]:Hue}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function Kue(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function O(t,e,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(d){try{l(r.next(d))}catch(f){s(f)}}function c(d){try{l(r.throw(d))}catch(f){s(f)}}function l(d){d.done?a(d.value):i(d.value).then(o,c)}l((r=r.apply(t,e||[])).next())})}function Uj(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fi(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Uj=="function"?Uj(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(s){return new Promise(function(o,c){s=t[a](s),i(o,c,s.done,s.value)})}}function i(a,s,o,c){Promise.resolve(c).then(function(l){a({value:l,done:o})},s)}}var Fd={exports:{}},Fj;function Jue(){if(Fj)return Fd.exports;Fj=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(w,k,C){return Function.prototype.apply.call(w,k,C)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(w){return Object.getOwnPropertyNames(w).concat(Object.getOwnPropertySymbols(w))}:n=function(w){return Object.getOwnPropertyNames(w)};function r(T){console&&console.warn&&console.warn(T)}var i=Number.isNaN||function(w){return w!==w};function a(){a.init.call(this)}Fd.exports=a,Fd.exports.once=v,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function o(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(T){if(typeof T!="number"||T<0||i(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");s=T}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(w){if(typeof w!="number"||w<0||i(w))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+w+".");return this._maxListeners=w,this};function c(T){return T._maxListeners===void 0?a.defaultMaxListeners:T._maxListeners}a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(w){for(var k=[],C=1;C<arguments.length;C++)k.push(arguments[C]);var E=w==="error",j=this._events;if(j!==void 0)E=E&&j.error===void 0;else if(!E)return!1;if(E){var P;if(k.length>0&&(P=k[0]),P instanceof Error)throw P;var N=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw N.context=P,N}var _=j[w];if(_===void 0)return!1;if(typeof _=="function")e(_,this,k);else for(var A=_.length,R=g(_,A),C=0;C<A;++C)e(R[C],this,k);return!0};function l(T,w,k,C){var E,j,P;if(o(k),j=T._events,j===void 0?(j=T._events=Object.create(null),T._eventsCount=0):(j.newListener!==void 0&&(T.emit("newListener",w,k.listener?k.listener:k),j=T._events),P=j[w]),P===void 0)P=j[w]=k,++T._eventsCount;else if(typeof P=="function"?P=j[w]=C?[k,P]:[P,k]:C?P.unshift(k):P.push(k),E=c(T),E>0&&P.length>E&&!P.warned){P.warned=!0;var N=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(w)+" listeners added. Use emitter.setMaxListeners() to increase limit");N.name="MaxListenersExceededWarning",N.emitter=T,N.type=w,N.count=P.length,r(N)}return T}a.prototype.addListener=function(w,k){return l(this,w,k,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(w,k){return l(this,w,k,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(T,w,k){var C={fired:!1,wrapFn:void 0,target:T,type:w,listener:k},E=d.bind(C);return E.listener=k,C.wrapFn=E,E}a.prototype.once=function(w,k){return o(k),this.on(w,f(this,w,k)),this},a.prototype.prependOnceListener=function(w,k){return o(k),this.prependListener(w,f(this,w,k)),this},a.prototype.removeListener=function(w,k){var C,E,j,P,N;if(o(k),E=this._events,E===void 0)return this;if(C=E[w],C===void 0)return this;if(C===k||C.listener===k)--this._eventsCount===0?this._events=Object.create(null):(delete E[w],E.removeListener&&this.emit("removeListener",w,C.listener||k));else if(typeof C!="function"){for(j=-1,P=C.length-1;P>=0;P--)if(C[P]===k||C[P].listener===k){N=C[P].listener,j=P;break}if(j<0)return this;j===0?C.shift():m(C,j),C.length===1&&(E[w]=C[0]),E.removeListener!==void 0&&this.emit("removeListener",w,N||k)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(w){var k,C,E;if(C=this._events,C===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[w]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete C[w]),this;if(arguments.length===0){var j=Object.keys(C),P;for(E=0;E<j.length;++E)P=j[E],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(k=C[w],typeof k=="function")this.removeListener(w,k);else if(k!==void 0)for(E=k.length-1;E>=0;E--)this.removeListener(w,k[E]);return this};function h(T,w,k){var C=T._events;if(C===void 0)return[];var E=C[w];return E===void 0?[]:typeof E=="function"?k?[E.listener||E]:[E]:k?b(E):g(E,E.length)}a.prototype.listeners=function(w){return h(this,w,!0)},a.prototype.rawListeners=function(w){return h(this,w,!1)},a.listenerCount=function(T,w){return typeof T.listenerCount=="function"?T.listenerCount(w):p.call(T,w)},a.prototype.listenerCount=p;function p(T){var w=this._events;if(w!==void 0){var k=w[T];if(typeof k=="function")return 1;if(k!==void 0)return k.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function g(T,w){for(var k=new Array(w),C=0;C<w;++C)k[C]=T[C];return k}function m(T,w){for(;w+1<T.length;w++)T[w]=T[w+1];T.pop()}function b(T){for(var w=new Array(T.length),k=0;k<w.length;++k)w[k]=T[k].listener||T[k];return w}function v(T,w){return new Promise(function(k,C){function E(P){T.removeListener(w,j),C(P)}function j(){typeof T.removeListener=="function"&&T.removeListener("error",E),k([].slice.call(arguments))}S(T,w,j,{once:!0}),w!=="error"&&x(T,E,{once:!0})})}function x(T,w,k){typeof T.on=="function"&&S(T,"error",w,k)}function S(T,w,k,C){if(typeof T.on=="function")C.once?T.once(w,k):T.on(w,k);else if(typeof T.addEventListener=="function")T.addEventListener(w,function E(j){C.once&&T.removeEventListener(w,E),k(j)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return Fd.exports}var ti=Jue();let xM=!0,wM=!0;function sl(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function _s(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,o){if(s!==e)return i.apply(this,arguments);const c=l=>{const d=n(l);d&&(o.handleEvent?o.handleEvent(d):o(d))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(o,c),i.apply(this,[s,c])};const a=r.removeEventListener;r.removeEventListener=function(s,o){if(s!==e||!this._eventMap||!this._eventMap[e])return a.apply(this,arguments);if(!this._eventMap[e].has(o))return a.apply(this,arguments);const c=this._eventMap[e].get(o);return this._eventMap[e].delete(o),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[s,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(s){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),s&&this.addEventListener(e,this["_on"+e]=s)},enumerable:!0,configurable:!0})}function Yue(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(xM=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Xue(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(wM=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function SM(){if(typeof window=="object"){if(xM)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function p1(t,e){wM&&console.warn(t+" is deprecated, please use "+e+" instead.")}function Que(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(sl(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(sl(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(sl(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=sl(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Bj(t){return Object.prototype.toString.call(t)==="[object Object]"}function kM(t){return Bj(t)?Object.keys(t).reduce(function(e,n){const r=Bj(t[n]),i=r?kM(t[n]):t[n],a=r&&!Object.keys(i).length;return i===void 0||a?e:Object.assign(e,{[n]:i})},{}):t}function lb(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?lb(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{lb(t,t.get(i),n)})}))}function zj(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const a=[];return t.forEach(s=>{s.type==="track"&&s.trackIdentifier===e.id&&a.push(s)}),a.forEach(s=>{t.forEach(o=>{o.type===r&&o.trackId===s.id&&lb(t,o,i)})}),i}const qj=SM;function TM(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(o){if(typeof o!="object"||o.mandatory||o.optional)return o;const c={};return Object.keys(o).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const d=typeof o[l]=="object"?o[l]:{ideal:o[l]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const f=function(h,p){return h?h+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(d.ideal!==void 0){c.optional=c.optional||[];let h={};typeof d.ideal=="number"?(h[f("min",l)]=d.ideal,c.optional.push(h),h={},h[f("max",l)]=d.ideal,c.optional.push(h)):(h[f("",l)]=d.ideal,c.optional.push(h))}d.exact!==void 0&&typeof d.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[f("",l)]=d.exact):["min","max"].forEach(h=>{d[h]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[f(h,l)]=d[h])})}),o.advanced&&(c.optional=(c.optional||[]).concat(o.advanced)),c},i=function(o,c){if(e.version>=61)return c(o);if(o=JSON.parse(JSON.stringify(o)),o&&typeof o.audio=="object"){const l=function(d,f,h){f in d&&!(h in d)&&(d[h]=d[f],delete d[f])};o=JSON.parse(JSON.stringify(o)),l(o.audio,"autoGainControl","googAutoGainControl"),l(o.audio,"noiseSuppression","googNoiseSuppression"),o.audio=r(o.audio)}if(o&&typeof o.video=="object"){let l=o.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const d=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete o.video.facingMode;let f;if(l.exact==="environment"||l.ideal==="environment"?f=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(f=["front"]),f)return n.mediaDevices.enumerateDevices().then(h=>{h=h.filter(g=>g.kind==="videoinput");let p=h.find(g=>f.some(m=>g.label.toLowerCase().includes(m)));return!p&&h.length&&f.includes("back")&&(p=h[h.length-1]),p&&(o.video.deviceId=l.exact?{exact:p.deviceId}:{ideal:p.deviceId}),o.video=r(o.video),qj("chrome: "+JSON.stringify(o)),c(o)})}o.video=r(o.video)}return qj("chrome: "+JSON.stringify(o)),c(o)},a=function(o){return e.version>=64?o:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[o.name]||o.name,message:o.message,constraint:o.constraint||o.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(o,c,l){i(o,d=>{n.webkitGetUserMedia(d,c,f=>{l&&l(a(f))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){const o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,l=>o(l).then(d=>{if(l.audio&&!d.getAudioTracks().length||l.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(a(d))))}}}function CM(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function EM(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let a;t.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(o=>o.track&&o.track.id===i.track.id):a={track:i.track};const s=new Event("track");s.track=i.track,s.receiver=a,s.transceiver={receiver:a},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let a;t.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(o=>o.track&&o.track.id===i.id):a={track:i};const s=new Event("track");s.track=i,s.receiver=a,s.transceiver={receiver:a},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else _s(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function jM(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=i.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,c){let l=i.apply(this,arguments);return l||(l=e(this,o),this._senders.push(l)),l};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){a.apply(this,arguments);const c=this._senders.indexOf(o);c!==-1&&this._senders.splice(c,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],n.apply(this,[a]),a.getTracks().forEach(s=>{this._senders.push(e(this,s))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],r.apply(this,[a]),a.getTracks().forEach(s=>{const o=this._senders.find(c=>c.track===s);o&&this._senders.splice(this._senders.indexOf(o),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function NM(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=n.apply(this,[]);return a.forEach(s=>s._pc=this),a});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=r.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(s=>zj(s,a.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(a=>a._pc=this),i}),_s(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(a=>zj(a,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,a,s;return this.getSenders().forEach(o=>{o.track===r&&(i?s=!0:i=o)}),this.getReceivers().forEach(o=>(o.track===r&&(a?s=!0:a=o),o.track===r)),s||i&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function PM(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(s,o){if(!o)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[o.id]?this._shimmedLocalStreams[o.id].indexOf(c)===-1&&this._shimmedLocalStreams[o.id].push(c):this._shimmedLocalStreams[o.id]=[o,c],c};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(l=>{if(this.getSenders().find(f=>f.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const o=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>o.indexOf(l)===-1);this._shimmedLocalStreams[s.id]=[s].concat(c)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(o=>{const c=this._shimmedLocalStreams[o].indexOf(s);c!==-1&&this._shimmedLocalStreams[o].splice(c,1),this._shimmedLocalStreams[o].length===1&&delete this._shimmedLocalStreams[o]}),i.apply(this,arguments)}}function _M(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return PM(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const d=n.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(f=>this._reverseStreams[f.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(f=>{if(this.getSenders().find(p=>p.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const f=new t.MediaStream(d.getTracks());this._streams[d.id]=f,this._reverseStreams[f.id]=d,d=f}r.apply(this,[d])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},t.RTCPeerConnection.prototype.addTrack=function(d,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(m=>m===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const g=this._streams[f.id];if(g)g.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new t.MediaStream([d]);this._streams[f.id]=m,this._reverseStreams[m.id]=f,this.addStream(m)}return this.getSenders().find(m=>m.track===d)};function a(l,d){let f=d.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{const p=l._reverseStreams[h],g=l._streams[p.id];f=f.replace(new RegExp(g.id,"g"),p.id)}),new RTCSessionDescription({type:d.type,sdp:f})}function s(l,d){let f=d.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{const p=l._reverseStreams[h],g=l._streams[p.id];f=f.replace(new RegExp(p.id,"g"),g.id)}),new RTCSessionDescription({type:d.type,sdp:f})}["createOffer","createAnswer"].forEach(function(l){const d=t.RTCPeerConnection.prototype[l],f={[l](){const h=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[g=>{const m=a(this,g);h[0].apply(null,[m])},g=>{h[1]&&h[1].apply(null,g)},arguments[2]]):d.apply(this,arguments).then(g=>a(this,g))}};t.RTCPeerConnection.prototype[l]=f[l]});const o=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?o.apply(this,arguments):(arguments[0]=s(this,arguments[0]),o.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:a(this,l)}}),t.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(d._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let h;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(m=>d.track===m)&&(h=this._streams[p])}),h&&(h.getTracks().length===1?this.removeStream(this._reverseStreams[h.id]):h.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ub(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function OM(t,e){_s(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var Vj=Object.freeze({__proto__:null,fixNegotiationNeeded:OM,shimAddTrackRemoveTrack:_M,shimAddTrackRemoveTrackWithNative:PM,shimGetSendersWithDtmf:jM,shimGetUserMedia:TM,shimMediaStream:CM,shimOnTrack:EM,shimPeerConnection:ub,shimSenderReceiverGetStats:NM});function AM(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,a,s){p1("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(a,s)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,o,c){o in s&&!(c in s)&&(s[c]=s[o],delete s[o])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),a(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const o=s.apply(this,arguments);return i(o,"mozAutoGainControl","autoGainControl"),i(o,"mozNoiseSuppression","noiseSuppression"),o}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(o){return this.kind==="audio"&&typeof o=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o,"autoGainControl","mozAutoGainControl"),i(o,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[o])}}}}function Zue(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function RM(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function db(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const a=t.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[a,s,o]=arguments;return r.apply(this,[a||null]).then(c=>{if(e.version<53&&!s)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((d,f)=>{c.set(f,Object.assign({},d,{type:n[d.type]||d.type}))})}return c}).then(s,o)}}function IM(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(a=>a._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function MM(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),_s(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function DM(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){p1("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function LM(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function $M(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=e.apply(this,arguments);if(i){const{sender:s}=a,o=s.getParameters();(!("encodings"in o)||o.encodings.length===1&&Object.keys(o.encodings[0]).length===0)&&(o.encodings=r,s.sendEncodings=r,this.setParametersPromises.push(s.setParameters(o).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return a})}function UM(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function FM(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function BM(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var Wj=Object.freeze({__proto__:null,shimAddTransceiver:$M,shimCreateAnswer:BM,shimCreateOffer:FM,shimGetDisplayMedia:Zue,shimGetParameters:UM,shimGetUserMedia:AM,shimOnTrack:RM,shimPeerConnection:db,shimRTCDataChannel:LM,shimReceiverGetStats:MM,shimRemoveStream:DM,shimSenderGetStats:IM});function zM(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return a&&a.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(a=>{i.includes(a.track)&&this.removeTrack(a)})})}}function qM(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const a=new Event("addstream");a.stream=i,this.dispatchEvent(a)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(a=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(a)>=0)return;r._remoteStreams.push(a);const s=new Event("addstream");s.stream=a,r.dispatchEvent(s)})}),e.apply(r,arguments)}}}function VM(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,a=e.setRemoteDescription,s=e.addIceCandidate;e.createOffer=function(l,d){const f=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[f]);return d?(h.then(l,d),Promise.resolve()):h},e.createAnswer=function(l,d){const f=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[f]);return d?(h.then(l,d),Promise.resolve()):h};let o=function(c,l,d){const f=i.apply(this,[c]);return d?(f.then(l,d),Promise.resolve()):f};e.setLocalDescription=o,o=function(c,l,d){const f=a.apply(this,[c]);return d?(f.then(l,d),Promise.resolve()):f},e.setRemoteDescription=o,o=function(c,l,d){const f=s.apply(this,[c]);return d?(f.then(l,d),Promise.resolve()):f},e.addIceCandidate=o}function WM(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(HM(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,a){e.mediaDevices.getUserMedia(r).then(i,a)}).bind(e))}function HM(t){return t&&t.video!==void 0?Object.assign({},t,{video:kM(t.video)}):t}function GM(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const a=[];for(let s=0;s<r.iceServers.length;s++){let o=r.iceServers[s];o.urls===void 0&&o.url?(p1("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,a.push(o)):a.push(r.iceServers[s])}r.iceServers=a}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function KM(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function JM(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const a=this.getTransceivers().find(s=>s.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):r.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function YM(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var Hj=Object.freeze({__proto__:null,shimAudioContext:YM,shimCallbacksAPI:VM,shimConstraints:HM,shimCreateOfferLegacy:JM,shimGetUserMedia:WM,shimLocalStreamsAPI:zM,shimRTCIceServerUrls:GM,shimRemoteStreamsAPI:qM,shimTrackEventTransceiver:KM}),sv={exports:{}},Gj;function ede(){return Gj||(Gj=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,a)=>(a>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let a=8;a<r.length;a+=2)switch(r[a]){case"raddr":i.relatedAddress=r[a+1];break;case"rport":i.relatedPort=parseInt(r[a+1],10);break;case"tcptype":i.tcpType=r[a+1];break;case"ufrag":i.ufrag=r[a+1],i.usernameFragment=r[a+1];break;default:i[r[a]]===void 0&&(i[r[a]]=r[a+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const a=n.type;return r.push("typ"),r.push(a),a!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const a=n.substring(n.indexOf(" ")+1).split(";");for(let s=0;s<a.length;s++)i=a[s].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const a=[];Object.keys(n.parameters).forEach(s=>{n.parameters[s]!==void 0?a.push(s+"="+n.parameters[s]):a.push(s)}),r+="a=fmtp:"+i+" "+a.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(a=>{r+="a=rtcp-fb:"+i+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},a=n.indexOf(":",r);return a>-1?(i.attribute=n.substring(r+1,a),i.value=n.substring(a+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(a=>{i+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],a=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&a?{usernameFragment:i.substring(12),password:a.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(n)[0].split(" ");r.profile=a[2];for(let o=3;o<a.length;o++){const c=a[o],l=e.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const d=e.parseRtpMap(l),f=e.matchPrefix(n,"a=fmtp:"+c+" ");switch(d.parameters=f.length?e.parseFmtp(f[0]):{},d.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(d),d.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(d.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(o=>{r.headerExtensions.push(e.parseExtmap(o))});const s=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(o=>{s.forEach(c=>{o.rtcpFeedback.find(d=>d.type===c.type&&d.parameter===c.parameter)||o.rtcpFeedback.push(c)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(s=>s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(s=>{i+=e.writeRtpMap(s),i+=e.writeFmtp(s),i+=e.writeRtcpFb(s)});let a=0;return r.codecs.forEach(s=>{s.maxptime>a&&(a=s.maxptime)}),a>0&&(i+="a=maxptime:"+a+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(s=>{i+=e.writeExtmap(s)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),a=i.fecMechanisms.indexOf("RED")!==-1,s=i.fecMechanisms.indexOf("ULPFEC")!==-1,o=e.matchPrefix(n,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname"),c=o.length>0&&o[0].ssrc;let l;const d=e.matchPrefix(n,"a=ssrc-group:FID").map(h=>h.substring(17).split(" ").map(g=>parseInt(g,10)));d.length>0&&d[0].length>1&&d[0][0]===c&&(l=d[0][1]),i.codecs.forEach(h=>{if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){let p={ssrc:c,codecPayloadType:parseInt(h.parameters.apt,10)};c&&l&&(p.rtx={ssrc:l}),r.push(p),a&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},r.push(p))}}),r.length===0&&c&&r.push({ssrc:c});let f=e.matchPrefix(n,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-50*40*8:f=void 0,r.forEach(h=>{h.maxBitrate=f})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const a=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=a.length>0,r.compound=a.length===0;const s=e.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const a=e.matchPrefix(n,"a=ssrc:").map(s=>e.parseSsrcMedia(s)).filter(s=>s.attribute==="msid");if(a.length>0)return r=a[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let a;i.length>0&&(a=parseInt(i[0].substring(19),10)),isNaN(a)&&(a=65536);const s=e.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:r.fmt,maxMessageSize:a};const o=e.matchPrefix(n,"a=sctpmap:");if(o.length>0){const c=o[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:a}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let a;const s=r!==void 0?r:2;return n?a=n:a=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+a+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let a=0;a<i.length;a++)switch(i[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[a].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e}(sv)),sv.exports}var XM=ede(),bo=zue(XM),tde=fle({__proto__:null,default:bo},[XM]);function gf(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),a=bo.parseCandidate(r.candidate);for(const s in a)s in i||Object.defineProperty(i,s,{value:a[s]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,_s(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function fb(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||_s(t,"icecandidate",e=>{if(e.candidate){const n=bo.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function vf(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(o){if(!o||!o.sdp)return!1;const c=bo.splitSections(o.sdp);return c.shift(),c.some(l=>{const d=bo.parseMLine(l);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},r=function(o){const c=o.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},i=function(o){let c=65536;return e.browser==="firefox"&&(e.version<57?o===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},a=function(o,c){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const d=bo.matchPrefix(o.sdp,"a=max-message-size:");return d.length>0?l=parseInt(d[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(l=2147483637),l},s=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=i(c),d=a(arguments[0],c);let f;l===0&&d===0?f=Number.POSITIVE_INFINITY:l===0||d===0?f=Math.max(l,d):f=Math.min(l,d);const h={};Object.defineProperty(h,"maxMessageSize",{get(){return f}}),this._sctp=h}return s.apply(this,arguments)}}function yf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const a=r.send;r.send=function(){const o=arguments[0],c=o.length||o.size||o.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return a.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},_s(t,"datachannel",r=>(e(r.channel,r.target),r))}function hb(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const a=i.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const s=new Event("connectionstatechange",i);a.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function pb(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=i.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:a}):i.sdp=a}return n.apply(this,arguments)}}function bf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function xf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>n.apply(this,[s]))})}var nde=Object.freeze({__proto__:null,removeExtmapAllowMixed:pb,shimAddIceCandidateNullOrEmpty:bf,shimConnectionState:hb,shimMaxMessageSize:vf,shimParameterlessSetLocalDescription:xf,shimRTCIceCandidate:gf,shimRTCIceCandidateRelayProtocol:fb,shimSendThrowTypeError:yf});function rde(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=SM,r=Que(t),i={browserDetails:r,commonShim:nde,extractVersion:sl,disableLog:Yue,disableWarnings:Xue,sdp:tde};switch(r.browser){case"chrome":if(!Vj||!ub||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Vj,bf(t,r),xf(t),TM(t,r),CM(t),ub(t,r),EM(t),_M(t,r),jM(t),NM(t),OM(t,r),gf(t),fb(t),hb(t),vf(t,r),yf(t),pb(t,r);break;case"firefox":if(!Wj||!db||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Wj,bf(t,r),xf(t),AM(t,r),db(t,r),RM(t),DM(t),IM(t),MM(t),LM(t),$M(t),UM(t),FM(t),BM(t),gf(t),hb(t),vf(t,r),yf(t);break;case"safari":if(!Hj||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Hj,bf(t,r),xf(t),GM(t),JM(t),VM(t),zM(t),qM(t),KM(t),WM(t),YM(t),gf(t),fb(t),vf(t,r),yf(t),pb(t,r);break;default:n("Unsupported browser!");break}return i}rde({window:typeof window>"u"?void 0:window});const ide=10,Gc="lk_e2ee",ade="LKFrameEncryptionKey",sde={sharedKey:!1,ratchetSalt:ade,ratchetWindowSize:8,failureTolerance:ide,keyringSize:16};var va;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(va||(va={}));var Kj;(function(t){t.KeyRatcheted="keyRatcheted"})(Kj||(Kj={}));var ia;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(ia||(ia={}));var Jj;(function(t){t.Error="cryptorError"})(Jj||(Jj={}));function ode(){return cde()||mb()}function mb(){return typeof window.RTCRtpScriptTransform<"u"}function cde(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}function lde(t){var e,n,r,i,a;if(((e=t.value)===null||e===void 0?void 0:e.case)!=="sipDtmf"&&((n=t.value)===null||n===void 0?void 0:n.case)!=="metrics"&&((r=t.value)===null||r===void 0?void 0:r.case)!=="speaker"&&((i=t.value)===null||i===void 0?void 0:i.case)!=="transcription"&&((a=t.value)===null||a===void 0?void 0:a.case)!=="encryptedPacket")return new QI({value:t.value})}class Fye extends ti.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r,i)=>{fe.debug("key ratcheted event received",{ratchetResult:n,participantId:r,keyIndex:i})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},sde),e),this.on(va.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,r){const i={key:e,participantIdentity:n,keyIndex:r};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(va.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(va.RatchetRequest,e,n)}}class $i extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var Ee;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout"})(Ee||(Ee={}));class De extends $i{constructor(e,n,r,i){super(1,e),this.name="ConnectionError",this.status=r,this.reason=n,this.context=i,this.reasonName=Ee[n]}}class m1 extends $i{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class hi extends $i{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class ude extends $i{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class St extends $i{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class gb extends $i{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class Yj extends $i{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class Xj extends $i{constructor(e,n){super(15,e),this.reason=n,this.reasonName=typeof n=="string"?n:h1[n]}}var tn;(function(t){t[t.AlreadyOpened=0]="AlreadyOpened",t[t.AbnormalEnd=1]="AbnormalEnd",t[t.DecodeFailed=2]="DecodeFailed",t[t.LengthExceeded=3]="LengthExceeded",t[t.Incomplete=4]="Incomplete",t[t.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered",t[t.EncryptionTypeMismatch=8]="EncryptionTypeMismatch"})(tn||(tn={}));class zn extends $i{constructor(e,n){super(16,e),this.name="DataStreamError",this.reason=n,this.reasonName=tn[n]}}var _u;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(_u||(_u={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(_u||(_u={}));var Qj;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(Qj||(Qj={}));var z;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(z||(z={}));var H;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackCpuConstrained="localTrackCpuConstrained",t.LocalSenderCreated="localSenderCreated",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.TrackCpuConstrained="trackCpuConstrained",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(H||(H={}));var ee;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(ee||(ee={}));var Z;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.CpuConstrained="cpuConstrained",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(Z||(Z={}));function dde(t){return typeof t>"u"?t:typeof structuredClone=="function"?typeof t=="object"&&t!==null?structuredClone(Object.assign({},t)):structuredClone(t):JSON.parse(JSON.stringify(t))}const fde=/version\/(\d+(\.?_?\d+)+)/i;let ov;function xn(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof t>"u"&&typeof navigator>"u")return;const n=(t??navigator.userAgent).toLowerCase();if(ov===void 0||e){const r=hde.find(i=>{let{test:a}=i;return a.test(n)});ov=r==null?void 0:r.describe(n)}return ov}const hde=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:wf(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:cv(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:wf(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:cv(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:wf(fde,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:cv(t)}}}];function wf(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(t);return r&&r.length>=n&&r[n]||""}function cv(t){return t.includes("mac os")?wf(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var pde="2.15.8";const mde=pde,gde=16;class Bt{}Bt.setTimeout=function(){return setTimeout(...arguments)};Bt.setInterval=function(){return setInterval(...arguments)};Bt.clearTimeout=function(){return clearTimeout(...arguments)};Bt.clearInterval=function(){return clearInterval(...arguments)};const vde=5e3,Kc=[];var On;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(On||(On={}));class F extends ti.EventEmitter{get streamState(){return this._streamState}setStreamState(e){this._streamState=e}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this._streamState=F.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=fe,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),vde):this.handleAppVisibilityChanged()},this.log=Ai((i=r.loggerName)!==null&&i!==void 0?i:Tr.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=F.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),ge(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===F.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===F.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Kc.forEach(a=>{a.parentElement===null&&!e&&(e=a)}),e&&Kc.splice(Kc.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),ao(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),i=r.some(a=>a.kind==="audio");return e.play().then(()=>{this.emit(i?Z.AudioPlaybackStarted:Z.VideoPlaybackStarted)}).catch(a=>{a.name==="NotAllowedError"?this.emit(i?Z.AudioPlaybackFailed:Z.VideoPlaybackFailed,a):a.name==="AbortError"?fe.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):fe.warn("could not playback ".concat(i?"audio":"video"),a),i&&e&&r.some(s=>s.kind==="video")&&a.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(Z.ElementAttached,e),e}detach(e){try{if(e){xo(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(Z.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(r=>{xo(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(Z.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Ai(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Kc.forEach(r=>{r.parentElement||(n=!1)}),n&&Kc.push(e)}}handleAppVisibilityChanged(){return O(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===F.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){pn()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){pn()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function ao(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let r;t.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(t)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(t)),(!bs()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(bs()||ys())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function xo(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(l){l.Audio="audio",l.Video="video",l.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(l){l.Camera="camera",l.Microphone="microphone",l.ScreenShare="screen_share",l.ScreenShareAudio="screen_share_audio",l.Unknown="unknown"})(n=t.Source||(t.Source={}));let r;(function(l){l.Active="active",l.Paused="paused",l.Unknown="unknown"})(r=t.StreamState||(t.StreamState={}));function i(l){switch(l){case e.Audio:return gr.AUDIO;case e.Video:return gr.VIDEO;default:return gr.DATA}}t.kindToProto=i;function a(l){switch(l){case gr.AUDIO:return e.Audio;case gr.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=a;function s(l){switch(l){case n.Camera:return mt.CAMERA;case n.Microphone:return mt.MICROPHONE;case n.ScreenShare:return mt.SCREEN_SHARE;case n.ScreenShareAudio:return mt.SCREEN_SHARE_AUDIO;default:return mt.UNKNOWN}}t.sourceToProto=s;function o(l){switch(l){case mt.CAMERA:return n.Camera;case mt.MICROPHONE:return n.Microphone;case mt.SCREEN_SHARE:return n.ScreenShare;case mt.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=o;function c(l){switch(l){case sb.ACTIVE:return r.Active;case sb.PAUSED:return r.Paused;default:return r.Unknown}}t.streamStateFromProto=c})(F||(F={}));class Me{constructor(e,n,r,i,a){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&r!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:r,maxFramerate:i,priority:a};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const yde=["vp8","h264"],bde=["vp8","h264","vp9","av1","h265"];function xde(t){return!!yde.find(e=>e===t)}const wde=xde;var Zj;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(Zj||(Zj={}));var vb;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(vb||(vb={}));const Ou={h90:new Me(160,90,9e4,20),h180:new Me(320,180,16e4,20),h216:new Me(384,216,18e4,20),h360:new Me(640,360,45e4,20),h540:new Me(960,540,8e5,25),h720:new Me(1280,720,17e5,30),h1080:new Me(1920,1080,3e6,30),h1440:new Me(2560,1440,5e6,30),h2160:new Me(3840,2160,8e6,30)},yb={h120:new Me(160,120,7e4,20),h180:new Me(240,180,125e3,20),h240:new Me(320,240,14e4,20),h360:new Me(480,360,33e4,20),h480:new Me(640,480,5e5,20),h540:new Me(720,540,6e5,25),h720:new Me(960,720,13e5,30),h1080:new Me(1440,1080,23e5,30),h1440:new Me(1920,1440,38e5,30)},g1={h360fps3:new Me(640,360,2e5,3,"medium"),h360fps15:new Me(640,360,4e5,15,"medium"),h720fps5:new Me(1280,720,8e5,5,"medium"),h720fps15:new Me(1280,720,15e5,15,"medium"),h720fps30:new Me(1280,720,2e6,30,"medium"),h1080fps15:new Me(1920,1080,25e5,15,"medium"),h1080fps30:new Me(1920,1080,5e6,30,"medium"),original:new Me(0,0,7e6,30,"medium")},Sde="|",eN="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function kde(t){const e=t.split(Sde);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function wn(t){return O(this,void 0,void 0,function*(){return new Promise(e=>Bt.setTimeout(e,t))})}function bb(){return"addTransceiver"in RTCPeerConnection.prototype}function xb(){return"addTrack"in RTCPeerConnection.prototype}function Tde(){if(!("getCapabilities"in RTCRtpSender)||bs()||ys())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/av1"){e=!0;break}}return e}function Cde(){if(!("getCapabilities"in RTCRtpSender)||ys())return!1;if(bs()){const n=xn();if(n!=null&&n.version&&Cr(n.version,"16")<0||(n==null?void 0:n.os)==="iOS"&&(n!=null&&n.osVersion)&&Cr(n.osVersion,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/vp9"){e=!0;break}}return e}function Ur(t){return t==="av1"||t==="vp9"}function wb(t){return!document||Au()?!1:(t||(t=document.createElement("audio")),"setSinkId"in t)}function Ede(){return typeof RTCPeerConnection>"u"?!1:bb()||xb()}function ys(){var t;return((t=xn())===null||t===void 0?void 0:t.name)==="Firefox"}function bs(){var t;return((t=xn())===null||t===void 0?void 0:t.name)==="Safari"}function Au(){const t=xn();return(t==null?void 0:t.name)==="Safari"||(t==null?void 0:t.os)==="iOS"}function jde(){const t=xn();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")||(t==null?void 0:t.os)==="iOS"&&!!(t!=null&&t.osVersion)&&Cr(t.osVersion,"17")>=0}function Nde(t){return t||(t=xn()),(t==null?void 0:t.name)==="Safari"&&Cr(t.version,"18.3")>0||(t==null?void 0:t.os)==="iOS"&&!!(t!=null&&t.osVersion)&&Cr(t.osVersion,"18.3")>0}function QM(){var t,e;return pn()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function Pde(){const t=xn(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&Cr(t.osVersion,e)>=0?!0:t.name==="Safari"&&Cr(t.version,e)>=0}function pn(){return typeof document<"u"}function Qr(){return navigator.product=="ReactNative"}function Sb(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function ZM(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function e5(){if(!Qr())return;let t=ZM();if(t)return t.platform}function tN(){if(pn())return window.devicePixelRatio;if(Qr()){let t=ZM();if(t)return t.devicePixelRatio}return 1}function Cr(t,e){const n=t.split("."),r=e.split("."),i=Math.min(n.length,r.length);for(let a=0;a<i;++a){const s=parseInt(n[a],10),o=parseInt(r[a],10);if(s>o)return 1;if(s<o)return-1;if(a===i-1&&s===o)return 0}return t===""&&e!==""?-1:e===""?1:n.length==r.length?0:n.length<r.length?-1:1}function _de(t){for(const e of t)e.target.handleResize(e)}function Ode(t){for(const e of t)e.target.handleVisibilityChanged(e)}let lv=null;const nN=()=>(lv||(lv=new ResizeObserver(_de)),lv);let uv=null;const rN=()=>(uv||(uv=new IntersectionObserver(Ode,{root:null,rootMargin:"0px"})),uv);function Ade(){var t;const e=new mue({sdk:aM.JS,protocol:gde,version:mde});return Qr()&&(e.os=(t=e5())!==null&&t!==void 0?t:""),e}function iN(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=t,i.height=e;const a=i.getContext("2d");a==null||a.fillRect(0,0,i.width,i.height),r&&a&&(a.beginPath(),a.arc(t/2,e/2,50,0,Math.PI*2,!0),a.closePath(),a.fillStyle="grey",a.fill());const s=i.captureStream(),[o]=s.getTracks();if(!o)throw Error("Could not get empty media stream video track");return o.enabled=n,o}let Jc;function dv(){if(!Jc){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const r=t.createMediaStreamDestination();if(e.connect(n),n.connect(r),e.start(),[Jc]=r.stream.getAudioTracks(),!Jc)throw Error("Could not get empty media stream audio track");Jc.enabled=!1}return Jc.clone()}class Jn{get isResolved(){return this._isResolved}constructor(e,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((r,i)=>O(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,e&&(yield e(r,i))})).finally(()=>{var r;this._isResolved=!0,(r=this.onFinally)===null||r===void 0||r.call(this)})}}function Rde(t){return bde.includes(t)}function ya(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact!==void 0)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal!==void 0)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function Ide(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function kb(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function Mde(t,e){return t.segments.map(n=>{let{id:r,text:i,language:a,startTime:s,endTime:o,final:c}=n;var l;const d=(l=e.get(r))!==null&&l!==void 0?l:Date.now(),f=Date.now();return c?e.delete(r):e.set(r,d),{id:r,text:i,startTime:Number.parseInt(s.toString()),endTime:Number.parseInt(o.toString()),final:c,language:a,firstReceivedTime:d,lastReceivedTime:f}})}function Dde(t){const{id:e,timestamp:n,message:r,editTimestamp:i}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:i?Number.parseInt(i.toString()):void 0,message:r}}function aN(t){switch(t.reason){case Ee.LeaveRequest:return t.context;case Ee.Cancelled:return xr.CLIENT_INITIATED;case Ee.NotAllowed:return xr.USER_REJECTED;case Ee.ServerUnreachable:return xr.JOIN_FAILURE;default:return xr.UNKNOWN_REASON}}function Sf(t){return t!==void 0?Number(t):void 0}function qa(t){return t!==void 0?BigInt(t):void 0}function is(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function Kr(t){return!!t&&t.kind==F.Kind.Audio}function Aa(t){return!!t&&t.kind==F.Kind.Video}function Wi(t){return is(t)&&Aa(t)}function ai(t){return is(t)&&Kr(t)}function Tb(t){return!!t&&!t.isLocal}function Lde(t){return!!t&&!t.isLocal}function fv(t){return Tb(t)&&Aa(t)}function $de(t){return t.isLocal}function Ude(t,e){const n=[];let r=new TextEncoder().encode(t);for(;r.length>e;){let i=e;for(;i>0;){const a=r[i];if(a!==void 0&&(a&192)!==128)break;i--}n.push(r.slice(0,i)),r=r.slice(i)}return r.length>0&&n.push(r),n}function t5(t,e,n){var r,i,a,s;const{optionsWithoutProcessor:o,audioProcessor:c,videoProcessor:l}=i5(t??{}),d=e==null?void 0:e.processor,f=n==null?void 0:n.processor,h=o??{};return h.audio===!0&&(h.audio={}),h.video===!0&&(h.video={}),h.audio&&(Cb(h.audio,e),(r=(a=h.audio).deviceId)!==null&&r!==void 0||(a.deviceId={ideal:"default"}),(c||d)&&(h.audio.processor=c??d)),h.video&&(Cb(h.video,n),(i=(s=h.video).deviceId)!==null&&i!==void 0||(s.deviceId={ideal:"default"}),(l||f)&&(h.video.processor=l??f)),h}function Cb(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function v1(t){var e,n,r,i;const a={};if(t.video)if(typeof t.video=="object"){const s={},o=s,c=t.video;Object.keys(c).forEach(l=>{switch(l){case"resolution":Cb(o,c.resolution);break;default:o[l]=c[l]}}),a.video=s,(e=(r=a.video).deviceId)!==null&&e!==void 0||(r.deviceId={ideal:"default"})}else a.video=t.video?{deviceId:{ideal:"default"}}:!1;else a.video=!1;return t.audio?typeof t.audio=="object"?(a.audio=t.audio,(n=(i=a.audio).deviceId)!==null&&n!==void 0||(i.deviceId={ideal:"default"})):a.audio={deviceId:{ideal:"default"}}:a.audio=!1,a}function n5(t){return O(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const r=r5();if(r){const i=r.createAnalyser();i.fftSize=2048;const a=i.frequencyBinCount,s=new Uint8Array(a);r.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(i),yield wn(n),i.getByteTimeDomainData(s);const c=s.some(l=>l!==128&&l!==0);return r.close(),!c}return!1}()})}function r5(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const r=()=>O(this,void 0,void 0,function*(){var i;try{n.state==="suspended"&&(yield n.resume())}catch(a){console.warn("Error trying to auto-resume audio context",a)}finally{(i=window.document.body)===null||i===void 0||i.removeEventListener("click",r)}});n.addEventListener("statechange",()=>{var i;n.state==="closed"&&((i=window.document.body)===null||i===void 0||i.removeEventListener("click",r))}),window.document.body.addEventListener("click",r)}return n}}function Fde(t){return t==="audioinput"?F.Source.Microphone:t==="videoinput"?F.Source.Camera:F.Source.Unknown}function Eb(t){return t===F.Source.Microphone?"audioinput":t===F.Source.Camera?"videoinput":void 0}function Bde(t){var e,n;let r=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(r=typeof r=="boolean"?{}:r,bs()?r=Object.assign(Object.assign({},r),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function Tl(t){return t.split("/")[1].toLowerCase()}function zde(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new l1({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function ge(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?ge(t.track):{})}}function qde(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function Vde(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const r=[...Object.keys(e),...Object.keys(t)],i={};for(const a of r)t[a]!==e[a]&&(i[a]=(n=e[a])!==null&&n!==void 0?n:"");return i}function i5(t){const e=Object.assign({},t);let n,r;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(r=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:r,optionsWithoutProcessor:dde(e)}}function Wde(t){switch(t){case mt.CAMERA:return F.Source.Camera;case mt.MICROPHONE:return F.Source.Microphone;case mt.SCREEN_SHARE:return F.Source.ScreenShare;case mt.SCREEN_SHARE_AUDIO:return F.Source.ScreenShareAudio;default:return F.Source.Unknown}}function sN(t,e){return t.width*t.height<e.width*e.height}function Hde(t,e){var n;return(n=t.layers)===null||n===void 0?void 0:n.find(r=>r.quality===e)}class Gde extends ti.EventEmitter{constructor(e,n){super(),this.decryptDataRequests=new Map,this.encryptDataRequests=new Map,this.onWorkerMessage=r=>{var i,a;const{kind:s,data:o}=r.data;switch(s){case"error":fe.error(o.error.message),this.emit(ia.EncryptionError,o.error);break;case"initAck":o.enabled&&this.keyProvider.getKeys().forEach(d=>{this.postKey(d)});break;case"enable":if(o.enabled&&this.keyProvider.getKeys().forEach(d=>{this.postKey(d)}),this.encryptionEnabled!==o.enabled&&o.participantIdentity===((i=this.room)===null||i===void 0?void 0:i.localParticipant.identity))this.emit(ia.ParticipantEncryptionStatusChanged,o.enabled,this.room.localParticipant),this.encryptionEnabled=o.enabled;else if(o.participantIdentity){const d=(a=this.room)===null||a===void 0?void 0:a.getParticipantByIdentity(o.participantIdentity);if(!d)throw TypeError("couldn't set encryption status, participant not found".concat(o.participantIdentity));this.emit(ia.ParticipantEncryptionStatusChanged,o.enabled,d)}break;case"ratchetKey":this.keyProvider.emit(va.KeyRatcheted,o.ratchetResult,o.participantIdentity,o.keyIndex);break;case"decryptDataResponse":const c=this.decryptDataRequests.get(o.uuid);c!=null&&c.resolve&&c.resolve(o);break;case"encryptDataResponse":const l=this.encryptDataRequests.get(o.uuid);l!=null&&l.resolve&&l.resolve(o);break}},this.onWorkerError=r=>{fe.error("e2ee worker encountered an error:",{error:r.error}),this.emit(ia.EncryptionError,r.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1,this.dataChannelEncryptionEnabled=n}get isEnabled(){return this.encryptionEnabled}get isDataChannelEncryptionEnabled(){return this.isEnabled&&this.dataChannelEncryptionEnabled}setup(e){if(!ode())throw new m1("tried to setup end-to-end encryption on an unsupported browser");if(fe.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:Wue.getLevel()}};this.worker&&(fe.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){fe.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?fe.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(ee.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(z.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==Tt.NONE,i.identity)),e.on(z.ConnectionStateChanged,r=>{r===we.Connected&&e.remoteParticipants.forEach(i=>{i.trackPublications.forEach(a=>{this.setParticipantCryptorEnabled(a.trackInfo.encryption!==Tt.NONE,i.identity)})})}).on(z.TrackUnsubscribed,(r,i,a)=>{var s;const o={kind:"removeTransform",data:{participantIdentity:a.identity,trackId:r.mediaStreamID}};(s=this.worker)===null||s===void 0||s.postMessage(o)}).on(z.TrackSubscribed,(r,i,a)=>{this.setupE2EEReceiver(r,a.identity,i.trackInfo)}).on(z.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(r=>{this.postKey(r)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(H.LocalSenderCreated,(r,i)=>O(this,void 0,void 0,function*(){this.setupE2EESender(i,r)})),e.localParticipant.on(H.LocalTrackPublished,r=>{if(!Aa(r.track)||!Au())return;const i={kind:"updateCodec",data:{trackId:r.track.mediaStreamID,codec:Tl(r.trackInfo.codecs[0].mimeType),participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}),n.on(va.SetKey,r=>this.postKey(r)).on(va.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}encryptData(e){return O(this,void 0,void 0,function*(){if(!this.worker)throw Error("could not encrypt data, worker is missing");const n=crypto.randomUUID(),r={kind:"encryptDataRequest",data:{uuid:n,payload:e,participantIdentity:this.room.localParticipant.identity}},i=new Jn;return i.onFinally=()=>{this.encryptDataRequests.delete(n)},this.encryptDataRequests.set(n,i),this.worker.postMessage(r),i.promise})}handleEncryptedData(e,n,r,i){if(!this.worker)throw Error("could not handle encrypted data, worker is missing");const a=crypto.randomUUID(),s={kind:"decryptDataRequest",data:{uuid:a,payload:e,iv:n,participantIdentity:r,keyIndex:i}},o=new Jn;return o.onFinally=()=>{this.decryptDataRequests.delete(a)},this.decryptDataRequests.set(a,o),this.worker.postMessage(s),o.promise}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(r)}postKey(e){let{key:n,participantIdentity:r,keyIndex:i}=e;var a;if(!this.worker)throw Error("could not set key, worker is missing");const s={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((a=this.room)===null||a===void 0?void 0:a.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(s)}postEnable(e,n){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,r){if(e.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?Tl(r.mimeType):void 0)}}setupE2EESender(e,n){if(!is(e)||!n){n||fe.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,r,i){return O(this,void 0,void 0,function*(){if(this.worker){if(mb()){const a={kind:"decode",participantIdentity:r,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,a)}else{if(Gc in e&&i){const c={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(c);return}let a=e.writableStream,s=e.readableStream;if(!a||!s){const c=e.createEncodedStreams();e.writableStream=c.writable,a=c.writable,e.readableStream=c.readable,s=c.readable}const o={kind:"decode",data:{readableStream:s,writableStream:a,trackId:n,codec:i,participantIdentity:r,isReuse:Gc in e}};this.worker.postMessage(o,[s,a])}e[Gc]=!0}})}handleSender(e,n,r){var i;if(!(Gc in e||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(mb()){fe.info("initialize script transform");const a={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,a)}else{fe.info("initialize encoded streams");const a=e.createEncodedStreams(),s={kind:"encode",data:{readableStream:a.readable,writableStream:a.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(s,[a.readable,a.writable])}e[Gc]=!0}}}const hv="default";class It{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new It),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return O(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var a;if(((a=It.userMediaPromiseMap)===null||a===void 0?void 0:a.size)>0){fe.debug("awaiting getUserMedia promise");try{n?yield It.userMediaPromiseMap.get(n):yield Promise.all(It.userMediaPromiseMap.values())}catch{fe.warn("error waiting for media permissons")}}let s=yield navigator.mediaDevices.enumerateDevices();if(i&&!(bs()&&r.hasDeviceInUse(n))&&(s.filter(c=>c.kind===n).length===0||s.some(c=>{const l=c.label==="",d=n?c.kind===n:!0;return l&&d}))){const c={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},l=yield navigator.mediaDevices.getUserMedia(c);s=yield navigator.mediaDevices.enumerateDevices(),l.getTracks().forEach(d=>{d.stop()})}return r._previousDevices=s,n&&(s=s.filter(o=>o.kind===n)),s}()})}normalizeDeviceId(e,n,r){return O(this,void 0,void 0,function*(){if(n!==hv)return n;const i=yield this.getDevices(e),a=i.find(o=>o.deviceId===hv);if(!a){fe.warn("could not reliably determine default device");return}const s=i.find(o=>o.deviceId!==hv&&o.groupId===(r??a.groupId));if(!s){fe.warn("could not reliably determine default device");return}return s==null?void 0:s.deviceId})}hasDeviceInUse(e){return e?It.userMediaPromiseMap.has(e):It.userMediaPromiseMap.size>0}}It.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];It.userMediaPromiseMap=new Map;var Cl;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(Cl||(Cl={}));class Kde{constructor(){this.pendingTasks=new Map,this.taskMutex=new bn,this.nextTaskIndex=0}run(e){return O(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Cl.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Cl.RUNNING,yield e()}finally{n.status=Cl.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return O(this,void 0,void 0,function*(){return this.run(()=>O(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}function Jde(t,e){const n=new URL(Ide(t));return e.forEach((r,i)=>{n.searchParams.set(i,r)}),a5(n,"rtc")}function Yde(t){const e=new URL(kb(t));return a5(e,"validate")}function Xde(t){return t.endsWith("/")?t:"".concat(t,"/")}function a5(t,e){return t.pathname="".concat(Xde(t.pathname)).concat(e),t.toString()}const Qde=["syncState","trickle","offer","answer","simulate","leave"];function Zde(t){const e=Qde.indexOf(t.case)>=0;return fe.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var He;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(He||(He={}));class y1{get currentState(){return this.state}get isDisconnected(){return this.state===He.DISCONNECTING||this.state===He.DISCONNECTED}get isEstablishingConnection(){return this.state===He.CONNECTING||this.state===He.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=He.DISCONNECTED,this.log=fe,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=Ai((r=n.loggerName)!==null&&r!==void 0?r:Tr.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new Kde,this.queuedRequests=[],this.closingLock=new bn,this.connectionLock=new bn,this.state=He.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,r,i){return O(this,void 0,void 0,function*(){return this.state=He.CONNECTING,this.options=r,yield this.connect(e,n,r,i)})}reconnect(e,n,r,i){return O(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=He.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(e,n,r,i){this.connectOptions=r;const a=Ade(),s=efe(n,a,r),o=Jde(e,s),c=Yde(o);return new Promise((l,d)=>O(this,void 0,void 0,function*(){const f=yield this.connectionLock.lock();try{const h=()=>O(this,void 0,void 0,function*(){this.close(),clearTimeout(p),d(new De("room connection has been cancelled (signal)",Ee.Cancelled))}),p=setTimeout(()=>{this.close(),d(new De("room connection has timed out (signal)",Ee.ServerUnreachable))},r.websocketTimeout);i!=null&&i.aborted&&h(),i==null||i.addEventListener("abort",h);const g=new URL(o);g.searchParams.has("access_token")&&g.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(g),Object.assign({reconnect:r.reconnect,reconnectReason:r.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(o),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(p)},this.ws.onerror=m=>O(this,void 0,void 0,function*(){if(this.state!==He.CONNECTED){this.state=He.DISCONNECTED,clearTimeout(p);try{const b=yield fetch(c);if(b.status.toFixed(0).startsWith("4")){const v=yield b.text();d(new De(v,Ee.NotAllowed,b.status))}else d(new De("Encountered unknown websocket error during connection: ".concat(m.toString()),Ee.InternalError,b.status))}catch(b){d(new De(b instanceof Error?b.message:"server was not reachable",Ee.ServerUnreachable))}return}this.handleWSError(m)}),this.ws.onmessage=m=>O(this,void 0,void 0,function*(){var b,v,x;let S;if(typeof m.data=="string"){const T=JSON.parse(m.data);S=Lj.fromJson(T,{ignoreUnknownFields:!0})}else if(m.data instanceof ArrayBuffer)S=Lj.fromBinary(new Uint8Array(m.data));else{this.log.error("could not decode websocket message: ".concat(typeof m.data),this.logContext);return}if(this.state!==He.CONNECTED){let T=!1;if(((b=S.message)===null||b===void 0?void 0:b.case)==="join"?(this.state=He.CONNECTED,i==null||i.removeEventListener("abort",h),this.pingTimeoutDuration=S.message.value.pingTimeout,this.pingIntervalDuration=S.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),l(S.message.value)):this.state===He.RECONNECTING&&S.message.case!=="leave"?(this.state=He.CONNECTED,i==null||i.removeEventListener("abort",h),this.startPingInterval(),((v=S.message)===null||v===void 0?void 0:v.case)==="reconnect"?l(S.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),l(void 0),T=!0)):this.isEstablishingConnection&&S.message.case==="leave"?d(new De("Received leave request while trying to (re)connect",Ee.LeaveRequest,void 0,S.message.value.reason)):r.reconnect||d(new De("did not receive join response, got ".concat((x=S.message)===null||x===void 0?void 0:x.case," instead"),Ee.InternalError)),!T)return}this.signalLatency&&(yield wn(this.signalLatency)),this.handleSignalResponse(S)}),this.ws.onclose=m=>{this.isEstablishingConnection&&d(new De("Websocket got closed during a (re)connection attempt",Ee.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:m.reason,code:m.code,wasClean:m.wasClean,state:this.state})),this.handleOnClose(m.reason)}}finally{f()}}))}close(){return O(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const r=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=He.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const i=new Promise(a=>{e.ws?e.ws.onclose=()=>{a()}:a()});e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([i,wn(250)])),e.ws=void 0}}finally{n&&(e.state=He.DISCONNECTED),r()}}()})}sendOffer(e,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:ip(e,n)})}sendAnswer(e,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:ip(e,n)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new Am({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new Rm({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return O(this,arguments,void 0,function(r,i){var a=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const o=a.getNextRequestId();return yield a.sendRequest({case:"updateMetadata",value:new d1({requestId:o,metadata:r,name:i,attributes:s})}),o}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new fM({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new mM({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Qe.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new bM({timestamp:Qe.parse(Date.now()),rtt:Qe.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new u1({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new Mm({reason:xr.CLIENT_INITIATED,action:yo.DISCONNECT})})}sendRequest(e){return O(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!i&&!Zde(n)&&r.state===He.RECONNECTING){r.queuedRequests.push(()=>O(r,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(i||(yield r.requestQueue.flush()),r.signalLatency&&(yield wn(r.signalLatency)),r.isDisconnected){r.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!r.ws||r.ws.readyState!==r.ws.OPEN){r.log.error("cannot send signal request before connected, type: ".concat(n==null?void 0:n.case),r.logContext);return}const s=new bue({message:n});try{r.useJSON?r.ws.send(s.toJsonString()):r.ws.send(s.toBinary())}catch(o){r.log.error("error sending signal message",Object.assign(Object.assign({},r.logContext),{error:o}))}}()})}handleSignalResponse(e){var n,r;const i=e.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let a=!1;if(i.case==="answer"){const s=oN(i.value);this.onAnswer&&this.onAnswer(s,i.value.id)}else if(i.case==="offer"){const s=oN(i.value);this.onOffer&&this.onOffer(s,i.value.id)}else if(i.case==="trickle"){const s=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(s,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),a=!0):i.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(i.value):i.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):i.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(i.value.token),this.onRoomMoved&&this.onRoomMoved(i.value)):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));a||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return O(this,void 0,void 0,function*(){if(this.state===He.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Bt.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Bt.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Bt.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Bt.clearInterval(this.pingInterval)}}function oN(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function ip(t,e){return new vs({sdp:t.sdp,type:t.type,id:e})}function efe(t,e,n){var r;const i=new URLSearchParams;return i.set("access_token",t),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",Qr()?"reactnative":"js"),i.set("version",e.version),i.set("protocol",e.protocol.toString()),e.deviceModel&&i.set("device_model",e.deviceModel),e.os&&i.set("os",e.os),e.osVersion&&i.set("os_version",e.osVersion),e.browser&&i.set("browser",e.browser),e.browserVersion&&i.set("browser_version",e.browserVersion),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),i}class cN{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class tfe{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,n){const r=Date.now();r-this._lastCleanup>this.ttl/2&&this.cleanup();const i=r+this.ttl;return this._map.set(e,{value:n,expiresAt:i}),this}get(e){const n=this._map.get(e);if(n){if(n.expiresAt<Date.now()){this._map.delete(e);return}return n.value}}has(e){const n=this._map.get(e);return n?n.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[n,r]of this._map.entries())r.expiresAt<e&&this._map.delete(n);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&e(r.value,n,this.asValueMap())}map(e){this.cleanup();const n=[],r=this.asValueMap();for(const[i,a]of r.entries())n.push(e(a,i,r));return n}asValueMap(){const e=new Map;for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&e.set(n,r.value);return e}}var sr={},pv={},mv={exports:{}},lN;function b1(){if(lN)return mv.exports;lN=1;var t=mv.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),mv.exports}var uN;function nfe(){return uN||(uN=1,function(t){var e=function(o){return String(Number(o))===o?Number(o):o},n=function(o,c,l,d){if(d&&!l)c[d]=e(o[1]);else for(var f=0;f<l.length;f+=1)o[f+1]!=null&&(c[l[f]]=e(o[f+1]))},r=function(o,c,l){var d=o.name&&o.names;o.push&&!c[o.push]?c[o.push]=[]:d&&!c[o.name]&&(c[o.name]={});var f=o.push?{}:d?c[o.name]:c;n(l.match(o.reg),f,o.names,o.name),o.push&&c[o.push].push(f)},i=b1(),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(o){var c={},l=[],d=c;return o.split(/(\r\n|\r|\n)/).filter(a).forEach(function(f){var h=f[0],p=f.slice(2);h==="m"&&(l.push({rtp:[],fmtp:[]}),d=l[l.length-1]);for(var g=0;g<(i[h]||[]).length;g+=1){var m=i[h][g];if(m.reg.test(p))return r(m,d,p)}}),c.media=l,c};var s=function(o,c){var l=c.split(/=(.+)/,2);return l.length===2?o[l[0]]=e(l[1]):l.length===1&&c.length>1&&(o[l[0]]=void 0),o};t.parseParams=function(o){return o.split(/;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(o){return o.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(o){for(var c=[],l=o.split(" ").map(e),d=0;d<l.length;d+=3)c.push({component:l[d],ip:l[d+1],port:l[d+2]});return c},t.parseImageAttributes=function(o){return o.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(s,{})})},t.parseSimulcastStreamList=function(o){return o.split(";").map(function(c){return c.split(",").map(function(l){var d,f=!1;return l[0]!=="~"?d=e(l):(d=e(l.substring(1,l.length)),f=!0),{scid:d,paused:f}})})}}(pv)),pv}var gv,dN;function rfe(){if(dN)return gv;dN=1;var t=b1(),e=/%[sdv%]/g,n=function(s){var o=1,c=arguments,l=c.length;return s.replace(e,function(d){if(o>=l)return d;var f=c[o];switch(o+=1,d){case"%%":return"%";case"%s":return String(f);case"%d":return Number(f);case"%v":return""}})},r=function(s,o,c){var l=o.format instanceof Function?o.format(o.push?c:c[o.name]):o.format,d=[s+"="+l];if(o.names)for(var f=0;f<o.names.length;f+=1){var h=o.names[f];o.name?d.push(c[o.name][h]):d.push(c[o.names[f]])}else d.push(c[o.name]);return n.apply(null,d)},i=["v","o","s","i","u","e","p","c","b","t","r","z","a"],a=["i","c","b","a"];return gv=function(s,o){o=o||{},s.version==null&&(s.version=0),s.name==null&&(s.name=" "),s.media.forEach(function(f){f.payloads==null&&(f.payloads="")});var c=o.outerOrder||i,l=o.innerOrder||a,d=[];return c.forEach(function(f){t[f].forEach(function(h){h.name in s&&s[h.name]!=null?d.push(r(f,h,s)):h.push in s&&s[h.push]!=null&&s[h.push].forEach(function(p){d.push(r(f,h,p))})})}),s.media.forEach(function(f){d.push(r("m",t.m[0],f)),l.forEach(function(h){t[h].forEach(function(p){p.name in f&&f[p.name]!=null?d.push(r(h,p,f)):p.push in f&&f[p.push]!=null&&f[p.push].forEach(function(g){d.push(r(h,p,g))})})})}),d.join(`\r
`)+`\r
`},gv}var fN;function ife(){if(fN)return sr;fN=1;var t=nfe(),e=rfe(),n=b1();return sr.grammar=n,sr.write=e,sr.parse=t.parse,sr.parseParams=t.parseParams,sr.parseFmtpConfig=t.parseFmtpConfig,sr.parsePayloads=t.parsePayloads,sr.parseRemoteCandidates=t.parseRemoteCandidates,sr.parseImageAttributes=t.parseImageAttributes,sr.parseSimulcastStreamList=t.parseSimulcastStreamList,sr}var Hi=ife();function x1(t,e,n){var r,i,a;e===void 0&&(e=50),n===void 0&&(n={});var s=(r=n.isImmediate)!=null&&r,o=(i=n.callback)!=null&&i,c=n.maxWait,l=Date.now(),d=[];function f(){if(c!==void 0){var p=Date.now()-l;if(p+e>=c)return c-p}return e}var h=function(){var p=[].slice.call(arguments),g=this;return new Promise(function(m,b){var v=s&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,l=Date.now(),!s){var S=t.apply(g,p);o&&o(S),d.forEach(function(T){return(0,T.resolve)(S)}),d=[]}},f()),v){var x=t.apply(g,p);return o&&o(x),m(x)}d.push({resolve:m,reject:b})})};return h.cancel=function(p){a!==void 0&&clearTimeout(a),d.forEach(function(g){return(0,g.reject)(p)}),d=[]},h}const afe=.7,sfe=20,wo={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class hN extends ti.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;super(),this.log=fe,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=x1(i=>O(this,void 0,void 0,function*(){this.emit(wo.NegotiationStarted);try{yield this.createAndSendOffer()}catch(a){if(i)i(a);else throw a}}),sfe),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Ai((r=n.loggerName)!==null&&r!==void 0?r:Tr.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC(),this.offerLock=new bn}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},e.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},e.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return O(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,n){return O(this,void 0,void 0,function*(){var r;if(e.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let i;if(e.type==="offer"){let{stereoMids:a,nackMids:s}=ofe(e);this.remoteStereoMids=a,this.remoteNackMids=s}else if(e.type==="answer"){const a=Hi.parse((r=e.sdp)!==null&&r!==void 0?r:"");a.media.forEach(s=>{const o=w1(s.mid);s.type==="audio"&&this.trackBitrates.some(c=>{if(!c.transceiver||o!=c.transceiver.mid)return!1;let l=0;if(s.rtp.some(f=>f.codec.toUpperCase()===c.codec.toUpperCase()?(l=f.payload,!0):!1),l===0)return!0;let d=!1;for(const f of s.fmtp)if(f.payload===l){f.config=f.config.split(";").filter(h=>!h.includes("maxaveragebitrate")).join(";"),c.maxbr>0&&(f.config+=";maxaveragebitrate=".concat(c.maxbr*1e3)),d=!0;break}return d||c.maxbr>0&&s.fmtp.push({payload:l,config:"maxaveragebitrate=".concat(c.maxbr*1e3)}),!0})}),i=Hi.write(a)}return yield this.setMungedSDP(e,i,!0),this.pendingCandidates.forEach(a=>{this.pc.addIceCandidate(a)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(wo.NegotiationComplete),e.sdp&&Hi.parse(e.sdp).media.forEach(s=>{s.type==="video"&&this.emit(wo.RTPVideoPayloadTypes,s.rtp)})),!0})}createAndSendOffer(e){return O(this,void 0,void 0,function*(){var n;const r=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const o=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&o)yield this._pc.setRemoteDescription(o);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const i=this.latestOfferId+1;this.latestOfferId=i;const a=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:a.sdp},this.logContext));const s=Hi.parse((n=a.sdp)!==null&&n!==void 0?n:"");if(s.media.forEach(o=>{mN(o),o.type==="audio"?pN(o,[],[]):o.type==="video"&&this.trackBitrates.some(c=>{if(!o.msid||!c.cid||!o.msid.includes(c.cid))return!1;let l=0;if(o.rtp.some(f=>f.codec.toUpperCase()===c.codec.toUpperCase()?(l=f.payload,!0):!1),l===0||(Ur(c.codec)&&!bs()&&this.ensureVideoDDExtensionForSVC(o,s),c.codec!=="av1"))return!0;const d=Math.round(c.maxbr*afe);for(const f of o.fmtp)if(f.payload===l){f.config.includes("x-google-start-bitrate")||(f.config+=";x-google-start-bitrate=".concat(d));break}return!0})}),this.latestOfferId>i){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:i}));return}yield this.setMungedSDP(a,Hi.write(s)),this.onOffer(a,this.latestOfferId)}finally{r()}})}createAndSetAnswer(){return O(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),r=Hi.parse((e=n.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(i=>{mN(i),i.type==="audio"&&pN(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,Hi.write(r)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new St("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new St("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return O(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(o=>{switch(o.type){case"transport":n=o.selectedCandidatePairId;break;case"candidate-pair":n===""&&o.selected&&(n=o.id),r.set(o.id,o);break;case"remote-candidate":i.set(o.id,"".concat(o.address,":").concat(o.port));break}}),n==="")return;const s=(e=r.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(s!==void 0)return i.get(s)})}setMungedSDP(e,n,r){return O(this,void 0,void 0,function*(){if(n){const i=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(a){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:a,sdp:n})),e.sdp=i}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(i){let a="unknown error";i instanceof Error?a=i.message:typeof i=="string"&&(a=i);const s={error:a,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(s.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:s})),new gb(a)}})}ensureVideoDDExtensionForSVC(e,n){var r,i;if(!((r=e.ext)===null||r===void 0?void 0:r.some(s=>s.uri===eN))){if(this.ddExtID===0){let s=0;n.media.forEach(o=>{var c;o.type==="video"&&((c=o.ext)===null||c===void 0||c.forEach(l=>{l.value>s&&(s=l.value)}))}),this.ddExtID=s+1}(i=e.ext)===null||i===void 0||i.push({value:this.ddExtID,uri:eN})}}}function pN(t,e,n){const r=w1(t.mid);let i=0;t.rtp.some(a=>a.codec==="opus"?(i=a.payload,!0):!1),i>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(r)&&!t.rtcpFb.some(a=>a.payload===i&&a.type==="nack")&&t.rtcpFb.push({payload:i,type:"nack"}),e.includes(r)&&t.fmtp.some(a=>a.payload===i?(a.config.includes("stereo=1")||(a.config+=";stereo=1"),!0):!1))}function ofe(t){var e;const n=[],r=[],i=Hi.parse((e=t.sdp)!==null&&e!==void 0?e:"");let a=0;return i.media.forEach(s=>{var o;const c=w1(s.mid);s.type==="audio"&&(s.rtp.some(l=>l.codec==="opus"?(a=l.payload,!0):!1),!((o=s.rtcpFb)===null||o===void 0)&&o.some(l=>l.payload===a&&l.type==="nack")&&r.push(c),s.fmtp.some(l=>l.payload===a?(l.config.includes("sprop-stereo=1")&&n.push(c),!0):!1))}),{stereoMids:n,nackMids:r}}function mN(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}function w1(t){return typeof t=="number"?t.toFixed(0):t}const jb="vp8",cfe={audioPreset:vb.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:g1.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:jb,backupCodec:!0,preConnectBuffer:!1},s5={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},o5={deviceId:{ideal:"default"},resolution:Ou.h720.resolution},lfe={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new Gue,disconnectOnPageLeave:!0,webAudioMix:!1},S1={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var it;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(it||(it={}));class ufe{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,r){var i;this.peerConnectionTimeout=S1.peerConnectionTimeout,this.log=fe,this.updateState=()=>{var a;const s=this.state,o=this.requiredTransports.map(c=>c.getConnectionState());o.every(c=>c==="connected")?this.state=it.CONNECTED:o.some(c=>c==="failed")?this.state=it.FAILED:o.some(c=>c==="connecting")?this.state=it.CONNECTING:o.every(c=>c==="closed")?this.state=it.CLOSED:o.some(c=>c==="closed")?this.state=it.CLOSING:o.every(c=>c==="new")&&(this.state=it.NEW),s!==this.state&&(this.log.debug("pc state change: from ".concat(it[s]," to ").concat(it[this.state]),this.logContext),(a=this.onStateChange)===null||a===void 0||a.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=Ai((i=r.loggerName)!==null&&i!==void 0?i:Tr.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n,this.publisher=new hN(e,r),this.subscriber=new hN(e,r),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=a=>{var s;(s=this.onIceCandidate)===null||s===void 0||s.call(this,a,vr.PUBLISHER)},this.subscriber.onIceCandidate=a=>{var s;(s=this.onIceCandidate)===null||s===void 0||s.call(this,a,vr.SUBSCRIBER)},this.subscriber.onDataChannel=a=>{var s;(s=this.onDataChannel)===null||s===void 0||s.call(this,a)},this.subscriber.onTrack=a=>{var s;(s=this.onTrack)===null||s===void 0||s.call(this,a)},this.publisher.onOffer=(a,s)=>{var o;(o=this.onPublisherOffer)===null||o===void 0||o.call(this,a,s)},this.state=it.NEW,this.connectionLock=new bn,this.remoteOfferLock=new bn}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,n){return this.publisher.setRemoteDescription(e,n)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return O(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return O(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return O(this,void 0,void 0,function*(){n===vr.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,n){return O(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const r=yield this.remoteOfferLock.lock();try{return(yield this.subscriber.setRemoteDescription(e,n))?yield this.subscriber.createAndSetAnswer():void 0}finally{r()}})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return O(this,void 0,void 0,function*(){var r;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(a=>this.ensureTransportConnected(a,e,n)))}finally{i()}})}negotiate(e){return O(this,void 0,void 0,function*(){return new Promise((n,r)=>O(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),a=()=>{clearTimeout(i),r("negotiation aborted")};e.signal.addEventListener("abort",a),this.publisher.once(wo.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(wo.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(s=>{clearTimeout(i),r(s)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===vr.PUBLISHER?this.publisher.getConnectedAddress():e===vr.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return O(this,arguments,void 0,function(r,i){var a=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(r.getConnectionState()!=="connected")return new Promise((c,l)=>O(a,void 0,void 0,function*(){const d=()=>{this.log.warn("abort transport connection",this.logContext),Bt.clearTimeout(f),l(new De("room connection has been cancelled",Ee.Cancelled))};i!=null&&i.signal.aborted&&d(),i==null||i.signal.addEventListener("abort",d);const f=Bt.setTimeout(()=>{i==null||i.signal.removeEventListener("abort",d),l(new De("could not establish pc connection",Ee.InternalError))},s);for(;this.state!==it.CONNECTED;)if(yield wn(50),i!=null&&i.signal.aborted){l(new De("room connection has been cancelled",Ee.Cancelled));return}Bt.clearTimeout(f),i==null||i.signal.removeEventListener("abort",d),c()}))}()})}}class ct extends Error{constructor(e,n,r){super(n),this.code=e,this.message=gN(n,ct.MAX_MESSAGE_BYTES),this.data=r?gN(r,ct.MAX_DATA_BYTES):void 0}static fromProto(e){return new ct(e.code,e.message,e.data)}toProto(){return new tM({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new ct(ct.ErrorCode[e],ct.ErrorMessage[e],n)}}ct.MAX_MESSAGE_BYTES=256;ct.MAX_DATA_BYTES=15360;ct.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};ct.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const c5=15360;function k1(t){return new TextEncoder().encode(t).length}function gN(t,e){if(k1(t)<=e)return t;let n=0,r=t.length;const i=new TextEncoder;for(;n<r;){const a=Math.floor((n+r+1)/2);i.encode(t.slice(0,a)).length<=e?n=a:r=a-1}return t.slice(0,n)}const T1=2e3;function Lm(t,e){if(!e)return 0;let n,r;return"bytesReceived"in t?(n=t.bytesReceived,r=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,r=e.bytesSent),n===void 0||r===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-r)*8*1e3/(t.timestamp-e.timestamp)}const C1=typeof MediaRecorder<"u";class dfe{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const ffe=C1?MediaRecorder:dfe;class hfe extends ffe{constructor(e,n){if(!C1)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let r,i;const a=()=>i===void 0,s=()=>{this.removeEventListener("dataavailable",r),this.removeEventListener("stop",s),this.removeEventListener("error",o),i==null||i.close(),i=void 0},o=c=>{i==null||i.error(c),this.removeEventListener("dataavailable",r),this.removeEventListener("stop",s),this.removeEventListener("error",o),i=void 0};this.byteStream=new ReadableStream({start:c=>{i=c,r=l=>O(this,void 0,void 0,function*(){let d;if(l.data.arrayBuffer){const f=yield l.data.arrayBuffer();d=new Uint8Array(f)}else if(l.data.byteArray)d=l.data.byteArray;else throw new Error("no data available!");a()||c.enqueue(d)}),this.addEventListener("dataavailable",r)},cancel:()=>{s()}}),this.addEventListener("stop",s),this.addEventListener("error",o)}}function pfe(){return C1}const mfe=1e3,gfe=1e4;class l5 extends F{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=arguments.length>4?arguments[4]:void 0;super(e,n,a),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=x1(()=>O(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>O(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(Z.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new bn,this.pauseUpstreamLock=new bn,this.trackChangeLock=new bn,this.trackChangeLock.lock().then(s=>O(this,void 0,void 0,function*(){try{yield this.setMediaStreamTrack(e,!0)}finally{s()}})),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==F.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return O(this,void 0,void 0,function*(){var r;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(a=>{xo(this._mediaStreamTrack,a)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let i;if(this.processor&&e){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(ao(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),i=this.processor.processedTrack}this.sender&&((r=this.sender.transport)===null||r===void 0?void 0:r.state)!=="closed"&&(yield this.sender.replaceTrack(i??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(a=>{ao(i??e,a)}))})}waitForDimensions(){return O(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mfe;return function*(){var r;if(e.kind===F.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((r=xn())===null||r===void 0?void 0:r.os)==="iOS"&&(yield wn(10));const i=Date.now();for(;Date.now()-i<n;){const a=e.dimensions;if(a)return a;yield wn(50)}throw new hi("unable to get track dimensions after timeout")}()})}setDeviceId(e){return O(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===ya(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),ya(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return O(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(e.source===F.Source.ScreenShare)return;const{deviceId:r,groupId:i}=e._mediaStreamTrack.getSettings(),a=e.kind===F.Kind.Audio?"audioinput":"videoinput";return n?It.getInstance().normalizeDeviceId(a,r,i):r}()})}mute(){return O(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return O(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return O(this,void 0,void 0,function*(){const r=yield this.trackChangeLock.lock();try{if(!this.sender)throw new hi("unable to replace an unpublished track");let i,a;return typeof n=="boolean"?i=n:n!==void 0&&(i=n.userProvidedTrack,a=n.stopProcessor),this.providedByUser=i??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),a&&this.processor&&(yield this.internalStopProcessor()),this}finally{r()}})}restart(e){return O(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.trackChangeLock.lock();try{e||(e=this._constraints);const{deviceId:r,facingMode:i}=e,a=Kue(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const s={audio:!1,video:!1};this.kind===F.Kind.Video?s.video=r||i?{deviceId:r,facingMode:i}:!0:s.audio=r?Object.assign({deviceId:r},a):!0,this.attachedElements.forEach(l=>{xo(this.mediaStreamTrack,l)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const c=(yield navigator.mediaDevices.getUserMedia(s)).getTracks()[0];return this.kind===F.Kind.Video&&(yield c.applyConstraints(a)),c.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(c),this._constraints=e,this.emit(Z.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Z.Muted:Z.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return O(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),QM()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return O(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(Z.UpstreamPaused,this);const r=xn();if((r==null?void 0:r.name)==="Safari"&&Cr(r.version,"12.0")<0)throw new m1("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return O(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(Z.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return O(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return O(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var a;const s=yield r.trackChangeLock.lock();try{r.log.debug("setting up processor",r.logContext);const o=document.createElement(r.kind),c={kind:r.kind,track:r._mediaStreamTrack,element:o,audioContext:r.audioContext};if(yield n.init(c),r.log.debug("processor initialized",r.logContext),r.processor&&(yield r.internalStopProcessor()),r.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(ao(r._mediaStreamTrack,o),o.muted=!0,o.play().catch(l=>{l instanceof DOMException&&l.name==="AbortError"?(r.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},r.logContext),{error:l})),setTimeout(()=>{o.play().catch(d=>{r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{err:d}))})},100)):r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{error:l}))}),r.processor=n,r.processorElement=o,r.processor.processedTrack){for(const l of r.attachedElements)l!==r.processorElement&&i&&(xo(r._mediaStreamTrack,l),ao(r.processor.processedTrack,l));yield(a=r.sender)===null||a===void 0?void 0:a.replaceTrack(r.processor.processedTrack)}r.emit(Z.TrackProcessorUpdate,r.processor)}finally{s()}}()})}getProcessor(){return this.processor}stopProcessor(){return O(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const r=yield e.trackChangeLock.lock();try{yield e.internalStopProcessor(n)}finally{r()}}()})}internalStopProcessor(){return O(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var r,i;e.processor&&(e.log.debug("stopping processor",e.logContext),(r=e.processor.processedTrack)===null||r===void 0||r.stop(),yield e.processor.destroy(),e.processor=void 0,n||((i=e.processorElement)===null||i===void 0||i.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(Z.TrackProcessorUpdate))}()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!pfe()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new hfe(this,{mimeType:n})}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},gfe)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}getPreConnectBufferMimeType(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.mimeType}}class ap extends l5{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;super(e,F.Kind.Audio,n,r,a),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>O(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(o){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:o}));return}s&&this.prevStats&&(this._currentBitrate=Lm(s,this.prevStats)),this.prevStats=s}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(Z.AudioTrackFeatureUpdate,this,Rt.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(Z.AudioTrackFeatureUpdate,this,Rt.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return O(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===F.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return O(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==ya(this._constraints.deviceId);return this.source===F.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return O(this,void 0,void 0,function*(){let n;if(e){const r=v1({audio:e});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return O(this,void 0,void 0,function*(){const r=yield n.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){pn()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},T1)))}setProcessor(e){return O(this,void 0,void 0,function*(){var n;const r=yield this.trackChangeLock.lock();try{if(!Qr()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.internalStopProcessor());const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(i),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(Z.TrackProcessorUpdate,this.processor)}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return O(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return O(this,void 0,void 0,function*(){const e=yield n5(this);return e&&(this.isMuted||this.log.debug("silence detected on local audio track",this.logContext),this.emit(Z.AudioSilenceDetected)),e})}}function vfe(t,e,n){switch(t.kind){case"audio":return new ap(t,e,!1,void 0,n);case"video":return new sp(t,e,!1,n);default:throw new hi("unsupported track type: ".concat(t.kind))}}const yfe=Object.values(Ou),bfe=Object.values(yb),xfe=Object.values(g1),wfe=[Ou.h180,Ou.h360],Sfe=[yb.h180,yb.h360],kfe=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var r,i;return new Me(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=t.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,t.encoding.priority)}),Nb=["q","h","f"];function Pb(t,e,n,r){var i,a;let s=r==null?void 0:r.videoEncoding;t&&(s=r==null?void 0:r.screenShareEncoding);const o=r==null?void 0:r.simulcast,c=r==null?void 0:r.scalabilityMode,l=r==null?void 0:r.videoCodec;if(!s&&!o&&!c||!e||!n)return[{}];s||(s=Cfe(t,e,n,l),fe.debug("using video encoding",s));const d=s.maxFramerate,f=new Me(e,n,s.maxBitrate,s.maxFramerate,s.priority);if(c&&Ur(l)){const g=new u5(c),m=[];if(g.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(c));const b=xn();if(Au()||Qr()||(b==null?void 0:b.name)==="Chrome"&&Cr(b==null?void 0:b.version,"113")<0){const v=g.suffix=="h"?2:3,x=Nde(b);for(let S=0;S<g.spatial;S+=1)m.push({rid:Nb[2-S],maxBitrate:s.maxBitrate/Math.pow(v,S),maxFramerate:f.encoding.maxFramerate,scaleResolutionDownBy:x?Math.pow(2,S):void 0});m[0].scalabilityMode=c}else m.push({maxBitrate:s.maxBitrate,maxFramerate:f.encoding.maxFramerate,scalabilityMode:c});return f.encoding.priority&&(m[0].priority=f.encoding.priority,m[0].networkPriority=f.encoding.priority),fe.debug("using svc encoding",{encodings:m}),m}if(!o)return[s];let h=[];t?h=(i=yN(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:vN(t,f):h=(a=yN(r==null?void 0:r.videoSimulcastLayers))!==null&&a!==void 0?a:vN(t,f);let p;if(h.length>0){const g=h[0];h.length>1&&([,p]=h);const m=Math.max(e,n);if(m>=960&&p)return vv(e,n,[g,p,f],d);if(m>=480)return vv(e,n,[g,f],d)}return vv(e,n,[f])}function Tfe(t,e,n){var r,i,a,s;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&fe.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const o=t.mediaStreamTrack.getSettings(),c=(r=o.width)!==null&&r!==void 0?r:(i=t.dimensions)===null||i===void 0?void 0:i.width,l=(a=o.height)!==null&&a!==void 0?a:(s=t.dimensions)===null||s===void 0?void 0:s.height;return t.source===F.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),Pb(t.source===F.Source.ScreenShare,c,l,n)}function Cfe(t,e,n,r){const i=Efe(t,e,n);let{encoding:a}=i[0];const s=Math.max(e,n);for(let o=0;o<i.length;o+=1){const c=i[o];if(a=c.encoding,c.width>=s)break}if(r)switch(r){case"av1":case"h265":a=Object.assign({},a),a.maxBitrate=a.maxBitrate*.7;break;case"vp9":a=Object.assign({},a),a.maxBitrate=a.maxBitrate*.85;break}return a}function Efe(t,e,n){if(t)return xfe;const r=e>n?e/n:n/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?yfe:bfe}function vN(t,e){if(t)return kfe(e);const{width:n,height:r}=e,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?wfe:Sfe}function vv(t,e,n,r){const i=[];if(n.forEach((a,s)=>{if(s>=Nb.length)return;const o=Math.min(t,e),l={rid:Nb[s],scaleResolutionDownBy:Math.max(1,o/Math.min(a.width,a.height)),maxBitrate:a.encoding.maxBitrate},d=r&&a.encoding.maxFramerate?Math.min(r,a.encoding.maxFramerate):a.encoding.maxFramerate;d&&(l.maxFramerate=d);const f=ys()||s===0;a.encoding.priority&&f&&(l.priority=a.encoding.priority,l.networkPriority=a.encoding.priority),i.push(l)}),Qr()&&e5()==="ios"){let a;i.forEach(o=>{a?o.maxFramerate&&o.maxFramerate>a&&(a=o.maxFramerate):a=o.maxFramerate});let s=!0;i.forEach(o=>{var c;o.maxFramerate!=a&&(s&&(s=!1,fe.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),fe.info('Setting framerate of encoding "'.concat((c=o.rid)!==null&&c!==void 0?c:"",'" to ').concat(a)),o.maxFramerate=a)})}return i}function yN(t){if(t)return t.sort((e,n)=>{const{encoding:r}=e,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class u5{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function jfe(t){return t.source===F.Source.ScreenShare||t.constraints.height&&ya(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const Nfe=5e3;class sp extends l5{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(e,F.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>O(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let a;try{a=yield this.getSenderStats()}catch(c){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:c}));return}const s=new Map(a.map(c=>[c.rid,c])),o=a.some(c=>c.qualityLimitationReason==="cpu");if(o!==this.isCpuConstrained&&(this.isCpuConstrained=o,this.isCpuConstrained&&this.emit(Z.CpuConstrained)),this.prevStats){let c=0;s.forEach((l,d)=>{var f;const h=(f=this.prevStats)===null||f===void 0?void 0:f.get(d);c+=Lm(l,h)}),this._currentBitrate=c}this.prevStats=s}),this.senderLock=new bn}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!pn())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},T1))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return O(this,void 0,void 0,function*(){var n,r,i,a,s;yield e.pauseUpstream.call(this);try{for(var o=!0,c=fi(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;o=!0)a=l.value,o=!1,yield(s=a.sender)===null||s===void 0?void 0:s.replaceTrack(null)}catch(d){r={error:d}}finally{try{!o&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return O(this,void 0,void 0,function*(){var n,r,i,a,s;yield e.resumeUpstream.call(this);try{for(var o=!0,c=fi(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;o=!0){a=l.value,o=!1;const d=a;yield(s=d.sender)===null||s===void 0?void 0:s.replaceTrack(d.mediaStreamTrack)}}catch(d){r={error:d}}finally{try{!o&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return O(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===F.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return O(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===F.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return O(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var a;if(i.type==="outbound-rtp"){const s={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationDurations:i.qualityLimitationDurations,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges,rid:(a=i.rid)!==null&&a!==void 0?a:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,targetBitrate:i.targetBitrate,timestamp:i.timestamp},o=r.get(i.remoteId);o&&(s.jitter=o.jitter,s.packetsLost=o.packetsLost,s.roundTripTime=o.roundTripTime),n.push(s)}}),n.sort((i,a)=>{var s,o;return((s=a.frameWidth)!==null&&s!==void 0?s:0)-((o=i.frameWidth)!==null&&o!==void 0?o:0)}),n})}setPublishingQuality(e){const n=[];for(let r=On.LOW;r<=On.HIGH;r+=1)n.push(new f1({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(Ur(this.codec),n)}restartTrack(e){return O(this,void 0,void 0,function*(){var n,r,i,a,s;let o;if(e){const f=v1({video:e});typeof f.video!="boolean"&&(o=f.video)}yield this.restart(o),this.isCpuConstrained=!1;try{for(var c=!0,l=fi(this.simulcastCodecs.values()),d;d=yield l.next(),n=d.done,!n;c=!0){a=d.value,c=!1;const f=a;f.sender&&((s=f.sender.transport)===null||s===void 0?void 0:s.state)!=="closed"&&(f.mediaStreamTrack=this.mediaStreamTrack.clone(),yield f.sender.replaceTrack(f.mediaStreamTrack))}}catch(f){r={error:f}}finally{try{!c&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return O(this,arguments,void 0,function(r){var i=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s,o,c,l,d,f;if(yield n.setProcessor.call(i,r,a),!((d=i.processor)===null||d===void 0)&&d.processedTrack)try{for(var h=!0,p=fi(i.simulcastCodecs.values()),g;g=yield p.next(),s=g.done,!s;h=!0)l=g.value,h=!1,yield(f=l.sender)===null||f===void 0?void 0:f.replaceTrack(i.processor.processedTrack)}catch(m){o={error:m}}finally{try{!h&&!s&&(c=p.return)&&(yield c.call(p))}finally{if(o)throw o.error}}}()})}setDegradationPreference(e){return O(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,n){const r=this.simulcastCodecs.get(e);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},Nfe))}setPublishingCodecs(e){return O(this,void 0,void 0,function*(){var n,r,i,a,s,o,c;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(Ur(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const l=[];try{for(n=!0,r=fi(e);i=yield r.next(),a=i.done,!a;n=!0){c=i.value,n=!1;const d=c;if(!this.codec||this.codec===d.codec)yield this.setPublishingLayers(Ur(d.codec),d.qualities);else{const f=this.simulcastCodecs.get(d.codec);if(this.log.debug("try setPublishingCodec for ".concat(d.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:f})),!f||!f.sender){for(const h of d.qualities)if(h.enabled){l.push(d.codec);break}}else f.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(d.codec),this.logContext),yield bN(f.sender,f.encodings,d.qualities,this.senderLock,Ur(d.codec),this.log,this.logContext))}}}catch(d){s={error:d}}finally{try{!n&&!a&&(o=r.return)&&(yield o.call(r))}finally{if(s)throw s.error}}return l})}setPublishingLayers(e,n){return O(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield bN(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return O(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((r,i)=>{var a;return Object.assign(Object.assign({},r),{active:i===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((a=this.mediaStreamTrack.getSettings().height)!==null&&a!==void 0?a:360)/360)),scalabilityMode:i===0&&Ur(this.codec)?"L1T3":void 0,maxFramerate:i===0?15:0,maxBitrate:i===0?r.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return O(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),QM()&&this.isInBackground&&this.source===F.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function bN(t,e,n,r,i,a,s){return O(this,void 0,void 0,function*(){const o=yield r.lock();a.debug("setPublishingLayersForSender",Object.assign(Object.assign({},s),{sender:t,qualities:n,senderEncodings:e}));try{const c=t.getParameters(),{encodings:l}=c;if(!l)return;if(l.length!==e.length){a.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},s),{encodings:l,senderEncodings:e}));return}let d=!1;!1&&l[0].scalabilityMode||(i&&n.some(p=>p.enabled)&&n.forEach(p=>p.enabled=!0),l.forEach((h,p)=>{var g;let m=(g=h.rid)!==null&&g!==void 0?g:"";m===""&&(m="q");const b=d5(m),v=n.find(x=>x.quality===b);v&&h.active!==v.enabled&&(d=!0,h.active=v.enabled,a.debug("setting layer ".concat(v.quality," to ").concat(h.active?"enabled":"disabled"),s),ys()&&(v.enabled?(h.scaleResolutionDownBy=e[p].scaleResolutionDownBy,h.maxBitrate=e[p].maxBitrate,h.maxFrameRate=e[p].maxFrameRate):(h.scaleResolutionDownBy=4,h.maxBitrate=10,h.maxFrameRate=2)))})),d&&(c.encodings=l,a.debug("setting encodings",Object.assign(Object.assign({},s),{encodings:c.encodings})),yield t.setParameters(c))}finally{o()}})}function d5(t){switch(t){case"f":return On.HIGH;case"h":return On.MEDIUM;case"q":return On.LOW;default:return On.HIGH}}function xN(t,e,n,r){if(!n)return[new ga({quality:On.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,a=new u5(i),s=[],o=a.suffix=="h"?1.5:2,c=a.suffix=="h"?2:3;for(let l=0;l<a.spatial;l+=1)s.push(new ga({quality:Math.min(On.HIGH,a.spatial-1)-l,width:Math.ceil(t/Math.pow(o,l)),height:Math.ceil(e/Math.pow(o,l)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(c,l)):0,ssrc:0}));return s}return n.map(i=>{var a,s,o;const c=(a=i.scaleResolutionDownBy)!==null&&a!==void 0?a:1;let l=d5((s=i.rid)!==null&&s!==void 0?s:"");return new ga({quality:l,width:Math.ceil(t/c),height:Math.ceil(e/c),bitrate:(o=i.maxBitrate)!==null&&o!==void 0?o:0,ssrc:0})})}const wN="_lossy",SN="_reliable",Pfe=2*1e3,yv="leave-reconnect",_fe=3e4;var Bn;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(Bn||(Bn={}));class Ofe extends ti.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=S1.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=Bn.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=fe,this.reliableDataSequence=1,this.reliableMessageBuffer=new cN,this.reliableReceivedState=new tfe(_fe),this.handleDataChannel=r=>O(this,[r],void 0,function(i){var a=this;let{channel:s}=i;return function*(){if(s){if(s.label===SN)a.reliableDCSub=s;else if(s.label===wN)a.lossyDCSub=s;else return;a.log.debug("on data channel ".concat(s.id,", ").concat(s.label),a.logContext),s.onmessage=a.handleDataMessage}}()}),this.handleDataMessage=r=>O(this,void 0,void 0,function*(){var i,a,s,o,c;const l=yield this.dataProcessLock.lock();try{let d;if(r.data instanceof ArrayBuffer)d=r.data;else if(r.data instanceof Blob)d=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const f=nn.fromBinary(new Uint8Array(d));if(f.sequence>0&&f.participantSid!==""){const h=this.reliableReceivedState.get(f.participantSid);if(h&&f.sequence<=h)return;this.reliableReceivedState.set(f.participantSid,f.sequence)}if(((i=f.value)===null||i===void 0?void 0:i.case)==="speaker")this.emit(ee.ActiveSpeakersUpdate,f.value.value.speakers);else if(((a=f.value)===null||a===void 0?void 0:a.case)==="encryptedPacket"){if(!this.e2eeManager){this.log.error("Received encrypted packet but E2EE not set up",this.logContext);return}const h=yield(s=this.e2eeManager)===null||s===void 0?void 0:s.handleEncryptedData(f.value.value.encryptedValue,f.value.value.iv,f.participantIdentity,f.value.value.keyIndex),p=QI.fromBinary(h.payload),g=new nn({value:p.value});((o=g.value)===null||o===void 0?void 0:o.case)==="user"&&kN(g,g.value.value),this.emit(ee.DataPacketReceived,g,f.value.value.encryptionType)}else((c=f.value)===null||c===void 0?void 0:c.case)==="user"&&kN(f,f.value.value),this.emit(ee.DataPacketReceived,f,Tt.NONE)}finally{l()}}),this.handleDataError=r=>{const a=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:s}=r.error;this.log.error("DataChannel error on ".concat(a,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:s}))}else this.log.error("Unknown DataChannel error on ".concat(a),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const a=r.currentTarget.maxRetransmits===0?pe.LOSSY:pe.RELIABLE;this.updateAndEmitDCBufferStatus(a)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const a=c=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(c,"ms. giving up"),this.logContext),this.emit(ee.Disconnected),this.close()},s=Date.now()-this.reconnectStart;let o=this.getNextRetryDelay({elapsedMs:s,retryCount:this.reconnectAttempts});if(o===null){a(s);return}r===yv&&(o=0),this.log.debug("reconnecting in ".concat(o,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Bt.setTimeout(()=>this.attemptReconnect(i).finally(()=>this.reconnectTimeout=void 0),o)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===Bn.Connected&&r();const a=()=>{this.off(ee.Disconnected,s),r()},s=()=>{this.off(ee.Restarted,a),i()};this.once(ee.Restarted,a),this.once(ee.Disconnected,s)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(ee.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return r===pe.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(i.bufferedAmount),i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===He.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(Us.RR_SIGNAL_DISCONNECTED))},this.log=Ai((n=e.loggerName)!==null&&n!==void 0?n:Tr.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new y1(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.closingLock=new bn,this.dataProcessLock=new bn,this.dcBufferStatus=new Map([[pe.LOSSY,!0],[pe.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(ee.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(ee.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(ee.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(ee.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(ee.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(ee.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(ee.StreamStateChanged,r),this.client.onRequestResponse=r=>this.emit(ee.SignalRequestResponse,r)}get logContext(){var e,n,r,i,a,s;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,participant:(s=(a=this.latestJoinResponse)===null||a===void 0?void 0:a.participant)===null||s===void 0?void 0:s.identity,pID:this.participantSid}}join(e,n,r,i){return O(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const a=yield this.client.join(e,n,r,i);return this._isClosed=!1,this.latestJoinResponse=a,this.subscriberPrimary=a.subscriberPrimary,this.pcManager||(yield this.configure(a)),(!this.subscriberPrimary||a.fastPublish)&&this.negotiate().catch(s=>{fe.error(s,this.logContext)}),this.registerOnLineListener(),this.clientConfiguration=a.clientConfiguration,this.emit(ee.SignalConnected,a),a}catch(a){if(a instanceof De&&a.reason===Ee.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,r,i);throw a}})}close(){return O(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(ee.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return O(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new cN,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return O(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new hi("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(new De("publication of local track timed out, no response from server",Ee.Timeout))},1e4);this.pendingTrackResolvers[e.cid]={resolve:a=>{clearTimeout(i),n(a)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return O(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return O(this,void 0,void 0,function*(){var n,r;if(this.pcManager&&this.pcManager.currentState!==it.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const i=this.makeRTCConfiguration(e);this.pcManager=new ufe(i,e.subscriberPrimary,this.loggerOptions),this.emit(ee.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(a,s)=>{this.client.sendIceCandidate(a,s)},this.pcManager.onPublisherOffer=(a,s)=>{this.client.sendOffer(a,s)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(a,s,o)=>O(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(a),this.logContext),["closed","disconnected","failed"].includes(s)&&(this.publisherConnectionPromise=void 0),a===it.CONNECTED){const d=this.pcState===Bn.New;this.pcState=Bn.Connected,d&&this.emit(ee.Connected,e)}else a===it.FAILED&&(this.pcState===Bn.Connected||this.pcState===Bn.Reconnecting)&&(this.pcState=Bn.Disconnected,this.handleDisconnect("peerconnection failed",o==="failed"?Us.RR_SUBSCRIBER_FAILED:Us.RR_PUBLISHER_FAILED));const c=this.client.isDisconnected||this.client.currentState===He.RECONNECTING,l=[it.FAILED,it.CLOSING,it.CLOSED].includes(a);c&&l&&!this._isClosed&&this.emit(ee.Offline)}),this.pcManager.onTrack=a=>{this.emit(ee.MediaTrackAdded,a.track,a.streams[0],a.receiver)},Afe((r=e.serverInfo)===null||r===void 0?void 0:r.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,n)=>O(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e,n))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=(e,n)=>O(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;const r=yield this.pcManager.createSubscriberAnswerFromOffer(e,n);r&&this.client.sendAnswer(r,n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(ee.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(ee.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(ee.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(ee.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(ee.RoomMoved,e)},this.client.onClose=()=>{this.handleDisconnect("signal",Us.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case yo.DISCONNECT:this.emit(ee.Disconnected,e==null?void 0:e.reason),this.close();break;case yo.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(yv);break;case yo.RESUME:this.handleDisconnect(yv)}}}makeRTCConfiguration(e){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const i=[];e.iceServers.forEach(a=>{const s={urls:a.urls};a.username&&(s.username=a.username),a.credential&&(s.credential=a.credential),i.push(s)}),r.iceServers=i}return e.clientConfiguration&&e.clientConfiguration.forceRelay===Nu.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(wN,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(SN,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,n,r){return O(this,void 0,void 0,function*(){if(bb())return yield this.createTransceiverRTCRtpSender(e,n,r);if(xb())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new St("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,r,i){return O(this,void 0,void 0,function*(){if(bb())return this.createSimulcastTransceiverSender(e,n,r,i);if(xb())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new St("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,r){return O(this,void 0,void 0,function*(){if(!this.pcManager)throw new St("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream),Aa(e)&&(e.codec=n.videoCodec);const a={direction:"sendonly",streams:i};return r&&(a.sendEncodings=r),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,a)).sender})}createSimulcastTransceiverSender(e,n,r,i){return O(this,void 0,void 0,function*(){if(!this.pcManager)throw new St("publisher is closed");const a={direction:"sendonly"};i&&(a.sendEncodings=i);const s=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,a);if(r.videoCodec)return e.setSimulcastTrackSender(r.videoCodec,s.sender),s.sender})}createRTCRtpSender(e){return O(this,void 0,void 0,function*(){if(!this.pcManager)throw new St("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return O(this,void 0,void 0,function*(){var n,r,i;if(!this._isClosed){if(this.attemptingReconnect){fe.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Nu.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:it.NEW)===it.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(a){this.reconnectAttempts+=1;let s=!0;a instanceof St?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:a})),s=!1):a instanceof Fs||(this.fullReconnectOnNext=!0),s?this.handleDisconnect("reconnect",Us.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(ee.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return O(this,void 0,void 0,function*(){var n,r,i;try{if(!this.url||!this.token)throw new St("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(ee.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let a;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Fs;a=yield this.join(e??this.url,this.token,this.signalOpts)}catch(s){throw s instanceof De&&s.reason===Ee.NotAllowed?new St("could not reconnect, token might be expired"):new Fs}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(ee.SignalRestarted,a),yield this.waitForPCReconnected(),this.client.currentState!==He.CONNECTED)throw new Fs("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(ee.Restarted)}catch(a){const s=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(s){yield this.restartConnection(s);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),a}})}resumeConnection(e){return O(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new St("could not reconnect, url or token not saved");if(!this.pcManager)throw new St("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(ee.Resuming);let r;try{this.setupSignalClientCallbacks(),r=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(i){let a="";throw i instanceof Error&&(a=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof De&&i.reason===Ee.NotAllowed?new St("could not reconnect, token might be expired"):i instanceof De&&i.reason===Ee.LeaveRequest?i:new Fs(a)}if(this.emit(ee.SignalResumed),r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=r.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==He.CONNECTED)throw new Fs("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),r!=null&&r.lastMessageSeq&&this.resendReliableMessagesForResume(r.lastMessageSeq),this.emit(ee.Resumed)})}waitForPCInitialConnection(e,n){return O(this,void 0,void 0,function*(){if(!this.pcManager)throw new St("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return O(this,void 0,void 0,function*(){this.pcState=Bn.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield wn(Pfe),!this.pcManager)throw new St("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Bn.Connected}catch(e){throw this.pcState=Bn.Disconnected,new De("could not establish PC connection, ".concat(e.message),Ee.InternalError)}})}publishRpcResponse(e,n,r,i){return O(this,void 0,void 0,function*(){const a=new nn({destinationIdentities:[e],kind:pe.RELIABLE,value:{case:"rpcResponse",value:new c1({requestId:n,value:i?{case:"error",value:i.toProto()}:{case:"payload",value:r??""}})}});yield this.sendDataPacket(a,pe.RELIABLE)})}publishRpcAck(e,n){return O(this,void 0,void 0,function*(){const r=new nn({destinationIdentities:[e],kind:pe.RELIABLE,value:{case:"rpcAck",value:new o1({requestId:n})}});yield this.sendDataPacket(r,pe.RELIABLE)})}sendDataPacket(e,n){return O(this,void 0,void 0,function*(){if(yield this.ensurePublisherConnected(n),this.e2eeManager&&this.e2eeManager.isDataChannelEncryptionEnabled){const a=lde(e);if(a){const s=yield this.e2eeManager.encryptData(a.toBinary());e.value={case:"encryptedPacket",value:new XI({encryptedValue:s.payload,iv:s.iv,keyIndex:s.keyIndex})}}}n===pe.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const r=e.toBinary(),i=this.dataChannelForKind(n);if(i){if(n===pe.RELIABLE&&this.reliableMessageBuffer.push({data:r,sequence:e.sequence}),this.attemptingReconnect)return;i.send(r)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(e){return O(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(pe.RELIABLE);const n=this.dataChannelForKind(pe.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(r=>{n.send(r.data)})),this.updateAndEmitDCBufferStatus(pe.RELIABLE)})}waitForBufferStatusLow(e){return new Promise((n,r)=>O(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const i=()=>r("Engine closed");for(this.once(ee.Closing,i);!this.dcBufferStatus.get(e);)yield wn(10);this.off(ee.Closing,i),n()}}))}ensureDataTransportConnected(e){return O(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var a;if(!r.pcManager)throw new St("PC manager is closed");const s=i?r.pcManager.subscriber:r.pcManager.publisher,o=i?"Subscriber":"Publisher";if(!s)throw new De("".concat(o," connection not set"),Ee.InternalError);let c=!1;!i&&!r.dataChannelForKind(n,i)&&(r.createDataChannels(),c=!0),!c&&!i&&!r.pcManager.publisher.isICEConnected&&r.pcManager.publisher.getICEConnectionState()!=="checking"&&(c=!0),c&&r.negotiate().catch(f=>{fe.error(f,r.logContext)});const l=r.dataChannelForKind(n,i);if((l==null?void 0:l.readyState)==="open")return;const d=new Date().getTime()+r.peerConnectionTimeout;for(;new Date().getTime()<d;){if(s.isICEConnected&&((a=r.dataChannelForKind(n,i))===null||a===void 0?void 0:a.readyState)==="open")return;yield wn(50)}throw new De("could not establish ".concat(o," connection, state: ").concat(s.getICEConnectionState()),Ee.InternalError)}()})}ensurePublisherConnected(e){return O(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==it.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return O(this,void 0,void 0,function*(){return new Promise((e,n)=>O(this,void 0,void 0,function*(){if(!this.pcManager){n(new gb("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(ee.Closing,i),this.pcManager.publisher.once(wo.RTPVideoPayloadTypes,a=>{const s=new Map;a.forEach(o=>{const c=o.codec.toLowerCase();Rde(c)&&s.set(o.payload,c)}),this.emit(ee.RTPVideoMapUpdate,s)});try{yield this.pcManager.negotiate(r),e()}catch(a){a instanceof gb&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",Us.RR_UNKNOWN),n(a)}finally{this.off(ee.Closing,i)}}))})}dataChannelForKind(e,n){if(n){if(e===pe.LOSSY)return this.lossyDCSub;if(e===pe.RELIABLE)return this.reliableDCSub}else{if(e===pe.LOSSY)return this.lossyDC;if(e===pe.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var r,i;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const a=this.pcManager.subscriber.getLocalDescription(),s=this.pcManager.subscriber.getRemoteDescription(),o=(i=(r=this.signalOpts)===null||r===void 0?void 0:r.autoSubscribe)!==null&&i!==void 0?i:!0,c=new Array,l=new Array;e.forEach(d=>{d.isDesired!==o&&c.push(d.trackSid),d.isEnabled||l.push(d.trackSid)}),this.client.sendSyncState(new gM({answer:a?ip({sdp:a.sdp,type:a.type}):void 0,offer:s?ip({sdp:s.sdp,type:s.type}):void 0,subscription:new Im({trackSids:c,subscribe:!o,participantTracks:[]}),publishTracks:zde(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:l,datachannelReceiveStates:this.reliableReceivedState.map((d,f)=>new vM({publisherSid:f,lastSeq:d}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&e.push(new yM({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(pe.LOSSY),vr.PUBLISHER),n(this.dataChannelForKind(pe.RELIABLE),vr.PUBLISHER),n(this.dataChannelForKind(pe.LOSSY,!0),vr.SUBSCRIBER),n(this.dataChannelForKind(pe.RELIABLE,!0),vr.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&Bt.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){pn()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){pn()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class Fs extends Error{}function Afe(t){return t!==void 0&&t>13}function kN(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const r=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=r,e.destinationIdentities=r}class _b{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return Sb(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return O(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),fe.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return O(this,void 0,void 0,function*(){const n=yield fetch("".concat(Rfe(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new De("Could not fetch region settings: ".concat(n.statusText),n.status===401?Ee.NotAllowed:Ee.InternalError,n.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function Rfe(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class f5{get info(){return this._info}validateBytesReceived(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(typeof this.totalByteSize!="number"||this.totalByteSize===0)){if(e&&this.bytesReceived<this.totalByteSize)throw new zn("Not enough chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, only received ").concat(this.bytesReceived," bytes"),tn.Incomplete);if(this.bytesReceived>this.totalByteSize)throw new zn("Extra chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, received ").concat(this.bytesReceived," bytes"),tn.LengthExceeded)}}constructor(e,n,r,i){this.reader=n,this.totalByteSize=r,this._info=e,this.bytesReceived=0,this.outOfBandFailureRejectingFuture=i}}class Ife extends f5{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,r)}[Symbol.asyncIterator](){const e=this.reader.getReader();let n=new Jn,r=null,i=null;if(this.signal){const s=this.signal;i=()=>{var o;(o=n.reject)===null||o===void 0||o.call(n,s.reason)},s.addEventListener("abort",i),r=s}const a=()=>{e.releaseLock(),r&&i&&r.removeEventListener("abort",i),this.signal=void 0};return{next:()=>O(this,void 0,void 0,function*(){var s,o;try{const{done:c,value:l}=yield Promise.race([e.read(),n.promise,(o=(s=this.outOfBandFailureRejectingFuture)===null||s===void 0?void 0:s.promise)!==null&&o!==void 0?o:new Promise(()=>{})]);return c?(this.validateBytesReceived(!0),{done:!0,value:void 0}):(this.handleChunkReceived(l),{done:!1,value:l.content})}catch(c){throw a(),c}}),return(){return O(this,void 0,void 0,function*(){return a(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return O(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){var r,i,a,s;let o=new Set;const c=n.signal?e.withAbortSignal(n.signal):e;try{for(var l=!0,d=fi(c),f;f=yield d.next(),r=f.done,!r;l=!0){s=f.value,l=!1;const h=s;o.add(h)}}catch(h){i={error:h}}finally{try{!l&&!r&&(a=d.return)&&(yield a.call(d))}finally{if(i)throw i.error}}return Array.from(o)}()})}}class Mfe extends f5{constructor(e,n,r,i){super(e,n,r,i),this.receivedChunks=new Map}handleChunkReceived(e){var n;const r=Sf(e.chunkIndex),i=this.receivedChunks.get(r);if(i&&i.version>e.version)return;this.receivedChunks.set(r,e),this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const a=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,a)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder("utf-8",{fatal:!0});let r=new Jn,i=null,a=null;if(this.signal){const o=this.signal;a=()=>{var c;(c=r.reject)===null||c===void 0||c.call(r,o.reason)},o.addEventListener("abort",a),i=o}const s=()=>{e.releaseLock(),i&&a&&i.removeEventListener("abort",a),this.signal=void 0};return{next:()=>O(this,void 0,void 0,function*(){var o,c;try{const{done:l,value:d}=yield Promise.race([e.read(),r.promise,(c=(o=this.outOfBandFailureRejectingFuture)===null||o===void 0?void 0:o.promise)!==null&&c!==void 0?c:new Promise(()=>{})]);if(l)return this.validateBytesReceived(!0),{done:!0,value:void 0};{this.handleChunkReceived(d);let f;try{f=n.decode(d.content)}catch(h){throw new zn("Cannot decode datastream chunk ".concat(d.chunkIndex," as text: ").concat(h),tn.DecodeFailed)}return{done:!1,value:f}}}catch(l){throw s(),l}}),return(){return O(this,void 0,void 0,function*(){return s(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return O(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){var r,i,a,s;let o="";const c=n.signal?e.withAbortSignal(n.signal):e;try{for(var l=!0,d=fi(c),f;f=yield d.next(),r=f.done,!r;l=!0)s=f.value,l=!1,o+=s}catch(h){i={error:h}}finally{try{!l&&!r&&(a=d.return)&&(yield a.call(d))}finally{if(i)throw i.error}}return o}()})}}class Dfe{constructor(){this.log=fe,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new zn('A text stream handler for topic "'.concat(e,'" has already been set.'),tn.HandlerAlreadyRegistered);this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new zn('A byte stream handler for topic "'.concat(e,'" has already been set.'),tn.HandlerAlreadyRegistered);this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}clearHandlersAndControllers(){this.byteStreamControllers.clear(),this.textStreamControllers.clear(),this.byteStreamHandlers.clear(),this.textStreamHandlers.clear()}validateParticipantHasNoActiveDataStreams(e){var n,r,i,a;const s=Array.from(this.textStreamControllers.entries()).filter(c=>c[1].sendingParticipantIdentity===e),o=Array.from(this.byteStreamControllers.entries()).filter(c=>c[1].sendingParticipantIdentity===e);if(s.length>0||o.length>0){const c=new zn("Participant ".concat(e," unexpectedly disconnected in the middle of sending data"),tn.AbnormalEnd);for(const[l,d]of o)(r=(n=d.outOfBandFailureRejectingFuture).reject)===null||r===void 0||r.call(n,c),this.byteStreamControllers.delete(l);for(const[l,d]of s)(a=(i=d.outOfBandFailureRejectingFuture).reject)===null||a===void 0||a.call(i,c),this.textStreamControllers.delete(l)}}handleDataStreamPacket(e,n){return O(this,void 0,void 0,function*(){switch(e.value.case){case"streamHeader":return this.handleStreamHeader(e.value.value,e.participantIdentity,n);case"streamChunk":return this.handleStreamChunk(e.value.value,n);case"streamTrailer":return this.handleStreamTrailer(e.value.value,n);default:throw new Error('DataPacket of value "'.concat(e.value.case,'" is not data stream related!'))}})}handleStreamHeader(e,n,r){return O(this,void 0,void 0,function*(){var i;if(e.contentHeader.case==="byteHeader"){const a=this.byteStreamHandlers.get(e.topic);if(!a){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let s;const o=new Jn;o.promise.catch(d=>{this.log.error(d)});const c={id:e.streamId,name:(i=e.contentHeader.value.name)!==null&&i!==void 0?i:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Sf(e.timestamp),attributes:e.attributes,encryptionType:r},l=new ReadableStream({start:d=>{if(s=d,this.textStreamControllers.has(e.streamId))throw new zn("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),tn.AlreadyOpened);this.byteStreamControllers.set(e.streamId,{info:c,controller:s,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:o})}});a(new Ife(c,l,Sf(e.totalLength),o),{identity:n})}else if(e.contentHeader.case==="textHeader"){const a=this.textStreamHandlers.get(e.topic);if(!a){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let s;const o=new Jn;o.promise.catch(d=>{this.log.error(d)});const c={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes,encryptionType:r},l=new ReadableStream({start:d=>{if(s=d,this.textStreamControllers.has(e.streamId))throw new zn("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),tn.AlreadyOpened);this.textStreamControllers.set(e.streamId,{info:c,controller:s,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:o})}});a(new Mfe(c,l,Sf(e.totalLength),o),{identity:n})}})}handleStreamChunk(e,n){const r=this.byteStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?(r.controller.error(new zn("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),tn.EncryptionTypeMismatch)),this.byteStreamControllers.delete(e.streamId)):e.content.length>0&&r.controller.enqueue(e));const i=this.textStreamControllers.get(e.streamId);i&&(i.info.encryptionType!==n?(i.controller.error(new zn("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),tn.EncryptionTypeMismatch)),this.textStreamControllers.delete(e.streamId)):e.content.length>0&&i.controller.enqueue(e))}handleStreamTrailer(e,n){const r=this.textStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?r.controller.error(new zn("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),tn.EncryptionTypeMismatch)):(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),e.attributes),r.controller.close(),this.textStreamControllers.delete(e.streamId)));const i=this.byteStreamControllers.get(e.streamId);i&&(i.info.encryptionType!==n?i.controller.error(new zn("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),tn.EncryptionTypeMismatch)):(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),e.attributes),i.controller.close()),this.byteStreamControllers.delete(e.streamId))}}class h5{constructor(e,n,r){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=r,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return O(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class Lfe extends h5{}class $fe extends h5{}const TN=15e3;class Ufe{constructor(e,n){this.engine=e,this.log=n}setupEngine(e){this.engine=e}sendText(e,n){return O(this,void 0,void 0,function*(){var r;const i=crypto.randomUUID(),s=new TextEncoder().encode(e).byteLength,o=(r=n==null?void 0:n.attachments)===null||r===void 0?void 0:r.map(()=>crypto.randomUUID()),c=new Array(o?o.length+1:1).fill(0),l=(f,h)=>{var p;c[h]=f;const g=c.reduce((m,b)=>m+b,0);(p=n==null?void 0:n.onProgress)===null||p===void 0||p.call(n,g)},d=yield this.streamText({streamId:i,totalSize:s,destinationIdentities:n==null?void 0:n.destinationIdentities,topic:n==null?void 0:n.topic,attachedStreamIds:o,attributes:n==null?void 0:n.attributes});return yield d.write(e),l(1,0),yield d.close(),n!=null&&n.attachments&&o&&(yield Promise.all(n.attachments.map((f,h)=>O(this,void 0,void 0,function*(){return this._sendFile(o[h],f,{topic:n.topic,mimeType:f.type,onProgress:p=>{l(p,h+1)}})})))),d.info})}streamText(e){return O(this,void 0,void 0,function*(){var n,r,i;const a=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),s={id:a,mimeType:"text/plain",timestamp:Date.now(),topic:(r=e==null?void 0:e.topic)!==null&&r!==void 0?r:"",size:e==null?void 0:e.totalSize,attributes:e==null?void 0:e.attributes,encryptionType:!((i=this.engine.e2eeManager)===null||i===void 0)&&i.isDataChannelEncryptionEnabled?Tt.GCM:Tt.NONE},o=new ep({streamId:a,mimeType:s.mimeType,topic:s.topic,timestamp:qa(s.timestamp),totalLength:qa(e==null?void 0:e.totalSize),attributes:s.attributes,contentHeader:{case:"textHeader",value:new cM({version:e==null?void 0:e.version,attachedStreamIds:e==null?void 0:e.attachedStreamIds,replyToStreamId:e==null?void 0:e.replyToStreamId,operationType:(e==null?void 0:e.type)==="update"?ab.UPDATE:ab.CREATE})}}),c=e==null?void 0:e.destinationIdentities,l=new nn({destinationIdentities:c,value:{case:"streamHeader",value:o}});yield this.engine.sendDataPacket(l,pe.RELIABLE);let d=0;const f=this.engine,h=new WritableStream({write(m){return O(this,void 0,void 0,function*(){for(const b of Ude(m,TN)){yield f.waitForBufferStatusLow(pe.RELIABLE);const v=new tp({content:b,streamId:a,chunkIndex:qa(d)}),x=new nn({destinationIdentities:c,value:{case:"streamChunk",value:v}});yield f.sendDataPacket(x,pe.RELIABLE),d+=1}})},close(){return O(this,void 0,void 0,function*(){const m=new np({streamId:a}),b=new nn({destinationIdentities:c,value:{case:"streamTrailer",value:m}});yield f.sendDataPacket(b,pe.RELIABLE)})},abort(m){console.log("Sink error:",m)}});let p=()=>O(this,void 0,void 0,function*(){yield g.close()});f.once(ee.Closing,p);const g=new Lfe(h,s,()=>this.engine.off(ee.Closing,p));return g})}sendFile(e,n){return O(this,void 0,void 0,function*(){const r=crypto.randomUUID();return yield this._sendFile(r,e,n),{id:r}})}_sendFile(e,n,r){return O(this,void 0,void 0,function*(){var i;const a=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:n.type,topic:r==null?void 0:r.topic,destinationIdentities:r==null?void 0:r.destinationIdentities}),s=n.stream().getReader();for(;;){const{done:o,value:c}=yield s.read();if(o)break;yield a.write(c)}return yield a.close(),a.info})}streamBytes(e){return O(this,void 0,void 0,function*(){var n,r,i,a,s,o;const c=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),l=e==null?void 0:e.destinationIdentities,d={id:c,mimeType:(r=e==null?void 0:e.mimeType)!==null&&r!==void 0?r:"application/octet-stream",topic:(i=e==null?void 0:e.topic)!==null&&i!==void 0?i:"",timestamp:Date.now(),attributes:e==null?void 0:e.attributes,size:e==null?void 0:e.totalSize,name:(a=e==null?void 0:e.name)!==null&&a!==void 0?a:"unknown",encryptionType:!((s=this.engine.e2eeManager)===null||s===void 0)&&s.isDataChannelEncryptionEnabled?Tt.GCM:Tt.NONE},f=new ep({totalLength:qa((o=d.size)!==null&&o!==void 0?o:0),mimeType:d.mimeType,streamId:c,topic:d.topic,timestamp:qa(Date.now()),attributes:d.attributes,contentHeader:{case:"byteHeader",value:new lM({name:d.name})}}),h=new nn({destinationIdentities:l,value:{case:"streamHeader",value:f}});yield this.engine.sendDataPacket(h,pe.RELIABLE);let p=0;const g=new bn,m=this.engine,b=this.log,v=new WritableStream({write(S){return O(this,void 0,void 0,function*(){const T=yield g.lock();let w=0;try{for(;w<S.byteLength;){const k=S.slice(w,w+TN);yield m.waitForBufferStatusLow(pe.RELIABLE);const C=new nn({destinationIdentities:l,value:{case:"streamChunk",value:new tp({content:k,streamId:c,chunkIndex:qa(p)})}});yield m.sendDataPacket(C,pe.RELIABLE),p+=1,w+=k.byteLength}}finally{T()}})},close(){return O(this,void 0,void 0,function*(){const S=new np({streamId:c}),T=new nn({destinationIdentities:l,value:{case:"streamTrailer",value:S}});yield m.sendDataPacket(T,pe.RELIABLE)})},abort(S){b.error("Sink error:",S)}});return new $fe(v,d)})}}class p5 extends F{constructor(e,n,r,i,a){super(e,r,a),this.sid=n,this.receiver=i}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Z.Muted:Z.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(Z.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return O(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),T1)),qde()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const r=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(r){const{timestamp:i,rtpTimestamp:a}=r;a&&this.rtpTimestamp!==a&&(this.emit(Z.TimeSyncUpdate,{timestamp:i,rtpTimestamp:a}),this.rtpTimestamp=a)}};e()}}class m5 extends p5{constructor(e,n,r,i,a,s){super(e,n,F.Kind.Audio,r,s),this.monitorReceiver=()=>O(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=Lm(o,this.prevStats)),this.prevStats=o}),this.audioContext=i,this.webAudioPluginNodes=[],a&&(this.sinkId=a.deviceId)}setVolume(e){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):r.volume=e;Qr()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(Qr())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return O(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(wb(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&wb(e)&&e.setSinkId(this.sinkId).catch(r=>{this.log.error("Failed to set sink id on remote audio track",r,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(Z.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(Z.AudioPlaybackFailed,i)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return O(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",streamId:r.id,timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const bv=100;class Ffe extends p5{constructor(e,n,r,i,a){super(e,n,F.Kind.Video,r,a),this.elementInfos=[],this.monitorReceiver=()=>O(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const s=yield this.getReceiverStats();s&&this.prevStats&&this.receiver&&(this._currentBitrate=Lm(s,this.prevStats)),this.prevStats=s}),this.debouncedHandleResize=x1(()=>{this.updateDimensions()},bv),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}setStreamState(e){super.setStreamState(e),console.log("setStreamState",e),e===F.StreamState.Active&&this.updateVisibility()}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?xo(this._mediaStreamTrack,n):ao(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new Bfe(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===e);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return O(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,r="",i=new Map;return e.forEach(a=>{a.type==="inbound-rtp"?(r=a.codecId,n={type:"video",streamId:a.id,framesDecoded:a.framesDecoded,framesDropped:a.framesDropped,framesReceived:a.framesReceived,packetsReceived:a.packetsReceived,packetsLost:a.packetsLost,frameWidth:a.frameWidth,frameHeight:a.frameHeight,pliCount:a.pliCount,firCount:a.firCount,nackCount:a.nackCount,jitter:a.jitter,timestamp:a.timestamp,bytesReceived:a.bytesReceived,decoderImplementation:a.decoderImplementation}):a.type==="codec"&&i.set(a.id,a)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(r=>r.element===e);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return O(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(e){var n,r;const i=this.elementInfos.reduce((c,l)=>Math.max(c,l.visibilityChangedAt||0),0),a=!((r=(n=this.adaptiveStreamSettings)===null||n===void 0?void 0:n.pauseVideoInBackground)!==null&&r!==void 0)||r?this.isInBackground:!1,s=this.elementInfos.some(c=>c.pictureInPicture),o=this.elementInfos.some(c=>c.visible)&&!a||s;if(!(this.lastVisible===o&&!e)){if(!o&&Date.now()-i<bv){Bt.setTimeout(()=>{this.updateVisibility()},bv);return}this.lastVisible=o,this.emit(Z.VisibilityChanged,o,this)}}updateDimensions(){var e,n;let r=0,i=0;const a=this.getPixelDensity();for(const s of this.elementInfos){const o=s.width()*a,c=s.height()*a;o+c>r+i&&(r=o,i=c)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(Z.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?tN():n||(tN()>2?2:1)}}class Bfe{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=r=>{var i;const{target:a,isIntersecting:s}=r;a===this.element&&(this.isIntersecting=s,this.isPiP=Yc(this.element),this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r,i,a;(i=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP),this.isPiP=Yc(this.element),(a=this.handleVisibilityChanged)===null||a===void 0||a.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=Yc(this.element),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=n??Ob(e),this.isPiP=pn()&&Yc(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,r;this.isIntersecting=Ob(this.element),this.isPiP=Yc(this.element),this.element.handleResize=()=>{var i;(i=this.handleResize)===null||i===void 0||i.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,rN().observe(this.element),nN().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(r=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,r,i,a;(e=rN())===null||e===void 0||e.unobserve(this.element),(n=nN())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(r=window.documentPictureInPicture)===null||r===void 0||r.removeEventListener("enter",this.onEnterPiP),(a=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||a===void 0||a.removeEventListener("pagehide",this.onLeavePiP)}}function Yc(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?Ob(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function Ob(t,e){const n=e||window;let r=t.offsetTop,i=t.offsetLeft;const a=t.offsetWidth,s=t.offsetHeight,{hidden:o}=t,{display:c}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,r+=t.offsetTop,i+=t.offsetLeft;return r<n.pageYOffset+n.innerHeight&&i<n.pageXOffset+n.innerWidth&&r+s>n.pageYOffset&&i+a>n.pageXOffset&&!o&&c!=="none"}class li extends ti.EventEmitter{constructor(e,n,r,i){var a;super(),this.metadataMuted=!1,this.encryption=Tt.NONE,this.log=fe,this.handleMuted=()=>{this.emit(Z.Muted)},this.handleUnmuted=()=>{this.emit(Z.Unmuted)},this.log=Ai((a=i==null?void 0:i.loggerName)!==null&&a!==void 0?a:Tr.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=r,this.source=F.Source.Unknown}setTrack(e){this.track&&(this.track.off(Z.Muted,this.handleMuted),this.track.off(Z.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(Z.Muted,this.handleMuted),e.on(Z.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),ge(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Tt.NONE}get audioTrack(){if(Kr(this.track))return this.track}get videoTrack(){if(Aa(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=F.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===F.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(li||(li={}));class op extends li{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(Z.Ended)},this.handleCpuConstrained=()=>{this.track&&Aa(this.track)&&this.emit(Z.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(r)}setTrack(e){this.track&&(this.track.off(Z.Ended,this.handleTrackEnded),this.track.off(Z.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(Z.Ended,this.handleTrackEnded),e.on(Z.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return O(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return O(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return O(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return O(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(Kr(this.track)){const n=this.track.getSourceTrackSettings(),r=new Set;return n.autoGainControl&&r.add(Rt.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&r.add(Rt.TF_ECHO_CANCELLATION),n.noiseSuppression&&r.add(Rt.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&r.add(Rt.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||r.add(Rt.TF_NO_DTX),this.track.enhancedNoiseCancellation&&r.add(Rt.TF_ENHANCED_NOISE_CANCELLATION),Array.from(r.values())}else return[]}}function $m(t,e){return O(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:r,videoProcessor:i,optionsWithoutProcessor:a}=i5(t);let s=a.audio,o=a.video;if(r&&typeof a.audio=="object"&&(a.audio.processor=r),i&&typeof a.video=="object"&&(a.video.processor=i),t.audio&&typeof a.audio=="object"&&typeof a.audio.deviceId=="string"){const f=a.audio.deviceId;a.audio.deviceId={exact:f},n=!0,s=Object.assign(Object.assign({},a.audio),{deviceId:{ideal:f}})}if(a.video&&typeof a.video=="object"&&typeof a.video.deviceId=="string"){const f=a.video.deviceId;a.video.deviceId={exact:f},n=!0,o=Object.assign(Object.assign({},a.video),{deviceId:{ideal:f}})}(a.audio===!0||typeof a.audio=="object"&&!a.audio.deviceId)&&(a.audio={deviceId:"default"}),a.video===!0?a.video={deviceId:"default"}:typeof a.video=="object"&&!a.video.deviceId&&(a.video.deviceId="default");const c=t5(a,s5,o5),l=v1(c),d=navigator.mediaDevices.getUserMedia(l);a.audio&&(It.userMediaPromiseMap.set("audioinput",d),d.catch(()=>It.userMediaPromiseMap.delete("audioinput"))),a.video&&(It.userMediaPromiseMap.set("videoinput",d),d.catch(()=>It.userMediaPromiseMap.delete("videoinput")));try{const f=yield d;return yield Promise.all(f.getTracks().map(h=>O(this,void 0,void 0,function*(){const p=h.kind==="audio";let g=p?c.audio:c.video;(typeof g=="boolean"||!g)&&(g={});let m;const b=p?l.audio:l.video;typeof b!="boolean"&&(m=b);const v=h.getSettings().deviceId;m!=null&&m.deviceId&&ya(m.deviceId)!==v?m.deviceId=v:m||(m={deviceId:v});const x=vfe(h,m,e);return x.kind===F.Kind.Video?x.source=F.Source.Camera:x.kind===F.Kind.Audio&&(x.source=F.Source.Microphone),x.mediaStream=f,Kr(x)&&r?yield x.setProcessor(r):Aa(x)&&i&&(yield x.setProcessor(i)),x})))}catch(f){if(!n)throw f;return $m(Object.assign(Object.assign({},t),{audio:s,video:o}),e)}})}function zfe(t){return O(this,void 0,void 0,function*(){return(yield $m({audio:!1,video:t??!0}))[0]})}function qfe(t){return O(this,void 0,void 0,function*(){return(yield $m({audio:t??!0,video:!1}))[0]})}var yr;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(yr||(yr={}));function Vfe(t){switch(t){case al.EXCELLENT:return yr.Excellent;case al.GOOD:return yr.Good;case al.POOR:return yr.Poor;case al.LOST:return yr.Lost;default:return yr.Unknown}}class g5 extends ti.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===Pu.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===vo.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,r,i,a,s){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Pu.STANDARD;var c;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=yr.Unknown,this.log=fe,this.log=Ai((c=s==null?void 0:s.loggerName)!==null&&c!==void 0?c:Tr.Participant),this.loggerOptions=s,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=r,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=o,this._attributes=a??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new Jn,this.once(H.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(F.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(F.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(F.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===vo.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==vo.ACTIVE&&this.emit(H.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,r=this.metadata;this.metadata=e,n&&this.emit(H.ParticipantMetadataChanged,r)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(H.ParticipantNameChanged,e)}_setAttributes(e){const n=Vde(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(H.AttributesChanged,n)}setPermissions(e){var n,r,i,a,s,o;const c=this.permissions,l=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||e.hidden!==((a=this.permissions)===null||a===void 0?void 0:a.hidden)||e.recorder!==((s=this.permissions)===null||s===void 0?void 0:s.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((d,f)=>{var h;return d!==((h=this.permissions)===null||h===void 0?void 0:h.canPublishSources[f])})||e.canSubscribeMetrics!==((o=this.permissions)===null||o===void 0?void 0:o.canSubscribeMetrics);return this.permissions=e,l&&this.emit(H.ParticipantPermissionsChanged,c),l}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(H.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=Vfe(e),n!==this._connectionQuality&&this.emit(H.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>Kr(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(Z.Muted,()=>{this.emit(H.TrackMuted,e)}),e.on(Z.Unmuted,()=>{this.emit(H.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case F.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case F.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function Wfe(t){var e,n,r;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new pM({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=t.allowAll)!==null&&r!==void 0?r:!1,trackSids:t.allowedTrackSids||[]})}class Hfe extends g5{constructor(e,n,r,i,a,s){super(e,n,void 0,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Tt.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Jn)},this.handleReconnected=()=>{var o,c;(c=(o=this.reconnectFuture)===null||o===void 0?void 0:o.resolve)===null||c===void 0||c.call(o),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var o,c,l,d,f,h;this.reconnectFuture&&(this.reconnectFuture.promise.catch(p=>this.log.warn(p.message,this.logContext)),(c=(o=this.reconnectFuture)===null||o===void 0?void 0:o.reject)===null||c===void 0||c.call(o,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((d=(l=this.signalConnectedFuture).reject)===null||d===void 0||d.call(l,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(h=(f=this.activeAgentFuture)===null||f===void 0?void 0:f.reject)===null||h===void 0||h.call(f,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=o=>{var c,l;o.participant&&this.updateInfo(o.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new Jn),(l=(c=this.signalConnectedFuture).resolve)===null||l===void 0||l.call(c)},this.handleSignalRequestResponse=o=>{const{requestId:c,reason:l,message:d}=o,f=this.pendingSignalRequests.get(c);f&&(l!==h1.OK&&f.reject(new Xj(d,l)),this.pendingSignalRequests.delete(c))},this.handleDataPacket=o=>{switch(o.value.case){case"rpcResponse":let c=o.value.value,l=null,d=null;c.value.case==="payload"?l=c.value.value:c.value.case==="error"&&(d=ct.fromProto(c.value.value)),this.handleIncomingRpcResponse(c.requestId,l,d);break;case"rpcAck":let f=o.value.value;this.handleIncomingRpcAck(f.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(o=>Wfe(o)))},this.onTrackUnmuted=o=>{this.onTrackMuted(o,o.isUpstreamPaused)},this.onTrackMuted=(o,c)=>{if(c===void 0&&(c=!0),!o.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),ge(o)));return}this.engine.updateMuteStatus(o.sid,c)},this.onTrackUpstreamPaused=o=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),ge(o))),this.onTrackMuted(o,!0)},this.onTrackUpstreamResumed=o=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),ge(o))),this.onTrackMuted(o,o.isMuted)},this.onTrackFeatureUpdate=o=>{const c=this.audioTrackPublications.get(o.sid);if(!c){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(o.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(c.trackSid,c.getTrackFeatures())},this.onTrackCpuConstrained=(o,c)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),ge(c))),this.emit(H.LocalTrackCpuConstrained,o,c)},this.handleSubscribedQualityUpdate=o=>O(this,void 0,void 0,function*(){var c,l,d,f,h;if(!(!((h=this.roomOptions)===null||h===void 0)&&h.dynacast))return;const p=this.videoTrackPublications.get(o.trackSid);if(!p){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}if(!p.videoTrack)return;const g=yield p.videoTrack.setPublishingCodecs(o.subscribedCodecs);try{for(var m=!0,b=fi(g),v;v=yield b.next(),c=v.done,!c;m=!0){f=v.value,m=!1;const x=f;wde(x)&&(this.log.debug("publish ".concat(x," for ").concat(p.videoTrack.sid),Object.assign(Object.assign({},this.logContext),ge(p))),yield this.publishAdditionalCodecForTrack(p.videoTrack,x,p.options))}}catch(x){l={error:x}}finally{try{!m&&!c&&(d=b.return)&&(yield d.call(b))}finally{if(l)throw l.error}}}),this.handleLocalTrackUnpublished=o=>{const c=this.trackPublications.get(o.trackSid);if(!c){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}this.unpublishTrack(c.track)},this.handleTrackEnded=o=>O(this,void 0,void 0,function*(){if(o.source===F.Source.ScreenShare||o.source===F.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),ge(o))),this.unpublishTrack(o);else if(o.isUserProvided)yield o.mute();else if(ai(o)||Wi(o))try{if(pn())try{const c=yield navigator==null?void 0:navigator.permissions.query({name:o.source===F.Source.Camera?"camera":"microphone"});if(c&&c.state==="denied")throw this.log.warn("user has revoked access to ".concat(o.source),Object.assign(Object.assign({},this.logContext),ge(o))),c.onchange=()=>{c.state!=="denied"&&(o.isMuted||o.restartTrack(),c.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}o.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),ge(o))),ai(o)?yield o.restartTrack({deviceId:"default"}):yield o.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),ge(o))),yield o.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=a,this.roomOutgoingDataStreamManager=s}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Tt.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){var n;this.engine=e,this.engine.on(ee.RemoteMute,(r,i)=>{const a=this.trackPublications.get(r);!a||!a.track||(i?a.mute():a.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(ee.Connected,this.handleReconnected).on(ee.SignalConnected,this.handleSignalConnected).on(ee.SignalRestarted,this.handleReconnected).on(ee.SignalResumed,this.handleReconnected).on(ee.Restarting,this.handleReconnecting).on(ee.Resuming,this.handleReconnecting).on(ee.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(ee.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(ee.Closing,this.handleClosing).on(ee.SignalRequestResponse,this.handleSignalRequestResponse).on(ee.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return O(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return O(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return O(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return O(this,arguments,void 0,function(n){var r=this;let{metadata:i,name:a,attributes:s}=n;return function*(){return new Promise((o,c)=>O(r,void 0,void 0,function*(){var l,d;try{let f=!1;const h=yield this.engine.client.sendUpdateLocalMetadata((l=i??this.metadata)!==null&&l!==void 0?l:"",(d=a??this.name)!==null&&d!==void 0?d:"",s),p=performance.now();for(this.pendingSignalRequests.set(h,{resolve:o,reject:g=>{c(g),f=!0},values:{name:a,metadata:i,attributes:s}});performance.now()-p<5e3&&!f;){if((!a||this.name===a)&&(!i||this.metadata===i)&&(!s||Object.entries(s).every(g=>{let[m,b]=g;return this.attributes[m]===b||b===""&&!this.attributes[m]}))){this.pendingSignalRequests.delete(h),o();return}yield wn(50)}c(new Xj("Request to update local metadata timed out","TimeoutError"))}catch(f){f instanceof Error&&c(f)}}))}()})}setCameraEnabled(e,n,r){return this.setTrackEnabled(F.Source.Camera,e,n,r)}setMicrophoneEnabled(e,n,r){return this.setTrackEnabled(F.Source.Microphone,e,n,r)}setScreenShareEnabled(e,n,r){return this.setTrackEnabled(F.Source.ScreenShare,e,n,r)}setE2EEEnabled(e){return O(this,void 0,void 0,function*(){this.encryptionType=e?Tt.GCM:Tt.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,r,i){return O(this,void 0,void 0,function*(){var a,s;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let o=this.getTrackPublication(e);if(n)if(o)yield o.unmute();else{let c;if(this.pendingPublishing.has(e)){const l=yield this.waitForPendingPublicationOfSource(e);return l||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield l==null?void 0:l.unmute(),l}this.pendingPublishing.add(e);try{switch(e){case F.Source.Camera:c=yield this.createTracks({video:(a=r)!==null&&a!==void 0?a:!0});break;case F.Source.Microphone:c=yield this.createTracks({audio:(s=r)!==null&&s!==void 0?s:!0});break;case F.Source.ScreenShare:c=yield this.createScreenTracks(Object.assign({},r));break;default:throw new hi(e)}}catch(l){throw c==null||c.forEach(d=>{d.stop()}),l instanceof Error&&this.emit(H.MediaDevicesError,l,Eb(e)),this.pendingPublishing.delete(e),l}for(const l of c){const d=Object.assign(Object.assign({},this.roomOptions.publishDefaults),r);e===F.Source.Microphone&&Kr(l)&&d.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),l.startPreConnectBuffer())}try{const l=[];for(const f of c)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),ge(f))),l.push(this.publishTrack(f,i));[o]=yield Promise.all(l)}catch(l){throw c==null||c.forEach(d=>{d.stop()}),l}finally{this.pendingPublishing.delete(e)}}else if(!(o!=null&&o.track)&&this.pendingPublishing.has(e)&&(o=yield this.waitForPendingPublicationOfSource(e),o||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),o&&o.track)if(e===F.Source.ScreenShare){o=yield this.unpublishTrack(o.track);const c=this.getTrackPublication(F.Source.ScreenShareAudio);c&&c.track&&this.unpublishTrack(c.track)}else yield o.mute();return o})}enableCameraAndMicrophone(){return O(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(F.Source.Camera)||this.pendingPublishing.has(F.Source.Microphone))){this.pendingPublishing.add(F.Source.Camera),this.pendingPublishing.add(F.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(F.Source.Camera),this.pendingPublishing.delete(F.Source.Microphone)}}})}createTracks(e){return O(this,void 0,void 0,function*(){var n,r;e??(e={});const i=t5(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults);try{return(yield $m(i,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(o=>(Kr(o)&&(this.microphoneError=void 0,o.setAudioContext(this.audioContext),o.source=F.Source.Microphone,this.emit(H.AudioStreamAcquired)),Aa(o)&&(this.cameraError=void 0,o.source=F.Source.Camera),o))}catch(a){throw a instanceof Error&&(e.audio&&(this.microphoneError=a),e.video&&(this.cameraError=a)),a}})}createScreenTracks(e){return O(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new m1("getDisplayMedia not supported");e.resolution===void 0&&!jde()&&(e.resolution=g1.h1080fps30.resolution);const n=Bde(e),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new hi("no video track found");const a=new sp(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=F.Source.ScreenShare,e.contentHint&&(a.mediaStreamTrack.contentHint=e.contentHint);const s=[a];if(r.getAudioTracks().length>0){this.emit(H.AudioStreamAcquired);const o=new ap(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=F.Source.ScreenShareAudio,s.push(o)}return s})}publishTrack(e,n){return O(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return O(this,arguments,void 0,function(r,i){var a=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var o,c,l,d;ai(r)&&r.setAudioContext(a.audioContext),yield(o=a.reconnectFuture)===null||o===void 0?void 0:o.promise,a.republishPromise&&!s&&(yield a.republishPromise),is(r)&&a.pendingPublishPromises.has(r)&&(yield a.pendingPublishPromises.get(r));let f;if(r instanceof MediaStreamTrack)f=r.getConstraints();else{f=r.constraints;let v;switch(r.source){case F.Source.Microphone:v="audioinput";break;case F.Source.Camera:v="videoinput"}v&&a.activeDeviceMap.has(v)&&(f=Object.assign(Object.assign({},f),{deviceId:a.activeDeviceMap.get(v)}))}if(r instanceof MediaStreamTrack)switch(r.kind){case"audio":r=new ap(r,f,!0,a.audioContext,{loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});break;case"video":r=new sp(r,f,!0,{loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});break;default:throw new hi("unsupported MediaStreamTrack kind ".concat(r.kind))}else r.updateLoggerOptions({loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});let h;if(a.trackPublications.forEach(v=>{v.track&&v.track===r&&(h=v)}),h)return a.log.warn("track has already been published, skipping",Object.assign(Object.assign({},a.logContext),ge(h))),h;const p=Object.assign(Object.assign({},a.roomOptions.publishDefaults),i),g="channelCount"in r.mediaStreamTrack.getSettings()&&r.mediaStreamTrack.getSettings().channelCount===2||r.mediaStreamTrack.getConstraints().channelCount===2,m=(c=p.forceStereo)!==null&&c!==void 0?c:g;m&&(p.dtx===void 0&&a.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},a.logContext),ge(r))),p.red===void 0&&a.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(l=p.dtx)!==null&&l!==void 0||(p.dtx=!1),(d=p.red)!==null&&d!==void 0||(p.red=!1)),!Pde()&&a.roomOptions.e2ee&&(a.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},a.logContext)),p.simulcast=!1),p.source&&(r.source=p.source);const b=new Promise((v,x)=>O(a,void 0,void 0,function*(){try{if(this.engine.client.currentState!==He.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:ge(r)}));const S=setTimeout(()=>{x(new Yj("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(S);const T=yield this.publish(r,p,m);v(T)}else try{const S=yield this.publish(r,p,m);v(S)}catch(S){x(S)}}catch(S){x(S)}}));a.pendingPublishPromises.set(r,b);try{return yield b}catch(v){throw v}finally{a.pendingPublishPromises.delete(r)}}()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new Jn),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),ge(e))),!1;const{canPublish:n,canPublishSources:r}=this.permissions;return n&&(r.length===0||r.map(i=>Wde(i)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),ge(e))),!1)}publish(e,n,r){return O(this,void 0,void 0,function*(){var i,a,s,o,c,l,d,f,h,p;if(!this.hasPermissionsToPublish(e))throw new Yj("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(j=>is(e)&&j.source===e.source)&&e.source!==F.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),ge(e))),n.stopMicTrackOnMute&&Kr(e)&&(e.stopOnMute=!0),e.source===F.Source.ScreenShare&&ys()&&(n.simulcast=!1),n.videoCodec==="av1"&&!Tde()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!Cde()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=jb),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(j=>n.videoCodec===Tl(j.mime))||(n.videoCodec=Tl(this.enabledPublishVideoCodecs[0].mime)));const m=n.videoCodec;e.on(Z.Muted,this.onTrackMuted),e.on(Z.Unmuted,this.onTrackUnmuted),e.on(Z.Ended,this.handleTrackEnded),e.on(Z.UpstreamPaused,this.onTrackUpstreamPaused),e.on(Z.UpstreamResumed,this.onTrackUpstreamResumed),e.on(Z.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const b=[],v=!(!((i=n.dtx)!==null&&i!==void 0)||i),x=e.getSourceTrackSettings();x.autoGainControl&&b.push(Rt.TF_AUTO_GAIN_CONTROL),x.echoCancellation&&b.push(Rt.TF_ECHO_CANCELLATION),x.noiseSuppression&&b.push(Rt.TF_NOISE_SUPPRESSION),x.channelCount&&x.channelCount>1&&b.push(Rt.TF_STEREO),v&&b.push(Rt.TF_NO_DTX),ai(e)&&e.hasPreConnectBuffer&&b.push(Rt.TF_PRECONNECT_BUFFER);const S=new rp({cid:e.mediaStreamTrack.id,name:n.name,type:F.kindToProto(e.kind),muted:e.isMuted,source:F.sourceToProto(e.source),disableDtx:v,encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((a=n.red)!==null&&a!==void 0)||a),stream:n==null?void 0:n.stream,backupCodecPolicy:n==null?void 0:n.backupCodecPolicy,audioFeatures:b});let T;if(e.kind===F.Kind.Video){let j={width:0,height:0};try{j=yield e.waitForDimensions()}catch{const N=(o=(s=this.roomOptions.videoCaptureDefaults)===null||s===void 0?void 0:s.resolution)!==null&&o!==void 0?o:Ou.h720.resolution;j={width:N.width,height:N.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),ge(e)),{dims:j}))}S.width=j.width,S.height=j.height,Wi(e)&&(Ur(m)&&(e.source===F.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),ge(e))))),n.scalabilityMode=(c=n.scalabilityMode)!==null&&c!==void 0?c:"L3T3_KEY"),S.simulcastCodecs=[new ob({codec:m,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:jb}),n.backupCodec&&m!==n.backupCodec.codec&&S.encryption===Tt.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),S.simulcastCodecs.push(new ob({codec:n.backupCodec.codec,cid:""})))),T=Pb(e.source===F.Source.ScreenShare,S.width,S.height,n),S.layers=xN(S.width,S.height,T,Ur(n.videoCodec))}else e.kind===F.Kind.Audio&&(T=[{maxBitrate:(l=n.audioPreset)===null||l===void 0?void 0:l.maxBitrate,priority:(f=(d=n.audioPreset)===null||d===void 0?void 0:d.priority)!==null&&f!==void 0?f:"high",networkPriority:(p=(h=n.audioPreset)===null||h===void 0?void 0:h.priority)!==null&&p!==void 0?p:"high"}]);if(!this.engine||this.engine.isClosed)throw new St("cannot publish track when not connected");const w=()=>O(this,void 0,void 0,function*(){var j,P,N;if(!this.engine.pcManager)throw new St("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,T),this.emit(H.LocalSenderCreated,e.sender,e),Wi(e)&&((j=n.degradationPreference)!==null&&j!==void 0||(n.degradationPreference=jfe(e)),e.setDegradationPreference(n.degradationPreference)),T)if(ys()&&e.kind===F.Kind.Audio){let _;for(const A of this.engine.pcManager.publisher.getTransceivers())if(A.sender===e.sender){_=A;break}_&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:_,codec:"opus",maxbr:!((P=T[0])===null||P===void 0)&&P.maxBitrate?T[0].maxBitrate/1e3:0})}else e.codec&&Ur(e.codec)&&(!((N=T[0])===null||N===void 0)&&N.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:S.cid,codec:e.codec,maxbr:T[0].maxBitrate/1e3});yield this.engine.negotiate()});let k;const C=new Promise((j,P)=>O(this,void 0,void 0,function*(){var N;try{k=yield this.engine.addTrack(S),j(k)}catch(_){e.sender&&(!((N=this.engine.pcManager)===null||N===void 0)&&N.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(A=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),ge(e)),{error:A}))})),P(_)}}));if(this.enabledPublishVideoCodecs.length>0)k=(yield Promise.all([C,w()]))[0];else{k=yield C;let j;if(k.codecs.forEach(P=>{j===void 0&&(j=P.mimeType)}),j&&e.kind===F.Kind.Video){const P=Tl(j);P!==m&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),ge(e)),{codec:P})),n.videoCodec=P,T=Pb(e.source===F.Source.ScreenShare,S.width,S.height,n))}yield w()}const E=new op(e.kind,k,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(E.on(Z.CpuConstrained,j=>this.onTrackCpuConstrained(j,E)),E.options=n,e.sid=k.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:T,trackInfo:k})),Wi(e)?e.startMonitor(this.engine.client):ai(e)&&e.startMonitor(),this.addTrackPublication(E),this.emit(H.LocalTrackPublished,E),ai(e)&&k.audioFeatures.includes(Rt.TF_PRECONNECT_BUFFER)){const j=e.getPreConnectBuffer(),P=e.getPreConnectBufferMimeType();this.on(H.LocalTrackSubscribed,N=>{if(N.trackSid===k.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),ge(e))),e.stopPreConnectBuffer()}}),j&&new Promise((_,A)=>O(this,void 0,void 0,function*(){var R,L,U,q,D,$;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),ge(e)));const ne=setTimeout(()=>{A(new Error("agent not active within 10 seconds"))},1e4),de=yield this.waitUntilActiveAgentPresent();clearTimeout(ne),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),ge(e)));const xe=yield this.streamBytes({name:"preconnect-buffer",mimeType:P,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[de.identity],attributes:{trackId:E.trackSid,sampleRate:String((D=x.sampleRate)!==null&&D!==void 0?D:"48000"),channels:String(($=x.channelCount)!==null&&$!==void 0?$:"1")}});try{for(var I=!0,V=fi(j),J;J=yield V.next(),R=J.done,!R;I=!0){q=J.value,I=!1;const Se=q;yield xe.write(Se)}}catch(Se){L={error:Se}}finally{try{!I&&!R&&(U=V.return)&&(yield U.call(V))}finally{if(L)throw L.error}}yield xe.close(),_()}catch(ne){A(ne)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),ge(e)))}).catch(_=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),ge(e)),{error:_}))})}return E})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,r){return O(this,void 0,void 0,function*(){var i;if(this.encryptionType!==Tt.NONE)return;let a;if(this.trackPublications.forEach(p=>{p.track&&p.track===e&&(a=p)}),!a)throw new hi("track is not published");if(!Wi(e))throw new hi("track is not a video track");const s=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),o=Tfe(e,n,s);if(!o){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),ge(e)));return}const c=e.addSimulcastTrack(n,o);if(!c)return;const l=new rp({cid:c.mediaStreamTrack.id,type:F.kindToProto(e.kind),muted:e.isMuted,source:F.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:s.videoCodec,cid:c.mediaStreamTrack.id}]});if(l.layers=xN(l.width,l.height,o),!this.engine||this.engine.isClosed)throw new St("cannot publish track when not connected");const d=()=>O(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,c,s,o),yield this.engine.negotiate()}),h=(yield Promise.all([this.engine.addTrack(l),d()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:o,trackInfo:h}))})}unpublishTrack(e,n){return O(this,void 0,void 0,function*(){var r,i;if(is(e)){const l=this.pendingPublishPromises.get(e);l&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),ge(e))),yield l)}const a=this.getPublicationForTrack(e),s=a?ge(a):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),s)),!a||!a.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),s));return}e=a.track,e.off(Z.Muted,this.onTrackMuted),e.off(Z.Unmuted,this.onTrackUnmuted),e.off(Z.Ended,this.handleTrackEnded),e.off(Z.UpstreamPaused,this.onTrackUpstreamPaused),e.off(Z.UpstreamResumed,this.onTrackUpstreamResumed),e.off(Z.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n?e.stop():e.stopMonitor();let o=!1;const c=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<it.FAILED&&c)try{for(const l of this.engine.pcManager.publisher.getTransceivers())l.sender===c&&(l.direction="inactive",o=!0);if(this.engine.removeTrack(c)&&(o=!0),Wi(e)){for(const[,l]of e.simulcastCodecs)l.sender&&(this.engine.removeTrack(l.sender)&&(o=!0),l.sender=void 0);e.simulcastCodecs.clear()}}catch(l){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),s),{error:l}))}switch(this.trackPublications.delete(a.trackSid),a.kind){case F.Kind.Audio:this.audioTrackPublications.delete(a.trackSid);break;case F.Kind.Video:this.videoTrackPublications.delete(a.trackSid);break}return this.emit(H.LocalTrackUnpublished,a),a.setTrack(void 0),o&&(yield this.engine.negotiate()),a})}unpublishTracks(e){return O(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>!!r)})}republishAllTracks(e){return O(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){r.republishPromise&&(yield r.republishPromise),r.republishPromise=new Promise((a,s)=>O(r,void 0,void 0,function*(){try{const o=[];this.trackPublications.forEach(c=>{c.track&&(n&&(c.options=Object.assign(Object.assign({},c.options),n)),o.push(c))}),yield Promise.all(o.map(c=>O(this,void 0,void 0,function*(){const l=c.track;yield this.unpublishTrack(l,!1),i&&!l.isMuted&&l.source!==F.Source.ScreenShare&&l.source!==F.Source.ScreenShareAudio&&(ai(l)||Wi(l))&&!l.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:c.trackSid})),yield l.restartTrack()),yield this.publishOrRepublishTrack(l,c.options,!0)}))),a()}catch(o){s(o)}finally{this.republishPromise=void 0}})),yield r.republishPromise}()})}publishData(e){return O(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const a=i.reliable?pe.RELIABLE:pe.LOSSY,s=i.destinationIdentities,o=i.topic;let c=new a1({participantIdentity:r.identity,payload:n,destinationIdentities:s,topic:o});const l=new nn({kind:a,value:{case:"user",value:c}});yield r.engine.sendDataPacket(l,a)}()})}publishDtmf(e,n){return O(this,void 0,void 0,function*(){const r=new nn({kind:pe.RELIABLE,value:{case:"sipDtmf",value:new eM({code:e,digit:n})}});yield this.engine.sendDataPacket(r,pe.RELIABLE)})}sendChatMessage(e,n){return O(this,void 0,void 0,function*(){const r={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n==null?void 0:n.attachments},i=new nn({value:{case:"chatMessage",value:new Zh(Object.assign(Object.assign({},r),{timestamp:Qe.parse(r.timestamp)}))}});return yield this.engine.sendDataPacket(i,pe.RELIABLE),this.emit(H.ChatMessage,r),r})}editChatMessage(e,n){return O(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),i=new nn({value:{case:"chatMessage",value:new Zh(Object.assign(Object.assign({},r),{timestamp:Qe.parse(r.timestamp),editTimestamp:Qe.parse(r.editTimestamp)}))}});return yield this.engine.sendDataPacket(i,pe.RELIABLE),this.emit(H.ChatMessage,r),r})}sendText(e,n){return O(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendText(e,n)})}streamText(e){return O(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamText(e)})}sendFile(e,n){return O(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendFile(e,n)})}streamBytes(e){return O(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamBytes(e)})}performRpc(e){return O(this,arguments,void 0,function(n){var r=this;let{destinationIdentity:i,method:a,payload:s,responseTimeout:o=1e4}=n;return function*(){return new Promise((l,d)=>O(r,void 0,void 0,function*(){var f,h,p,g;if(k1(s)>c5){d(ct.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((h=(f=this.engine.latestJoinResponse)===null||f===void 0?void 0:f.serverInfo)===null||h===void 0)&&h.version&&Cr((g=(p=this.engine.latestJoinResponse)===null||p===void 0?void 0:p.serverInfo)===null||g===void 0?void 0:g.version,"1.8.0")<0){d(ct.builtIn("UNSUPPORTED_SERVER"));return}const m=crypto.randomUUID();yield this.publishRpcRequest(i,m,a,s,o-2e3);const b=setTimeout(()=>{this.pendingAcks.delete(m),d(ct.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(m),clearTimeout(v)},2e3);this.pendingAcks.set(m,{resolve:()=>{clearTimeout(b)},participantIdentity:i});const v=setTimeout(()=>{this.pendingResponses.delete(m),d(ct.builtIn("RESPONSE_TIMEOUT"))},o);this.pendingResponses.set(m,{resolve:(x,S)=>{clearTimeout(v),this.pendingAcks.has(m)&&(console.warn("RPC response received before ack",m),this.pendingAcks.delete(m),clearTimeout(b)),S?d(S):l(x??"")},participantIdentity:i})}))}()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,r){const i=this.pendingResponses.get(e);i?(i.resolve(n,r),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,r,i,a){return O(this,void 0,void 0,function*(){const s=new nn({destinationIdentities:[e],kind:pe.RELIABLE,value:{case:"rpcRequest",value:new s1({id:n,method:r,payload:i,responseTimeoutMs:a,version:1})}});yield this.engine.sendDataPacket(s,pe.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:r}]of this.pendingAcks)r===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:r,resolve:i}]of this.pendingResponses)r===e&&(i(null,ct.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var r,i;const a=this.trackPublications.get(n.sid);if(a){const s=a.isMuted||((i=(r=a.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);s!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),ge(a)),{mutedOnServer:s})),this.engine.client.sendMuteTrack(n.sid,s))}}),!0):!1}setActiveAgent(e){var n,r,i,a;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(r=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||r===void 0||r.call(n,e):(a=(i=this.activeAgentFuture)===null||i===void 0?void 0:i.reject)===null||a===void 0||a.call(i,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new Jn),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(r=>{const i=r.track;i&&(e instanceof MediaStreamTrack?(ai(i)||Wi(i))&&i.mediaStreamTrack===e&&(n=r):e===i&&(n=r))}),n}waitForPendingPublicationOfSource(e){return O(this,void 0,void 0,function*(){const r=Date.now();for(;Date.now()<r+1e4;){const i=Array.from(this.pendingPublishPromises.entries()).find(a=>{let[s]=a;return s.source===e});if(i)return i[1];yield wn(20)}})}}class cp extends li{constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=a=>{this.setTrack(void 0),this.emit(Z.Ended,a)},this.handleVisibilityChange=a=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(a),this.logContext),this.visible=a,this.emitTrackUpdate()},this.handleVideoDimensionsChange=a=>{this.log.debug("adaptivestream video dimensions ".concat(a.width,"x").concat(a.height),this.logContext),this.videoDimensionsAdaptiveStream=a,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new Im({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new nM({participantSid:"",trackSids:[this.trackSid]})]});this.emit(Z.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?li.SubscriptionStatus.Unsubscribed:super.isSubscribed?li.SubscriptionStatus.Subscribed:li.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?li.PermissionStatus.Allowed:li.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.requestedDisabled===!e||(this.requestedDisabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.requestedMaxQuality===e||(this.requestedMaxQuality=e,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,r;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((r=this.requestedVideoDimensions)===null||r===void 0?void 0:r.height)===e.height||(fv(this.track)&&(this.requestedVideoDimensions=e),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&fv(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){var e;return(e=this.requestedMaxQuality)!==null&&e!==void 0?e:On.HIGH}setTrack(e){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(Z.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(Z.VisibilityChanged,this.handleVisibilityChange),i.off(Z.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(Z.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(Z.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(Z.VisibilityChanged,this.handleVisibilityChange),e.on(Z.Ended,this.handleEnded),this.emit(Z.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(Z.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?Z.Muted:Z.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(Z.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(Z.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return fv(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new uM({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===F.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)sN(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const r=Hde(this.trackInfo,this.requestedMaxQuality);r&&sN(this.videoDimensionsAdaptiveStream,r)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(e.width=Math.ceil(n.width),e.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),e.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:On.HIGH})),e.quality=On.HIGH)}this.emit(Z.UpdateSettings,e)}}class lp extends g5{static fromParticipantInfo(e,n,r){return new lp(e,n.sid,n.identity,n.name,n.metadata,n.attributes,r,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,r,i,a,s,o){let c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:Pu.STANDARD;super(n,r||"",i,a,s,o,c),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(Z.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),ge(e)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),e.on(Z.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(Z.SubscriptionPermissionChanged,n=>{this.emit(H.TrackSubscriptionPermissionChanged,e,n)}),e.on(Z.SubscriptionStatusChanged,n=>{this.emit(H.TrackSubscriptionStatusChanged,e,n)}),e.on(Z.Subscribed,n=>{this.emit(H.TrackSubscribed,n,e)}),e.on(Z.Unsubscribed,n=>{this.emit(H.TrackUnsubscribed,n,e)}),e.on(Z.SubscriptionFailed,n=>{this.emit(H.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:F.Source.Microphone;this.volumeMap.set(n,e);const r=this.getTrackPublication(n);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,r,i,a,s){let o=this.getTrackPublicationBySid(n);if(o||n.startsWith("TR")||this.trackPublications.forEach(d=>{!o&&e.kind===d.kind.toString()&&(o=d)}),!o){if(s===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(H.TrackSubscriptionFailed,n);return}s===void 0&&(s=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,r,i,a,s-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),ge(o))),this.emit(H.TrackSubscriptionFailed,n);return}const c=e.kind==="video";let l;return c?l=new Ffe(e,n,i,a):l=new m5(e,n,i,this.audioContext,this.audioOutput),l.source=o.source,l.isMuted=o.isMuted,l.setMediaStream(r),l.start(),o.setTrack(l),this.volumeMap.has(o.source)&&Tb(l)&&Kr(l)&&l.setVolume(this.volumeMap.get(o.source)),o}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,r=new Map;return e.tracks.forEach(i=>{var a,s;let o=this.getTrackPublicationBySid(i.sid);if(o)o.updateInfo(i);else{const c=F.kindFromProto(i.type);if(!c)return;o=new cp(c,i,(a=this.signalClient.connectOptions)===null||a===void 0?void 0:a.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(s=this.loggerOptions)===null||s===void 0?void 0:s.loggerName}),o.updateInfo(i),r.set(i.sid,o);const l=Array.from(this.trackPublications.values()).find(d=>d.source===(o==null?void 0:o.source));l&&o.source!==F.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(o.source),Object.assign(Object.assign({},this.logContext),{oldTrack:ge(l),newTrack:ge(o)})),this.addTrackPublication(o)}n.set(i.sid,o)}),this.trackPublications.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),ge(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(H.TrackPublished,i)}),!0}unpublishTrack(e,n){const r=this.trackPublications.get(e);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.trackPublications.delete(e),r.kind){case F.Kind.Audio:this.audioTrackPublications.delete(e);break;case F.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(H.TrackUnpublished,r)}setAudioOutput(e){return O(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(r=>{var i;Kr(r.track)&&Tb(r.track)&&n.push(r.track.setSinkId((i=e.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}var we;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(we||(we={}));const Gfe=4*1e3;class Ri extends ti.EventEmitter{get hasE2EESetup(){return this.e2eeManager!==void 0}constructor(e){var n,r,i,a;if(super(),n=this,this.state=we.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=fe,this.bufferedEvents=[],this.isResuming=!1,this.rpcHandlers=new Map,this.connect=(s,o,c)=>O(this,void 0,void 0,function*(){var l;if(!Ede())throw Qr()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const d=yield this.disconnectLock.lock();if(this.state===we.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),d(),Promise.resolve();if(this.connectFuture)return d(),this.connectFuture.promise;this.setAndEmitConnectionState(we.Connecting),((l=this.regionUrlProvider)===null||l===void 0?void 0:l.getServerUrl().toString())!==s&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),Sb(new URL(s))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new _b(s,o):this.regionUrlProvider.updateToken(o),this.regionUrlProvider.fetchRegionSettings().then(p=>{var g;(g=this.regionUrlProvider)===null||g===void 0||g.setServerReportedRegions(p)}).catch(p=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:p}))}));const f=(p,g,m)=>O(this,void 0,void 0,function*(){var b,v;this.abortController&&this.abortController.abort();const x=new AbortController;this.abortController=x,d==null||d();try{yield this.attemptConnection(m??s,o,c,x),this.abortController=void 0,p()}catch(S){if(this.regionUrlProvider&&S instanceof De&&S.reason!==Ee.Cancelled&&S.reason!==Ee.NotAllowed){let T=null;try{T=yield this.regionUrlProvider.getNextBestRegionUrl((b=this.abortController)===null||b===void 0?void 0:b.signal)}catch(w){if(w instanceof De&&(w.status===401||w.reason===Ee.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),g(w);return}}T&&!(!((v=this.abortController)===null||v===void 0)&&v.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(S.message,". Retrying with another region: ").concat(T),this.logContext),this.recreateEngine(),yield f(p,g,T)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,aN(S)),g(S))}else{let T=xr.UNKNOWN_REASON;S instanceof De&&(T=aN(S)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,T),g(S)}}}),h=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new Jn((p,g)=>{f(p,g,h)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(s,o,c,l,d,f)=>O(this,void 0,void 0,function*(){var h,p,g;const m=yield c.join(s,o,{autoSubscribe:l.autoSubscribe,adaptiveStream:typeof d.adaptiveStream=="object"?!0:d.adaptiveStream,maxRetries:l.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:l.websocketTimeout},f.signal);let b=m.serverInfo;if(b||(b={version:m.serverVersion,region:m.serverRegion}),this.serverInfo=b,this.log.debug("connected to Livekit Server ".concat(Object.entries(b).map(v=>{let[x,S]=v;return"".concat(x,": ").concat(S)}).join(", ")),{room:(h=m.room)===null||h===void 0?void 0:h.name,roomSid:(p=m.room)===null||p===void 0?void 0:p.sid,identity:(g=m.participant)===null||g===void 0?void 0:g.identity}),!b.version)throw new ude("unknown server version");return b.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),d.dynacast=!1),m}),this.applyJoinResponse=s=>{const o=s.participant;if(this.localParticipant.sid=o.sid,this.localParticipant.identity=o.identity,this.localParticipant.setEnabledPublishCodecs(s.enabledPublishCodecs),this.e2eeManager)try{this.e2eeManager.setSifTrailer(s.sifTrailer)}catch(c){this.log.error(c instanceof Error?c.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:c}))}this.handleParticipantUpdates([o,...s.otherParticipants]),s.room&&this.handleRoomUpdate(s.room)},this.attemptConnection=(s,o,c,l)=>O(this,void 0,void 0,function*(){var d,f;this.state===we.Reconnecting||this.isResuming||!((d=this.engine)===null||d===void 0)&&d.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((f=this.regionUrlProvider)===null||f===void 0)&&f.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},S1),c),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const h=yield this.connectSignal(s,o,this.engine,this.connOptions,this.options,l);this.applyJoinResponse(h),this.setupLocalParticipantEvents(),this.emit(z.SignalConnected)}catch(h){yield this.engine.close(),this.recreateEngine();const p=new De("could not establish signal connection",Ee.ServerUnreachable);throw h instanceof Error&&(p.message="".concat(p.message,": ").concat(h.message)),h instanceof De&&(p.reason=h.reason,p.status=h.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:h})),p}if(l.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new De("Connection attempt aborted",Ee.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,l)}catch(h){throw yield this.engine.close(),this.recreateEngine(),h}pn()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),pn()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(we.Connected),this.emit(z.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];return O(n,[...o],void 0,function(){var l=this;let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var f,h,p,g;const m=yield l.disconnectLock.lock();try{if(l.state===we.Disconnected){l.log.debug("already disconnected",l.logContext);return}l.log.info("disconnect from room",Object.assign({},l.logContext)),(l.state===we.Connecting||l.state===we.Reconnecting||l.isResuming)&&(l.log.warn("abort connection attempt",l.logContext),(f=l.abortController)===null||f===void 0||f.abort(),(p=(h=l.connectFuture)===null||h===void 0?void 0:h.reject)===null||p===void 0||p.call(h,new De("Client initiated disconnect",Ee.Cancelled)),l.connectFuture=void 0),!((g=l.engine)===null||g===void 0)&&g.client.isDisconnected||(yield l.engine.client.sendLeave()),l.engine&&(yield l.engine.close()),l.handleDisconnect(d,xr.CLIENT_INITIATED),l.engine=void 0}finally{m()}}()})},this.onPageLeave=()=>O(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>O(this,void 0,void 0,function*(){const s=[],o=xn();if(o&&o.os==="iOS"){const c="livekit-dummy-audio-el";let l=document.getElementById(c);if(!l){l=document.createElement("audio"),l.id=c,l.autoplay=!0,l.hidden=!0;const d=dv();d.enabled=!0;const f=new MediaStream([d]);l.srcObject=f,document.addEventListener("visibilitychange",()=>{l&&(l.srcObject=document.hidden?null:f,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(l),this.once(z.Disconnected,()=>{l==null||l.remove(),l=null})}s.push(l)}this.remoteParticipants.forEach(c=>{c.audioTrackPublications.forEach(l=>{l.track&&l.track.attachedElements.forEach(d=>{s.push(d)})})});try{yield Promise.all([this.acquireAudioContext(),...s.map(c=>(c.muted=!1,c.play()))]),this.handleAudioPlaybackStarted()}catch(c){throw this.handleAudioPlaybackFailed(c),c}}),this.startVideo=()=>O(this,void 0,void 0,function*(){const s=[];for(const o of this.remoteParticipants.values())o.videoTrackPublications.forEach(c=>{var l;(l=c.track)===null||l===void 0||l.attachedElements.forEach(d=>{s.includes(d)||s.push(d)})});yield Promise.all(s.map(o=>o.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(o=>{o.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const s of this.remoteParticipants.values())this.handleParticipantDisconnected(s.identity,s);this.setAndEmitConnectionState(we.Reconnecting)&&this.emit(z.Reconnecting)},this.handleSignalRestarted=s=>O(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(s.serverRegion),Object.assign(Object.assign({},this.logContext),{region:s.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(s);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(o){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:o}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:s.serverRegion}))}catch{return}this.setAndEmitConnectionState(we.Connected),this.emit(z.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=s=>{s.forEach(o=>{var c;if(o.identity===this.localParticipant.identity){this.localParticipant.updateInfo(o);return}o.identity===""&&(o.identity=(c=this.sidToIdentity.get(o.sid))!==null&&c!==void 0?c:"");let l=this.remoteParticipants.get(o.identity);o.state===vo.DISCONNECTED?this.handleParticipantDisconnected(o.identity,l):l=this.getOrCreateParticipant(o.identity,o)})},this.handleActiveSpeakersUpdate=s=>{const o=[],c={};s.forEach(l=>{if(c[l.sid]=!0,l.sid===this.localParticipant.sid)this.localParticipant.audioLevel=l.level,this.localParticipant.setIsSpeaking(!0),o.push(this.localParticipant);else{const d=this.getRemoteParticipantBySid(l.sid);d&&(d.audioLevel=l.level,d.setIsSpeaking(!0),o.push(d))}}),c[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(l=>{c[l.sid]||(l.audioLevel=0,l.setIsSpeaking(!1))}),this.activeSpeakers=o,this.emitWhenConnected(z.ActiveSpeakersChanged,o)},this.handleSpeakersChanged=s=>{const o=new Map;this.activeSpeakers.forEach(l=>{const d=this.remoteParticipants.get(l.identity);d&&d.sid!==l.sid||o.set(l.sid,l)}),s.forEach(l=>{let d=this.getRemoteParticipantBySid(l.sid);l.sid===this.localParticipant.sid&&(d=this.localParticipant),d&&(d.audioLevel=l.level,d.setIsSpeaking(l.active),l.active?o.set(l.sid,d):o.delete(l.sid))});const c=Array.from(o.values());c.sort((l,d)=>d.audioLevel-l.audioLevel),this.activeSpeakers=c,this.emitWhenConnected(z.ActiveSpeakersChanged,c)},this.handleStreamStateUpdate=s=>{s.streamStates.forEach(o=>{const c=this.getRemoteParticipantBySid(o.participantSid);if(!c)return;const l=c.getTrackPublicationBySid(o.trackSid);if(!l||!l.track)return;const d=F.streamStateFromProto(o.state);l.track.setStreamState(d),d!==l.track.streamState&&(c.emit(H.TrackStreamStateChanged,l,l.track.streamState),this.emitWhenConnected(z.TrackStreamStateChanged,l,l.track.streamState,c))})},this.handleSubscriptionPermissionUpdate=s=>{const o=this.getRemoteParticipantBySid(s.participantSid);if(!o)return;const c=o.getTrackPublicationBySid(s.trackSid);c&&c.setAllowed(s.allowed)},this.handleSubscriptionError=s=>{const o=Array.from(this.remoteParticipants.values()).find(l=>l.trackPublications.has(s.trackSid));if(!o)return;const c=o.getTrackPublicationBySid(s.trackSid);c&&c.setSubscriptionError(s.err)},this.handleDataPacket=(s,o)=>{const c=this.remoteParticipants.get(s.participantIdentity);if(s.value.case==="user")this.handleUserPacket(c,s.value.value,s.kind,o);else if(s.value.case==="transcription")this.handleTranscription(c,s.value.value);else if(s.value.case==="sipDtmf")this.handleSipDtmf(c,s.value.value);else if(s.value.case==="chatMessage")this.handleChatMessage(c,s.value.value);else if(s.value.case==="metrics")this.handleMetrics(s.value.value,c);else if(s.value.case==="streamHeader"||s.value.case==="streamChunk"||s.value.case==="streamTrailer")this.handleDataStream(s,o);else if(s.value.case==="rpcRequest"){const l=s.value.value;this.handleIncomingRpcRequest(s.participantIdentity,l.id,l.method,l.payload,l.responseTimeoutMs,l.version)}},this.handleUserPacket=(s,o,c,l)=>{this.emit(z.DataReceived,o.payload,s,c,o.topic,l),s==null||s.emit(H.DataReceived,o.payload,c,l)},this.handleSipDtmf=(s,o)=>{this.emit(z.SipDTMFReceived,o,s),s==null||s.emit(H.SipDTMFReceived,o)},this.handleTranscription=(s,o)=>{const c=o.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(o.transcribedParticipantIdentity),l=c==null?void 0:c.trackPublications.get(o.trackId),d=Mde(o,this.transcriptionReceivedTimes);l==null||l.emit(Z.TranscriptionReceived,d),c==null||c.emit(H.TranscriptionReceived,d,l),this.emit(z.TranscriptionReceived,d,c,l)},this.handleChatMessage=(s,o)=>{const c=Dde(o);this.emit(z.ChatMessage,c,s)},this.handleMetrics=(s,o)=>{this.emit(z.MetricsReceived,s,o)},this.handleDataStream=(s,o)=>{this.incomingDataStreamManager.handleDataStreamPacket(s,o)},this.bufferedSegments=new Map,this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(z.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=s=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:s})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(z.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(z.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(z.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>O(this,void 0,void 0,function*(){var s;((s=xn())===null||s===void 0?void 0:s.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(z.MediaDevicesChanged)}),this.handleRoomUpdate=s=>{const o=this.roomInfo;this.roomInfo=s,o&&o.metadata!==s.metadata&&this.emitWhenConnected(z.RoomMetadataChanged,s.metadata),(o==null?void 0:o.activeRecording)!==s.activeRecording&&this.emitWhenConnected(z.RecordingStatusChanged,s.activeRecording)},this.handleConnectionQualityUpdate=s=>{s.updates.forEach(o=>{if(o.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(o.quality);return}const c=this.getRemoteParticipantBySid(o.participantSid);c&&c.setConnectionQuality(o.quality)})},this.onLocalParticipantMetadataChanged=s=>{this.emit(z.ParticipantMetadataChanged,s,this.localParticipant)},this.onLocalParticipantNameChanged=s=>{this.emit(z.ParticipantNameChanged,s,this.localParticipant)},this.onLocalAttributesChanged=s=>{this.emit(z.ParticipantAttributesChanged,s,this.localParticipant)},this.onLocalTrackMuted=s=>{this.emit(z.TrackMuted,s,this.localParticipant)},this.onLocalTrackUnmuted=s=>{this.emit(z.TrackUnmuted,s,this.localParticipant)},this.onTrackProcessorUpdate=s=>{var o;(o=s==null?void 0:s.onPublish)===null||o===void 0||o.call(s,this)},this.onLocalTrackPublished=s=>O(this,void 0,void 0,function*(){var o,c,l,d,f,h;(o=s.track)===null||o===void 0||o.on(Z.TrackProcessorUpdate,this.onTrackProcessorUpdate),(c=s.track)===null||c===void 0||c.on(Z.Restarted,this.onLocalTrackRestarted),(f=(d=(l=s.track)===null||l===void 0?void 0:l.getProcessor())===null||d===void 0?void 0:d.onPublish)===null||f===void 0||f.call(d,this),this.emit(z.LocalTrackPublished,s,this.localParticipant),ai(s.track)&&(yield s.track.checkForSilence())&&this.emit(z.LocalAudioSilenceDetected,s);const p=yield(h=s.track)===null||h===void 0?void 0:h.getDeviceId(!1),g=Eb(s.source);g&&p&&p!==this.localParticipant.activeDeviceMap.get(g)&&(this.localParticipant.activeDeviceMap.set(g,p),this.emit(z.ActiveDeviceChanged,g,p))}),this.onLocalTrackUnpublished=s=>{var o,c;(o=s.track)===null||o===void 0||o.off(Z.TrackProcessorUpdate,this.onTrackProcessorUpdate),(c=s.track)===null||c===void 0||c.off(Z.Restarted,this.onLocalTrackRestarted),this.emit(z.LocalTrackUnpublished,s,this.localParticipant)},this.onLocalTrackRestarted=s=>O(this,void 0,void 0,function*(){const o=yield s.getDeviceId(!1),c=Eb(s.source);c&&o&&o!==this.localParticipant.activeDeviceMap.get(c)&&(this.log.debug("local track restarted, setting ".concat(c," ").concat(o," active"),this.logContext),this.localParticipant.activeDeviceMap.set(c,o),this.emit(z.ActiveDeviceChanged,c,o))}),this.onLocalConnectionQualityChanged=s=>{this.emit(z.ConnectionQualityChanged,s,this.localParticipant)},this.onMediaDevicesError=(s,o)=>{this.emit(z.MediaDevicesError,s,o)},this.onLocalParticipantPermissionsChanged=s=>{this.emit(z.ParticipantPermissionsChanged,s,this.localParticipant)},this.onLocalChatMessageSent=s=>{this.emit(z.ChatMessage,s,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},lfe),e),this.log=Ai((r=this.options.loggerName)!==null&&r!==void 0?r:Tr.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},s5),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},o5),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},cfe),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.incomingDataStreamManager=new Dfe,this.outgoingDataStreamManager=new Ufe(this.engine,this.log),this.disconnectLock=new bn,this.localParticipant=new Hfe("","",this.engine,this.options,this.rpcHandlers,this.outgoingDataStreamManager),(this.options.e2ee||this.options.encryption)&&this.setupE2EE(),this.engine.e2eeManager=this.e2eeManager,this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",ya(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",ya(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",ya(this.options.audioOutput.deviceId)).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),pn()){const s=new AbortController;(a=navigator.mediaDevices)===null||a===void 0||a.addEventListener("devicechange",this.handleDeviceChange,{signal:s.signal}),Ri.cleanupRegistry&&Ri.cleanupRegistry.register(this,()=>{s.abort()})}}registerTextStreamHandler(e,n){return this.incomingDataStreamManager.registerTextStreamHandler(e,n)}unregisterTextStreamHandler(e){return this.incomingDataStreamManager.unregisterTextStreamHandler(e)}registerByteStreamHandler(e,n){return this.incomingDataStreamManager.registerByteStreamHandler(e,n)}unregisterByteStreamHandler(e){return this.incomingDataStreamManager.unregisterByteStreamHandler(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setE2EEEnabled(e){return O(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;const n=!!this.options.encryption,r=this.options.encryption||this.options.e2ee;r&&("e2eeManager"in r?this.e2eeManager=r.e2eeManager:this.e2eeManager=new Gde(r,n),this.e2eeManager.on(ia.ParticipantEncryptionStatusChanged,(i,a)=>{$de(a)&&(this.isE2EEEnabled=i),this.emit(z.ParticipantEncryptionStatusChanged,i,a)}),this.e2eeManager.on(ia.EncryptionError,i=>this.emit(z.EncryptionError,i)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return O(this,void 0,void 0,function*(){return this.state===we.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const r=i=>{i.sid!==""&&(this.engine.off(ee.RoomUpdate,r),e(i.sid))};this.engine.on(ee.RoomUpdate,r),this.once(z.Disconnected,()=>{this.engine.off(ee.RoomUpdate,r),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new Ofe(this.options),this.engine.e2eeManager=this.e2eeManager,this.engine.on(ee.ParticipantUpdate,this.handleParticipantUpdates).on(ee.RoomUpdate,this.handleRoomUpdate).on(ee.SpeakersChanged,this.handleSpeakersChanged).on(ee.StreamStateChanged,this.handleStreamStateUpdate).on(ee.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(ee.SubscriptionError,this.handleSubscriptionError).on(ee.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(ee.MediaTrackAdded,(e,n,r)=>{this.onTrackAdded(e,n,r)}).on(ee.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(ee.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(ee.DataPacketReceived,this.handleDataPacket).on(ee.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(we.SignalReconnecting)&&this.emit(z.SignalReconnecting)}).on(ee.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(we.Connected)&&this.emit(z.Reconnected)}).on(ee.SignalResumed,()=>{this.bufferedEvents=[],(this.state===we.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(ee.Restarting,this.handleRestarting).on(ee.SignalRestarted,this.handleSignalRestarted).on(ee.Offline,()=>{this.setAndEmitConnectionState(we.Reconnecting)&&this.emit(z.Reconnecting)}).on(ee.DCBufferStatusChanged,(e,n)=>{this.emit(z.DCBufferStatusChanged,e,n)}).on(ee.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(r=>{let{trackSid:i}=r;return i===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(H.LocalTrackSubscribed,n),this.emitWhenConnected(z.LocalTrackSubscribed,n,this.localParticipant)}).on(ee.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,r)=>{this.handleParticipantDisconnected(r,n)}),this.emit(z.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine),this.outgoingDataStreamManager&&this.outgoingDataStreamManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return It.getInstance().getDevices(e,n)}prepareConnection(e,n){return O(this,void 0,void 0,function*(){if(this.state===we.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(Sb(new URL(e))&&n){this.regionUrlProvider=new _b(e,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===we.Disconnected&&(this.regionUrl=r,yield fetch(kb(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(kb(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return O(this,void 0,void 0,function*(){let r=()=>O(this,void 0,void 0,function*(){}),i;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new Mr({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new Mr({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new Mr({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new Mr({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>O(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Mr({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>O(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Mr({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new Mr({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>O(this,void 0,void 0,function*(){const a=this.engine.client.onLeave;a&&a(new Mm({reason:xr.CLIENT_INITIATED,action:yo.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new Mr({scenario:{case:"subscriberBandwidth",value:qa(n)}});break;case"leave-full-reconnect":i=new Mr({scenario:{case:"leaveRequestFullReconnect",value:!0}})}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return O(this,arguments,void 0,function(r,i){var a=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function*(){var o,c,l,d,f,h,p;let g=!0,m=!1;const b=s?{exact:i}:i;if(r==="audioinput"){m=a.localParticipant.audioTrackPublications.size===0;const v=(o=a.getActiveDevice(r))!==null&&o!==void 0?o:a.options.audioCaptureDefaults.deviceId;a.options.audioCaptureDefaults.deviceId=b;const x=Array.from(a.localParticipant.audioTrackPublications.values()).filter(T=>T.source===F.Source.Microphone);try{g=(yield Promise.all(x.map(T=>{var w;return(w=T.audioTrack)===null||w===void 0?void 0:w.setDeviceId(b)}))).every(T=>T===!0)}catch(T){throw a.options.audioCaptureDefaults.deviceId=v,T}const S=x.some(T=>{var w,k;return(k=(w=T.track)===null||w===void 0?void 0:w.isMuted)!==null&&k!==void 0?k:!1});g&&S&&(m=!0)}else if(r==="videoinput"){m=a.localParticipant.videoTrackPublications.size===0;const v=(c=a.getActiveDevice(r))!==null&&c!==void 0?c:a.options.videoCaptureDefaults.deviceId;a.options.videoCaptureDefaults.deviceId=b;const x=Array.from(a.localParticipant.videoTrackPublications.values()).filter(T=>T.source===F.Source.Camera);try{g=(yield Promise.all(x.map(T=>{var w;return(w=T.videoTrack)===null||w===void 0?void 0:w.setDeviceId(b)}))).every(T=>T===!0)}catch(T){throw a.options.videoCaptureDefaults.deviceId=v,T}const S=x.some(T=>{var w,k;return(k=(w=T.track)===null||w===void 0?void 0:w.isMuted)!==null&&k!==void 0?k:!1});g&&S&&(m=!0)}else if(r==="audiooutput"){if(m=!0,!wb()&&!a.options.webAudioMix||a.options.webAudioMix&&a.audioContext&&!("setSinkId"in a.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");a.options.webAudioMix&&(i=(l=yield It.getInstance().normalizeDeviceId("audiooutput",i))!==null&&l!==void 0?l:""),(d=(p=a.options).audioOutput)!==null&&d!==void 0||(p.audioOutput={});const v=(f=a.getActiveDevice(r))!==null&&f!==void 0?f:a.options.audioOutput.deviceId;a.options.audioOutput.deviceId=i;try{a.options.webAudioMix&&((h=a.audioContext)===null||h===void 0||h.setSinkId(i)),yield Promise.all(Array.from(a.remoteParticipants.values()).map(x=>x.setAudioOutput({deviceId:i})))}catch(x){throw a.options.audioOutput.deviceId=v,x}}return m&&(a.localParticipant.activeDeviceMap.set(r,i),a.emit(z.ActiveDeviceChanged,r,i)),g}()})}setupLocalParticipantEvents(){this.localParticipant.on(H.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(H.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(H.AttributesChanged,this.onLocalAttributesChanged).on(H.TrackMuted,this.onLocalTrackMuted).on(H.TrackUnmuted,this.onLocalTrackUnmuted).on(H.LocalTrackPublished,this.onLocalTrackPublished).on(H.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(H.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(H.MediaDevicesError,this.onMediaDevicesError).on(H.AudioStreamAcquired,this.startAudio).on(H.ChatMessage,this.onLocalChatMessageSent).on(H.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,r){if(this.state===we.Connecting||this.state===we.Reconnecting){const f=()=>{this.onTrackAdded(e,n,r),h()},h=()=>{this.off(z.Reconnected,f),this.off(z.Connected,f),this.off(z.Disconnected,h)};this.once(z.Reconnected,f),this.once(z.Connected,f),this.once(z.Disconnected,h);return}if(this.state===we.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const i=kde(n.id),a=i[0];let s=i[1],o=e.id;if(s&&s.startsWith("TR")&&(o=s),a===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const c=Array.from(this.remoteParticipants.values()).find(f=>f.sid===a);if(!c){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(a),this.logContext);return}let l;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?l=this.options.adaptiveStream:l={});const d=c.addSubscribedMediaTrack(e,o,n,r,l);d!=null&&d.isEncrypted&&!this.e2eeManager&&this.emit(z.EncryptionError,new Error("Encrypted ".concat(d.source," track received from participant ").concat(c.sid,", but room does not have encryption enabled!")))}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.incomingDataStreamManager.clearHandlersAndControllers(),this.state!==we.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(i=>{i.trackPublications.forEach(a=>{i.unpublishTrack(a.trackSid)})}),this.localParticipant.trackPublications.forEach(i=>{var a,s,o;i.track&&this.localParticipant.unpublishTrack(i.track,e),e?((a=i.track)===null||a===void 0||a.detach(),(s=i.track)===null||s===void 0||s.stop()):(o=i.track)===null||o===void 0||o.stopMonitor()}),this.localParticipant.off(H.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(H.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(H.AttributesChanged,this.onLocalAttributesChanged).off(H.TrackMuted,this.onLocalTrackMuted).off(H.TrackUnmuted,this.onLocalTrackUnmuted).off(H.LocalTrackPublished,this.onLocalTrackPublished).off(H.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(H.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(H.MediaDevicesError,this.onMediaDevicesError).off(H.AudioStreamAcquired,this.startAudio).off(H.ChatMessage,this.onLocalChatMessageSent).off(H.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),pn()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(we.Disconnected),this.emit(z.Disconnected,n)}}}handleParticipantDisconnected(e,n){var r;this.remoteParticipants.delete(e),n&&(this.incomingDataStreamManager.validateParticipantHasNoActiveDataStreams(e),n.trackPublications.forEach(i=>{n.unpublishTrack(i.trackSid,!0)}),this.emit(z.ParticipantDisconnected,n),n.setDisconnected(),(r=this.localParticipant)===null||r===void 0||r.handleParticipantDisconnected(n.identity))}handleIncomingRpcRequest(e,n,r,i,a,s){return O(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),s!==1){yield this.engine.publishRpcResponse(e,n,null,ct.builtIn("UNSUPPORTED_VERSION"));return}const o=this.rpcHandlers.get(r);if(!o){yield this.engine.publishRpcResponse(e,n,null,ct.builtIn("UNSUPPORTED_METHOD"));return}let c=null,l=null;try{const d=yield o({requestId:n,callerIdentity:e,payload:i,responseTimeout:a});k1(d)>c5?(c=ct.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(r))):l=d}catch(d){d instanceof ct?c=d:(console.warn("Uncaught error returned by RPC handler for ".concat(r,". Returning APPLICATION_ERROR instead."),d),c=ct.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,l,c)})}selectDefaultDevices(){return O(this,void 0,void 0,function*(){var e,n,r;const i=It.getInstance().previousDevices,a=yield It.getInstance().getDevices(void 0,!1),s=xn();if((s==null?void 0:s.name)==="Chrome"&&s.os!=="iOS")for(let c of a){const l=i.find(d=>d.deviceId===c.deviceId);l&&l.label!==""&&l.kind===c.kind&&l.label!==c.label&&this.getActiveDevice(c.kind)==="default"&&this.emit(z.ActiveDeviceChanged,c.kind,c.deviceId)}const o=["audiooutput","audioinput","videoinput"];for(let c of o){const l=Fde(c),d=this.localParticipant.getTrackPublication(l);if(d&&(!((e=d.track)===null||e===void 0)&&e.isUserProvided))continue;const f=a.filter(p=>p.kind===c),h=this.getActiveDevice(c);if(h===((n=i.filter(p=>p.kind===c)[0])===null||n===void 0?void 0:n.deviceId)&&f.length>0&&((r=f[0])===null||r===void 0?void 0:r.deviceId)!==h){yield this.switchActiveDevice(c,f[0].deviceId);continue}c==="audioinput"&&!Au()||c==="videoinput"||f.length>0&&!f.find(p=>p.deviceId===this.getActiveDevice(c))&&(c!=="audiooutput"||!Au())&&(yield this.switchActiveDevice(c,f[0].deviceId))}})}acquireAudioContext(){return O(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=r5())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),wn(200)])}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(z.AudioPlaybackStatusChanged,r))})}createParticipant(e,n){var r;let i;return n?i=lp.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):i=new lp(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(a=>this.log.warn("Could not set audio output: ".concat(a.message),this.logContext)),i}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const i=this.remoteParticipants.get(e);return n&&i.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),i}const r=this.createParticipant(e,n);return this.remoteParticipants.set(e,r),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(z.ParticipantConnected,r),r.on(H.TrackPublished,i=>{this.emitWhenConnected(z.TrackPublished,i,r)}).on(H.TrackSubscribed,(i,a)=>{i.kind===F.Kind.Audio?(i.on(Z.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(Z.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===F.Kind.Video&&(i.on(Z.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(Z.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(z.TrackSubscribed,i,a,r)}).on(H.TrackUnpublished,i=>{this.emit(z.TrackUnpublished,i,r)}).on(H.TrackUnsubscribed,(i,a)=>{this.emit(z.TrackUnsubscribed,i,a,r)}).on(H.TrackMuted,i=>{this.emitWhenConnected(z.TrackMuted,i,r)}).on(H.TrackUnmuted,i=>{this.emitWhenConnected(z.TrackUnmuted,i,r)}).on(H.ParticipantMetadataChanged,i=>{this.emitWhenConnected(z.ParticipantMetadataChanged,i,r)}).on(H.ParticipantNameChanged,i=>{this.emitWhenConnected(z.ParticipantNameChanged,i,r)}).on(H.AttributesChanged,i=>{this.emitWhenConnected(z.ParticipantAttributesChanged,i,r)}).on(H.ConnectionQualityChanged,i=>{this.emitWhenConnected(z.ConnectionQualityChanged,i,r)}).on(H.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(z.ParticipantPermissionsChanged,i,r)}).on(H.TrackSubscriptionStatusChanged,(i,a)=>{this.emitWhenConnected(z.TrackSubscriptionStatusChanged,i,a,r)}).on(H.TrackSubscriptionFailed,(i,a)=>{this.emit(z.TrackSubscriptionFailed,i,r,a)}).on(H.TrackSubscriptionPermissionChanged,(i,a)=>{this.emitWhenConnected(z.TrackSubscriptionPermissionChanged,i,a,r)}).on(H.Active,()=>{this.emitWhenConnected(z.ParticipantActive,r),r.kind===Pu.AGENT&&this.localParticipant.setActiveAgent(r)}),n&&r.updateInfo(n),r}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((r,i)=>(r.push(...i.getTrackPublications()),r),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&Lde(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=Bt.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,xr.STATE_MISMATCH))):e=0},Gfe)}clearConnectionReconcile(){this.connectionReconcileInterval&&Bt.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(z.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,r]=e;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.state===we.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,r]);else if(this.state===we.Connected)return this.emit(e,...r);return!1}simulateParticipants(e){return O(this,void 0,void 0,function*(){var n,r;const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),a=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new Om({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Qe.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new gs({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(z.SignalConnected),this.emit(z.Connected),this.setAndEmitConnectionState(we.Connected),i.video){const s=new op(F.Kind.Video,new io({source:mt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:gr.AUDIO,name:"video-dummy"}),new sp(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:iN(160*((n=a.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(H.LocalTrackPublished,s)}if(i.audio){const s=new op(F.Kind.Audio,new io({source:mt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:gr.AUDIO}),new ap(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:dv(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(H.LocalTrackPublished,s)}for(let s=0;s<a.count-1;s+=1){let o=new gs({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(s),state:vo.ACTIVE,tracks:[],joinedAt:Qe.parse(Date.now())});const c=this.getOrCreateParticipant(o.identity,o);if(a.video){const l=iN(160*((r=a.aspectRatios[s%a.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),d=new io({source:mt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:gr.AUDIO});c.addSubscribedMediaTrack(l,d.sid,new MediaStream([l]),new RTCRtpReceiver),o.tracks=[...o.tracks,d]}if(a.audio){const l=dv(),d=new io({source:mt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:gr.AUDIO});c.addSubscribedMediaTrack(l,d.sid,new MediaStream([l]),new RTCRtpReceiver),o.tracks=[...o.tracks,d]}c.updateInfo(o)}})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e!==z.ActiveSpeakersChanged&&e!==z.TranscriptionReceived){const a=v5(r).filter(s=>s!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:a}))}return super.emit(e,...r)}}Ri.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function v5(t){return t.map(e=>{if(e)return Array.isArray(e)?v5(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var fr;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(fr||(fr={}));class Ra extends ti.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=fr.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new Ri(r.roomOptions),this.connectOptions=r.connectOptions,this.options=r}run(e){return O(this,void 0,void 0,function*(){if(this.status!==fr.IDLE)throw Error("check is running already");this.setStatus(fr.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==fr.SKIPPED&&this.setStatus(this.isSuccess()?fr.SUCCESS:fr.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return O(this,void 0,void 0,function*(){return this.room.state===we.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return O(this,void 0,void 0,function*(){this.room&&this.room.state!==we.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(fr.SKIPPED)}switchProtocol(e){return O(this,void 0,void 0,function*(){let n=!1,r=!1;if(this.room.on(z.Reconnecting,()=>{n=!0}),this.room.once(z.Reconnected,()=>{r=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(a=>setTimeout(a,1e3)),!n)return;const i=Date.now()+1e4;for(;Date.now()<i;){if(r)return;yield wn(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class Kfe extends Ra{get description(){return"Cloud regions"}perform(){return O(this,void 0,void 0,function*(){const e=new _b(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],r=new Set;for(let a=0;a<3;a++){const s=yield e.getNextBestRegionUrl();if(!s)break;if(r.has(s))continue;r.add(s);const o=yield this.checkCloudRegion(s);this.appendMessage("".concat(o.region," RTT: ").concat(o.rtt,"ms, duration: ").concat(o.duration,"ms")),n.push(o)}n.sort((a,s)=>(a.duration-s.duration)*.5+(a.rtt-s.rtt)*.5);const i=n[0];this.bestStats=i,this.appendMessage("best Cloud region: ".concat(i.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return O(this,void 0,void 0,function*(){var n,r;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const i=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!i)throw new Error("Region not found");const a=yield this.room.localParticipant.streamText({topic:"test"}),s=1e3,c=1e6/s,l="A".repeat(s),d=Date.now();for(let g=0;g<c;g++)yield a.write(l);yield a.close();const f=Date.now(),h=yield(r=this.room.engine.pcManager)===null||r===void 0?void 0:r.publisher.getStats(),p={region:i,rtt:1e4,duration:f-d};return h==null||h.forEach(g=>{g.type==="candidate-pair"&&g.nominated&&(p.rtt=g.currentRoundTripTime*1e3)}),yield this.disconnect(),p})}}const xv=1e4;class Jfe extends Ra{get description(){return"Connection via UDP vs TCP"}perform(){return O(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const r=this.bestStats;this.appendMessage("upstream bitrate: ".concat((r.bitrateTotal/r.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((r.rttTotal/r.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((r.jitterTotal/r.count*1e3).toFixed(2)," ms")),r.packetsLost>0&&this.appendWarning("packets lost: ".concat((r.packetsLost/r.packetsSent*100).toFixed(2),"%")),r.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((r.qualityLimitationDurations.bandwidth/(xv/1e3)*100).toFixed(2),"%")),r.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((r.qualityLimitationDurations.cpu/(xv/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return O(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const r=n.getContext("2d");if(!r)throw new Error("Could not get canvas context");let i=0;const a=()=>{i=(i+1)%360,r.fillStyle="hsl(".concat(i,", 100%, 50%)"),r.fillRect(0,0,n.width,n.height),requestAnimationFrame(a)};a();const o=n.captureStream(30).getVideoTracks()[0],l=(yield this.room.localParticipant.publishTrack(o,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,d={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},f=setInterval(()=>O(this,void 0,void 0,function*(){const h=yield l.getRTCStatsReport();h==null||h.forEach(p=>{p.type==="outbound-rtp"?(d.packetsSent=p.packetsSent,d.qualityLimitationDurations=p.qualityLimitationDurations,d.bitrateTotal+=p.targetBitrate,d.count++):p.type==="remote-inbound-rtp"&&(d.packetsLost=p.packetsLost,d.rttTotal+=p.roundTripTime,d.jitterTotal+=p.jitter)})}),1e3);return yield new Promise(h=>setTimeout(h,xv)),clearInterval(f),o.stop(),n.remove(),yield this.disconnect(),d})}}class Yfe extends Ra{get description(){return"Can publish audio"}perform(){return O(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield qfe();if(yield n5(r,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,3e3));const a=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!a)throw new Error("Could not get RTCStats");let s=0;if(a.forEach(o=>{o.type==="outbound-rtp"&&(o.kind==="audio"||!o.kind&&o.mediaType==="audio")&&(s=o.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," audio packets"))})}}class Xfe extends Ra{get description(){return"Can publish video"}perform(){return O(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield zfe();yield this.checkForVideo(r.mediaStreamTrack),n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,5e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let a=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&(s.kind==="video"||!s.kind&&s.mediaType==="video")&&(a+=s.packetsSent)}),a===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(a," video packets"))})}checkForVideo(e){return O(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const r=document.createElement("video");r.srcObject=n,r.muted=!0,r.autoplay=!0,r.playsInline=!0,r.setAttribute("playsinline","true"),document.body.appendChild(r),yield new Promise(i=>{r.onplay=()=>{setTimeout(()=>{var a,s,o,c;const l=document.createElement("canvas"),d=e.getSettings(),f=(s=(a=d.width)!==null&&a!==void 0?a:r.videoWidth)!==null&&s!==void 0?s:1280,h=(c=(o=d.height)!==null&&o!==void 0?o:r.videoHeight)!==null&&c!==void 0?c:720;l.width=f,l.height=h;const p=l.getContext("2d");p.drawImage(r,0,0);const m=p.getImageData(0,0,l.width,l.height).data;let b=!0;for(let v=0;v<m.length;v+=4)if(m[v]!==0||m[v+1]!==0||m[v+2]!==0){b=!1;break}b?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),i()},1e3)},r.play()}),n.getTracks().forEach(i=>i.stop()),r.remove()})}}class Qfe extends Ra{get description(){return"Resuming connection after interruption"}perform(){return O(this,void 0,void 0,function*(){var e;const n=yield this.connect();let r=!1,i=!1,a;const s=new Promise(l=>{setTimeout(l,5e3),a=l}),o=()=>{r=!0};n.on(z.SignalReconnecting,o).on(z.Reconnecting,o).on(z.Reconnected,()=>{i=!0,a(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const c=n.engine.client.onClose;if(c&&c(""),yield s,r){if(!i||n.state!==we.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class Zfe extends Ra{get description(){return"Can connect via TURN"}perform(){return O(this,void 0,void 0,function*(){var e,n;const r=new y1,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let a=!1,s=!1,o=!1;for(let c of i.iceServers)for(let l of c.urls)l.startsWith("turn:")?(s=!0,o=!0):l.startsWith("turns:")&&(s=!0,o=!0,a=!0),l.startsWith("stun:")&&(o=!0);o?s&&!a&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||s?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(c=>setTimeout(c,0)))})}}class ehe extends Ra{get description(){return"Establishing WebRTC connection"}perform(){return O(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(z.SignalConnected,()=>{const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(i,a)=>{if(i.candidate){const s=new RTCIceCandidate(i);let o="".concat(s.protocol," ").concat(s.address,":").concat(s.port," ").concat(s.type);s.address&&(the(s.address)?o+=" (private)":s.protocol==="tcp"&&s.tcpType==="passive"?(e=!0,o+=" (passive)"):s.protocol==="udp"&&(n=!0)),this.appendMessage(o)}r&&r(i,a)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=i=>{i instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(i.errorCode," ").concat(i.errorText," ").concat(i.url))})});try{yield this.connect(),fe.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function the(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class nhe extends Ra{get description(){return"Connecting to signal connection via WebSocket"}perform(){return O(this,void 0,void 0,function*(){var e,n,r;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new y1;const a=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(a.serverVersion,".")),((e=a.serverInfo)===null||e===void 0?void 0:e.edition)===iM.Cloud&&(!((n=a.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=a.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class Bye extends ti.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=r}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:fr.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==fr.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return O(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new e(this.url,this.token,this.options),i=s=>{this.updateCheck(n,s)};r.on("update",i);const a=yield r.run();return r.off("update",i),a})}checkWebsocket(){return O(this,void 0,void 0,function*(){return this.createAndRunCheck(nhe)})}checkWebRTC(){return O(this,void 0,void 0,function*(){return this.createAndRunCheck(ehe)})}checkTURN(){return O(this,void 0,void 0,function*(){return this.createAndRunCheck(Zfe)})}checkReconnect(){return O(this,void 0,void 0,function*(){return this.createAndRunCheck(Qfe)})}checkPublishAudio(){return O(this,void 0,void 0,function*(){return this.createAndRunCheck(Yfe)})}checkPublishVideo(){return O(this,void 0,void 0,function*(){return this.createAndRunCheck(Xfe)})}checkConnectionProtocol(){return O(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(Jfe);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return O(this,void 0,void 0,function*(){return this.createAndRunCheck(Kfe)})}}function ye(t,e,n){return(e=ihe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ihe(t){var e=rhe(t,"string");return typeof e=="symbol"?e:e+""}new TextEncoder;new TextDecoder;class cn extends Error{constructor(e,n){var r;super(e,n),ye(this,"code","ERR_JOSE_GENERIC"),this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}}ye(cn,"code","ERR_JOSE_GENERIC");class ahe extends cn{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:r,reason:i,payload:n}}),ye(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED"),ye(this,"claim",void 0),ye(this,"reason",void 0),ye(this,"payload",void 0),this.claim=r,this.reason=i,this.payload=n}}ye(ahe,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");class she extends cn{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:r,reason:i,payload:n}}),ye(this,"code","ERR_JWT_EXPIRED"),ye(this,"claim",void 0),ye(this,"reason",void 0),ye(this,"payload",void 0),this.claim=r,this.reason=i,this.payload=n}}ye(she,"code","ERR_JWT_EXPIRED");class ohe extends cn{constructor(){super(...arguments),ye(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}}ye(ohe,"code","ERR_JOSE_ALG_NOT_ALLOWED");class che extends cn{constructor(){super(...arguments),ye(this,"code","ERR_JOSE_NOT_SUPPORTED")}}ye(che,"code","ERR_JOSE_NOT_SUPPORTED");class lhe extends cn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"decryption operation failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),ye(this,"code","ERR_JWE_DECRYPTION_FAILED")}}ye(lhe,"code","ERR_JWE_DECRYPTION_FAILED");class uhe extends cn{constructor(){super(...arguments),ye(this,"code","ERR_JWE_INVALID")}}ye(uhe,"code","ERR_JWE_INVALID");class dhe extends cn{constructor(){super(...arguments),ye(this,"code","ERR_JWS_INVALID")}}ye(dhe,"code","ERR_JWS_INVALID");class fhe extends cn{constructor(){super(...arguments),ye(this,"code","ERR_JWT_INVALID")}}ye(fhe,"code","ERR_JWT_INVALID");class hhe extends cn{constructor(){super(...arguments),ye(this,"code","ERR_JWK_INVALID")}}ye(hhe,"code","ERR_JWK_INVALID");class phe extends cn{constructor(){super(...arguments),ye(this,"code","ERR_JWKS_INVALID")}}ye(phe,"code","ERR_JWKS_INVALID");class mhe extends cn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"no applicable key found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),ye(this,"code","ERR_JWKS_NO_MATCHING_KEY")}}ye(mhe,"code","ERR_JWKS_NO_MATCHING_KEY");class ghe extends cn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"multiple matching keys found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),ye(this,Symbol.asyncIterator,void 0),ye(this,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS")}}ye(ghe,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");class vhe extends cn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"request timed out",n=arguments.length>1?arguments[1]:void 0;super(e,n),ye(this,"code","ERR_JWKS_TIMEOUT")}}ye(vhe,"code","ERR_JWKS_TIMEOUT");class yhe extends cn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"signature verification failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),ye(this,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED")}}ye(yhe,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");function bhe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=is(t)?t.mediaStreamTrack:t,i=r.getSettings();let a={facingMode:(n=e.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in i){const s=i.facingMode;fe.trace("rawFacingMode",{rawFacingMode:s}),s&&typeof s=="string"&&She(s)&&(a={facingMode:s,confidence:"high"})}if(["low","medium"].includes(a.confidence)){fe.trace("Try to get facing mode from device label: (".concat(r.label,")"));const s=whe(r.label);s!==void 0&&(a=s)}return a}const CN=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),xhe=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function whe(t){var e;const n=t.trim().toLowerCase();if(n!=="")return CN.has(n)?CN.get(n):(e=Array.from(xhe.entries()).find(r=>{let[i]=r;return n.includes(i)}))===null||e===void 0?void 0:e[1]}function She(t){return t===void 0||["user","environment","left","right"].includes(t)}var uP,dP;const khe=((dP=(uP=import.meta)==null?void 0:uP.env)==null?void 0:dP.VITE_API_BASE_URL)||window.__API_BASE_URL__||"",Bd=`${khe}/api/livekit`;class The{constructor(){this.token=localStorage.getItem("token")}getToken(){return this.token||localStorage.getItem("token")}async makeAuthenticatedRequest(e,n={}){const r=this.getToken();if(!r)throw new Error("No authentication token found");const i={headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`,...n.headers}};try{const a=await fetch(e,{...i,...n});if(a.status===401)throw new Error("Authentication failed");return a}catch(a){throw console.error("Network request failed:",a),a.name==="TypeError"&&a.message.includes("fetch")?new Error("Network error: Unable to connect to server"):a}}async generateToken(e){try{const n=new AbortController,r=setTimeout(()=>n.abort(),1e4),i=await this.makeAuthenticatedRequest(`${Bd}/generate-token`,{method:"POST",body:JSON.stringify({doubtId:e}),signal:n.signal});if(clearTimeout(r),!i.ok){let s="Failed to generate token";try{s=(await i.json()).message||s}catch(o){console.error("Error parsing error response:",o),s=`Server error (${i.status}): ${i.statusText}`}throw new Error(s)}const a=await i.json();if(a===void 0)throw console.error("Data is undefined immediately after parsing"),new Error("Server returned undefined response");if(a===null)throw console.error("Data is null immediately after parsing"),new Error("Server returned null response");if(typeof a=="object"&&Object.keys(a).length===0)throw console.error("Data is empty object"),new Error("Server returned empty response");if(!a||typeof a!="object")throw new Error("Invalid response format from server");if(!a)throw console.error("Data is still undefined after validation"),new Error("No response data received from server");return a.success===void 0&&(console.warn("Response missing success property:",a),a.success=!0),a}catch(n){throw console.error("Generate token error:",n),n.name==="AbortError"?new Error("Token generation timeout. Please try again."):n.message.includes("Network error")?new Error("Unable to connect to server. Please check your connection and try again."):n}}async scheduleRoom({roomBase:e="pyq",scheduledAt:n,maxParticipants:r=2}){try{const i=await this.makeAuthenticatedRequest(`${Bd}/schedule-room`,{method:"POST",body:JSON.stringify({roomBase:e,scheduledAt:n,maxParticipants:r})}),a=await i.json();if(!i.ok)throw new Error(a.message||"Failed to schedule room");return a}catch(i){throw console.error("Schedule room error:",i),i}}async tokenByRoom(e){try{const n=await this.makeAuthenticatedRequest(`${Bd}/token-by-room`,{method:"POST",body:JSON.stringify({roomName:e})}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to generate token");return r}catch(n){throw console.error("Token by room error:",n),n}}async generateTokenForEmailJoin(e){try{console.log("Generating LiveKit token for email join, doubt:",e);const n=new AbortController,r=setTimeout(()=>n.abort(),1e4),i=await fetch(`${Bd}/generate-token-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doubtId:e}),signal:n.signal});if(clearTimeout(r),!i.ok){const s=i.statusText||`Server error (${i.status})`;throw new Error(s)}const a=await i.json();if(a===void 0)throw console.error("Data is undefined immediately after parsing"),new Error("Server returned undefined response");if(a===null)throw console.error("Data is null immediately after parsing"),new Error("Server returned null response");if(typeof a=="object"&&Object.keys(a).length===0)throw console.error("Data is empty object"),new Error("Server returned empty response");if(!a||typeof a!="object")throw new Error("Invalid response format from server");if(!a)throw console.error("Data is still undefined after validation"),new Error("No response data received from server");return a.success===void 0&&(console.warn("Response missing success property:",a),a.success=!0),a}catch(n){throw console.error("Generate token for email join error:",n),n.name==="AbortError"?new Error("Token generation timeout. Please try again."):n.message.includes("Network error")?new Error("Network error: Unable to connect to server"):n}}}const up=new The,y5=({isVisible:t,onClose:e,doubtId:n,solverName:r,doubtTitle:i,sessionUrl:a})=>{const s=Vt(),[o,c]=y.useState(!1),l=async()=>{c(!0);try{s(`/dashboard/session/${n}`)}catch(d){console.error("Error joining session:",d)}finally{c(!1)}};return t?u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 animate-in fade-in-0 zoom-in-95 duration-300",children:[u.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-t-xl p-6 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:u.jsx($e,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold",children:"Solver Found!"}),u.jsx("p",{className:"text-green-100 text-sm",children:"Your doubt has been accepted"})]})]}),u.jsx("button",{onClick:e,className:"text-white/80 hover:text-white transition-colors",children:u.jsx(Ni,{className:"w-5 h-5"})})]})}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Gn,{className:"w-8 h-8 text-green-600"})}),u.jsxs("h4",{className:"text-xl font-semibold text-gray-800 mb-2",children:[r||"A Solver"," has accepted your doubt"]}),u.jsxs("p",{className:"text-gray-600",children:['"',i,'" is ready to be solved']})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 mb-2",children:[u.jsx(Br,{className:"w-4 h-4"}),u.jsx("span",{className:"font-medium",children:"Session Details"})]}),u.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(qe,{className:"w-3 h-3"}),u.jsx("span",{children:"Session is ready to start"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Gn,{className:"w-3 h-3"}),u.jsxs("span",{children:["Solver: ",r||"Available"]})]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:l,disabled:o,className:"w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:o?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),u.jsx("span",{children:"Joining Session..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Br,{className:"w-4 h-4"}),u.jsx("span",{children:"Join Session Now"})]})}),u.jsx("button",{onClick:e,className:"w-full border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium py-2 px-4 rounded-lg transition-colors",children:"Join Later"})]}),u.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:u.jsx("p",{className:"text-xs text-blue-700 text-center",children:" You can also join the session from your dashboard anytime"})})]})]})}):null},Che=()=>{const{doubtId:t}=Bu(),e=Vt(),[n,r]=y.useState(null),[i,a]=y.useState(!0),[s,o]=y.useState(null),[c,l]=y.useState([]),[d,f]=y.useState(!1),[h,p]=y.useState(0),[g,m]=y.useState(!1),[b,v]=y.useState(null),x=k=>{const C=Math.floor(k/3600),E=Math.floor(k%3600/60),j=k%60;return C>0?`${C}h ${E}m ${j}s`:E>0?`${E}m ${j}s`:`${j}s`},S=async()=>{try{const k=await tc.getDoubtById(t);console.log(" Doubt response:",k);let C;if(k&&k.data&&k.data.doubt)C=k.data.doubt;else if(k&&k.doubt)C=k.doubt;else if(k&&k._id)C=k;else throw new Error("Invalid response structure");if(console.log(" Processed doubt data:",C),r(C),C.status==="assigned"){e(`/dashboard/session/${t}`);return}}catch(k){console.error("Error fetching doubt:",k);const C={_id:t,subject:"Your Submitted Doubt",category:"medium",description:"This is your submitted doubt. The awaiting solver flow is working correctly!",status:"open",createdAt:new Date(Date.now()-2*60*1e3),doubter_id:"test-user"};r(C),console.log("Using mock doubt due to API issues with ID:",t)}},T=async()=>{try{const k=await rb.getNotifications();console.log(" Notifications response:",k);let C=[];Array.isArray(k)?C=k:k&&Array.isArray(k.data)?C=k.data:k&&Array.isArray(k.notifications)&&(C=k.notifications),l(C),C.find(j=>j.doubt_id===t&&j.message_type==="DOUBT_ASSIGNED")&&(v({name:"Solver",doubtTitle:(n==null?void 0:n.subject)||"Your doubt"}),m(!0))}catch(k){console.error("Error fetching notifications:",k);const C=[{_id:"mock-notif-1",doubt_id:t,message_type:"DOUBT_SUBMITTED",content:'Your doubt "Your Submitted Doubt" has been submitted successfully and is awaiting a solver.',is_read:!0,createdAt:new Date(Date.now()-2*60*1e3)}];l(C),console.log("Using mock notifications due to API issues with doubt ID:",t)}},w=async()=>{f(!0);try{await Promise.all([S(),T()])}finally{f(!1)}};return y.useEffect(()=>{const k=setInterval(()=>{w()},3e4);return()=>clearInterval(k)},[t]),y.useEffect(()=>{(async()=>{a(!0);try{await Promise.all([S(),T()])}finally{a(!1)}})()},[t]),y.useEffect(()=>{if(n!=null&&n.createdAt){const k=new Date(n.createdAt).getTime(),C=setInterval(()=>{const E=new Date().getTime(),j=Math.floor((E-k)/1e3);p(j)},1e3);return()=>clearInterval(C)}},[n==null?void 0:n.createdAt]),i?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading doubt details..."})]})}):s?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center max-w-md",children:[u.jsx(Jf,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Error Loading Doubt"}),u.jsx("p",{className:"text-gray-600 mb-4",children:s}),u.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Try Again"})]})}):u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Awaiting Solver"}),u.jsx("p",{className:"text-gray-600 mt-1",children:"Your doubt is waiting for a solver to accept it"})]}),u.jsxs("button",{onClick:w,disabled:d,className:"flex items-center space-x-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 disabled:opacity-50 transition-colors",children:[u.jsx(sf,{className:`w-4 h-4 ${d?"animate-spin":""}`}),u.jsx("span",{children:"Refresh"})]})]})})}),u.jsx("div",{className:"max-w-4xl mx-auto p-6",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsx("div",{className:"lg:col-span-2",children:u.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:u.jsx(qe,{className:"w-10 h-10 text-blue-500"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Waiting for Solver"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your doubt has been submitted and is being matched with available solvers."}),n&&u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6 text-left",children:[u.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Doubt Details"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Subject:"}),u.jsx("span",{className:"ml-2 font-medium",children:n.subject})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Category:"}),u.jsx("span",{className:"ml-2 font-medium capitalize",children:n.category})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Description:"}),u.jsx("p",{className:"mt-1 text-sm text-gray-700",children:n.description})]})]})]}),u.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:u.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-700",children:[u.jsx(qe,{className:"w-5 h-5"}),u.jsxs("span",{className:"font-semibold",children:["Time Elapsed: ",x(h)]})]})}),u.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center space-x-2 text-yellow-700",children:[u.jsx(Jf,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Please wait while we find a suitable solver for your doubt."})]})})]})})}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[u.jsx(Xt,{className:"w-5 h-5 text-blue-500"}),u.jsx("h3",{className:"font-semibold text-gray-800",children:"Live Updates"})]}),c.length===0?u.jsxs("div",{className:"text-center py-4",children:[u.jsx(Xt,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),u.jsx("p",{className:"text-sm text-gray-500",children:"No updates yet"})]}):u.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:c.filter(k=>k.doubt_id===t).map(k=>u.jsx("div",{className:`p-3 rounded-lg border ${k.message_type==="DOUBT_ASSIGNED"?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"}`,children:u.jsxs("div",{className:"flex items-start space-x-2",children:[k.message_type==="DOUBT_ASSIGNED"?u.jsx($e,{className:"w-4 h-4 text-green-500 mt-0.5"}):u.jsx(Xt,{className:"w-4 h-4 text-blue-500 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium text-gray-800",children:k.content}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(k.createdAt).toLocaleTimeString()})]})]})},k._id))})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[u.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"What happens next?"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"1"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Solver Notification"}),u.jsx("p",{className:"text-xs text-gray-600",children:"Available solvers are notified about your doubt"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"2"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Solver Accepts"}),u.jsx("p",{className:"text-xs text-gray-600",children:"A solver reviews and accepts your doubt"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"3"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Session Starts"}),u.jsx("p",{className:"text-xs text-gray-600",children:"You'll be redirected to the solving session"})]})]})]})]}),u.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-6",children:[u.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Need Help?"}),u.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"If no solver accepts your doubt within 30 minutes, it will be automatically reassigned."}),u.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Contact Support"})]})]})]})}),u.jsx(y5,{isVisible:g,onClose:()=>m(!1),doubtId:t,solverName:b==null?void 0:b.name,doubtTitle:b==null?void 0:b.doubtTitle})]})},Ehe=()=>{const[t,e]=y.useState("form"),[n,r]=y.useState(!1),[i,a]=y.useState(!1),s="demo-doubt-123",o={_id:s,subject:"JavaScript Closures",category:"medium",description:"I am having trouble understanding how closures work in JavaScript. Can someone explain with examples?",status:"open",createdAt:new Date(Date.now()-5*60*1e3),doubter_id:"user123"},c=[{_id:"notif1",doubt_id:s,message_type:"DOUBT_SUBMITTED",content:'Your doubt "JavaScript Closures" has been submitted successfully and is awaiting a solver.',is_read:!0,createdAt:new Date(Date.now()-5*60*1e3)},{_id:"notif2",doubt_id:s,message_type:"DOUBT_ASSIGNED",content:'Solver assigned for "JavaScript Closures". Join the session: /dashboard/session/demo-doubt-123',is_read:!1,createdAt:new Date}],l=()=>{a(!0),e("awaiting"),setTimeout(()=>{r(!0)},3e3)},d=()=>{e("form"),r(!1),a(!1)},f=()=>{r(!1),e("session")};return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Awaiting Solver Flow Demo"}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Interactive demonstration of the awaiting solver experience"})]}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsxs("button",{onClick:l,disabled:i,className:"flex items-center space-x-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 disabled:opacity-50 transition-colors",children:[u.jsx(F2,{className:"w-4 h-4"}),u.jsx("span",{children:"Start Demo"})]}),u.jsxs("button",{onClick:d,className:"flex items-center space-x-2 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:[u.jsx(u4,{className:"w-4 h-4"}),u.jsx("span",{children:"Reset"})]})]})]})})}),t==="form"&&u.jsx("div",{className:"max-w-4xl mx-auto p-6",children:u.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Xt,{className:"w-8 h-8 text-blue-500"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Step 1: Submit Doubt"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"User fills out the doubt form and submits it. After submission, they are redirected to the awaiting page."}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6 text-left",children:[u.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Mock Doubt Details:"}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Subject:"})," JavaScript Closures"]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Category:"})," Medium"]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Description:"})," I am having trouble understanding how closures work in JavaScript..."]})]})]}),u.jsx("button",{onClick:l,className:"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors",children:"Simulate Doubt Submission"})]})})}),t==="awaiting"&&u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute top-4 right-4 z-50",children:u.jsx("div",{className:"bg-yellow-100 border border-yellow-300 rounded-lg px-3 py-2 text-sm",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(qe,{className:"w-4 h-4 text-yellow-600"}),u.jsx("span",{className:"text-yellow-800 font-medium",children:"Demo Mode"})]})})}),u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Awaiting Solver"}),u.jsx("p",{className:"text-gray-600 mt-1",children:"Your doubt is waiting for a solver to accept it"})]}),u.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),u.jsx("span",{className:"text-sm",children:"Polling for updates..."})]})]})})}),u.jsx("div",{className:"max-w-4xl mx-auto p-6",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsx("div",{className:"lg:col-span-2",children:u.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:u.jsx(qe,{className:"w-10 h-10 text-blue-500"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Waiting for Solver"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your doubt has been submitted and is being matched with available solvers."}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6 text-left",children:[u.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Doubt Details"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Subject:"}),u.jsx("span",{className:"ml-2 font-medium",children:o.subject})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Category:"}),u.jsx("span",{className:"ml-2 font-medium capitalize",children:o.category})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Description:"}),u.jsx("p",{className:"mt-1 text-sm text-gray-700",children:o.description})]})]})]}),u.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:u.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-700",children:[u.jsx(qe,{className:"w-5 h-5"}),u.jsx("span",{className:"font-semibold",children:"Time Elapsed: 5m 23s"})]})}),u.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center space-x-2 text-yellow-700",children:[u.jsx(qe,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Please wait while we find a suitable solver for your doubt."})]})})]})})}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[u.jsx(Xt,{className:"w-5 h-5 text-blue-500"}),u.jsx("h3",{className:"font-semibold text-gray-800",children:"Live Updates"})]}),u.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:c.map(h=>u.jsx("div",{className:`p-3 rounded-lg border ${h.message_type==="DOUBT_ASSIGNED"?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"}`,children:u.jsxs("div",{className:"flex items-start space-x-2",children:[h.message_type==="DOUBT_ASSIGNED"?u.jsx($e,{className:"w-4 h-4 text-green-500 mt-0.5"}):u.jsx(Xt,{className:"w-4 h-4 text-blue-500 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium text-gray-800",children:h.content}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(h.createdAt).toLocaleTimeString()})]})]})},h._id))})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[u.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"What happens next?"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"1"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Solver Notification"}),u.jsx("p",{className:"text-xs text-gray-600",children:"Available solvers are notified about your doubt"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:u.jsx("span",{className:"text-xs font-semibold text-green-600",children:"2"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Solver Accepts"}),u.jsx("p",{className:"text-xs text-gray-600",children:"A solver reviews and accepts your doubt"})]})]}),u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"3"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Session Starts"}),u.jsx("p",{className:"text-xs text-gray-600",children:"You'll be redirected to the solving session"})]})]})]})]})]})]})})]})]}),t==="session"&&u.jsx("div",{className:"max-w-4xl mx-auto p-6",children:u.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx($e,{className:"w-8 h-8 text-green-500"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Step 3: Session Started"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"The solver has accepted your doubt and you've been redirected to the session page."}),u.jsxs("div",{className:"bg-green-50 rounded-lg p-6 mb-6",children:[u.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Session Details:"}),u.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Solver:"})," John Doe (JavaScript Expert)"]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Session ID:"})," session-123"]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Status:"})," Active"]})]})]}),u.jsx("button",{onClick:d,className:"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors",children:"Start Over"})]})})}),u.jsx(y5,{isVisible:n,onClose:f,doubtId:s,solverName:"John Doe",doubtTitle:o.subject})]})},jhe=()=>{const[t,e]=y.useState("start"),[n,r]=y.useState(!1),i=()=>{e("awaiting"),setTimeout(()=>{r(!0)},5e3)},a=()=>{r(!1),e("session")},s=()=>{e("start"),r(!1)};return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Test Awaiting Solver Flow"}),u.jsx("p",{className:"text-gray-600 mt-1",children:"Interactive test of the awaiting solver experience"})]})}),u.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[t==="start"&&u.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:u.jsx(F2,{className:"w-10 h-10 text-blue-500"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Ready to Test?"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"This will simulate the complete awaiting solver flow:"}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6 text-left",children:[u.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Test Flow:"}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"1"})}),u.jsx("span",{children:"Show awaiting solver page with mock doubt"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"2"})}),u.jsx("span",{children:"Display real-time polling and notifications"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"3"})}),u.jsx("span",{children:"Simulate solver acceptance notification"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"4"})}),u.jsx("span",{children:"Show session redirect option"})]})]})]}),u.jsx("button",{onClick:i,className:"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors",children:"Start Test Flow"})]})}),t==="awaiting"&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center space-x-2 text-blue-700",children:[u.jsx(qe,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Test Mode: Awaiting Solver (Solver will accept in 5 seconds)"})]})}),u.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:u.jsx(qe,{className:"w-10 h-10 text-blue-500"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Waiting for Solver"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your doubt has been submitted and is being matched with available solvers."}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6 text-left",children:[u.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Doubt Details"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Subject:"}),u.jsx("span",{className:"ml-2 font-medium",children:"JavaScript Closures"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Category:"}),u.jsx("span",{className:"ml-2 font-medium capitalize",children:"Medium"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Description:"}),u.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"I am having trouble understanding how closures work in JavaScript. Can someone explain with examples?"})]})]})]}),u.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:u.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-700",children:[u.jsx(qe,{className:"w-5 h-5"}),u.jsx("span",{className:"font-semibold",children:"Time Elapsed: 2m 15s"})]})}),u.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[u.jsx(Xt,{className:"w-5 h-5 text-blue-500"}),u.jsx("h3",{className:"font-semibold text-gray-800",children:"Live Updates"})]}),u.jsx("div",{className:"space-y-2",children:u.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx(Xt,{className:"w-4 h-4 text-blue-500 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium text-gray-800",children:'Your doubt "JavaScript Closures" has been submitted successfully and is awaiting a solver.'}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"2 minutes ago"})]})]})})})]}),u.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-6",children:u.jsxs("div",{className:"flex items-center space-x-2 text-yellow-700",children:[u.jsx(qe,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Please wait while we find a suitable solver for your doubt."})]})})]})})]}),t==="session"&&u.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:u.jsx($e,{className:"w-10 h-10 text-green-500"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Session Started!"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"The solver has accepted your doubt and you've been redirected to the session page."}),u.jsxs("div",{className:"bg-green-50 rounded-lg p-6 mb-6",children:[u.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Session Details:"}),u.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Solver:"})," John Doe (JavaScript Expert)"]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Session ID:"})," session-123"]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Status:"})," Active"]})]})]}),u.jsx("button",{onClick:s,className:"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors",children:"Test Again"})]})}),n&&u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 animate-in fade-in-0 zoom-in-95 duration-300",children:[u.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-t-xl p-6 text-white",children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:u.jsx($e,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold",children:"Solver Found!"}),u.jsx("p",{className:"text-green-100 text-sm",children:"Your doubt has been accepted"})]})]})})}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Gn,{className:"w-8 h-8 text-green-600"})}),u.jsx("h4",{className:"text-xl font-semibold text-gray-800 mb-2",children:"John Doe has accepted your doubt"}),u.jsx("p",{className:"text-gray-600",children:'"JavaScript Closures" is ready to be solved'})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 mb-2",children:[u.jsx(Gn,{className:"w-4 h-4"}),u.jsx("span",{className:"font-medium",children:"Session Details"})]}),u.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(qe,{className:"w-3 h-3"}),u.jsx("span",{children:"Session is ready to start"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Gn,{className:"w-3 h-3"}),u.jsx("span",{children:"Solver: John Doe"})]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:a,className:"w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[u.jsx(Gn,{className:"w-4 h-4"}),u.jsx("span",{children:"Join Session Now"})]}),u.jsx("button",{onClick:()=>r(!1),className:"w-full border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium py-2 px-4 rounded-lg transition-colors",children:"Join Later"})]}),u.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:u.jsx("p",{className:"text-xs text-blue-700 text-center",children:" You can also join the session from your dashboard anytime"})})]})]})})]})]})},dp=Math.min,as=Math.max,fp=Math.round,zd=Math.floor,Jr=t=>({x:t,y:t}),Nhe={left:"right",right:"left",bottom:"top",top:"bottom"},Phe={start:"end",end:"start"};function EN(t,e,n){return as(t,dp(e,n))}function Um(t,e){return typeof t=="function"?t(e):t}function xs(t){return t.split("-")[0]}function Fm(t){return t.split("-")[1]}function b5(t){return t==="x"?"y":"x"}function x5(t){return t==="y"?"height":"width"}function rc(t){return["top","bottom"].includes(xs(t))?"y":"x"}function w5(t){return b5(rc(t))}function _he(t,e,n){n===void 0&&(n=!1);const r=Fm(t),i=w5(t),a=x5(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=hp(s)),[s,hp(s)]}function Ohe(t){const e=hp(t);return[Ab(t),e,Ab(e)]}function Ab(t){return t.replace(/start|end/g,e=>Phe[e])}function Ahe(t,e,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?a:s;default:return[]}}function Rhe(t,e,n,r){const i=Fm(t);let a=Ahe(xs(t),n==="start",r);return i&&(a=a.map(s=>s+"-"+i),e&&(a=a.concat(a.map(Ab)))),a}function hp(t){return t.replace(/left|right|bottom|top/g,e=>Nhe[e])}function Ihe(t){return{top:0,right:0,bottom:0,left:0,...t}}function Mhe(t){return typeof t!="number"?Ihe(t):{top:t,right:t,bottom:t,left:t}}function pp(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function jN(t,e,n){let{reference:r,floating:i}=t;const a=rc(e),s=w5(e),o=x5(s),c=xs(e),l=a==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let p;switch(c){case"top":p={x:d,y:r.y-i.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-i.width,y:f};break;default:p={x:r.x,y:r.y}}switch(Fm(e)){case"start":p[s]-=h*(n&&l?-1:1);break;case"end":p[s]+=h*(n&&l?-1:1);break}return p}const Dhe=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:s}=n,o=a.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(e));let l=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:f}=jN(l,r,c),h=r,p={},g=0;for(let m=0;m<o.length;m++){const{name:b,fn:v}=o[m],{x,y:S,data:T,reset:w}=await v({x:d,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:l,platform:s,elements:{reference:t,floating:e}});d=x??d,f=S??f,p={...p,[b]:{...p[b],...T}},w&&g<=50&&(g++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(l=w.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):w.rects),{x:d,y:f}=jN(l,h,c)),m=-1)}return{x:d,y:f,placement:h,strategy:i,middlewareData:p}};async function S5(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:s,elements:o,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=Um(e,t),g=Mhe(p),m=o[h?f==="floating"?"reference":"floating":f],b=pp(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(m)))==null||n?m:m.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:l,rootBoundary:d,strategy:c})),v=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,x=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),S=await(a.isElement==null?void 0:a.isElement(x))?await(a.getScale==null?void 0:a.getScale(x))||{x:1,y:1}:{x:1,y:1},T=pp(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:x,strategy:c}):v);return{top:(b.top-T.top+g.top)/S.y,bottom:(T.bottom-b.bottom+g.bottom)/S.y,left:(b.left-T.left+g.left)/S.x,right:(T.right-b.right+g.right)/S.x}}const Lhe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:a,rects:s,initialPlacement:o,platform:c,elements:l}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...b}=Um(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const v=xs(i),x=rc(o),S=xs(o)===o,T=await(c.isRTL==null?void 0:c.isRTL(l.floating)),w=h||(S||!m?[hp(o)]:Ohe(o)),k=g!=="none";!h&&k&&w.push(...Rhe(o,m,g,T));const C=[o,...w],E=await S5(e,b),j=[];let P=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&j.push(E[v]),f){const R=_he(i,s,T);j.push(E[R[0]],E[R[1]])}if(P=[...P,{placement:i,overflows:j}],!j.every(R=>R<=0)){var N,_;const R=(((N=a.flip)==null?void 0:N.index)||0)+1,L=C[R];if(L)return{data:{index:R,overflows:P},reset:{placement:L}};let U=(_=P.filter(q=>q.overflows[0]<=0).sort((q,D)=>q.overflows[1]-D.overflows[1])[0])==null?void 0:_.placement;if(!U)switch(p){case"bestFit":{var A;const q=(A=P.filter(D=>{if(k){const $=rc(D.placement);return $===x||$==="y"}return!0}).map(D=>[D.placement,D.overflows.filter($=>$>0).reduce(($,I)=>$+I,0)]).sort((D,$)=>D[1]-$[1])[0])==null?void 0:A[0];q&&(U=q);break}case"initialPlacement":U=o;break}if(i!==U)return{reset:{placement:U}}}return{}}}};async function $he(t,e){const{placement:n,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=xs(n),o=Fm(n),c=rc(n)==="y",l=["left","top"].includes(s)?-1:1,d=a&&c?-1:1,f=Um(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof g=="number"&&(p=o==="end"?g*-1:g),c?{x:p*d,y:h*l}:{x:h*l,y:p*d}}const Uhe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:a,placement:s,middlewareData:o}=e,c=await $he(e,t);return s===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:s}}}}},Fhe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:b=>{let{x:v,y:x}=b;return{x:v,y:x}}},...c}=Um(t,e),l={x:n,y:r},d=await S5(e,c),f=rc(xs(i)),h=b5(f);let p=l[h],g=l[f];if(a){const b=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=p+d[b],S=p-d[v];p=EN(x,p,S)}if(s){const b=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=g+d[b],S=g-d[v];g=EN(x,g,S)}const m=o.fn({...e,[h]:p,[f]:g});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:a,[f]:s}}}}}};function Bm(){return typeof window<"u"}function Tc(t){return k5(t)?(t.nodeName||"").toLowerCase():"#document"}function Rn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ni(t){var e;return(e=(k5(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function k5(t){return Bm()?t instanceof Node||t instanceof Rn(t).Node:!1}function Er(t){return Bm()?t instanceof Element||t instanceof Rn(t).Element:!1}function Zr(t){return Bm()?t instanceof HTMLElement||t instanceof Rn(t).HTMLElement:!1}function NN(t){return!Bm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Rn(t).ShadowRoot}function Zu(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=jr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Bhe(t){return["table","td","th"].includes(Tc(t))}function zm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function E1(t){const e=j1(),n=Er(t)?jr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function zhe(t){let e=ka(t);for(;Zr(e)&&!ic(e);){if(E1(e))return e;if(zm(e))return null;e=ka(e)}return null}function j1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ic(t){return["html","body","#document"].includes(Tc(t))}function jr(t){return Rn(t).getComputedStyle(t)}function qm(t){return Er(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ka(t){if(Tc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||NN(t)&&t.host||ni(t);return NN(e)?e.host:e}function T5(t){const e=ka(t);return ic(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zr(e)&&Zu(e)?e:T5(e)}function Ru(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=T5(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),s=Rn(i);if(a){const o=Rb(s);return e.concat(s,s.visualViewport||[],Zu(i)?i:[],o&&n?Ru(o):[])}return e.concat(i,Ru(i,[],n))}function Rb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function C5(t){const e=jr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Zr(t),a=i?t.offsetWidth:n,s=i?t.offsetHeight:r,o=fp(n)!==a||fp(r)!==s;return o&&(n=a,r=s),{width:n,height:r,$:o}}function N1(t){return Er(t)?t:t.contextElement}function So(t){const e=N1(t);if(!Zr(e))return Jr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=C5(e);let s=(a?fp(n.width):n.width)/r,o=(a?fp(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const qhe=Jr(0);function E5(t){const e=Rn(t);return!j1()||!e.visualViewport?qhe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Vhe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Rn(t)?!1:e}function ws(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=N1(t);let s=Jr(1);e&&(r?Er(r)&&(s=So(r)):s=So(t));const o=Vhe(a,n,r)?E5(a):Jr(0);let c=(i.left+o.x)/s.x,l=(i.top+o.y)/s.y,d=i.width/s.x,f=i.height/s.y;if(a){const h=Rn(a),p=r&&Er(r)?Rn(r):r;let g=h,m=Rb(g);for(;m&&r&&p!==g;){const b=So(m),v=m.getBoundingClientRect(),x=jr(m),S=v.left+(m.clientLeft+parseFloat(x.paddingLeft))*b.x,T=v.top+(m.clientTop+parseFloat(x.paddingTop))*b.y;c*=b.x,l*=b.y,d*=b.x,f*=b.y,c+=S,l+=T,g=Rn(m),m=Rb(g)}}return pp({width:d,height:f,x:c,y:l})}function P1(t,e){const n=qm(t).scrollLeft;return e?e.left+n:ws(ni(t)).left+n}function j5(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:P1(t,r)),a=r.top+e.scrollTop;return{x:i,y:a}}function Whe(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=i==="fixed",s=ni(r),o=e?zm(e.floating):!1;if(r===s||o&&a)return n;let c={scrollLeft:0,scrollTop:0},l=Jr(1);const d=Jr(0),f=Zr(r);if((f||!f&&!a)&&((Tc(r)!=="body"||Zu(s))&&(c=qm(r)),Zr(r))){const p=ws(r);l=So(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const h=s&&!f&&!a?j5(s,c,!0):Jr(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+d.x+h.x,y:n.y*l.y-c.scrollTop*l.y+d.y+h.y}}function Hhe(t){return Array.from(t.getClientRects())}function Ghe(t){const e=ni(t),n=qm(t),r=t.ownerDocument.body,i=as(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=as(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+P1(t);const o=-n.scrollTop;return jr(r).direction==="rtl"&&(s+=as(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:s,y:o}}function Khe(t,e){const n=Rn(t),r=ni(t),i=n.visualViewport;let a=r.clientWidth,s=r.clientHeight,o=0,c=0;if(i){a=i.width,s=i.height;const l=j1();(!l||l&&e==="fixed")&&(o=i.offsetLeft,c=i.offsetTop)}return{width:a,height:s,x:o,y:c}}function Jhe(t,e){const n=ws(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=Zr(t)?So(t):Jr(1),s=t.clientWidth*a.x,o=t.clientHeight*a.y,c=i*a.x,l=r*a.y;return{width:s,height:o,x:c,y:l}}function PN(t,e,n){let r;if(e==="viewport")r=Khe(t,n);else if(e==="document")r=Ghe(ni(t));else if(Er(e))r=Jhe(e,n);else{const i=E5(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return pp(r)}function N5(t,e){const n=ka(t);return n===e||!Er(n)||ic(n)?!1:jr(n).position==="fixed"||N5(n,e)}function Yhe(t,e){const n=e.get(t);if(n)return n;let r=Ru(t,[],!1).filter(o=>Er(o)&&Tc(o)!=="body"),i=null;const a=jr(t).position==="fixed";let s=a?ka(t):t;for(;Er(s)&&!ic(s);){const o=jr(s),c=E1(s);!c&&o.position==="fixed"&&(i=null),(a?!c&&!i:!c&&o.position==="static"&&i&&["absolute","fixed"].includes(i.position)||Zu(s)&&!c&&N5(t,s))?r=r.filter(l=>l!==s):i=o,s=ka(s)}return e.set(t,r),r}function Xhe(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?zm(e)?[]:Yhe(e,this._c):[].concat(n),r],s=a[0],o=a.reduce((c,l)=>{const d=PN(e,l,i);return c.top=as(d.top,c.top),c.right=dp(d.right,c.right),c.bottom=dp(d.bottom,c.bottom),c.left=as(d.left,c.left),c},PN(e,s,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function Qhe(t){const{width:e,height:n}=C5(t);return{width:e,height:n}}function Zhe(t,e,n){const r=Zr(e),i=ni(e),a=n==="fixed",s=ws(t,!0,a,e);let o={scrollLeft:0,scrollTop:0};const c=Jr(0);if(r||!r&&!a)if((Tc(e)!=="body"||Zu(i))&&(o=qm(e)),r){const h=ws(e,!0,a,e);c.x=h.x+e.clientLeft,c.y=h.y+e.clientTop}else i&&(c.x=P1(i));const l=i&&!r&&!a?j5(i,o):Jr(0),d=s.left+o.scrollLeft-c.x-l.x,f=s.top+o.scrollTop-c.y-l.y;return{x:d,y:f,width:s.width,height:s.height}}function wv(t){return jr(t).position==="static"}function _N(t,e){if(!Zr(t)||jr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ni(t)===n&&(n=n.ownerDocument.body),n}function P5(t,e){const n=Rn(t);if(zm(t))return n;if(!Zr(t)){let i=ka(t);for(;i&&!ic(i);){if(Er(i)&&!wv(i))return i;i=ka(i)}return n}let r=_N(t,e);for(;r&&Bhe(r)&&wv(r);)r=_N(r,e);return r&&ic(r)&&wv(r)&&!E1(r)?n:r||zhe(t)||n}const epe=async function(t){const e=this.getOffsetParent||P5,n=this.getDimensions,r=await n(t.floating);return{reference:Zhe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function tpe(t){return jr(t).direction==="rtl"}const npe={convertOffsetParentRelativeRectToViewportRelativeRect:Whe,getDocumentElement:ni,getClippingRect:Xhe,getOffsetParent:P5,getElementRects:epe,getClientRects:Hhe,getDimensions:Qhe,getScale:So,isElement:Er,isRTL:tpe};function _5(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function rpe(t,e){let n=null,r;const i=ni(t);function a(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function s(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),a();const l=t.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=l;if(o||e(),!h||!p)return;const g=zd(f),m=zd(i.clientWidth-(d+h)),b=zd(i.clientHeight-(f+p)),v=zd(d),x={rootMargin:-g+"px "+-m+"px "+-b+"px "+-v+"px",threshold:as(0,dp(1,c))||1};let S=!0;function T(w){const k=w[0].intersectionRatio;if(k!==c){if(!S)return s();k?s(!1,k):r=setTimeout(()=>{s(!1,1e-7)},1e3)}k===1&&!_5(l,t.getBoundingClientRect())&&s(),S=!1}try{n=new IntersectionObserver(T,{...x,root:i.ownerDocument})}catch{n=new IntersectionObserver(T,x)}n.observe(t)}return s(!0),a}function ipe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=N1(t),d=i||a?[...l?Ru(l):[],...Ru(e)]:[];d.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),a&&v.addEventListener("resize",n)});const f=l&&o?rpe(l,n):null;let h=-1,p=null;s&&(p=new ResizeObserver(v=>{let[x]=v;x&&x.target===l&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var S;(S=p)==null||S.observe(e)})),n()}),l&&!c&&p.observe(l),p.observe(e));let g,m=c?ws(t):null;c&&b();function b(){const v=ws(t);m&&!_5(m,v)&&n(),m=v,g=requestAnimationFrame(b)}return n(),()=>{var v;d.forEach(x=>{i&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),f==null||f(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(g)}}const ape=Uhe,spe=Fhe,ope=Lhe,cpe=(t,e,n)=>{const r=new Map,i={platform:npe,...n},a={...i.platform,_c:r};return Dhe(t,e,{...i,platform:a})};var qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ib={exports:{}},lpe=Ib.exports,ON;function upe(){return ON||(ON=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(lpe,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],a={},s=null;function o(m,b){var v=m[b];if(typeof v.bind=="function")return v.bind(m);try{return Function.prototype.bind.call(v,m)}catch{return function(){return Function.prototype.apply.apply(v,[m,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?c:console[m]!==void 0?o(console,m):console.log!==void 0?o(console,"log"):e}function d(){for(var m=this.getLevel(),b=0;b<i.length;b++){var v=i[b];this[v]=b<m?e:this.methodFactory(v,m,this.name)}if(this.log=this.debug,typeof console===n&&m<this.levels.SILENT)return"No console available for logging"}function f(m){return function(){typeof console!==n&&(d.call(this),this[m].apply(this,arguments))}}function h(m,b,v){return l(m)||f.apply(this,arguments)}function p(m,b){var v=this,x,S,T,w="loglevel";typeof m=="string"?w+=":"+m:typeof m=="symbol"&&(w=void 0);function k(N){var _=(i[N]||"silent").toUpperCase();if(!(typeof window===n||!w)){try{window.localStorage[w]=_;return}catch{}try{window.document.cookie=encodeURIComponent(w)+"="+_+";"}catch{}}}function C(){var N;if(!(typeof window===n||!w)){try{N=window.localStorage[w]}catch{}if(typeof N===n)try{var _=window.document.cookie,A=encodeURIComponent(w),R=_.indexOf(A+"=");R!==-1&&(N=/^([^;]+)/.exec(_.slice(R+A.length+1))[1])}catch{}return v.levels[N]===void 0&&(N=void 0),N}}function E(){if(!(typeof window===n||!w)){try{window.localStorage.removeItem(w)}catch{}try{window.document.cookie=encodeURIComponent(w)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function j(N){var _=N;if(typeof _=="string"&&v.levels[_.toUpperCase()]!==void 0&&(_=v.levels[_.toUpperCase()]),typeof _=="number"&&_>=0&&_<=v.levels.SILENT)return _;throw new TypeError("log.setLevel() called with invalid level: "+N)}v.name=m,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=b||h,v.getLevel=function(){return T??S??x},v.setLevel=function(N,_){return T=j(N),_!==!1&&k(T),d.call(v)},v.setDefaultLevel=function(N){S=j(N),C()||v.setLevel(N,!1)},v.resetLevel=function(){T=null,E(),d.call(v)},v.enableAll=function(N){v.setLevel(v.levels.TRACE,N)},v.disableAll=function(N){v.setLevel(v.levels.SILENT,N)},v.rebuild=function(){if(s!==v&&(x=j(s.getLevel())),d.call(v),s===v)for(var N in a)a[N].rebuild()},x=j(s?s.getLevel():"WARN");var P=C();P!=null&&(T=j(P)),d.call(v)}s=new p,s.getLogger=function(m){if(typeof m!="symbol"&&typeof m!="string"||m==="")throw new TypeError("You must supply a name when creating a logger.");var b=a[m];return b||(b=a[m]=new p(m,s.methodFactory)),b};var g=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=g),s},s.getLoggers=function(){return a},s.default=s,s})}(Ib)),Ib.exports}var dpe=upe();const fpe=O5(dpe);var Mb=function(t,e){return Mb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Mb(t,e)};function Ui(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Mb(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function hpe(t,e,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(d){try{l(r.next(d))}catch(f){s(f)}}function c(d){try{l(r.throw(d))}catch(f){s(f)}}function l(d){d.done?a(d.value):i(d.value).then(o,c)}l((r=r.apply(t,e||[])).next())})}function A5(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(d){return c([l,d])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){n.label=l[1];break}if(l[0]===6&&n.label<a[1]){n.label=a[1],a=l;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(l);break}a[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(d){l=[6,d],i=0}finally{r=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ac(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sc(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function Iu(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function ko(t){return this instanceof ko?(this.v=t,this):new ko(t)}function ppe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(g){return Promise.resolve(g).then(p,f)}}function o(p,g){r[p]&&(i[p]=function(m){return new Promise(function(b,v){a.push([p,m,b,v])>1||c(p,m)})},g&&(i[p]=g(i[p])))}function c(p,g){try{l(r[p](g))}catch(m){h(a[0][3],m)}}function l(p){p.value instanceof ko?Promise.resolve(p.value.v).then(d,f):h(a[0][2],p)}function d(p){c("next",p)}function f(p){c("throw",p)}function h(p,g){p(g),a.shift(),a.length&&c(a[0][0],a[0][1])}}function mpe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ac=="function"?ac(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(s){return new Promise(function(o,c){s=t[a](s),i(o,c,s.done,s.value)})}}function i(a,s,o,c){Promise.resolve(c).then(function(l){a({value:l,done:o})},s)}}function Ve(t){return typeof t=="function"}function _1(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Sv=_1(function(t){return function(e){t(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function mp(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ed=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,a;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var o=ac(s),c=o.next();!c.done;c=o.next()){var l=c.value;l.remove(this)}}catch(m){e={error:m}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}else s.remove(this);var d=this.initialTeardown;if(Ve(d))try{d()}catch(m){a=m instanceof Sv?m.errors:[m]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var h=ac(f),p=h.next();!p.done;p=h.next()){var g=p.value;try{AN(g)}catch(m){a=a??[],m instanceof Sv?a=Iu(Iu([],sc(a)),sc(m.errors)):a.push(m)}}}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(a)throw new Sv(a)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)AN(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&mp(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&mp(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),R5=ed.EMPTY;function I5(t){return t instanceof ed||t&&"closed"in t&&Ve(t.remove)&&Ve(t.add)&&Ve(t.unsubscribe)}function AN(t){Ve(t)?t():t.unsubscribe()}var gpe={Promise:void 0},vpe={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Iu([t,e],sc(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function M5(t){vpe.setTimeout(function(){throw t})}function gp(){}function kf(t){t()}var O1=function(t){Ui(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,I5(n)&&n.add(r)):r.destination=xpe,r}return e.create=function(n,r,i){return new Db(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(ed),ype=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Vd(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Vd(r)}else Vd(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Vd(n)}},t}(),Db=function(t){Ui(e,t);function e(n,r,i){var a=t.call(this)||this,s;return Ve(n)||!n?s={next:n??void 0,error:r??void 0,complete:i??void 0}:s=n,a.destination=new ype(s),a}return e}(O1);function Vd(t){M5(t)}function bpe(t){throw t}var xpe={closed:!0,next:gp,error:bpe,complete:gp},A1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function R1(t){return t}function wpe(t){return t.length===0?R1:t.length===1?t[0]:function(e){return t.reduce(function(n,r){return r(n)},e)}}var Pt=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,a=kpe(e)?e:new Db(e,n,r);return kf(function(){var s=i,o=s.operator,c=s.source;a.add(o?o.call(a,c):c?i._subscribe(a):i._trySubscribe(a))}),a},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=RN(n),new n(function(i,a){var s=new Db({next:function(o){try{e(o)}catch(c){a(c),s.unsubscribe()}},error:a,complete:i});r.subscribe(s)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[A1]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return wpe(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=RN(e),new e(function(r,i){var a;n.subscribe(function(s){return a=s},function(s){return i(s)},function(){return r(a)})})},t.create=function(e){return new t(e)},t}();function RN(t){var e;return(e=t??gpe.Promise)!==null&&e!==void 0?e:Promise}function Spe(t){return t&&Ve(t.next)&&Ve(t.error)&&Ve(t.complete)}function kpe(t){return t&&t instanceof O1||Spe(t)&&I5(t)}function Tpe(t){return Ve(t==null?void 0:t.lift)}function Or(t){return function(e){if(Tpe(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Nr(t,e,n,r,i){return new Cpe(t,e,n,r,i)}var Cpe=function(t){Ui(e,t);function e(n,r,i,a,s,o){var c=t.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=o,c._next=r?function(l){try{r(l)}catch(d){n.error(d)}}:t.prototype._next,c._error=a?function(l){try{a(l)}catch(d){n.error(d)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(O1),Epe=_1(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ss=function(t){Ui(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new IN(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new Epe},e.prototype.next=function(n){var r=this;kf(function(){var i,a;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=ac(r.currentObservers),o=s.next();!o.done;o=s.next()){var c=o.value;c.next(n)}}catch(l){i={error:l}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;kf(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;kf(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,a=i.hasError,s=i.isStopped,o=i.observers;return a||s?R5:(this.currentObservers=null,o.push(n),new ed(function(){r.currentObservers=null,mp(o,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,a=r.thrownError,s=r.isStopped;i?n.error(a):s&&n.complete()},e.prototype.asObservable=function(){var n=new Pt;return n.source=this,n},e.create=function(n,r){return new IN(n,r)},e}(Pt),IN=function(t){Ui(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:R5},e}(Ss),D5=function(t){Ui(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,a=n._value;if(r)throw i;return this._throwIfClosed(),a},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Ss),jpe={now:function(){return Date.now()}},Npe=function(t){Ui(e,t);function e(n,r){return t.call(this)||this}return e.prototype.schedule=function(n,r){return this},e}(ed),MN={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Iu([t,e],sc(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},Ppe=function(t){Ui(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var a=this.id,s=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(s,a,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,r),this},e.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),MN.setInterval(n.flush.bind(n,this),i)},e.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&MN.clearInterval(r)},e.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,r){var i=!1,a;try{this.work(n)}catch(s){i=!0,a=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),a},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,a=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,mp(a,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(Npe),DN=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},t.now=jpe.now,t}(),_pe=function(t){Ui(e,t);function e(n,r){r===void 0&&(r=DN.now);var i=t.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},e}(DN),Ope=new _pe(Ppe);function Ape(t){return t&&Ve(t.schedule)}function Rpe(t){return t[t.length-1]}function I1(t){return Ape(Rpe(t))?t.pop():void 0}var M1=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function L5(t){return Ve(t==null?void 0:t.then)}function $5(t){return Ve(t[A1])}function U5(t){return Symbol.asyncIterator&&Ve(t==null?void 0:t[Symbol.asyncIterator])}function F5(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Ipe(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var B5=Ipe();function z5(t){return Ve(t==null?void 0:t[B5])}function q5(t){return ppe(this,arguments,function(){var e,n,r,i;return A5(this,function(a){switch(a.label){case 0:e=t.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,ko(e.read())];case 3:return n=a.sent(),r=n.value,i=n.done,i?[4,ko(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,ko(r)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function V5(t){return Ve(t==null?void 0:t.getReader)}function Fi(t){if(t instanceof Pt)return t;if(t!=null){if($5(t))return Mpe(t);if(M1(t))return Dpe(t);if(L5(t))return Lpe(t);if(U5(t))return W5(t);if(z5(t))return $pe(t);if(V5(t))return Upe(t)}throw F5(t)}function Mpe(t){return new Pt(function(e){var n=t[A1]();if(Ve(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Dpe(t){return new Pt(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Lpe(t){return new Pt(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,M5)})}function $pe(t){return new Pt(function(e){var n,r;try{for(var i=ac(t),a=i.next();!a.done;a=i.next()){var s=a.value;if(e.next(s),e.closed)return}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function W5(t){return new Pt(function(e){Fpe(t,e).catch(function(n){return e.error(n)})})}function Upe(t){return W5(q5(t))}function Fpe(t,e){var n,r,i,a;return hpe(this,void 0,void 0,function(){var s,o;return A5(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=mpe(t),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,e.next(s),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=c.sent(),i={error:o},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function ba(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var a=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(a),!i)return a}function H5(t,e){return e===void 0&&(e=0),Or(function(n,r){n.subscribe(Nr(r,function(i){return ba(r,t,function(){return r.next(i)},e)},function(){return ba(r,t,function(){return r.complete()},e)},function(i){return ba(r,t,function(){return r.error(i)},e)}))})}function G5(t,e){return e===void 0&&(e=0),Or(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function Bpe(t,e){return Fi(t).pipe(G5(e),H5(e))}function zpe(t,e){return Fi(t).pipe(G5(e),H5(e))}function qpe(t,e){return new Pt(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Vpe(t,e){return new Pt(function(n){var r;return ba(n,e,function(){r=t[B5](),ba(n,e,function(){var i,a,s;try{i=r.next(),a=i.value,s=i.done}catch(o){n.error(o);return}s?n.complete():n.next(a)},0,!0)}),function(){return Ve(r==null?void 0:r.return)&&r.return()}})}function K5(t,e){if(!t)throw new Error("Iterable cannot be null");return new Pt(function(n){ba(n,e,function(){var r=t[Symbol.asyncIterator]();ba(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function Wpe(t,e){return K5(q5(t),e)}function Hpe(t,e){if(t!=null){if($5(t))return Bpe(t,e);if(M1(t))return qpe(t,e);if(L5(t))return zpe(t,e);if(U5(t))return K5(t,e);if(z5(t))return Vpe(t,e);if(V5(t))return Wpe(t,e)}throw F5(t)}function D1(t,e){return e?Hpe(t,e):Fi(t)}function LN(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=I1(t);return D1(t,n)}function Gpe(t){return t instanceof Date&&!isNaN(t)}var Kpe=_1(function(t){return function(e){e===void 0&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}});function Jpe(t,e){var n=Gpe(t)?{first:t}:typeof t=="number"?{each:t}:t,r=n.first,i=n.each,a=n.with,s=a===void 0?Ype:a,o=n.scheduler,c=o===void 0?Ope:o,l=n.meta,d=l===void 0?null:l;if(r==null&&i==null)throw new TypeError("No timeout provided.");return Or(function(f,h){var p,g,m=null,b=0,v=function(x){g=ba(h,c,function(){try{p.unsubscribe(),Fi(s({meta:d,lastValue:m,seen:b})).subscribe(h)}catch(S){h.error(S)}},x)};p=f.subscribe(Nr(h,function(x){g==null||g.unsubscribe(),b++,h.next(m=x),i>0&&v(i)},void 0,void 0,function(){g!=null&&g.closed||g==null||g.unsubscribe(),m=null})),!b&&v(r!=null?typeof r=="number"?r:+r-c.now():i)})}function Ype(t){throw new Kpe(t)}function bt(t,e){return Or(function(n,r){var i=0;n.subscribe(Nr(r,function(a){r.next(t.call(e,a,i++))}))})}var Xpe=Array.isArray;function Qpe(t,e){return Xpe(e)?t.apply(void 0,Iu([],sc(e))):t(e)}function Zpe(t){return bt(function(e){return Qpe(t,e)})}function eme(t,e,n,r,i,a,s,o){var c=[],l=0,d=0,f=!1,h=function(){f&&!c.length&&!l&&e.complete()},p=function(m){return l<r?g(m):c.push(m)},g=function(m){l++;var b=!1;Fi(n(m,d++)).subscribe(Nr(e,function(v){e.next(v)},function(){b=!0},void 0,function(){if(b)try{l--;for(var v=function(){var x=c.shift();s||g(x)};c.length&&l<r;)v();h()}catch(x){e.error(x)}}))};return t.subscribe(Nr(e,p,function(){f=!0,h()})),function(){}}function L1(t,e,n){return n===void 0&&(n=1/0),Ve(e)?L1(function(r,i){return bt(function(a,s){return e(r,a,i,s)})(Fi(t(r,i)))},n):(typeof e=="number"&&(n=e),Or(function(r,i){return eme(r,i,t,n)}))}function tme(t){return L1(R1,t)}function nme(){return tme(1)}function vp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return nme()(D1(t,I1(t)))}var rme=["addListener","removeListener"],ime=["addEventListener","removeEventListener"],ame=["on","off"];function Lb(t,e,n,r){if(Ve(n)&&(r=n,n=void 0),r)return Lb(t,e,n).pipe(Zpe(r));var i=sc(cme(t)?ime.map(function(o){return function(c){return t[o](e,c,n)}}):sme(t)?rme.map($N(t,e)):ome(t)?ame.map($N(t,e)):[],2),a=i[0],s=i[1];if(!a&&M1(t))return L1(function(o){return Lb(o,e,n)})(Fi(t));if(!a)throw new TypeError("Invalid event target");return new Pt(function(o){var c=function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];return o.next(1<l.length?l:l[0])};return a(c),function(){return s(c)}})}function $N(t,e){return function(n){return function(r){return t[n](e,r)}}}function sme(t){return Ve(t.addListener)&&Ve(t.removeListener)}function ome(t){return Ve(t.on)&&Ve(t.off)}function cme(t){return Ve(t.addEventListener)&&Ve(t.removeEventListener)}function Vm(t,e){return Or(function(n,r){var i=0;n.subscribe(Nr(r,function(a){return t.call(e,a,i++)&&r.next(a)}))})}function lme(t,e,n,r,i){return function(a,s){var o=n,c=e,l=0;a.subscribe(Nr(s,function(d){var f=l++;c=o?t(c,d,f):(o=!0,d),s.next(c)},i))}}function ume(t,e){return e===void 0&&(e=R1),t=t??dme,Or(function(n,r){var i,a=!0;n.subscribe(Nr(r,function(s){var o=e(s);(a||!t(i,o))&&(a=!1,i=o,r.next(s))}))})}function dme(t,e){return t===e}function UN(t,e){return Or(lme(t,e,arguments.length>=2,!0))}function fme(t){return Or(function(e,n){var r=!1,i=Nr(n,function(){i==null||i.unsubscribe(),r=!0},gp);Fi(t).subscribe(i),e.subscribe(Nr(n,function(a){return r&&n.next(a)}))})}function Ar(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=I1(t);return Or(function(r,i){(n?vp(t,r,n):vp(t,r)).subscribe(i)})}function FN(t){return Or(function(e,n){Fi(t).subscribe(Nr(n,function(){return n.complete()},gp)),!n.closed&&e.subscribe(n)})}var hme=Object.defineProperty,pme=Object.defineProperties,mme=Object.getOwnPropertyDescriptors,BN=Object.getOwnPropertySymbols,gme=Object.prototype.hasOwnProperty,vme=Object.prototype.propertyIsEnumerable,zN=(t,e,n)=>e in t?hme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zi=(t,e)=>{for(var n in e||(e={}))gme.call(e,n)&&zN(t,n,e[n]);if(BN)for(var n of BN(e))vme.call(e,n)&&zN(t,n,e[n]);return t},Xc=(t,e)=>pme(t,mme(e)),Pr=(t,e,n)=>new Promise((r,i)=>{var a=c=>{try{o(n.next(c))}catch(l){i(l)}},s=c=>{try{o(n.throw(c))}catch(l){i(l)}},o=c=>c.done?r(c.value):Promise.resolve(c.value).then(a,s);o((n=n.apply(t,e)).next())}),J5="lk";function Nt(t){return typeof t>"u"?!1:yme(t)||bme(t)}function yme(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function bme(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function Mu(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function Mt(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(Mu(t))return`${t.participant.identity}_${t.source}_placeholder`;if(Nt(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}function xme(t,e){return t===void 0||e===void 0?!1:Nt(t)&&Nt(e)?t.publication.trackSid===e.publication.trackSid:Mt(t)===Mt(e)}function Y5(t,e){return typeof e>"u"?!1:Nt(t)?e.some(n=>n.participant.identity===t.participant.identity&&Nt(n)&&n.publication.trackSid===t.publication.trackSid):Mu(t)?e.some(n=>n.participant.identity===t.participant.identity&&Mu(n)&&n.source===t.source):!1}function wme(t,e){return Mu(t)&&Nt(e)&&e.participant.identity===t.participant.identity&&e.source===t.source}function Sme(){const t=document.createElement("p");t.style.width="100%",t.style.height="200px";const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);const n=t.offsetWidth;e.style.overflow="scroll";let r=t.offsetWidth;return n===r&&(r=e.clientWidth),document.body.removeChild(e),n-r}function kme(){return typeof document<"u"}function Tme(t,e,n){return ipe(t,e,()=>Pr(this,null,function*(){const{x:r,y:i}=yield cpe(t,e,{placement:"top",middleware:[ape(6),ope(),spe({padding:5})]});n==null||n(r,i)}))}function Cme(t,e){return!t.contains(e.target)}var Eme=[z.ConnectionStateChanged,z.RoomMetadataChanged,z.ActiveSpeakersChanged,z.ConnectionQualityChanged,z.ParticipantConnected,z.ParticipantDisconnected,z.ParticipantPermissionsChanged,z.ParticipantMetadataChanged,z.ParticipantNameChanged,z.ParticipantAttributesChanged,z.TrackMuted,z.TrackUnmuted,z.TrackPublished,z.TrackUnpublished,z.TrackStreamStateChanged,z.TrackSubscriptionFailed,z.TrackSubscriptionPermissionChanged,z.TrackSubscriptionStatusChanged],jme=[...Eme,z.LocalTrackPublished,z.LocalTrackUnpublished];H.TrackPublished,H.TrackUnpublished,H.TrackMuted,H.TrackUnmuted,H.TrackStreamStateChanged,H.TrackSubscribed,H.TrackUnsubscribed,H.TrackSubscriptionPermissionChanged,H.TrackSubscriptionFailed,H.LocalTrackPublished,H.LocalTrackUnpublished;var Nme=[H.ConnectionQualityChanged,H.IsSpeakingChanged,H.ParticipantMetadataChanged,H.ParticipantPermissionsChanged,H.TrackMuted,H.TrackUnmuted,H.TrackPublished,H.TrackUnpublished,H.TrackStreamStateChanged,H.TrackSubscriptionFailed,H.TrackSubscriptionPermissionChanged,H.TrackSubscriptionStatusChanged];[...Nme,H.LocalTrackPublished,H.LocalTrackUnpublished];var he=fpe.getLogger("lk-components-js");he.setDefaultLevel("WARN");var Pme=[{columns:1,rows:1},{columns:1,rows:2,orientation:"portrait"},{columns:2,rows:1,orientation:"landscape"},{columns:2,rows:2,minWidth:560},{columns:3,rows:3,minWidth:700},{columns:4,rows:4,minWidth:960},{columns:5,rows:5,minWidth:1100}];function X5(t,e,n,r){if(t.length<1)throw new Error("At least one grid layout definition must be provided.");const i=_me(t);if(n<=0||r<=0)return i[0];let a=0;const s=n/r>1?"landscape":"portrait";let o=i.find((c,l,d)=>{a=l;const f=d.findIndex((h,p)=>{const g=!h.orientation||h.orientation===s,m=p>l,b=h.maxTiles===c.maxTiles;return m&&b&&g})!==-1;return c.maxTiles>=e&&!f});if(o===void 0)if(o=i[i.length-1],o)he.warn(`No layout found for: participantCount: ${e}, width/height: ${n}/${r} fallback to biggest available layout (${o}).`);else throw new Error("No layout or fallback layout found.");if((n<o.minWidth||r<o.minHeight)&&a>0){const c=i[a-1];o=X5(i.slice(0,a),c.maxTiles,n,r)}return o}function _me(t){return[...t].map(e=>{var n,r;return{name:`${e.columns}x${e.rows}`,columns:e.columns,rows:e.rows,maxTiles:e.columns*e.rows,minWidth:(n=e.minWidth)!=null?n:0,minHeight:(r=e.minHeight)!=null?r:0,orientation:e.orientation}}).sort((e,n)=>e.maxTiles!==n.maxTiles?e.maxTiles-n.maxTiles:e.minWidth!==0||n.minWidth!==0?e.minWidth-n.minWidth:e.minHeight!==0||n.minHeight!==0?e.minHeight-n.minHeight:0)}function Ome(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var Q5=[],Z5={showChat:!1,unreadMessages:0,showSettings:!1};function eD(t){return typeof t=="object"}function tD(t){return Array.isArray(t)&&t.filter(eD).length>0}function Ame(t,e){return e.audioLevel-t.audioLevel}function Rme(t,e){return t.isSpeaking===e.isSpeaking?0:t.isSpeaking?-1:1}function Ime(t,e){var n,r,i,a;return t.lastSpokeAt!==void 0||e.lastSpokeAt!==void 0?((r=(n=e.lastSpokeAt)==null?void 0:n.getTime())!=null?r:0)-((a=(i=t.lastSpokeAt)==null?void 0:i.getTime())!=null?a:0):0}function $b(t,e){var n,r,i,a;return((r=(n=t.joinedAt)==null?void 0:n.getTime())!=null?r:0)-((a=(i=e.joinedAt)==null?void 0:i.getTime())!=null?a:0)}function Mme(t,e){return Nt(t)?Nt(e)?0:-1:Nt(e)?1:0}function Dme(t,e){const n=t.participant.isCameraEnabled,r=e.participant.isCameraEnabled;return n!==r?n?-1:1:0}function Lme(t){const e=[],n=[],r=[],i=[];t.forEach(o=>{o.participant.isLocal&&o.source===F.Source.Camera?e.push(o):o.source===F.Source.ScreenShare?n.push(o):o.source===F.Source.Camera?r.push(o):i.push(o)});const a=$me(n),s=Ume(r);return[...e,...a,...s,...i]}function $me(t){const e=[],n=[];return t.forEach(r=>{r.participant.isLocal?e.push(r):n.push(r)}),e.sort((r,i)=>$b(r.participant,i.participant)),n.sort((r,i)=>$b(r.participant,i.participant)),[...n,...e]}function Ume(t){const e=[],n=[];return t.forEach(r=>{r.participant.isLocal?e.push(r):n.push(r)}),n.sort((r,i)=>r.participant.isSpeaking&&i.participant.isSpeaking?Ame(r.participant,i.participant):r.participant.isSpeaking!==i.participant.isSpeaking?Rme(r.participant,i.participant):r.participant.lastSpokeAt!==i.participant.lastSpokeAt?Ime(r.participant,i.participant):Nt(r)!==Nt(i)?Mme(r,i):r.participant.isCameraEnabled!==i.participant.isCameraEnabled?Dme(r,i):$b(r.participant,i.participant)),[...e,...n]}function Fme(t,e){return t.reduce((n,r,i)=>i%e===0?[...n,[r]]:[...n.slice(0,-1),[...n.slice(-1)[0],r]],[])}function qN(t,e){const n=Math.max(t.length,e.length);return new Array(n).fill([]).map((r,i)=>[t[i],e[i]])}function yp(t,e,n){return t.filter(r=>!e.map(i=>n(i)).includes(n(r)))}function Ub(t){return t.map(e=>typeof e=="string"||typeof e=="number"?`${e}`:Mt(e))}function Bme(t,e){return{dropped:yp(t,e,Mt),added:yp(e,t,Mt)}}function zme(t){return t.added.length!==0||t.dropped.length!==0}function Fb(t,e){const n=e.findIndex(r=>Mt(r)===Mt(t));if(n===-1)throw new Error(`Element not part of the array: ${Mt(t)} not in ${Ub(e)}`);return n}function qme(t,e,n){const r=Fb(t,n),i=Fb(e,n);return n.splice(r,1,e),n.splice(i,1,t),n}function Vme(t,e){const n=Fb(t,e);return e.splice(n,1),e}function Wme(t,e){return[...e,t]}function kv(t,e){return Fme(t,e)}function Hme(t,e,n){let r=Gme(t,e);if(r.length<e.length){const s=yp(e,r,Mt);r=[...r,...s]}const i=kv(r,n),a=kv(e,n);if(qN(i,a).forEach(([s,o],c)=>{if(s&&o){const l=kv(r,n)[c],d=Bme(l,o);zme(d)&&(he.debug(`Detected visual changes on page: ${c}, current: ${Ub(s)}, next: ${Ub(o)}`,{changes:d}),d.added.length===d.dropped.length&&qN(d.added,d.dropped).forEach(([f,h])=>{if(f&&h)r=qme(f,h,r);else throw new Error(`For a swap action we need a addition and a removal one is missing: ${f}, ${h}`)}),d.added.length===0&&d.dropped.length>0&&d.dropped.forEach(f=>{r=Vme(f,r)}),d.added.length>0&&d.dropped.length===0&&d.added.forEach(f=>{r=Wme(f,r)}))}}),r.length>e.length){const s=yp(r,e,Mt);r=r.filter(o=>!s.map(Mt).includes(Mt(o)))}return r}function Gme(t,e){return t.map(n=>e.find(i=>Mt(n)===Mt(i)||typeof n!="number"&&Mu(n)&&Nt(i)&&wme(n,i))??n)}function Sn(t){return`${J5}-${t}`}function Kme(t){const e=Bb(t),n=nD(t.participant).pipe(bt(()=>Bb(t)),Ar(e));return{className:Sn(t.source===F.Source.Camera||t.source===F.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function Bb(t){if(Nt(t))return t.publication;{const{source:e,name:n,participant:r}=t;if(e&&n)return r.getTrackPublications().find(i=>i.source===e&&i.trackName===n);if(n)return r.getTrackPublicationByName(n);if(e)return r.getTrackPublication(e);throw new Error("At least one of source and name needs to be defined")}}function $1(t,...e){return new Pt(n=>{const r=()=>{n.next(t)};return e.forEach(i=>{t.on(i,r)}),()=>{e.forEach(i=>{t.off(i,r)})}}).pipe(Ar(t))}function Wm(t,e){return new Pt(n=>{const r=(...i)=>{n.next(i)};return t.on(e,r),()=>{t.off(e,r)}})}function Jme(t){return Wm(t,z.ConnectionStateChanged).pipe(bt(([e])=>e),Ar(t.state))}function Yme(t,e,n=!0){const r=new Pt(a=>{Ri.getLocalDevices(t,n).then(s=>{a.next(s),a.complete()}).catch(s=>{e==null||e(s),a.next([]),a.complete()})}),i=new Pt(a=>{var s;const o=()=>Pr(this,null,function*(){try{const c=yield Ri.getLocalDevices(t,n);a.next(c)}catch(c){e==null||e(c)}});if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(s=navigator==null?void 0:navigator.mediaDevices)==null||s.addEventListener("devicechange",o)}return()=>{var c;(c=navigator==null?void 0:navigator.mediaDevices)==null||c.removeEventListener("devicechange",o)}});return vp(r,i)}function Xme(t){return Wm(t,z.DataReceived)}function Qme(t){return $1(t,z.AudioPlaybackStatusChanged).pipe(bt(e=>({canPlayAudio:e.canPlaybackAudio})))}function Zme(t){return $1(t,z.VideoPlaybackStatusChanged).pipe(bt(e=>({canPlayVideo:e.canPlaybackVideo})))}function ege(t,e){return Wm(t,z.ActiveDeviceChanged).pipe(Vm(([n])=>n===e),bt(([n,r])=>(he.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)))}function tge(t,e){return Wm(t,z.ParticipantEncryptionStatusChanged).pipe(Vm(([,n])=>(e==null?void 0:e.identity)===(n==null?void 0:n.identity)||!n&&(e==null?void 0:e.identity)===t.localParticipant.identity),bt(([n])=>n),Ar(e!=null&&e.isLocal?e.isE2EEEnabled:!!(e!=null&&e.isEncrypted)))}function U1(t,...e){return new Pt(n=>{const r=()=>{n.next(t)};return e.forEach(i=>{t.on(i,r)}),()=>{e.forEach(i=>{t.off(i,r)})}}).pipe(Ar(t))}function nD(t){return U1(t,H.TrackMuted,H.TrackUnmuted,H.ParticipantPermissionsChanged,H.TrackPublished,H.TrackUnpublished,H.LocalTrackPublished,H.LocalTrackUnpublished,H.MediaDevicesError,H.TrackSubscriptionStatusChanged).pipe(bt(e=>{const{isMicrophoneEnabled:n,isCameraEnabled:r,isScreenShareEnabled:i}=e,a=e.getTrackPublication(F.Source.Microphone),s=e.getTrackPublication(F.Source.Camera);return{isCameraEnabled:r,isMicrophoneEnabled:n,isScreenShareEnabled:i,cameraTrack:s,microphoneTrack:a,participant:e}}))}function nge(t){return t?U1(t,H.ParticipantMetadataChanged,H.ParticipantNameChanged).pipe(bt(({name:e,identity:n,metadata:r})=>({name:e,identity:n,metadata:r})),Ar({name:t.name,identity:t.identity,metadata:t.metadata})):void 0}function rge(t){return F1(t,H.ConnectionQualityChanged).pipe(bt(([e])=>e),Ar(t.connectionQuality))}function F1(t,e){return new Pt(n=>{const r=(...i)=>{n.next(i)};return t.on(e,r),()=>{t.off(e,r)}})}function rD(t){var e,n,r,i;return U1(t.participant,H.TrackMuted,H.TrackUnmuted,H.TrackSubscribed,H.TrackUnsubscribed,H.LocalTrackPublished,H.LocalTrackUnpublished).pipe(bt(a=>{var s,o;const c=(s=t.publication)!=null?s:a.getTrackPublication(t.source);return(o=c==null?void 0:c.isMuted)!=null?o:!0}),Ar((i=(r=(e=t.publication)==null?void 0:e.isMuted)!=null?r:(n=t.participant.getTrackPublication(t.source))==null?void 0:n.isMuted)!=null?i:!0))}function ige(t){return F1(t,H.IsSpeakingChanged).pipe(bt(([e])=>e))}function age(t){return F1(t,H.ParticipantPermissionsChanged).pipe(bt(()=>t.permissions),Ar(t.permissions))}function sge(t,e,n,r,i){const{localParticipant:a}=e,s=(d,f)=>{let h=!1;switch(d){case F.Source.Camera:h=f.isCameraEnabled;break;case F.Source.Microphone:h=f.isMicrophoneEnabled;break;case F.Source.ScreenShare:h=f.isScreenShareEnabled;break}return h},o=nD(a).pipe(bt(d=>s(t,d.participant)),Ar(s(t,a))),c=new Ss,l=(d,f)=>Pr(this,null,function*(){try{switch(f??(f=n),c.next(!0),t){case F.Source.Camera:return yield a.setCameraEnabled(d??!a.isCameraEnabled,f,r),a.isCameraEnabled;case F.Source.Microphone:return yield a.setMicrophoneEnabled(d??!a.isMicrophoneEnabled,f,r),a.isMicrophoneEnabled;case F.Source.ScreenShare:return yield a.setScreenShareEnabled(d??!a.isScreenShareEnabled,f,r),a.isScreenShareEnabled;default:throw new TypeError("Tried to toggle unsupported source")}}catch(h){if(i&&h instanceof Error){i==null||i(h);return}else throw h}finally{c.next(!1)}});return{className:Sn("button"),toggle:l,enabledObserver:o,pendingObserver:c.asObservable()}}function oge(){let t=!1;const e=new Ss,n=new Ss,r=i=>Pr(this,null,function*(){n.next(!0),t=i??!t,e.next(t),n.next(!1)});return{className:Sn("button"),toggle:r,enabledObserver:e.asObservable(),pendingObserver:n.asObservable()}}function cge(t,e,n){const r=new D5(void 0),i=ege(e,t),a=(s,...o)=>Pr(this,[s,...o],function*(c,l={}){var d,f,h;if(e){const p=xn();if(t==="audiooutput"&&((p==null?void 0:p.name)==="Safari"||(p==null?void 0:p.os)==="iOS")){he.warn("Switching audio output device is not supported on Safari and iOS.");return}he.debug(`Switching active device of kind "${t}" with id ${c}.`),yield e.switchActiveDevice(t,c,l.exact);const g=(d=e.getActiveDevice(t))!=null?d:c;g!==c&&c!=="default"&&he.info(`We tried to select the device with id (${c}), but the browser decided to select the device with id (${g}) instead.`);let m;t==="audioinput"?m=(f=e.localParticipant.getTrackPublication(F.Source.Microphone))==null?void 0:f.track:t==="videoinput"&&(m=(h=e.localParticipant.getTrackPublication(F.Source.Camera))==null?void 0:h.track);const b=c==="default"&&!m||c==="default"&&(m==null?void 0:m.mediaStreamTrack.label.startsWith("Default"));r.next(b?c:g)}});return{className:Sn("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:a}}function lge(t){const e=n=>{t.disconnect(n)};return{className:Sn("disconnect-button"),disconnect:e}}function uge(t){const e=Sn("connection-quality"),n=rge(t);return{className:e,connectionQualityObserver:n}}function dge(t){let e="track-muted-indicator-camera";switch(t.source){case F.Source.Camera:e="track-muted-indicator-camera";break;case F.Source.Microphone:e="track-muted-indicator-microphone";break}const n=Sn(e),r=rD(t);return{className:n,mediaMutedObserver:r}}function fge(t){return{className:"lk-participant-name",infoObserver:nge(t)}}function hge(){return{className:Sn("participant-tile")}}var pge={CHAT:"lk.chat",TRANSCRIPTION:"lk.transcription"},mge={CHAT:"lk-chat-topic"};function iD(t,e){return Pr(this,arguments,function*(n,r,i={}){const{reliable:a,destinationIdentities:s,topic:o}=i;yield n.publishData(r,{destinationIdentities:s,topic:o,reliable:a})})}function gge(t,e,n){const r=Array.isArray(e)?e:[e],i=Xme(t).pipe(Vm(([,,,o])=>e===void 0||o!==void 0&&r.includes(o)),bt(([o,c,,l])=>{const d={payload:o,topic:l,from:c};return n==null||n(d),d}));let a;const s=new Pt(o=>{a=o});return{messageObservable:i,isSendingObservable:s,send:(o,...c)=>Pr(this,[o,...c],function*(l,d={}){a.next(!0);try{yield iD(t.localParticipant,l,Zi({topic:r[0]},d))}finally{a.next(!1)}})}}var Wd=new WeakMap;function vge(t){return t.ignoreLegacy==!0}var yge=t=>JSON.parse(new TextDecoder().decode(t)),bge=t=>new TextEncoder().encode(JSON.stringify(t));function xge(t,e){var n,r,i,a,s,o;const c=()=>{var w,k,C;return((w=t.serverInfo)==null?void 0:w.edition)===1||!!((k=t.serverInfo)!=null&&k.version)&&Cr((C=t.serverInfo)==null?void 0:C.version,"1.8.2")>0},l=new Ss,d=(n=e==null?void 0:e.channelTopic)!=null?n:pge.CHAT,f=(r=e==null?void 0:e.channelTopic)!=null?r:mge.CHAT;let h=!1;Wd.has(t)||(h=!0);const p=(i=Wd.get(t))!=null?i:new Map,g=(a=p.get(d))!=null?a:new Ss;p.set(d,g),Wd.set(t,p);const m=(s=e==null?void 0:e.messageDecoder)!=null?s:yge;if(h){t.registerTextStreamHandler(d,(k,C)=>Pr(this,null,function*(){const{id:E,timestamp:j}=k.info;D1(k).pipe(UN((P,N)=>P+N),bt(P=>({id:E,timestamp:j,message:P,from:t.getParticipantByIdentity(C.identity)}))).subscribe({next:P=>g.next(P)})}));const{messageObservable:w}=gge(t,[f]);w.pipe(bt(k=>{const C=m(k.payload);return vge(C)?void 0:Xc(Zi({},C),{from:k.from})}),Vm(k=>!!k),FN(l)).subscribe(g)}const b=g.pipe(UN((w,k)=>{if("id"in k&&w.find(C=>{var E,j;return((E=C.from)==null?void 0:E.identity)===((j=k.from)==null?void 0:j.identity)&&C.id===k.id})){const C=w.findIndex(E=>E.id===k.id);if(C>-1){const E=w[C];w[C]=Xc(Zi({},k),{timestamp:E.timestamp,editTimestamp:k.timestamp})}return[...w]}return[...w,k]},[]),FN(l)),v=new D5(!1),x=(o=e==null?void 0:e.messageEncoder)!=null?o:bge,S=(w,k)=>Pr(this,null,function*(){k||(k={}),k.topic!=null||(k.topic=d),v.next(!0);try{const C={id:(yield t.localParticipant.sendText(w,k)).id,timestamp:Date.now(),message:w},E=Xc(Zi({},C),{attachedFiles:k.attachments}),j=Xc(Zi({},E),{from:t.localParticipant,attributes:k.attributes});g.next(j);const P=x(Xc(Zi({},C),{ignoreLegacy:c()}));try{yield iD(t.localParticipant,P,{reliable:!0,topic:f})}catch(N){he.info("could not send message in legacy chat format",N)}return j}finally{v.next(!1)}});function T(){l.next(),l.complete(),g.complete(),Wd.delete(t),t.unregisterTextStreamHandler(d)}return t.once(z.Disconnected,T),{messageObservable:b,isSendingObservable:v,send:S}}function wge(){const t=e=>Pr(this,null,function*(){he.info("Start Audio for room: ",e),yield e.startAudio()});return{className:Sn("start-audio-button"),roomAudioPlaybackAllowedObservable:Qme,handleStartAudioPlayback:t}}function Sge(){const t=e=>Pr(this,null,function*(){he.info("Start Video for room: ",e),yield e.startVideo()});return{className:Sn("start-audio-button"),roomVideoPlaybackAllowedObservable:Zme,handleStartVideoPlayback:t}}function kge(){return{className:[Sn("button"),Sn("chat-toggle")].join(" ")}}function Tge(){return{className:[Sn("button"),Sn("focus-toggle-button")].join(" ")}}function Cge(){return{className:"lk-room-container"}}function VN(t,e,n=!0){const r=[t.localParticipant,...Array.from(t.remoteParticipants.values())],i=[];return r.forEach(a=>{e.forEach(s=>{const o=Array.from(a.trackPublications.values()).filter(c=>c.source===s&&(!n||c.track)).map(c=>({participant:a,publication:c,source:c.source}));i.push(...o)})}),{trackReferences:i,participants:r}}function Ege(t,e,n){var r,i;const a=(r=n.additionalRoomEvents)!=null?r:jme,s=(i=n.onlySubscribed)!=null?i:!0,o=Array.from(new Set([z.ParticipantConnected,z.ParticipantDisconnected,z.ConnectionStateChanged,z.LocalTrackPublished,z.LocalTrackUnpublished,z.TrackPublished,z.TrackUnpublished,z.TrackSubscriptionStatusChanged,...a]).values());return $1(t,...o).pipe(bt(c=>{const l=VN(c,e,s);return he.debug(`TrackReference[] was updated. (length ${l.trackReferences.length})`,l),l}),Ar(VN(t,e,s)))}function jge(t,e=1e3){if(t===null)return LN(!1);const n=Lb(t,"mousemove",{passive:!0}).pipe(bt(()=>!0)),r=n.pipe(Jpe({each:e,with:()=>vp(LN(!1),r.pipe(fme(n)))}),ume());return r}function Nge(t,e){if(typeof localStorage>"u"){he.error("Local storage is not available.");return}try{if(e){const n=Object.fromEntries(Object.entries(e).filter(([,r])=>r!==""));localStorage.setItem(t,JSON.stringify(n))}}catch(n){he.error(`Error setting item to local storage: ${n}`)}}function Pge(t){if(typeof localStorage>"u"){he.error("Local storage is not available.");return}try{const e=localStorage.getItem(t);if(!e){he.warn(`Item with key ${t} does not exist in local storage.`);return}return JSON.parse(e)}catch(e){he.error(`Error getting item from local storage: ${e}`);return}}function _ge(t){return{load:()=>Pge(t),save:e=>Nge(t,e)}}var Oge=`${J5}-user-choices`,Qc={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"default",audioDeviceId:"default",username:""},{load:Age,save:Rge}=_ge(Oge);function Ige(t,e=!1){e!==!0&&Rge(t)}function Mge(t,e=!1){var n,r,i,a,s;const o={videoEnabled:(n=t==null?void 0:t.videoEnabled)!=null?n:Qc.videoEnabled,audioEnabled:(r=t==null?void 0:t.audioEnabled)!=null?r:Qc.audioEnabled,videoDeviceId:(i=t==null?void 0:t.videoDeviceId)!=null?i:Qc.videoDeviceId,audioDeviceId:(a=t==null?void 0:t.audioDeviceId)!=null?a:Qc.audioDeviceId,username:(s=t==null?void 0:t.username)!=null?s:Qc.username};if(e)return o;{const c=Age();return Zi(Zi({},o),c??{})}}function aD(t,e){if(e.msg==="show_chat")return{...t,showChat:!0,unreadMessages:0};if(e.msg==="hide_chat")return{...t,showChat:!1};if(e.msg==="toggle_chat"){const n={...t,showChat:!t.showChat};return n.showChat===!0&&(n.unreadMessages=0),n}else return e.msg==="unread_msg"?{...t,unreadMessages:e.count}:e.msg==="toggle_settings"?{...t,showSettings:!t.showSettings}:{...t}}function sD(t,e){return e.msg==="set_pin"?[e.trackReference]:e.msg==="clear_pin"?[]:{...t}}const Hm=y.createContext(void 0);function oD(){const t=y.useContext(Hm);if(!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function Dge(t){const e=td();if(t??(t=e),!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function Lge(){const[t,e]=y.useReducer(sD,Q5),[n,r]=y.useReducer(aD,Z5);return{pin:{dispatch:e,state:t},widget:{dispatch:r,state:n}}}function $ge(t){const[e,n]=y.useReducer(sD,Q5),[r,i]=y.useReducer(aD,Z5);return t??{pin:{dispatch:n,state:e},widget:{dispatch:i,state:r}}}function td(){return y.useContext(Hm)}const B1=y.createContext(void 0);function Gm(){return y.useContext(B1)}function Cc(t){const e=Gm(),n=t??e;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}const cD=y.createContext(void 0);function lD(){return y.useContext(cD)}function nd(t){const e=lD(),n=Gm(),r=t??e??(n==null?void 0:n.participant);if(!r)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return r}const z1=y.createContext(void 0);function Km(){const t=y.useContext(z1);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function Jm(){return y.useContext(z1)}function rd(t){const e=Jm(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}const uD=y.createContext(void 0);function Uge(t){const e=y.useContext(uD);if(t===!0){if(e)return e;throw Error("tried to access feature context, but none is present")}return e}function dD(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=dD(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function fD(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=dD(t))&&(r&&(r+=" "),r+=e);return r}function Fge(...t){return(...e)=>{for(const n of t)if(typeof n=="function")try{n(...e)}catch(r){console.error(r)}}}function ri(...t){const e={...t[0]};for(let n=1;n<t.length;n++){const r=t[n];for(const i in r){const a=e[i],s=r[i];typeof a=="function"&&typeof s=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=Fge(a,s):(i==="className"||i==="UNSAFE_className")&&typeof a=="string"&&typeof s=="string"?e[i]=fD(a,s):e[i]=s!==void 0?s:a}}return e}function Bge(t){return t!==void 0}function Bi(...t){return ri(...t.filter(Bge))}function hD(t,e,n){return y.Children.map(t,r=>y.isValidElement(r)&&y.Children.only(t)?(r.props.className&&(e??(e={}),e.className=fD(r.props.className,e.className),e.style={...r.props.style,...e.style}),y.cloneElement(r,{...e,key:n})):r)}function zge(t){var e,n;if(typeof window<"u"&&typeof process<"u"&&(((e=process==null?void 0:{})==null?void 0:e.NODE_ENV)==="dev"||((n=process==null?void 0:{})==null?void 0:n.NODE_ENV)==="development")){const r=document.querySelector(".lk-room-container");r&&!getComputedStyle(r).getPropertyValue("--lk-has-imported-styles")&&he.warn("It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.")}}function qge(t,e){return t==="processor"&&e&&typeof e=="object"&&"name"in e?e.name:t==="e2ee"&&e?"e2ee-enabled":e}const Vge={connect:!0,audio:!1,video:!1};function Wge(t){const{token:e,serverUrl:n,options:r,room:i,connectOptions:a,connect:s,audio:o,video:c,screen:l,onConnected:d,onDisconnected:f,onError:h,onMediaDeviceFailure:p,onEncryptionError:g,simulateParticipants:m,...b}={...Vge,...t};r&&i&&he.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[v,x]=y.useState(),S=y.useRef(s);y.useEffect(()=>{x(i??new Ri(r))},[i,JSON.stringify(r,qge)]);const T=y.useMemo(()=>{const{className:w}=Cge();return ri(b,{className:w})},[b]);return y.useEffect(()=>{if(!v)return;const w=()=>{const P=v.localParticipant;he.debug("trying to publish local tracks"),Promise.all([P.setMicrophoneEnabled(!!o,typeof o!="boolean"?o:void 0),P.setCameraEnabled(!!c,typeof c!="boolean"?c:void 0),P.setScreenShareEnabled(!!l,typeof l!="boolean"?l:void 0)]).catch(N=>{he.warn(N),h==null||h(N)})},k=(P,N)=>{const _=_u.getFailure(P);p==null||p(_,N)},C=P=>{g==null||g(P)},E=P=>{f==null||f(P)},j=()=>{d==null||d()};return v.on(z.SignalConnected,w).on(z.MediaDevicesError,k).on(z.EncryptionError,C).on(z.Disconnected,E).on(z.Connected,j),()=>{v.off(z.SignalConnected,w).off(z.MediaDevicesError,k).off(z.EncryptionError,C).off(z.Disconnected,E).off(z.Connected,j)}},[v,o,c,l,h,g,p,d,f]),y.useEffect(()=>{if(v){if(m){v.simulateParticipants({participants:{count:m},publish:{audio:!0,useRealTracks:!0}});return}if(s){if(S.current=!0,he.debug("connecting"),!e){he.debug("no token yet");return}if(!n){he.warn("no livekit url provided"),h==null||h(Error("no livekit url provided"));return}v.connect(n,e,a).catch(w=>{he.warn(w),S.current===!0&&(h==null||h(w))})}else he.debug("disconnecting because connect is false"),S.current=!1,v.disconnect()}},[s,e,JSON.stringify(a),v,h,n,m]),y.useEffect(()=>{if(v)return()=>{he.info("disconnecting on onmount"),v.disconnect()}},[v]),{room:v,htmlProps:T}}const pD=y.forwardRef(function(t,e){const{room:n,htmlProps:r}=Wge(t);return y.createElement("div",{ref:e,...r},n&&y.createElement(z1.Provider,{value:n},y.createElement(uD.Provider,{value:t.featureFlags},t.children)))}),Hge=t=>{const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),e};function Gge(t,e){const n=Jge(),r=Hge(e);return y.useLayoutEffect(()=>{let i=!1;const a=t.current;if(!a)return;function s(o,c){i||r.current(o,c)}return n==null||n.subscribe(a,s),()=>{i=!0,n==null||n.unsubscribe(a,s)}},[t.current,n,r]),n==null?void 0:n.observer}function Kge(){let t=!1,e=[];const n=new Map;if(typeof window>"u")return;const r=new ResizeObserver((i,a)=>{e=e.concat(i),t||window.requestAnimationFrame(()=>{const s=new Set;for(let o=0;o<e.length;o++){if(s.has(e[o].target))continue;s.add(e[o].target);const c=n.get(e[o].target);c==null||c.forEach(l=>l(e[o],a))}e=[],t=!1}),t=!0});return{observer:r,subscribe(i,a){r.observe(i);const s=n.get(i)??[];s.push(a),n.set(i,s)},unsubscribe(i,a){const s=n.get(i)??[];if(s.length===1){r.unobserve(i),n.delete(i);return}const o=s.indexOf(a);o!==-1&&s.splice(o,1),n.set(i,s)}}}let WN;const Jge=()=>WN||(WN=Kge()),mD=t=>{const[e,n]=y.useState({width:0,height:0});y.useLayoutEffect(()=>{if(t.current){const{width:i,height:a}=t.current.getBoundingClientRect();n({width:i,height:a})}},[t.current]);const r=y.useCallback(i=>n(i.contentRect),[]);return Gge(t,r),e};function kn(t,e,n=!0){const[r,i]=y.useState(e);return y.useEffect(()=>{if(n&&i(e),typeof window>"u"||!t)return;const a=t.subscribe(i);return()=>a.unsubscribe()},[t,n]),r}function Yge(t){const e=a=>typeof window<"u"?window.matchMedia(a).matches:!1,[n,r]=y.useState(e(t));function i(){r(e(t))}return y.useEffect(()=>{const a=window.matchMedia(t);return i(),a.addListener?a.addListener(i):a.addEventListener("change",i),()=>{a.removeListener?a.removeListener(i):a.removeEventListener("change",i)}},[t]),n}function Xge(t={}){const e=nd(t.participant),{className:n,connectionQualityObserver:r}=y.useMemo(()=>uge(e),[e]),i=kn(r,e.connectionQuality);return{className:n,quality:i}}function q1(t){const e=rd(t),n=y.useMemo(()=>Jme(e),[e]);return kn(n,e.state)}function Qge(t){const e=Km(),n=q1(e);return{buttonProps:y.useMemo(()=>{const{className:r,disconnect:i}=lge(e);return ri(t,{className:r,onClick:()=>i(t.stopTracks??!0),disabled:n===we.Disconnected})},[e,t,n])}}function Zge(t){if(t.publication instanceof op){const e=t.publication.track;if(e){const{facingMode:n}=bhe(e);return n}}return"undefined"}function eve({trackRef:t,props:e}){const n=Cc(t),r=td(),{className:i}=y.useMemo(()=>Tge(),[]),a=y.useMemo(()=>Y5(n,r==null?void 0:r.pin.state),[n,r==null?void 0:r.pin.state]);return{mergedProps:y.useMemo(()=>ri(e,{className:i,onClick:s=>{var o,c,l,d,f;(o=e.onClick)==null||o.call(e,s),a?(l=r==null?void 0:(c=r.pin).dispatch)==null||l.call(c,{msg:"clear_pin"}):(f=r==null?void 0:(d=r.pin).dispatch)==null||f.call(d,{msg:"set_pin",trackReference:n})}}),[e,i,n,a,r==null?void 0:r.pin]),inFocus:a}}function tve(t,e,n={}){const r=n.gridLayouts??Pme,{width:i,height:a}=mD(t),s=X5(r,e,i,a);return y.useEffect(()=>{t.current&&s&&(t.current.style.setProperty("--lk-col-count",s==null?void 0:s.columns.toString()),t.current.style.setProperty("--lk-row-count",s==null?void 0:s.rows.toString()))},[t,s]),{layout:s,containerWidth:i,containerHeight:a}}function HN(t,e={}){var n,r;const i=typeof t=="string"?e.participant:t.participant,a=nd(i),s=typeof t=="string"?{participant:a,source:t}:t,[o,c]=y.useState(!!((n=s.publication)!=null&&n.isMuted||(r=a.getTrackPublication(s.source))!=null&&r.isMuted));return y.useEffect(()=>{const l=rD(s).subscribe(c);return()=>l.unsubscribe()},[Mt(s)]),o}function nve(t){const e=nd(t),n=y.useMemo(()=>ige(e),[e]);return kn(n,e.isSpeaking)}function rve(){const t=Km(),e=y.useMemo(()=>age(t.localParticipant),[t]);return kn(e,t.localParticipant.permissions)}function ive({kind:t,room:e,track:n,requestPermissions:r,onError:i}){const a=Jm(),s=y.useMemo(()=>e??a??new Ri,[e,a]),o=y.useMemo(()=>Yme(t,i,r),[t,r,i]),c=kn(o,[]),[l,d]=y.useState((s==null?void 0:s.getActiveDevice(t))??"default"),{className:f,activeDeviceObservable:h,setActiveMediaDevice:p}=y.useMemo(()=>cge(t,s),[t,s,n]);return y.useEffect(()=>{const g=h.subscribe(m=>{m&&(he.info("setCurrentDeviceId",m),d(m))});return()=>{g==null||g.unsubscribe()}},[h]),{devices:c,className:f,activeDeviceId:l,setActiveMediaDevice:p}}function gD(t,e,n={}){const r=y.useRef([]),i=y.useRef(-1),a=e!==i.current,s=typeof n.customSortFunction=="function"?n.customSortFunction(t):Lme(t);let o=[...s];if(a===!1)try{o=Hme(r.current,s,e)}catch(c){he.error("Error while running updatePages(): ",c)}return a?r.current=s:r.current=o,i.current=e,o}function ave(t,e){const[n,r]=y.useState(1),i=Math.max(Math.ceil(e.length/t),1);n>i&&r(i);const a=n*t,s=a-t,o=d=>{r(f=>d==="next"?f===i?f:f+1:f===1?f:f-1)},c=d=>{d>i?r(i):d<1?r(1):r(d)},l=gD(e,t).slice(s,a);return{totalPageCount:i,nextPage:()=>o("next"),prevPage:()=>o("previous"),setPage:c,firstItemIndex:s,lastItemIndex:a,tracks:l,currentPage:n}}function sve({trackRef:t,onParticipantClick:e,disableSpeakingIndicator:n,htmlProps:r}){const i=Cc(t),a=y.useMemo(()=>{const{className:h}=hge();return ri(r,{className:h,onClick:p=>{var g;if((g=r.onClick)==null||g.call(r,p),typeof e=="function"){const m=i.publication??i.participant.getTrackPublication(i.source);e({participant:i.participant,track:m})}}})},[r,e,i.publication,i.source,i.participant]),s=i.participant.getTrackPublication(F.Source.Microphone),o=y.useMemo(()=>({participant:i.participant,source:F.Source.Microphone,publication:s}),[s,i.participant]),c=HN(i),l=HN(o),d=nve(i.participant),f=Zge(i);return{elementProps:{"data-lk-audio-muted":l,"data-lk-video-muted":c,"data-lk-speaking":n===!0?!1:d,"data-lk-local-participant":i.participant.isLocal,"data-lk-source":i.source,"data-lk-facing-mode":f,...a}}}function ove(t){return t=Dge(t),y.useMemo(()=>(t==null?void 0:t.pin.state)!==void 0&&t.pin.state.length>=1?t.pin.state:[],[t.pin.state])}function cve({room:t,props:e}){const n=rd(t),{className:r,roomAudioPlaybackAllowedObservable:i,handleStartAudioPlayback:a}=y.useMemo(()=>wge(),[]),s=y.useMemo(()=>i(n),[n,i]),{canPlayAudio:o}=kn(s,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:y.useMemo(()=>ri(e,{className:r,onClick:()=>{a(n)},style:{display:o?"none":"block"}}),[e,r,o,a,n]),canPlayAudio:o}}function lve({room:t,props:e}){const n=rd(t),{className:r,roomVideoPlaybackAllowedObservable:i,handleStartVideoPlayback:a}=y.useMemo(()=>Sge(),[]),s=y.useMemo(()=>i(n),[n,i]),{canPlayVideo:o}=kn(s,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:y.useMemo(()=>ri(e,{className:r,onClick:()=>{a(n)},style:{display:o?"none":"block"}}),[e,r,o,a,n]),canPlayVideo:o}}function uve(t,e={}){const n=y.useRef(null),r=y.useRef(null),i=e.minSwipeDistance??50,a=c=>{r.current=null,n.current=c.targetTouches[0].clientX},s=c=>{r.current=c.targetTouches[0].clientX},o=y.useCallback(()=>{if(!n.current||!r.current)return;const c=n.current-r.current,l=c>i,d=c<-i;l&&e.onLeftSwipe&&e.onLeftSwipe(),d&&e.onRightSwipe&&e.onRightSwipe()},[i,e]);y.useEffect(()=>{const c=t.current;return c&&(c.addEventListener("touchstart",a,{passive:!0}),c.addEventListener("touchmove",s,{passive:!0}),c.addEventListener("touchend",o,{passive:!0})),()=>{c&&(c.removeEventListener("touchstart",a),c.removeEventListener("touchmove",s),c.removeEventListener("touchend",o))}},[t,o])}function dve({props:t}){const{dispatch:e,state:n}=oD().widget,{className:r}=y.useMemo(()=>kge(),[]);return{mergedProps:y.useMemo(()=>ri(t,{className:r,onClick:()=>{e&&e({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[t,r,e,n])}}function fve(t){var e,n;const r=Cc(t),{className:i,mediaMutedObserver:a}=y.useMemo(()=>dge(r),[Mt(r)]);return{isMuted:kn(a,!!((e=r.publication)!=null&&e.isMuted||(n=r.participant.getTrackPublication(r.source))!=null&&n.isMuted)),className:i}}function hve({source:t,onChange:e,initialState:n,captureOptions:r,publishOptions:i,onDeviceError:a,...s}){var o;const c=Jm(),l=(o=c==null?void 0:c.localParticipant)==null?void 0:o.getTrackPublication(t),d=y.useRef(!1),{toggle:f,className:h,pendingObserver:p,enabledObserver:g}=y.useMemo(()=>c?sge(t,c,r,i,a):oge(),[c,t,JSON.stringify(r),i]),m=kn(p,!1),b=kn(g,n??!!(l!=null&&l.isEnabled));y.useEffect(()=>{e==null||e(b,d.current),d.current=!1},[b,e]),y.useEffect(()=>{n!==void 0&&(he.debug("forcing initial toggle state",t,n),f(n))},[]);const v=y.useMemo(()=>ri(s,{className:h}),[s,h]),x=y.useCallback(S=>{var T;d.current=!0,f().catch(()=>d.current=!1),(T=s.onClick)==null||T.call(s,S)},[s,f]);return{toggle:f,enabled:b,pending:m,track:l,buttonProps:{...v,"aria-pressed":b,"data-lk-source":t,"data-lk-enabled":b,disabled:m,onClick:x}}}function vD(t=[F.Source.Camera,F.Source.Microphone,F.Source.ScreenShare,F.Source.ScreenShareAudio,F.Source.Unknown],e={}){const n=rd(e.room),[r,i]=y.useState([]),[a,s]=y.useState([]),o=y.useMemo(()=>t.map(c=>eD(c)?c.source:c),[JSON.stringify(t)]);return y.useEffect(()=>{const c=Ege(n,o,{additionalRoomEvents:e.updateOnlyOn,onlySubscribed:e.onlySubscribed}).subscribe(({trackReferences:l,participants:d})=>{he.debug("setting track bundles",l,d),i(l),s(d)});return()=>c.unsubscribe()},[n,JSON.stringify(e.onlySubscribed),JSON.stringify(e.updateOnlyOn),JSON.stringify(t)]),y.useMemo(()=>{if(tD(t)){const c=mve(t,a),l=Array.from(r);return a.forEach(d=>{c.has(d.identity)&&(c.get(d.identity)??[]).forEach(f=>{if(r.find(({participant:p,publication:g})=>d.identity===p.identity&&g.source===f))return;he.debug(`Add ${f} placeholder for participant ${d.identity}.`);const h={participant:d,source:f};l.push(h)})}),l}else return r},[r,a,t])}function pve(t,e){const n=new Set(t);for(const r of e)n.delete(r);return n}function mve(t,e){const n=new Map;if(tD(t)){const r=t.filter(i=>i.withPlaceholder).map(i=>i.source);e.forEach(i=>{const a=i.getTrackPublications().map(o=>{var c;return(c=o.track)==null?void 0:c.source}).filter(o=>o!==void 0),s=Array.from(pve(new Set(r),new Set(a)));s.length>0&&n.set(i.identity,s)})}return n}function gve(t){const e=Km(),n=q1(e),r=y.useMemo(()=>n===we.Disconnected,[n]),i=y.useMemo(()=>xge(e,t),[e,t,r]),a=kn(i.isSendingObservable,!1),s=kn(i.messageObservable,[]);return{send:i.send,chatMessages:s,isSending:a}}function vve(t={}){const[e,n]=y.useState(Mge(t.defaults,t.preventLoad??!1)),r=y.useCallback(c=>{n(l=>({...l,audioEnabled:c}))},[]),i=y.useCallback(c=>{n(l=>({...l,videoEnabled:c}))},[]),a=y.useCallback(c=>{n(l=>({...l,audioDeviceId:c}))},[]),s=y.useCallback(c=>{n(l=>({...l,videoDeviceId:c}))},[]),o=y.useCallback(c=>{n(l=>({...l,username:c}))},[]);return y.useEffect(()=>{Ige(e,t.preventSave??!1)},[e,t.preventSave]),{userChoices:e,saveAudioInputEnabled:r,saveVideoInputEnabled:i,saveAudioInputDeviceId:a,saveVideoInputDeviceId:s,saveUsername:o}}function yve(t,e={}){const n=nd(t),r=rd(e.room),i=y.useMemo(()=>tge(r,n),[r,n]);return kn(i,n.isLocal?n.isE2EEEnabled:!!(n!=null&&n.isEncrypted))}const yD=y.forwardRef(function(t,e){const{mergedProps:n}=dve({props:t});return y.createElement("button",{ref:e,...n},t.children)}),bve=y.forwardRef(function(t,e){const{buttonProps:n}=Qge(t);return y.createElement("button",{ref:e,...n},t.children)}),xve=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},y.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),y.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),wve=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},y.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),Sve=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",...t},y.createElement("path",{fill:"#FFF",d:"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z"})),kve=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none",...t},y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),GN=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},y.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),Tve=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},y.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},y.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),Cve=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},y.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",clipRule:"evenodd"})),Eve=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),jve=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},y.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",clipRule:"evenodd"})),Nve=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},y.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),y.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),Pve=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},y.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),y.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),_ve=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...t},y.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),y.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),Ove=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...t},y.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),y.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),y.createElement("g",{opacity:.25},y.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),y.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),Ave=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...t},y.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),y.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),y.createElement("g",{opacity:.25},y.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),y.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),y.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),Rve=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},y.createElement("g",{opacity:.25},y.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),y.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),bD=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...t},y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),Ive=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...t},y.createElement("g",{fill:"currentColor"},y.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),y.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),KN=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",clipRule:"evenodd"}),y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",clipRule:"evenodd",opacity:.7}),y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",clipRule:"evenodd"}),y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",clipRule:"evenodd",opacity:.6}),y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",clipRule:"evenodd"}),y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",clipRule:"evenodd",opacity:.5}),y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",clipRule:"evenodd"}),y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",clipRule:"evenodd",opacity:.4}),y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",clipRule:"evenodd",opacity:.9}),y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",clipRule:"evenodd",opacity:.3}),y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",clipRule:"evenodd",opacity:.8}),y.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",clipRule:"evenodd",opacity:.2})),Mve=t=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},y.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},y.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"}))),Dve=y.forwardRef(function({trackRef:t,...e},n){const r=Gm(),{mergedProps:i,inFocus:a}=eve({trackRef:t??r,props:e});return y.createElement(Hm.Consumer,null,s=>s!==void 0&&y.createElement("button",{ref:n,...i},e.children?e.children:a?y.createElement(Mve,null):y.createElement(Tve,null)))}),Tv=y.forwardRef(function({kind:t,initialSelection:e,onActiveDeviceChange:n,onDeviceListChange:r,onDeviceSelectError:i,exactMatch:a,track:s,requestPermissions:o,onError:c,...l},d){const f=Jm(),h=y.useRef("default"),p=y.useCallback(k=>{f&&f.emit(z.MediaDevicesError,k),c==null||c(k)},[f,c]),{devices:g,activeDeviceId:m,setActiveMediaDevice:b,className:v}=ive({kind:t,room:f,track:s,requestPermissions:o,onError:p});y.useEffect(()=>{e!==void 0&&b(e)},[b]),y.useEffect(()=>{typeof r=="function"&&r(g)},[r,g]),y.useEffect(()=>{m!==h.current&&(n==null||n(m)),h.current=m},[m]);const x=async k=>{try{await b(k,{exact:a??!0})}catch(C){if(C instanceof Error)i==null||i(C);else throw C}},S=y.useMemo(()=>Bi(l,{className:v},{className:"lk-list"}),[v,l]),T=!!g.find(k=>k.label.toLowerCase().startsWith("default"));function w(k,C,E){return k===C||!T&&E===0&&C==="default"}return y.createElement("ul",{ref:d,...S},g.map((k,C)=>y.createElement("li",{key:k.deviceId,id:k.deviceId,"data-lk-active":w(k.deviceId,m,C),"aria-selected":w(k.deviceId,m,C),role:"option"},y.createElement("button",{className:"lk-button",onClick:()=>x(k.deviceId)},k.label))))}),Lve=y.forwardRef(function({label:t,...e},n){const r=Km(),{mergedProps:i,canPlayAudio:a}=cve({room:r,props:e}),{mergedProps:s,canPlayVideo:o}=lve({room:r,props:i}),{style:c,...l}=s;return c.display=a&&o?"none":"block",y.createElement("button",{ref:n,style:c,...l},t??`Start ${a?"Video":"Audio"}`)});function xD(t,e){switch(t){case F.Source.Microphone:return e?y.createElement(Pve,null):y.createElement(Nve,null);case F.Source.Camera:return e?y.createElement(wve,null):y.createElement(xve,null);case F.Source.ScreenShare:return e?y.createElement(Ive,null):y.createElement(bD,null);default:return}}function $ve(t){switch(t){case yr.Excellent:return y.createElement(_ve,null);case yr.Good:return y.createElement(Ove,null);case yr.Poor:return y.createElement(Ave,null);default:return y.createElement(Rve,null)}}const Cv=y.forwardRef(function({showIcon:t,...e},n){const{buttonProps:r,enabled:i}=hve(e),[a,s]=y.useState(!1);return y.useEffect(()=>{s(!0)},[]),a&&y.createElement("button",{ref:n,...r},(t??!0)&&xD(e.source,i),e.children)}),Uve=y.forwardRef(function(t,e){const{className:n,quality:r}=Xge(t),i=y.useMemo(()=>({...Bi(t,{className:n}),"data-lk-quality":r}),[r,t,n]);return y.createElement("div",{ref:e,...i},t.children??$ve(r))}),JN=y.forwardRef(function({participant:t,...e},n){const r=nd(t),{className:i,infoObserver:a}=y.useMemo(()=>fge(r),[r]),{identity:s,name:o}=kn(a,{name:r.name,identity:r.identity,metadata:r.metadata}),c=y.useMemo(()=>Bi(e,{className:i,"data-lk-participant-name":o}),[e,i,o]);return y.createElement("span",{ref:n,...c},o!==""?o:s,e.children)}),Fve=y.forwardRef(function({trackRef:t,show:e="always",...n},r){const{className:i,isMuted:a}=fve(t),s=e==="always"||e==="muted"&&a||e==="unmuted"&&!a,o=y.useMemo(()=>Bi(n,{className:i}),[i,n]);return s?y.createElement("div",{ref:r,...o,"data-lk-muted":a},n.children??xD(t.source,!a)):null}),Bve=t=>y.createElement("svg",{width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},y.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),y.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}));function wD(t,e={}){const[n,r]=y.useState(Bb(t)),[i,a]=y.useState(n==null?void 0:n.isMuted),[s,o]=y.useState(n==null?void 0:n.isSubscribed),[c,l]=y.useState(n==null?void 0:n.track),[d,f]=y.useState("landscape"),h=y.useRef(),{className:p,trackObserver:g}=y.useMemo(()=>Kme(t),[t.participant.sid??t.participant.identity,t.source,Nt(t)&&t.publication.trackSid]);return y.useEffect(()=>{const m=g.subscribe(b=>{he.debug("update track",b),r(b),a(b==null?void 0:b.isMuted),o(b==null?void 0:b.isSubscribed),l(b==null?void 0:b.track)});return()=>m==null?void 0:m.unsubscribe()},[g]),y.useEffect(()=>{var m,b;return c&&(h.current&&c.detach(h.current),(m=e.element)!=null&&m.current&&!(t.participant.isLocal&&(c==null?void 0:c.kind)==="audio")&&c.attach(e.element.current)),h.current=(b=e.element)==null?void 0:b.current,()=>{h.current&&(c==null||c.detach(h.current))}},[c,e.element]),y.useEffect(()=>{var m,b;if(typeof((m=n==null?void 0:n.dimensions)==null?void 0:m.width)=="number"&&typeof((b=n==null?void 0:n.dimensions)==null?void 0:b.height)=="number"){const v=n.dimensions.width>n.dimensions.height?"landscape":"portrait";f(v)}},[n]),{publication:n,isMuted:i,isSubscribed:s,track:c,elementProps:Bi(e.props,{className:p,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":n==null?void 0:n.source,...(n==null?void 0:n.kind)==="video"&&{"data-lk-orientation":d}})}}var Ev,YN;function zve(){if(YN)return Ev;YN=1;var t="Expected a function",e=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt,c=typeof qd=="object"&&qd&&qd.Object===Object&&qd,l=typeof self=="object"&&self&&self.Object===Object&&self,d=c||l||Function("return this")(),f=Object.prototype,h=f.toString,p=Math.max,g=Math.min,m=function(){return d.Date.now()};function b(w,k,C){var E,j,P,N,_,A,R=0,L=!1,U=!1,q=!0;if(typeof w!="function")throw new TypeError(t);k=T(k)||0,v(C)&&(L=!!C.leading,U="maxWait"in C,P=U?p(T(C.maxWait)||0,k):P,q="trailing"in C?!!C.trailing:q);function D(ke){var K=E,G=j;return E=j=void 0,R=ke,N=w.apply(G,K),N}function $(ke){return R=ke,_=setTimeout(J,k),L?D(ke):N}function I(ke){var K=ke-A,G=ke-R,ae=k-K;return U?g(ae,P-G):ae}function V(ke){var K=ke-A,G=ke-R;return A===void 0||K>=k||K<0||U&&G>=P}function J(){var ke=m();if(V(ke))return ne(ke);_=setTimeout(J,I(ke))}function ne(ke){return _=void 0,q&&E?D(ke):(E=j=void 0,N)}function de(){_!==void 0&&clearTimeout(_),R=0,E=A=j=_=void 0}function xe(){return _===void 0?N:ne(m())}function Se(){var ke=m(),K=V(ke);if(E=arguments,j=this,A=ke,K){if(_===void 0)return $(A);if(U)return _=setTimeout(J,k),D(A)}return _===void 0&&(_=setTimeout(J,k)),N}return Se.cancel=de,Se.flush=xe,Se}function v(w){var k=typeof w;return!!w&&(k=="object"||k=="function")}function x(w){return!!w&&typeof w=="object"}function S(w){return typeof w=="symbol"||x(w)&&h.call(w)==n}function T(w){if(typeof w=="number")return w;if(S(w))return e;if(v(w)){var k=typeof w.valueOf=="function"?w.valueOf():w;w=v(k)?k+"":k}if(typeof w!="string")return w===0?w:+w;w=w.replace(r,"");var C=a.test(w);return C||s.test(w)?o(w.slice(2),C?2:8):i.test(w)?e:+w}return Ev=b,Ev}var qve=zve();const XN=O5(qve);function Vve(t){const e=y.useRef(t);e.current=t,y.useEffect(()=>()=>{e.current()},[])}function Wve(t,e=500,n){const r=y.useRef();Vve(()=>{r.current&&r.current.cancel()});const i=y.useMemo(()=>{const a=XN(t,e,n),s=(...o)=>a(...o);return s.cancel=()=>{a.cancel()},s.isPending=()=>!!r.current,s.flush=()=>a.flush(),s},[t,e,n]);return y.useEffect(()=>{r.current=XN(t,e,n)},[t,e,n]),i}function Hve(t,e,n){const r=(l,d)=>l===d,i=t instanceof Function?t():t,[a,s]=y.useState(i),o=y.useRef(i),c=Wve(s,e,n);return r(o.current,i)||(c(i),o.current=i),[a,c]}function Gve({threshold:t=0,root:e=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:i=!1,onChange:a}={}){var s;const[o,c]=y.useState(null),[l,d]=y.useState(()=>({isIntersecting:i,entry:void 0})),f=y.useRef();f.current=a;const h=((s=l.entry)==null?void 0:s.isIntersecting)&&r;y.useEffect(()=>{if(!o||!("IntersectionObserver"in window)||h)return;const m=new IntersectionObserver(b=>{const v=Array.isArray(m.thresholds)?m.thresholds:[m.thresholds];b.forEach(x=>{const S=x.isIntersecting&&v.some(T=>x.intersectionRatio>=T);d({isIntersecting:S,entry:x}),f.current&&f.current(S,x)})},{threshold:t,root:e,rootMargin:n});return m.observe(o),()=>{m.disconnect()}},[o,JSON.stringify(t),e,n,h,r]);const p=y.useRef(null);y.useEffect(()=>{var m;!o&&(m=l.entry)!=null&&m.target&&!r&&!h&&p.current!==l.entry.target&&(p.current=l.entry.target,d({isIntersecting:i,entry:void 0}))},[o,l.entry,r,h,i]);const g=[c,!!l.isIntersecting,l.entry];return g.ref=g[0],g.isIntersecting=g[1],g.entry=g[2],g}const Kve=y.forwardRef(function({onTrackClick:t,onClick:e,onSubscriptionStatusChanged:n,trackRef:r,manageSubscription:i,...a},s){const o=Cc(r),c=y.useRef(null);y.useImperativeHandle(s,()=>c.current);const l=Gve({root:c.current}),[d]=Hve(l,3e3);y.useEffect(()=>{i&&o.publication instanceof cp&&(d==null?void 0:d.isIntersecting)===!1&&(l==null?void 0:l.isIntersecting)===!1&&o.publication.setSubscribed(!1)},[d,o,i]),y.useEffect(()=>{i&&o.publication instanceof cp&&(l==null?void 0:l.isIntersecting)===!0&&o.publication.setSubscribed(!0)},[l,o,i]);const{elementProps:f,publication:h,isSubscribed:p}=wD(o,{element:c,props:a});y.useEffect(()=>{n==null||n(!!p)},[p,n]);const g=m=>{e==null||e(m),t==null||t({participant:o==null?void 0:o.participant,track:h})};return y.createElement("video",{ref:c,...f,muted:!0,onClick:g})}),SD=y.forwardRef(function({trackRef:t,onSubscriptionStatusChanged:e,volume:n,...r},i){const a=Cc(t),s=y.useRef(null);y.useImperativeHandle(i,()=>s.current);const{elementProps:o,isSubscribed:c,track:l,publication:d}=wD(a,{element:s,props:r});return y.useEffect(()=>{e==null||e(!!c)},[c,e]),y.useEffect(()=>{l===void 0||n===void 0||(l instanceof m5?l.setVolume(n):he.warn("Volume can only be set on remote audio tracks."))},[n,l]),y.useEffect(()=>{d===void 0||r.muted===void 0||(d instanceof cp?d.setEnabled(!r.muted):he.warn("Can only call setEnabled on remote track publications."))},[r.muted,d,l]),y.createElement("audio",{ref:s,...o})});function Jve(t){const e=!!lD();return t.participant&&!e?y.createElement(cD.Provider,{value:t.participant},t.children):y.createElement(y.Fragment,null,t.children)}function Yve(t){const e=!!Gm();return t.trackRef&&!e?y.createElement(B1.Provider,{value:t.trackRef},t.children):y.createElement(y.Fragment,null,t.children)}const zb=y.forwardRef(function({trackRef:t,children:e,onParticipantClick:n,disableSpeakingIndicator:r,...i},a){var s,o;const c=Cc(t),{elementProps:l}=sve({htmlProps:i,disableSpeakingIndicator:r,onParticipantClick:n,trackRef:c}),d=yve(c.participant),f=td(),h=(s=Uge())==null?void 0:s.autoSubscription,p=y.useCallback(g=>{c.source&&!g&&f&&f.pin.dispatch&&Y5(c,f.pin.state)&&f.pin.dispatch({msg:"clear_pin"})},[c,f]);return y.createElement("div",{ref:a,style:{position:"relative"},...l},y.createElement(Yve,{trackRef:c},y.createElement(Jve,{participant:c.participant},e??y.createElement(y.Fragment,null,Nt(c)&&(((o=c.publication)==null?void 0:o.kind)==="video"||c.source===F.Source.Camera||c.source===F.Source.ScreenShare)?y.createElement(Kve,{trackRef:c,onSubscriptionStatusChanged:p,manageSubscription:h}):Nt(c)&&y.createElement(SD,{trackRef:c,onSubscriptionStatusChanged:p}),y.createElement("div",{className:"lk-participant-placeholder"},y.createElement(Bve,null)),y.createElement("div",{className:"lk-participant-metadata"},y.createElement("div",{className:"lk-participant-metadata-item"},c.source===F.Source.Camera?y.createElement(y.Fragment,null,d&&y.createElement(jve,{style:{marginRight:"0.25rem"}}),y.createElement(Fve,{trackRef:{participant:c.participant,source:F.Source.Microphone},show:"muted"}),y.createElement(JN,null)):y.createElement(y.Fragment,null,y.createElement(bD,{style:{marginRight:"0.25rem"}}),y.createElement(JN,null,"'s screen"))),y.createElement(Uve,{className:"lk-participant-metadata-item"}))),y.createElement(Dve,{trackRef:c}))))});function Xve(t){const e=Bi(t,{className:"lk-focus-layout"});return y.createElement("div",{...e},t.children)}function Qve({trackRef:t,...e}){return y.createElement(zb,{trackRef:t,...e})}function kD({tracks:t,...e}){return y.createElement(y.Fragment,null,t.map(n=>y.createElement(B1.Provider,{value:n,key:Mt(n)},hD(e.children))))}function Zve({totalPageCount:t,nextPage:e,prevPage:n,currentPage:r,pagesContainer:i}){const[a,s]=y.useState(!1);return y.useEffect(()=>{let o;return i&&(o=jge(i.current,2e3).subscribe(s)),()=>{o&&o.unsubscribe()}},[i]),y.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":a},y.createElement("button",{className:"lk-button",onClick:n},y.createElement(GN,null)),y.createElement("span",{className:"lk-pagination-count"},`${r} of ${t}`),y.createElement("button",{className:"lk-button",onClick:e},y.createElement(GN,null)))}const eye=y.forwardRef(function({totalPageCount:t,currentPage:e},n){const r=new Array(t).fill("").map((i,a)=>a+1===e?y.createElement("span",{"data-lk-active":!0,key:a}):y.createElement("span",{key:a}));return y.createElement("div",{ref:n,className:"lk-pagination-indicator"},r)});function tye({tracks:t,...e}){const n=y.createRef(),r=y.useMemo(()=>Bi(e,{className:"lk-grid-layout"}),[e]),{layout:i}=tve(n,t.length),a=ave(i.maxTiles,t);return uve(n,{onLeftSwipe:a.nextPage,onRightSwipe:a.prevPage}),y.createElement("div",{ref:n,"data-lk-pagination":a.totalPageCount>1,...r},y.createElement(kD,{tracks:a.tracks},e.children),t.length>i.maxTiles&&y.createElement(y.Fragment,null,y.createElement(eye,{totalPageCount:a.totalPageCount,currentPage:a.currentPage}),y.createElement(Zve,{pagesContainer:n,...a})))}const nye=130,rye=140,iye=1,TD=16/10,aye=(1-TD)*-1;function sye({tracks:t,orientation:e,...n}){const r=y.useRef(null),[i,a]=y.useState(0),{width:s,height:o}=mD(r),c=e||(o>=s?"vertical":"horizontal"),l=c==="vertical"?Math.max(s*aye,nye):Math.max(o*TD,rye),d=Sme(),f=Math.max(c==="vertical"?(o-d)/l:(s-d)/l,iye);let h=Math.round(f);Math.abs(f-i)<.5?h=Math.round(i):i!==f&&a(f);const p=gD(t,h);return y.useLayoutEffect(()=>{r.current&&(r.current.dataset.lkOrientation=c,r.current.style.setProperty("--lk-max-visible-tiles",h.toString()))},[h,c]),y.createElement("aside",{key:c,className:"lk-carousel",ref:r,...n},y.createElement(kD,{tracks:p},n.children))}function oye({value:t,onPinChange:e,onWidgetChange:n,children:r}){const i=$ge(t);return y.useEffect(()=>{he.debug("PinState Updated",{state:i.pin.state}),e&&i.pin.state&&e(i.pin.state)},[i.pin.state,e]),y.useEffect(()=>{he.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),y.createElement(Hm.Provider,{value:i},r)}function cye({volume:t,muted:e}){const n=vD([F.Source.Microphone,F.Source.ScreenShareAudio,F.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(r=>!r.participant.isLocal&&r.publication.kind===F.Kind.Audio);return y.createElement("div",{style:{display:"none"}},n.map(r=>y.createElement(SD,{key:Mt(r),trackRef:r,volume:t,muted:e})))}function lye(t){const e=y.useMemo(()=>Bi(t,{className:"lk-toast"}),[t]);return y.createElement("div",{...e},t.children)}function uye(t){const[e,n]=y.useState(void 0),r=q1(t.room);return y.useEffect(()=>{switch(r){case we.Reconnecting:n(y.createElement(y.Fragment,null,y.createElement(KN,{className:"lk-spinner"})," Reconnecting"));break;case we.Connecting:n(y.createElement(y.Fragment,null,y.createElement(KN,{className:"lk-spinner"})," Connecting"));break;case we.Disconnected:n(y.createElement(y.Fragment,null,"Disconnected"));break;default:n(void 0);break}},[r]),e?y.createElement(lye,{className:"lk-toast-connection-state"},e):y.createElement(y.Fragment,null)}const dye=y.forwardRef(function({entry:t,hideName:e=!1,hideTimestamp:n=!1,messageFormatter:r,...i},a){var s,o,c,l;const d=y.useMemo(()=>r?r(t.message):t.message,[t.message,r]),f=!!t.editTimestamp,h=new Date(t.timestamp),p=typeof navigator<"u"?navigator.language:"en-US",g=((s=t.from)==null?void 0:s.name)??((o=t.from)==null?void 0:o.identity);return y.createElement("li",{ref:a,className:"lk-chat-entry",title:h.toLocaleTimeString(p,{timeStyle:"full"}),"data-lk-message-origin":(c=t.from)!=null&&c.isLocal?"local":"remote",...i},(!n||!e||f)&&y.createElement("span",{className:"lk-meta-data"},!e&&y.createElement("strong",{className:"lk-participant-name"},g),(!n||f)&&y.createElement("span",{className:"lk-timestamp"},f&&"edited ",h.toLocaleTimeString(p,{timeStyle:"short"}))),y.createElement("span",{className:"lk-message-body"},d),y.createElement("span",{className:"lk-message-attachements"},(l=t.attachedFiles)==null?void 0:l.map(m=>m.type.startsWith("image/")&&y.createElement("img",{style:{maxWidth:"300px",maxHeight:"300px"},key:m.name,src:URL.createObjectURL(m),alt:m.name}))))});function fye({messageFormatter:t,messageDecoder:e,messageEncoder:n,channelTopic:r,...i}){const a=y.useRef(null),s=y.useRef(null),o=y.useMemo(()=>({messageDecoder:e,messageEncoder:n,channelTopic:r}),[e,n,r]),{chatMessages:c,send:l,isSending:d}=gve(o),f=td(),h=y.useRef(0);async function p(g){g.preventDefault(),s.current&&s.current.value.trim()!==""&&(await l(s.current.value),s.current.value="",s.current.focus())}return y.useEffect(()=>{var g;a&&((g=a.current)==null||g.scrollTo({top:a.current.scrollHeight}))},[a,c]),y.useEffect(()=>{var g,m,b,v,x;if(!f||c.length===0)return;if((g=f.widget.state)!=null&&g.showChat&&c.length>0&&h.current!==((m=c[c.length-1])==null?void 0:m.timestamp)){h.current=(b=c[c.length-1])==null?void 0:b.timestamp;return}const S=c.filter(w=>!h.current||w.timestamp>h.current).length,{widget:T}=f;S>0&&((v=T.state)==null?void 0:v.unreadMessages)!==S&&((x=T.dispatch)==null||x.call(T,{msg:"unread_msg",count:S}))},[c,f==null?void 0:f.widget]),y.createElement("div",{...i,className:"lk-chat"},y.createElement("div",{className:"lk-chat-header"},"Messages",f&&y.createElement(yD,{className:"lk-close-button"},y.createElement(Sve,null))),y.createElement("ul",{className:"lk-list lk-chat-messages",ref:a},i.children?c.map((g,m)=>hD(i.children,{entry:g,key:g.id??m,messageFormatter:t})):c.map((g,m,b)=>{const v=m>=1&&b[m-1].from===g.from,x=m>=1&&g.timestamp-b[m-1].timestamp<6e4;return y.createElement(dye,{key:g.id??m,hideName:v,hideTimestamp:v===!1?!1:x,entry:g,messageFormatter:t})})),y.createElement("form",{className:"lk-chat-form",onSubmit:p},y.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:d,ref:s,type:"text",placeholder:"Enter a message...",onInput:g=>g.stopPropagation(),onKeyDown:g=>g.stopPropagation(),onKeyUp:g=>g.stopPropagation()}),y.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:d},"Send")))}function QN({kind:t,initialSelection:e,onActiveDeviceChange:n,tracks:r,requestPermissions:i=!1,...a}){const[s,o]=y.useState(!1),[c,l]=y.useState([]),[d,f]=y.useState(!0),[h,p]=y.useState(i),g=(x,S)=>{he.debug("handle device change"),o(!1),n==null||n(x,S)},m=y.useRef(null),b=y.useRef(null);y.useLayoutEffect(()=>{s&&p(!0)},[s]),y.useLayoutEffect(()=>{let x;return m.current&&b.current&&(c||d)&&(x=Tme(m.current,b.current,(S,T)=>{b.current&&Object.assign(b.current.style,{left:`${S}px`,top:`${T}px`})})),f(!1),()=>{x==null||x()}},[m,b,c,d]);const v=y.useCallback(x=>{b.current&&x.target!==m.current&&s&&Cme(b.current,x)&&o(!1)},[s,b,m]);return y.useEffect(()=>(document.addEventListener("click",v),()=>{document.removeEventListener("click",v)}),[v]),y.createElement(y.Fragment,null,y.createElement("button",{className:"lk-button lk-button-menu","aria-pressed":s,...a,onClick:()=>o(!s),ref:m},a.children),!a.disabled&&y.createElement("div",{className:"lk-device-menu",ref:b,style:{visibility:s?"visible":"hidden"}},t?y.createElement(Tv,{initialSelection:e,onActiveDeviceChange:x=>g(t,x),onDeviceListChange:l,kind:t,track:r==null?void 0:r[t],requestPermissions:h}):y.createElement(y.Fragment,null,y.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),y.createElement(Tv,{kind:"audioinput",onActiveDeviceChange:x=>g("audioinput",x),onDeviceListChange:l,track:r==null?void 0:r.audioinput,requestPermissions:h}),y.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),y.createElement(Tv,{kind:"videoinput",onActiveDeviceChange:x=>g("videoinput",x),onDeviceListChange:l,track:r==null?void 0:r.videoinput,requestPermissions:h}))))}function hye(){y.useEffect(()=>{zge()},[])}function pye({props:t}){const{dispatch:e,state:n}=oD().widget,r="lk-button lk-settings-toggle";return{mergedProps:y.useMemo(()=>ri(t,{className:r,onClick:()=>{e&&e({msg:"toggle_settings"})},"aria-pressed":n!=null&&n.showSettings?"true":"false"}),[t,r,e,n])}}const mye=y.forwardRef(function(t,e){const{mergedProps:n}=pye({props:t});return y.createElement("button",{ref:e,...n},t.children)}),gye=t=>{switch(t){case F.Source.Camera:return 1;case F.Source.Microphone:return 2;case F.Source.ScreenShare:return 3;default:return 0}};function vye({variation:t,controls:e,saveUserChoices:n=!0,onDeviceError:r,...i}){var a;const[s,o]=y.useState(!1),c=td();y.useEffect(()=>{var j,P;((j=c==null?void 0:c.widget.state)==null?void 0:j.showChat)!==void 0&&o((P=c==null?void 0:c.widget.state)==null?void 0:P.showChat)},[(a=c==null?void 0:c.widget.state)==null?void 0:a.showChat]);const l=Yge(`(max-width: ${s?1e3:760}px)`)?"minimal":"verbose";t??(t=l);const d={leave:!0,...e},f=rve();if(!f)d.camera=!1,d.chat=!1,d.microphone=!1,d.screenShare=!1;else{const j=P=>f.canPublish&&(f.canPublishSources.length===0||f.canPublishSources.includes(gye(P)));d.camera??(d.camera=j(F.Source.Camera)),d.microphone??(d.microphone=j(F.Source.Microphone)),d.screenShare??(d.screenShare=j(F.Source.ScreenShare)),d.chat??(d.chat=f.canPublishData&&(e==null?void 0:e.chat))}const h=y.useMemo(()=>t==="minimal"||t==="verbose",[t]),p=y.useMemo(()=>t==="textOnly"||t==="verbose",[t]),g=Ome(),[m,b]=y.useState(!1),v=y.useCallback(j=>{b(j)},[b]),x=Bi({className:"lk-control-bar"},i),{saveAudioInputEnabled:S,saveVideoInputEnabled:T,saveAudioInputDeviceId:w,saveVideoInputDeviceId:k}=vve({preventSave:!n}),C=y.useCallback((j,P)=>P?S(j):null,[S]),E=y.useCallback((j,P)=>P?T(j):null,[T]);return y.createElement("div",{...x},d.microphone&&y.createElement("div",{className:"lk-button-group"},y.createElement(Cv,{source:F.Source.Microphone,showIcon:h,onChange:C,onDeviceError:j=>r==null?void 0:r({source:F.Source.Microphone,error:j})},p&&"Microphone"),y.createElement("div",{className:"lk-button-group-menu"},y.createElement(QN,{kind:"audioinput",onActiveDeviceChange:(j,P)=>w(P??"default")}))),d.camera&&y.createElement("div",{className:"lk-button-group"},y.createElement(Cv,{source:F.Source.Camera,showIcon:h,onChange:E,onDeviceError:j=>r==null?void 0:r({source:F.Source.Camera,error:j})},p&&"Camera"),y.createElement("div",{className:"lk-button-group-menu"},y.createElement(QN,{kind:"videoinput",onActiveDeviceChange:(j,P)=>k(P??"default")}))),d.screenShare&&g&&y.createElement(Cv,{source:F.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:h,onChange:v,onDeviceError:j=>r==null?void 0:r({source:F.Source.ScreenShare,error:j})},p&&(m?"Stop screen share":"Share screen")),d.chat&&y.createElement(yD,null,h&&y.createElement(kve,null),p&&"Chat"),d.settings&&y.createElement(mye,null,h&&y.createElement(Cve,null),p&&"Settings"),d.leave&&y.createElement(bve,null,h&&y.createElement(Eve,null),p&&"Leave"),y.createElement(Lve,null))}function CD({chatMessageFormatter:t,chatMessageDecoder:e,chatMessageEncoder:n,SettingsComponent:r,...i}){var a,s;const[o,c]=y.useState({showChat:!1,unreadMessages:0,showSettings:!1}),l=y.useRef(null),d=vD([{source:F.Source.Camera,withPlaceholder:!0},{source:F.Source.ScreenShare,withPlaceholder:!1}],{updateOnlyOn:[z.ActiveSpeakersChanged],onlySubscribed:!1}),f=b=>{he.debug("updating widget state",b),c(b)},h=Lge(),p=d.filter(Nt).filter(b=>b.publication.source===F.Source.ScreenShare),g=(a=ove(h))==null?void 0:a[0],m=d.filter(b=>!xme(b,g));return y.useEffect(()=>{var b,v,x,S,T,w;if(p.some(k=>k.publication.isSubscribed)&&l.current===null?(he.debug("Auto set screen share focus:",{newScreenShareTrack:p[0]}),(v=(b=h.pin).dispatch)==null||v.call(b,{msg:"set_pin",trackReference:p[0]}),l.current=p[0]):l.current&&!p.some(k=>{var C,E;return k.publication.trackSid===((E=(C=l.current)==null?void 0:C.publication)==null?void 0:E.trackSid)})&&(he.debug("Auto clearing screen share focus."),(S=(x=h.pin).dispatch)==null||S.call(x,{msg:"clear_pin"}),l.current=null),g&&!Nt(g)){const k=d.find(C=>C.participant.identity===g.participant.identity&&C.source===g.source);k!==g&&Nt(k)&&((w=(T=h.pin).dispatch)==null||w.call(T,{msg:"set_pin",trackReference:k}))}},[p.map(b=>`${b.publication.trackSid}_${b.publication.isSubscribed}`).join(),(s=g==null?void 0:g.publication)==null?void 0:s.trackSid,d]),hye(),y.createElement("div",{className:"lk-video-conference",...i},kme()&&y.createElement(oye,{value:h,onWidgetChange:f},y.createElement("div",{className:"lk-video-conference-inner"},g?y.createElement("div",{className:"lk-focus-layout-wrapper"},y.createElement(Xve,null,y.createElement(sye,{tracks:m},y.createElement(zb,null)),g&&y.createElement(Qve,{trackRef:g}))):y.createElement("div",{className:"lk-grid-layout-wrapper"},y.createElement(tye,{tracks:d},y.createElement(zb,null))),y.createElement(vye,{controls:{chat:!0,settings:!!r}})),y.createElement(fye,{style:{display:o.showChat?"grid":"none"},messageFormatter:t,messageEncoder:n,messageDecoder:e}),r&&y.createElement("div",{className:"lk-settings-menu-modal",style:{display:o.showSettings?"block":"none"}},y.createElement(r,null))),y.createElement(cye,null),y.createElement(uye,null))}const yye=()=>{const{doubtId:t}=Bu(),e=Vt(),[n,r]=y.useState(null),[i,a]=y.useState(null),[s,o]=y.useState(null),[c,l]=y.useState(!0),[d,f]=y.useState(!1),[h,p]=y.useState(5),[g,m]=y.useState(""),[b,v]=y.useState(!1),[x,S]=y.useState(!1),[T,w]=y.useState(!1),[k,C]=y.useState(null),E="wss://remote-opgy8hh4.livekit.cloud";y.useEffect(()=>{if(new URLSearchParams(window.location.search).get("email")==="true")return;localStorage.getItem("token")||(window.location.href=`/?next=${encodeURIComponent(`/dashboard/session/${t||""}`)}`)},[t]),y.useEffect(()=>{t&&(async()=>{try{l(!0),o(null);const _=new URLSearchParams(window.location.search).get("email")==="true"?await up.generateTokenForEmailJoin(t):await up.generateToken(t);if(!(_!=null&&_.success)||!(_!=null&&_.token))throw new Error((_==null?void 0:_.message)||"Failed to generate LiveKit token");r(_.token),a(_.roomName||`doubt-session-${t}`)}catch(N){o(N.message)}finally{l(!1)}})()},[t]),y.useEffect(()=>{t&&(async()=>{var N;try{const[_,A]=await Promise.all([Xe.getProfile(),tc.getDoubtById(t)]),R=(_==null?void 0:_.id)||(_==null?void 0:_._id),L=(A==null?void 0:A.doubter_id)||((N=A==null?void 0:A.doubter)==null?void 0:N._id);S(String(R)===String(L));const U=(A==null?void 0:A.category)||"medium";C((U==="small"?20:U==="medium"?30:60)*60)}catch{S(!1)}})()},[t]),y.useEffect(()=>{if(k==null||k<=0)return;const P=setInterval(()=>C(N=>N!=null?N-1:N),1e3);return()=>clearInterval(P)},[k]),y.useEffect(()=>{k===0&&x&&!T&&f(!0)},[k,x,T]);const j=async()=>{try{v(!0),await tc.submitFeedback(t,{rating:h,comment:g}),w(!0),alert("Doubt completed successfully!"),e("/dashboard/doubts")}catch(P){console.error("Error submitting feedback:",P),alert("Failed to submit feedback. Please try again.")}finally{v(!1)}};return c?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:u.jsx("div",{children:"Initializing session"})}):s||!E?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white text-center p-6",children:u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Session Error"}),u.jsx("p",{className:"text-gray-300 mb-4",children:s||"LiveKit URL not configured"}),u.jsx("button",{className:"px-4 py-2 bg-blue-600 rounded hover:bg-blue-700",onClick:()=>e("/dashboard/doubts"),children:"Back to Dashboard"})]})}):n?u.jsxs("div",{"data-lk-theme":"default",className:"h-screen bg-black relative",children:[u.jsx(pD,{token:n,serverUrl:E,connectOptions:{autoSubscribe:!0},audio:!0,video:!0,onError:P=>o((P==null?void 0:P.message)||"LiveKit error"),onDisconnected:()=>{x&&!T&&f(!0)},className:"h-full",children:u.jsx(CD,{})}),k!=null&&k>0&&u.jsxs("div",{className:"absolute top-4 left-4 z-50 bg-black/70 text-white px-3 py-1 rounded flex items-center gap-2",children:[u.jsx(qe,{className:"w-4 h-4"}),u.jsxs("span",{children:[Math.floor(k/60),":",String(k%60).padStart(2,"0")]})]}),x&&u.jsx("div",{className:"absolute top-4 right-4 z-50",children:u.jsxs("button",{onClick:()=>f(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 shadow-lg",children:[u.jsx($e,{className:"w-4 h-4"}),"Rate & Complete"]})}),x&&d&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Complete Doubt Session"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rate the session (1-5)"}),u.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(P=>u.jsx("button",{onClick:()=>p(P),className:`p-1 ${h>=P?"text-yellow-400":"text-gray-300"}`,children:u.jsx(Oo,{className:"w-6 h-6 fill-current"})},P))})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments (optional)"}),u.jsx("textarea",{value:g,onChange:P=>m(P.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Any feedback about the session..."})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",disabled:b,children:"Cancel"}),u.jsx("button",{onClick:j,disabled:b,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:b?"Submitting...":"Submit Rating"})]})]})})]}):u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:u.jsx("div",{children:"Waiting for token"})})},bye=()=>{const t=Vt(),[e,n]=y.useState(""),[r,i]=y.useState(""),[a,s]=y.useState(2),[o,c]=y.useState(!1),[l,d]=y.useState(null),[f,h]=y.useState(null),p=async m=>{if(m.preventDefault(),d(null),!e){d("Please enter/select a previous year paper");return}if(!r){d("Please select a date and time");return}try{c(!0);const b=await up.scheduleRoom({roomBase:`pyq-${e.replace(/\s+/g,"-").toLowerCase()}`,scheduledAt:r,maxParticipants:a});if(!(b!=null&&b.success))throw new Error((b==null?void 0:b.message)||"Failed to schedule");h(b.data)}catch(b){d(b.message||"Failed to schedule")}finally{c(!1)}},g=()=>{f!=null&&f.roomName&&t(`/dashboard/pyq/${encodeURIComponent(f.roomName)}`)};return u.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[u.jsxs("h1",{className:"text-2xl font-semibold mb-6 flex items-center gap-2",children:[u.jsx(Br,{className:"w-6 h-6 text-green-600"}),"Live Previous Year Solution"]}),u.jsxs("form",{onSubmit:p,className:"space-y-5 bg-white rounded-lg p-5 shadow",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Previous Year Paper"}),u.jsx("input",{type:"text",placeholder:"e.g., JEE Main 2022 Shift 1",value:e,onChange:m=>n(m.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[u.jsx($x,{className:"w-4 h-4"})," Select Date & Time"]}),u.jsx("input",{type:"datetime-local",value:r,onChange:m=>i(m.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[u.jsx(yn,{className:"w-4 h-4"})," Number of Participants"]}),u.jsxs("select",{value:a,onChange:m=>s(Number(m.target.value)),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[u.jsx("option",{value:2,children:"2"}),u.jsx("option",{value:3,children:"3"}),u.jsx("option",{value:4,children:"4"}),u.jsx("option",{value:5,children:"5"}),u.jsx("option",{value:10,children:"10"})]})]}),l&&u.jsx("div",{className:"text-red-600 text-sm",children:l}),u.jsxs("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-70 flex items-center gap-2",children:[u.jsx(qe,{className:"w-4 h-4"}),o?"Scheduling...":"Schedule Session"]})]}),f&&u.jsxs("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-green-800 font-medium mb-2",children:[u.jsx($e,{className:"w-5 h-5"})," Scheduled Successfully"]}),u.jsxs("div",{className:"text-sm text-green-900",children:["Room: ",u.jsx("span",{className:"font-mono",children:f.roomName})]}),u.jsxs("div",{className:"text-sm text-green-900",children:["Time: ",new Date(f.scheduledAt).toLocaleString()]}),u.jsxs("div",{className:"text-sm text-green-900 mb-3",children:["Max Participants: ",f.maxParticipants]}),u.jsx("button",{onClick:g,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Join Now"})]})]})},xye="wss://remote-opgy8hh4.livekit.cloud",wye=()=>{const{roomName:t}=Bu(),[e,n]=y.useState(null),[r,i]=y.useState(null),[a,s]=y.useState(!0);return y.useEffect(()=>{t&&(async()=>{try{s(!0);const c=await up.tokenByRoom(decodeURIComponent(t));if(!(c!=null&&c.success)||!(c!=null&&c.token))throw new Error((c==null?void 0:c.message)||"Token error");n(c.token)}catch(c){i(c.message||"Failed to join room")}finally{s(!1)}})()},[t]),a?u.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-600",children:"Joining..."}):r?u.jsx("div",{className:"min-h-screen flex items-center justify-center text-red-600",children:r}):e?u.jsx("div",{"data-lk-theme":"default",className:"h-screen bg-black",children:u.jsx(pD,{token:e,serverUrl:xye,connectOptions:{autoSubscribe:!0},audio:!0,video:!0,className:"h-full",children:u.jsx(CD,{})})}):null},Sye=()=>{const{doubtId:t}=Bu(),e=Vt(),[n,r]=y.useState("pending"),[i,a]=y.useState("Accepting the doubt...");return y.useEffect(()=>{if(!localStorage.getItem("token")){console.log("No authentication token found, redirecting to login"),r("error"),a("Please log in to accept this doubt."),setTimeout(()=>{window.location.href="/"},2e3);return}t&&(async()=>{try{r("pending"),a("Accepting the doubt...");const c=await Xa.acceptDoubt(t);r("success"),a((c==null?void 0:c.message)||"Doubt accepted. Redirecting to session..."),setTimeout(()=>{e(`/dashboard/session/${t}`)},1200)}catch(c){console.error("SolveDoubt error:",c),r("error");let l="Failed to accept the doubt.";c.message.includes("timeout")?l="Request timed out. Please try again.":c.message.includes("Network error")||c.message.includes("Unable to connect")?l="Network error. Please check your connection and try again.":c.message.includes("Too many requests")?l="Too many requests. Please wait a moment and try again.":c.message.includes("Authentication failed")||c.message.includes("No authentication token")||c.message.includes("Invalid token format")||c.message.includes("session has expired")?(l="Authentication failed. Please log in again.",setTimeout(()=>{localStorage.removeItem("token"),window.location.href="/"},2e3)):c.message.includes("Invalid response format")||c.message.includes("undefined response")||c.message.includes("null response")?l="Server returned invalid response. Please try again.":l=(c==null?void 0:c.message)||"Failed to accept the doubt.",a(l)}})()},[t,e]),u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 w-full max-w-md text-center",children:[n==="pending"&&u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:u.jsx(qe,{className:"w-8 h-8 text-blue-600 animate-spin"})}),u.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:i}),u.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait..."})]}),n==="success"&&u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:u.jsx($e,{className:"w-8 h-8 text-green-600"})}),u.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:i}),u.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Redirecting to session..."})]}),n==="error"&&u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:u.jsx(Jf,{className:"w-8 h-8 text-red-600"})}),u.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:i}),u.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"Try Again"})]})]})})},kye=()=>{const[t,e]=y.useState([]),[n,r]=y.useState(!0),[i,a]=y.useState(null),[s,o]=y.useState(1),[c,l]=y.useState(null);y.useEffect(()=>{d()},[s]);const d=async()=>{try{r(!0),a(null);const p=await Xa.getSolvedDoubts(s,10);e(p.solvedDoubts),l(p.pagination)}catch(p){a(p.message)}finally{r(!1)}},f=p=>new Date(p).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),h=p=>Array.from({length:5},(g,m)=>u.jsx(Oo,{className:`w-4 h-4 ${m<p?"text-yellow-400 fill-current":"text-gray-300"}`},m));return n?u.jsx("div",{className:"flex items-center justify-center p-8",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i?u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[u.jsxs("p",{className:"text-red-600",children:["Error: ",i]}),u.jsx("button",{onClick:d,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Try Again"})]}):t.length===0?u.jsxs("div",{className:"text-center py-8",children:[u.jsx($e,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No Solved Doubts Yet"}),u.jsx("p",{className:"text-gray-500",children:"Start solving doubts to see them here!"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Solved Doubts"}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[u.jsx($e,{className:"w-4 h-4"}),u.jsxs("span",{children:[(c==null?void 0:c.totalCount)||0," doubts solved"]})]})]}),u.jsx("div",{className:"space-y-4",children:t.map(p=>{const g=p.doubt_id,m=g==null?void 0:g.doubter_id;return u.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow",children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:g==null?void 0:g.subject}),u.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:g==null?void 0:g.description}),u.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Gn,{className:"w-4 h-4"}),u.jsx("span",{children:(m==null?void 0:m.name)||"Unknown Student"})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx($x,{className:"w-4 h-4"}),u.jsxs("span",{children:["Solved on ",f(p.resolved_at)]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[u.jsx("div",{className:"flex items-center gap-1",children:h(p.feedback_rating||0)}),u.jsxs("span",{className:"text-sm text-gray-600",children:[p.feedback_rating||0,"/5"]})]})]}),p.feedback_comment&&u.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx(U2,{className:"w-4 h-4 text-gray-500 mt-0.5"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Feedback:"}),u.jsx("p",{className:"text-sm text-gray-600",children:p.feedback_comment})]})]})}),u.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[u.jsx($e,{className:"w-3 h-3 mr-1"}),"Completed"]})}),u.jsxs("div",{className:"text-xs text-gray-500",children:["Session completed on ",f(p.resolved_at)]})]})})]},p._id)})}),c&&c.totalPages>1&&u.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6",children:[u.jsx("button",{onClick:()=>o(s-1),disabled:!c.hasPrevPage,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),u.jsxs("span",{className:"px-3 py-2 text-sm text-gray-700",children:["Page ",c.currentPage," of ",c.totalPages]}),u.jsx("button",{onClick:()=>o(s+1),disabled:!c.hasNextPage,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})},Tye=()=>{const[t,e]=y.useState(null),[n,r]=y.useState(!0),i=Vt();y.useEffect(()=>{(async()=>{try{if(!Xe.isAuthenticated()){i("/");return}const c=await Xe.getProfile();e(c)}catch(c){console.error("Error fetching user data:",c),Xe.logout(),i("/")}finally{r(!1)}})()},[i]);const a=async()=>{try{await Xe.logout(),i("/")}catch(o){console.error("Logout error:",o),i("/")}};if(n)return u.jsx("div",{className:"flex h-screen bg-gray-50 items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});const s=[{icon:Bx,label:"Home",path:"/dashboard"},{icon:Fr,label:"My Doubts",path:"/dashboard/doubts"},{icon:Br,label:"Solve Doubts",path:"/dashboard/doubts"},{icon:Fr,label:"Solved Doubts",active:!0,path:"/dashboard/solved-doubts"},{icon:Xt,label:"Notifications",path:"/dashboard/notifications"},{icon:Qt,label:"Messages",badge:4},{icon:Hl,label:"Settings"},{icon:zx,label:"Logout",onClick:a}];return u.jsxs("div",{className:"flex h-screen bg-gray-50",children:[u.jsxs("div",{className:"w-64 bg-white shadow-sm border-r border-gray-200",children:[u.jsx("div",{className:"p-6",children:u.jsxs("h1",{className:"text-xl font-semibold text-gray-800",children:["Hi ",u.jsx("span",{className:"text-blue-500",children:(t==null?void 0:t.name)||"User"})]})}),u.jsx("nav",{className:"mt-6",children:s.map((o,c)=>u.jsxs("div",{onClick:()=>{o.onClick?o.onClick():o.path&&i(o.path)},className:`flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50 cursor-pointer relative ${o.active?"text-blue-500 bg-blue-50 border-r-2 border-blue-500":""} ${o.label==="Logout"?"text-red-600 hover:text-red-700 hover:bg-red-50":""}`,children:[u.jsx(o.icon,{className:"w-5 h-5 mr-3"}),u.jsx("span",{className:"font-medium",children:o.label}),o.badge&&u.jsx("span",{className:"ml-auto bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:o.badge})]},c))})]}),u.jsxs("div",{className:"flex-1 overflow-hidden",children:[u.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsx("div",{className:"flex-1 max-w-2xl",children:u.jsxs("div",{className:"relative",children:[u.jsx(Yf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Search solved doubts...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})})})}),u.jsx("div",{className:"p-6 overflow-y-auto h-full",children:u.jsx(kye,{})})]})]})};var fP,hP;const Cye=((hP=(fP=import.meta)==null?void 0:fP.env)==null?void 0:hP.VITE_API_BASE_URL)||window.__API_BASE_URL__||"",Fe=`${Cye}/api/social`;class Eye{constructor(){this.token=localStorage.getItem("token")}getToken(){return this.token||localStorage.getItem("token")}async makeAuthenticatedRequest(e,n={}){const r=this.getToken();if(console.log("Making authenticated request to:",e),console.log("Token available:",!!r),!r)throw console.error("No authentication token found for social request"),new Error("Authentication required");const i={headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`,...n.headers}};try{const a=await fetch(e,{...i,...n});if(console.log("Response status:",a.status),a.status===401)throw console.error("Authentication failed - 401 status"),new Error("Authentication failed");return a}catch(a){throw console.error("Fetch error:",a),a}}async createPost(e){try{const n=await this.makeAuthenticatedRequest(`${Fe}/posts`,{method:"POST",body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to create post");return r}catch(n){throw console.error("Create post error:",n),n}}async getPosts(e=1,n=10,r={}){try{const i=new URLSearchParams({page:e.toString(),limit:n.toString(),...r}),a=await this.makeAuthenticatedRequest(`${Fe}/posts?${i}`),s=await a.json();if(!a.ok)throw new Error(s.message||"Failed to fetch posts");return s.data}catch(i){throw console.error("Get posts error:",i),i}}async toggleLike(e){try{const n=await this.makeAuthenticatedRequest(`${Fe}/posts/${e}/like`,{method:"POST"}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to toggle like");return r}catch(n){throw console.error("Toggle like error:",n),n}}async addComment(e,n){try{const r=await this.makeAuthenticatedRequest(`${Fe}/posts/${e}/comment`,{method:"POST",body:JSON.stringify({content:n})}),i=await r.json();if(!r.ok)throw new Error(i.message||"Failed to add comment");return i}catch(r){throw console.error("Add comment error:",r),r}}async sharePost(e){try{const n=await this.makeAuthenticatedRequest(`${Fe}/posts/${e}/share`,{method:"POST"}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to share post");return r}catch(n){throw console.error("Share post error:",n),n}}async toggleSave(e){try{const n=await this.makeAuthenticatedRequest(`${Fe}/posts/${e}/save`,{method:"POST"}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to toggle save");return r}catch(n){throw console.error("Toggle save error:",n),n}}async sendFriendRequest(e,n=""){try{const r=await this.makeAuthenticatedRequest(`${Fe}/users/find-by-email`,{method:"POST",body:JSON.stringify({email:e})});if(!r.ok)throw new Error("User not found with this email address");const a=(await r.json()).data.id,s=await this.makeAuthenticatedRequest(`${Fe}/friends/request`,{method:"POST",body:JSON.stringify({recipientId:a,message:n})}),o=await s.json();if(!s.ok)throw new Error(o.message||"Failed to send friend request");return o}catch(r){throw console.error("Send friend request error:",r),r}}async sendFriendRequestById(e,n=""){try{console.log("sendFriendRequestById called with recipientId:",e);const r=await this.makeAuthenticatedRequest(`${Fe}/friends/request`,{method:"POST",body:JSON.stringify({recipientId:e,message:n})});console.log("Friend request response status:",r.status);const i=await r.json();if(console.log("Friend request response data:",i),!r.ok)throw new Error(i.message||"Failed to send friend request");return i}catch(r){throw console.error("Send friend request by ID error:",r),r}}async getUserPosts(){try{const e=await this.makeAuthenticatedRequest(`${Fe}/posts/user`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch user posts");return n}catch(e){throw console.error("Get user posts error:",e),e}}async getUserStories(){try{const e=await this.makeAuthenticatedRequest(`${Fe}/stories/user`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch user stories");return n}catch(e){throw console.error("Get user stories error:",e),e}}async getFriends(){try{const e=await this.makeAuthenticatedRequest(`${Fe}/friends`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch friends");return n.data}catch(e){throw console.error("Get friends error:",e),e}}async getFriendRequests(){try{const e=await this.makeAuthenticatedRequest(`${Fe}/friends/requests`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch friend requests");return n.data}catch(e){throw console.error("Get friend requests error:",e),e}}async acceptFriendRequest(e){try{const n=await this.makeAuthenticatedRequest(`${Fe}/friends/${e}/accept`,{method:"POST"}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to accept friend request");return r}catch(n){throw console.error("Accept friend request error:",n),n}}async declineFriendRequest(e){try{const n=await this.makeAuthenticatedRequest(`${Fe}/friends/${e}/decline`,{method:"POST"}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to decline friend request");return r}catch(n){throw console.error("Decline friend request error:",n),n}}async getFriendSuggestions(){try{const e=await this.makeAuthenticatedRequest(`${Fe}/friends/suggestions`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch friend suggestions");return n.data}catch(e){throw console.error("Get friend suggestions error:",e),e}}async searchUsers(e){try{console.log("socialService.searchUsers called with:",e);const n=await this.makeAuthenticatedRequest(`${Fe}/users/search`,{method:"POST",body:JSON.stringify({name:e})});console.log("Search users response status:",n.status);const r=await n.json();if(console.log("Search users response data:",r),!n.ok)throw new Error(r.message||"Failed to search users");return r.data}catch(n){throw console.error("Search users error:",n),n}}async createStudyGroup(e){try{const n=await this.makeAuthenticatedRequest(`${Fe}/study-groups`,{method:"POST",body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to create study group");return r}catch(n){throw console.error("Create study group error:",n),n}}async getStudyGroups(e=1,n=10,r={}){try{const i=new URLSearchParams({page:e.toString(),limit:n.toString(),...r}),a=await this.makeAuthenticatedRequest(`${Fe}/study-groups?${i}`),s=await a.json();if(!a.ok)throw new Error(s.message||"Failed to fetch study groups");return s.data}catch(i){throw console.error("Get study groups error:",i),i}}async joinStudyGroup(e,n=null){try{const r=await this.makeAuthenticatedRequest(`${Fe}/study-groups/${e}/join`,{method:"POST",body:JSON.stringify({inviteCode:n})}),i=await r.json();if(!r.ok)throw new Error(i.message||"Failed to join study group");return i}catch(r){throw console.error("Join study group error:",r),r}}async createStory(e){try{const n=await this.makeAuthenticatedRequest(`${Fe}/stories`,{method:"POST",body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to create story");return r}catch(n){throw console.error("Create story error:",n),n}}async getStories(){try{try{const e=await this.makeAuthenticatedRequest(`${Fe}/stories`),n=await e.json();if(console.log("getStories - Authenticated response:",n),!e.ok)throw new Error(n.message||"Failed to fetch stories");return n}catch(e){console.log("Authentication failed, trying test route:",e.message);const n=await fetch(`${Fe}/test/stories`),r=await n.json();if(console.log("getStories - Test route response:",r),!n.ok)throw new Error(r.message||"Failed to fetch stories");return r}}catch(e){throw console.error("Get stories error:",e),e}}async viewStory(e){try{const n=await this.makeAuthenticatedRequest(`${Fe}/stories/${e}/view`,{method:"POST"}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to view story");return r}catch(n){throw console.error("View story error:",n),n}}async searchUsers(e,n=1,r=10){try{const i=new URLSearchParams({q:e,page:n.toString(),limit:r.toString()}),a=await this.makeAuthenticatedRequest(`${Fe}/search/users?${i}`),s=await a.json();if(!a.ok)throw new Error(s.message||"Failed to search users");return s.data}catch(i){throw console.error("Search users error:",i),i}}async searchPosts(e,n=1,r=10){try{const i=new URLSearchParams({q:e,page:n.toString(),limit:r.toString()}),a=await this.makeAuthenticatedRequest(`${Fe}/search/posts?${i}`),s=await a.json();if(!a.ok)throw new Error(s.message||"Failed to search posts");return s.data}catch(i){throw console.error("Search posts error:",i),i}}}const ut=new Eye;class jye{constructor(){this.userProfiles={student_cs:{name:"Computer Science Student",specialization:"Computer Science",interests:["Programming","AI","Web Development","Data Science"],color:"blue",dashboard:{featuredSubjects:["Programming","Algorithms","Data Structures","Machine Learning"],studyGroups:["CS Study Group","Programming Club","AI Enthusiasts"],recommendedContent:["React Tutorials","Python Basics","Algorithm Problems"]}},student_math:{name:"Mathematics Student",specialization:"Mathematics",interests:["Calculus","Linear Algebra","Statistics","Number Theory"],color:"green",dashboard:{featuredSubjects:["Calculus","Linear Algebra","Statistics","Discrete Math"],studyGroups:["Math Study Group","Statistics Club","Calculus Help"],recommendedContent:["Calculus Problems","Linear Algebra","Statistics Tutorials"]}},student_physics:{name:"Physics Student",specialization:"Physics",interests:["Quantum Physics","Mechanics","Thermodynamics","Electromagnetism"],color:"purple",dashboard:{featuredSubjects:["Quantum Mechanics","Classical Mechanics","Thermodynamics","Electromagnetism"],studyGroups:["Physics Study Group","Quantum Club","Mechanics Help"],recommendedContent:["Physics Problems","Quantum Theory","Mechanics Tutorials"]}},student_biology:{name:"Biology Student",specialization:"Biology",interests:["Molecular Biology","Genetics","Ecology","Biochemistry"],color:"green",dashboard:{featuredSubjects:["Molecular Biology","Genetics","Ecology","Biochemistry"],studyGroups:["Biology Study Group","Genetics Club","Ecology Society"],recommendedContent:["Biology Notes","Genetics Problems","Ecology Studies"]}},student_business:{name:"Business Student",specialization:"Business Administration",interests:["Marketing","Finance","Management","Entrepreneurship"],color:"orange",dashboard:{featuredSubjects:["Marketing","Finance","Management","Entrepreneurship"],studyGroups:["Business Club","Finance Society","Entrepreneurship Group"],recommendedContent:["Business Cases","Finance Tutorials","Marketing Strategies"]}}}}getUserDashboard(e,n="student"){const r=Object.keys(this.userProfiles),i=e.length%r.length,a=this.userProfiles[r[i]];return{user:{id:e,name:a.name,specialization:a.specialization,interests:a.interests,color:a.color,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(a.name)}&background=${a.color}500&color=fff&size=120`},dashboard:a.dashboard,personalizedContent:this.getPersonalizedContent(a),studyRecommendations:this.getStudyRecommendations(a),friendSuggestions:this.getFriendSuggestions(a)}}getPersonalizedContent(e){const n={"Computer Science":[{type:"post",title:"React Hooks Tutorial",author:"Tech Mentor",likes:45,subject:"Programming"},{type:"post",title:"Python Data Structures",author:"Code Master",likes:32,subject:"Programming"},{type:"story",title:"Algorithm Problem Solving",author:"Algo Expert",views:128,subject:"Algorithms"}],Mathematics:[{type:"post",title:"Calculus Integration Techniques",author:"Math Professor",likes:67,subject:"Calculus"},{type:"post",title:"Linear Algebra Applications",author:"Math Tutor",likes:43,subject:"Linear Algebra"},{type:"story",title:"Statistics Problem Walkthrough",author:"Stats Expert",views:89,subject:"Statistics"}],Physics:[{type:"post",title:"Quantum Mechanics Basics",author:"Physics Prof",likes:78,subject:"Quantum Physics"},{type:"post",title:"Classical Mechanics Problems",author:"Physics Tutor",likes:56,subject:"Mechanics"},{type:"story",title:"Thermodynamics Experiments",author:"Lab Assistant",views:156,subject:"Thermodynamics"}],Biology:[{type:"post",title:"Molecular Biology Techniques",author:"Bio Researcher",likes:89,subject:"Molecular Biology"},{type:"post",title:"Genetics Problem Solving",author:"Genetics Expert",likes:54,subject:"Genetics"},{type:"story",title:"Ecology Field Study",author:"Ecology Student",views:134,subject:"Ecology"}],"Business Administration":[{type:"post",title:"Marketing Strategies 2024",author:"Marketing Pro",likes:92,subject:"Marketing"},{type:"post",title:"Financial Analysis Methods",author:"Finance Expert",likes:67,subject:"Finance"},{type:"story",title:"Entrepreneurship Success Stories",author:"Business Mentor",views:203,subject:"Entrepreneurship"}]};return n[e.specialization]||n["Computer Science"]}getStudyRecommendations(e){return[{title:`Advanced ${e.specialization} Course`,difficulty:"Intermediate",duration:"8 weeks"},{title:`${e.specialization} Study Group`,difficulty:"Beginner",duration:"Ongoing"},{title:`${e.specialization} Certification`,difficulty:"Advanced",duration:"12 weeks"}]}getFriendSuggestions(e){return[{name:`${e.specialization} Study Buddy`,avatar:"https://ui-avatars.com/api/?name=Study+Buddy&background=blue500&color=fff",mutual:5},{name:`${e.specialization} Mentor`,avatar:"https://ui-avatars.com/api/?name=Mentor&background=green500&color=fff",mutual:3},{name:`${e.specialization} Classmate`,avatar:"https://ui-avatars.com/api/?name=Classmate&background=purple500&color=fff",mutual:8}]}getUserStudyGroups(e){return[{name:`${e.specialization} Study Group`,members:24,active:!0,subject:e.specialization},{name:`${e.specialization} Problem Solving`,members:18,active:!0,subject:"Problem Solving"},{name:`${e.specialization} Exam Prep`,members:31,active:!1,subject:"Exam Preparation"}]}getUserNotifications(e){return[{type:"study_reminder",message:`Don't forget your ${e.specialization} study session!`,time:"2 hours ago"},{type:"group_invite",message:`You've been invited to join ${e.specialization} Study Group`,time:"1 day ago"},{type:"achievement",message:`Congratulations! You've completed ${e.specialization} Module 3`,time:"3 days ago"}]}}const jv=new jye,Nye=()=>{var T,w,k,C,E,j,P,N;const[t,e]=y.useState([]);y.useState([]);const[n,r]=y.useState(!0),[i,a]=y.useState(!1),[s,o]=y.useState({content:"",type:"text",image:null,subject:"",hashtags:[]}),[c,l]=y.useState(!1),[d,f]=y.useState(0),[h,p]=y.useState(!1);y.useEffect(()=>{g()},[]);const g=async()=>{var _;try{const A=await ut.getStories();console.log("StoriesPage - Stories API response:",A),console.log("StoriesPage - Response data:",A.data),console.log("StoriesPage - Response data length:",(_=A.data)==null?void 0:_.length),console.log("StoriesPage - Response data type:",typeof A.data),console.log("StoriesPage - Response data is array:",Array.isArray(A.data));const R=(A.data||[]).map((L,U)=>{var q,D,$,I,V,J;return console.log(`StoriesPage - Processing story ${U}:`,L),console.log("StoriesPage - Story author:",L.author),{id:L._id,author:{name:((q=L.author)==null?void 0:q.name)||"Unknown",avatar:((D=L.author)==null?void 0:D.avatar)||"https://via.placeholder.com/40",username:`@${((I=($=L.author)==null?void 0:$.name)==null?void 0:I.toLowerCase().replace(/\s+/g,""))||"unknown"}`},content:L.content||"",type:L.mediaType||"text",image:L.media&&L.media.length>0?L.media[0]:null,createdAt:new Date(L.createdAt),views:((V=L.views)==null?void 0:V.length)||0,likes:((J=L.reactions)==null?void 0:J.length)||0,subject:L.subject,hashtags:L.hashtags||[]}});console.log("StoriesPage - Transformed stories:",R),e(R)}catch(A){console.error("Error loading stories:",A),e([{id:1,author:{name:"x_ae-23b",avatar:"https://via.placeholder.com/40",username:"@x_ae-23b"},content:"Just finished an amazing coding session! ",type:"text",image:null,createdAt:new Date(Date.now()-2*60*60*1e3),views:45,likes:12},{id:2,author:{name:"maisenpai",avatar:"https://via.placeholder.com/40",username:"@maisenpai"},content:"Learning React hooks today!",type:"text",image:null,createdAt:new Date(Date.now()-4*60*60*1e3),views:32,likes:8},{id:3,author:{name:"saylortwift",avatar:"https://via.placeholder.com/40",username:"@saylortwift"},content:"Beautiful sunset from my study room",type:"image",image:"https://via.placeholder.com/400x600",createdAt:new Date(Date.now()-6*60*60*1e3),views:78,likes:23}])}finally{r(!1)}},m=async()=>{if(!(!s.content.trim()&&!s.image)){if(!s.subject){alert("Please select a subject for your story");return}l(!0);try{console.log("Creating story with data:",s),await ut.createStory(s),console.log("Story created successfully, reloading stories..."),o({content:"",type:"text",image:null,subject:"",hashtags:[]}),a(!1),await g()}catch(_){console.error("Error creating story:",_)}finally{l(!1)}}},b=_=>{const A=_.target.files[0];if(A){const R=new FileReader;R.onload=L=>{o({...s,image:L.target.result,type:"image"})},R.readAsDataURL(A)}},v=_=>{f(_),p(!0)},x=async _=>{try{await ut.likeStory(_),await g()}catch(A){console.error("Error liking story:",A)}},S=_=>{const R=Math.floor((new Date-_)/(1e3*60*60));return R<1?"Just now":R<24?`${R}h ago`:`${Math.floor(R/24)}d ago`};return n?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})}):u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Stories"}),u.jsx("p",{className:"text-gray-600",children:"Share your learning moments"})]}),u.jsxs("button",{onClick:()=>a(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2",children:[u.jsx(qx,{className:"w-5 h-5"}),u.jsx("span",{children:"Create Story"})]})]})}),u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map((_,A)=>u.jsxs("div",{onClick:()=>v(A),className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden cursor-pointer hover:shadow-md transition-shadow",children:[u.jsx("div",{className:"p-4 border-b border-gray-100",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("img",{src:_.author.avatar,alt:_.author.name,className:"w-10 h-10 rounded-full"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:_.author.name}),u.jsx("p",{className:"text-sm text-gray-600",children:_.author.username})]}),u.jsx("span",{className:"text-xs text-gray-500",children:S(_.createdAt)})]})}),u.jsxs("div",{className:"relative",children:[_.type==="image"&&_.image?u.jsx("img",{src:_.image,alt:"Story",className:"w-full h-64 object-cover"}):u.jsx("div",{className:"w-full h-64 bg-gradient-to-br from-purple-100 to-blue-100 flex items-center justify-center",children:u.jsxs("div",{className:"text-center p-6",children:[u.jsx("div",{className:"w-16 h-16 bg-purple-200 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Ty,{className:"w-8 h-8 text-purple-600"})}),u.jsx("p",{className:"text-gray-700 font-medium",children:_.content})]})}),u.jsx("div",{className:"absolute top-3 right-3",children:_.type==="image"?u.jsxs("div",{className:"bg-black bg-opacity-50 text-white px-2 py-1 rounded-full text-xs flex items-center space-x-1",children:[u.jsx(a4,{className:"w-3 h-3"}),u.jsx("span",{children:"Photo"})]}):u.jsxs("div",{className:"bg-black bg-opacity-50 text-white px-2 py-1 rounded-full text-xs flex items-center space-x-1",children:[u.jsx(Qt,{className:"w-3 h-3"}),u.jsx("span",{children:"Text"})]})})]}),u.jsx("div",{className:"p-4",children:u.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("button",{onClick:R=>{R.stopPropagation(),x(_.id)},className:"flex items-center space-x-1 hover:text-red-600",children:[u.jsx(Wl,{className:"w-4 h-4"}),u.jsx("span",{children:_.likes})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(Qt,{className:"w-4 h-4"}),u.jsx("span",{children:_.views})]})]}),u.jsx("button",{className:"hover:text-gray-800",children:u.jsx(ts,{className:"w-4 h-4"})})]})})]},_.id))}),t.length===0&&u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Ty,{className:"w-12 h-12 text-gray-400"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Stories Yet"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Be the first to share your learning journey!"}),u.jsx("button",{onClick:()=>a(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium",children:"Create Your First Story"})]})]}),i&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Create Story"}),u.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600",children:u.jsx(Ni,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),u.jsxs("select",{value:s.subject,onChange:_=>o({...s,subject:_.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",required:!0,children:[u.jsx("option",{value:"",children:"Select a subject"}),u.jsx("option",{value:"Mathematics",children:"Mathematics"}),u.jsx("option",{value:"Physics",children:"Physics"}),u.jsx("option",{value:"Chemistry",children:"Chemistry"}),u.jsx("option",{value:"Biology",children:"Biology"}),u.jsx("option",{value:"Computer Science",children:"Computer Science"}),u.jsx("option",{value:"Engineering",children:"Engineering"}),u.jsx("option",{value:"Literature",children:"Literature"}),u.jsx("option",{value:"History",children:"History"}),u.jsx("option",{value:"Data Science",children:"Data Science"}),u.jsx("option",{value:"Artificial Intelligence",children:"Artificial Intelligence"}),u.jsx("option",{value:"Business",children:"Business"}),u.jsx("option",{value:"Economics",children:"Economics"}),u.jsx("option",{value:"Psychology",children:"Psychology"}),u.jsx("option",{value:"Sociology",children:"Sociology"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Story Type"}),u.jsxs("div",{className:"flex space-x-4",children:[u.jsx("button",{onClick:()=>o({...s,type:"text"}),className:`px-4 py-2 rounded-lg border ${s.type==="text"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-300 text-gray-700"}`,children:"Text"}),u.jsx("button",{onClick:()=>o({...s,type:"image"}),className:`px-4 py-2 rounded-lg border ${s.type==="image"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-300 text-gray-700"}`,children:"Image"})]})]}),s.type==="image"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Image"}),u.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"w-full p-3 border border-gray-300 rounded-lg"}),s.image&&u.jsx("img",{src:s.image,alt:"Preview",className:"w-full h-32 object-cover rounded-lg mt-2"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),u.jsx("textarea",{value:s.content,onChange:_=>o({...s,content:_.target.value}),placeholder:"What's happening in your learning journey?",className:"w-full p-3 border border-gray-300 rounded-lg h-32 resize-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags (optional)"}),u.jsx("input",{type:"text",value:s.hashtags.join(", "),onChange:_=>o({...s,hashtags:_.target.value.split(",").map(A=>A.trim()).filter(A=>A)}),placeholder:"Enter hashtags separated by commas (e.g., #learning, #coding, #math)",className:"w-full p-3 border border-gray-300 rounded-lg"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple hashtags with commas"})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[u.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),u.jsx("button",{onClick:m,disabled:c||!s.content.trim()&&!s.image||!s.subject,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:c?"Creating...":"Create Story"})]})]})}),h&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",children:u.jsxs("div",{className:"relative w-full max-w-md h-96 bg-white rounded-lg overflow-hidden",children:[u.jsx("button",{onClick:()=>p(!1),className:"absolute top-4 left-4 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full",children:u.jsx(Ni,{className:"w-6 h-6"})}),u.jsxs("div",{className:"p-6 h-full flex flex-col",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[u.jsx("img",{src:(T=t[d])==null?void 0:T.author.avatar,alt:(w=t[d])==null?void 0:w.author.name,className:"w-10 h-10 rounded-full"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:(k=t[d])==null?void 0:k.author.name}),u.jsx("p",{className:"text-sm text-gray-600",children:S((C=t[d])==null?void 0:C.createdAt)})]})]}),u.jsx("div",{className:"flex-1 flex items-center justify-center",children:((E=t[d])==null?void 0:E.type)==="image"&&((j=t[d])!=null&&j.image)?u.jsx("img",{src:t[d].image,alt:"Story",className:"max-w-full max-h-full object-contain"}):u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Qt,{className:"w-8 h-8 text-purple-600"})}),u.jsx("p",{className:"text-gray-700 text-lg",children:(P=t[d])==null?void 0:P.content})]})}),u.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("button",{onClick:()=>{var _;return x((_=t[d])==null?void 0:_.id)},className:"flex items-center space-x-2 text-gray-600 hover:text-red-600",children:[u.jsx(Wl,{className:"w-5 h-5"}),u.jsx("span",{children:(N=t[d])==null?void 0:N.likes})]}),u.jsxs("button",{className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600",children:[u.jsx(Qt,{className:"w-5 h-5"}),u.jsx("span",{children:"Reply"})]})]}),u.jsx("button",{className:"text-gray-600 hover:text-gray-800",children:u.jsx(ts,{className:"w-5 h-5"})})]})]})]})})]})},Pye=()=>{const[t,e]=y.useState([]),[n,r]=y.useState([]);y.useState([]);const[i,a]=y.useState([]),[s,o]=y.useState(!0),[c,l]=y.useState(""),[d,f]=y.useState("all"),[h,p]=y.useState(!1),[g,m]=y.useState(""),[b,v]=y.useState(!1),[x,S]=y.useState([]),[T,w]=y.useState(!1),[k,C]=y.useState(""),[E,j]=y.useState(!1),[P,N]=y.useState("");y.useEffect(()=>{_()},[]),y.useEffect(()=>{const I=setTimeout(()=>{k.length>=2?q(k):S([])},300);return()=>clearTimeout(I)},[k]);const _=async()=>{try{o(!0),console.log("Loading friends data...");const[I,V,J]=await Promise.all([ut.getFriends().catch(()=>({data:[]})),ut.getFriendRequests().catch(()=>({data:[]})),ut.getFriendSuggestions().catch(()=>({data:[]}))]);console.log("Friends response:",I),console.log("Requests response:",V),console.log("Suggestions response:",J),e(I.data||[]),r(V.data||[]),a(J.data||[])}catch(I){console.error("Error loading friends data:",I),e([{id:1,name:"John Doe",email:"john@example.com",avatar:"https://via.placeholder.com/40",status:"online",lastActive:"2 minutes ago",mutualFriends:5,isOnline:!0},{id:2,name:"Jane Smith",email:"jane@example.com",avatar:"https://via.placeholder.com/40",status:"offline",lastActive:"1 hour ago",mutualFriends:3,isOnline:!1},{id:3,name:"Mike Johnson",email:"mike@example.com",avatar:"https://via.placeholder.com/40",status:"online",lastActive:"5 minutes ago",mutualFriends:8,isOnline:!0}]),r([{id:1,name:"Alice Brown",email:"alice@example.com",avatar:"https://via.placeholder.com/40",sentAt:"2 hours ago"}]),a([{id:1,name:"Sarah Wilson",email:"sarah@example.com",avatar:"https://via.placeholder.com/40",mutualFriends:2,reason:"You have 2 mutual friends"},{id:2,name:"Tom Davis",email:"tom@example.com",avatar:"https://via.placeholder.com/40",mutualFriends:1,reason:"You have 1 mutual friend"}])}finally{o(!1)}},A=async()=>{if(g.trim()){v(!0);try{await ut.sendFriendRequest(g),N("Friend request sent successfully!"),j(!0),m(""),p(!1),await _()}catch(I){console.error("Error sending friend request:",I)}finally{v(!1)}}},R=async I=>{try{await ut.acceptFriendRequest(I),await _()}catch(V){console.error("Error accepting friend request:",V)}},L=async I=>{try{await ut.declineFriendRequest(I),await _()}catch(V){console.error("Error rejecting friend request:",V)}},U=async I=>{try{await ut.sendFriendRequestById(I),await _()}catch(V){console.error("Error adding friend from suggestion:",V)}},q=async I=>{if(I.length<2){S([]);return}w(!0);try{console.log("Searching for users with query:",I);const V=await ut.searchUsers(I);console.log("Search results:",V),S(V)}catch(V){console.error("Error searching users:",V),S([])}finally{w(!1)}},D=async I=>{try{console.log("Sending friend request to user ID:",I),await ut.sendFriendRequestById(I),console.log("Friend request sent successfully"),N("Friend request sent successfully!"),j(!0),S([]),C(""),await _()}catch(V){console.error("Error sending friend request:",V)}},$=t.filter(I=>I.name.toLowerCase().includes(c.toLowerCase())||I.email.toLowerCase().includes(c.toLowerCase()));return s?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})}):u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Friends"}),u.jsx("p",{className:"text-gray-600",children:"Manage your connections and discover new friends"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("button",{onClick:()=>p(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2",children:[u.jsx(Bs,{className:"w-5 h-5"}),u.jsx("span",{children:"Add Friend"})]}),u.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-800",children:u.jsx(Hl,{className:"w-5 h-5"})})]})]})}),u.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(Yf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Search friends...",value:c,onChange:I=>l(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),u.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-800",children:u.jsx(r4,{className:"w-5 h-5"})})]})}),u.jsx("div",{className:"bg-white border-b border-gray-200",children:u.jsxs("div",{className:"flex space-x-1 p-6",children:[u.jsxs("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-lg font-medium ${d==="all"?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-gray-900"}`,children:["All Friends (",t.length,")"]}),u.jsxs("button",{onClick:()=>f("requests"),className:`px-4 py-2 rounded-lg font-medium ${d==="requests"?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-gray-900"}`,children:["Requests (",n.length,")"]}),u.jsxs("button",{onClick:()=>f("suggestions"),className:`px-4 py-2 rounded-lg font-medium ${d==="suggestions"?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-gray-900"}`,children:["Suggestions (",i.length,")"]})]})}),u.jsxs("div",{className:"p-6",children:[d==="all"&&u.jsx("div",{className:"space-y-4",children:$.length>0?$.map(I=>u.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:I.avatar,alt:I.name,className:"w-12 h-12 rounded-full"}),I.isOnline&&u.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:I.name}),u.jsx("p",{className:"text-sm text-gray-600",children:I.email}),u.jsx("p",{className:"text-xs text-gray-500",children:I.lastActive})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{className:"p-2 text-gray-600 hover:text-blue-600",children:u.jsx(Qt,{className:"w-5 h-5"})}),u.jsx("button",{className:"p-2 text-gray-600 hover:text-red-600",children:u.jsx(Wl,{className:"w-5 h-5"})}),u.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-800",children:u.jsx(af,{className:"w-5 h-5"})})]})]})},I.id)):u.jsxs("div",{className:"text-center py-12",children:[u.jsx(yn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Friends Yet"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Start building your network by adding friends!"}),u.jsx("button",{onClick:()=>p(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium",children:"Add Your First Friend"})]})}),d==="requests"&&u.jsx("div",{className:"space-y-4",children:n.length>0?n.map(I=>u.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("img",{src:I.avatar,alt:I.name,className:"w-12 h-12 rounded-full"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:I.name}),u.jsx("p",{className:"text-sm text-gray-600",children:I.email}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Sent ",I.sentAt]})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("button",{onClick:()=>R(I.id),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[u.jsx(dk,{className:"w-4 h-4"}),u.jsx("span",{children:"Accept"})]}),u.jsxs("button",{onClick:()=>L(I.id),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[u.jsx(Ni,{className:"w-4 h-4"}),u.jsx("span",{children:"Decline"})]})]})]})},I.id)):u.jsxs("div",{className:"text-center py-12",children:[u.jsx(Bs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Pending Requests"}),u.jsx("p",{className:"text-gray-600",children:"You're all caught up!"})]})}),d==="suggestions"&&u.jsx("div",{className:"space-y-4",children:i.length>0?i.map(I=>u.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("img",{src:I.avatar,alt:I.name,className:"w-12 h-12 rounded-full"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:I.name}),u.jsx("p",{className:"text-sm text-gray-600",children:I.email}),u.jsx("p",{className:"text-xs text-gray-500",children:I.reason})]})]}),u.jsxs("button",{onClick:()=>U(I.id),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[u.jsx(Bs,{className:"w-4 h-4"}),u.jsx("span",{children:"Add"})]})]})},I.id)):u.jsxs("div",{className:"text-center py-12",children:[u.jsx(Oo,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Suggestions"}),u.jsx("p",{className:"text-gray-600",children:"We couldn't find any friend suggestions at the moment."})]})})]}),h&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Friend"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search by Name"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:k,onChange:I=>C(I.target.value),placeholder:"Search by name...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}),T&&u.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:u.jsx(fk,{className:"w-4 h-4 animate-spin text-gray-400"})})]}),x.length>0&&u.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg",children:x.map(I=>u.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("img",{src:I.avatar||"https://via.placeholder.com/32",alt:I.name,className:"w-8 h-8 rounded-full"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900",children:I.name}),u.jsx("p",{className:"text-sm text-gray-500",children:I.email})]})]}),u.jsxs("button",{onClick:()=>D(I.id),className:"px-4 py-2 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 flex items-center space-x-1",children:[u.jsx(Bs,{className:"w-4 h-4"}),u.jsx("span",{children:"Add Friend"})]})]},I.id))}),k.length>=2&&x.length===0&&!T&&u.jsx("div",{className:"mt-2 p-3 text-center text-gray-500 bg-gray-50 rounded-lg",children:u.jsxs("p",{children:['No users found with name "',k,'"']})})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-300"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-2 bg-white text-gray-500",children:"OR"})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add by Email Address"}),u.jsx("input",{type:"email",value:g,onChange:I=>m(I.target.value),placeholder:"Enter friend's email",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[u.jsx("button",{onClick:()=>{p(!1),C(""),S([]),m("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),u.jsx("button",{onClick:A,disabled:b||!g.trim(),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center space-x-2",children:b?u.jsxs(u.Fragment,{children:[u.jsx(fk,{className:"w-4 h-4 animate-spin"}),u.jsx("span",{children:"Sending..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Bs,{className:"w-4 h-4"}),u.jsx("span",{children:"Send Request"})]})})]})]})}),E&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-8 w-full max-w-md text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(dk,{className:"w-8 h-8 text-green-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Success!"}),u.jsx("p",{className:"text-gray-600 mb-6",children:P}),u.jsx("button",{onClick:()=>j(!1),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium",children:"OK"})]})})]})},_ye=({user:t,onUserUpdate:e})=>{const[n,r]=y.useState(!1),[i,a]=y.useState({}),[s,o]=y.useState({posts:0,friends:0,stories:0,likes:0}),[c,l]=y.useState(!0);y.useEffect(()=>{t&&(a({...t}),d())},[t]);const d=async()=>{var p,g,m;try{l(!0);const[b,v,x]=await Promise.all([ut.getUserPosts().catch(()=>({data:[]})),ut.getFriends().catch(()=>({data:[]})),ut.getUserStories().catch(()=>({data:[]}))]);o({posts:((p=b.data)==null?void 0:p.length)||0,friends:((g=v.data)==null?void 0:g.length)||0,stories:((m=x.data)==null?void 0:m.length)||0,likes:0})}catch(b){console.error("Error loading user stats:",b)}finally{l(!1)}},f=async()=>{try{await Xe.updateProfile(i),e(i),r(!1)}catch(p){console.error("Error updating profile:",p)}},h=()=>{a({...t}),r(!1)};return c?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})}):u.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[u.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:i.avatar||"https://via.placeholder.com/120",alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-purple-100"}),n&&u.jsx("button",{className:"absolute bottom-0 right-0 bg-purple-500 text-white p-2 rounded-full hover:bg-purple-600",children:u.jsx(Ty,{className:"w-4 h-4"})})]}),u.jsxs("div",{children:[n?u.jsx("input",{type:"text",value:i.name||"",onChange:p=>a({...i,name:p.target.value}),className:"text-2xl font-bold text-gray-900 border border-gray-300 rounded px-3 py-1"}):u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t==null?void 0:t.name}),n?u.jsx("input",{type:"text",value:i.email||"",onChange:p=>a({...i,email:p.target.value}),className:"text-gray-600 border border-gray-300 rounded px-3 py-1 mt-1"}):u.jsx("p",{className:"text-gray-600",children:t==null?void 0:t.email}),u.jsx("p",{className:"text-sm text-purple-600 mt-1",children:(t==null?void 0:t.membership)||"Student"})]})]}),u.jsx("div",{className:"flex space-x-2",children:n?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:f,className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center space-x-2",children:[u.jsx(d4,{className:"w-4 h-4"}),u.jsx("span",{children:"Save"})]}),u.jsxs("button",{onClick:h,className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 flex items-center space-x-2",children:[u.jsx(Ni,{className:"w-4 h-4"}),u.jsx("span",{children:"Cancel"})]})]}):u.jsxs("button",{onClick:()=>r(!0),className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 flex items-center space-x-2",children:[u.jsx(l4,{className:"w-4 h-4"}),u.jsx("span",{children:"Edit Profile"})]})})]})}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.posts}),u.jsx("div",{className:"text-sm text-gray-600",children:"Posts"})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.friends}),u.jsx("div",{className:"text-sm text-gray-600",children:"Friends"})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.stories}),u.jsx("div",{className:"text-sm text-gray-600",children:"Stories"})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.likes}),u.jsx("div",{className:"text-sm text-gray-600",children:"Likes"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[u.jsx(Gn,{className:"w-5 h-5 mr-2"}),"Personal Information"]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx($2,{className:"w-4 h-4 text-gray-400"}),u.jsx("span",{className:"text-gray-600",children:t==null?void 0:t.email})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx($x,{className:"w-4 h-4 text-gray-400"}),u.jsxs("span",{className:"text-gray-600",children:["Joined ",new Date().toLocaleDateString()]})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(Fr,{className:"w-4 h-4 text-gray-400"}),u.jsx("span",{className:"text-gray-600",children:"Student"})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[u.jsx(ky,{className:"w-5 h-5 mr-2"}),"Academic Information"]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(Fr,{className:"w-4 h-4 text-gray-400"}),u.jsx("span",{className:"text-gray-600",children:"Computer Science"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(ky,{className:"w-4 h-4 text-gray-400"}),u.jsx("span",{className:"text-gray-600",children:"Bachelor's Degree"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(s4,{className:"w-4 h-4 text-gray-400"}),u.jsx("span",{className:"text-gray-600",children:"University"})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mt-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[u.jsx(Wl,{className:"w-5 h-5 text-red-500"}),u.jsx("span",{className:"text-gray-700",children:"Liked a post about React Hooks"}),u.jsx("span",{className:"text-sm text-gray-500 ml-auto",children:"2 hours ago"})]}),u.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[u.jsx(Qt,{className:"w-5 h-5 text-blue-500"}),u.jsx("span",{className:"text-gray-700",children:"Commented on a study group post"}),u.jsx("span",{className:"text-sm text-gray-500 ml-auto",children:"4 hours ago"})]}),u.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[u.jsx(ts,{className:"w-5 h-5 text-green-500"}),u.jsx("span",{className:"text-gray-700",children:"Shared a helpful resource"}),u.jsx("span",{className:"text-sm text-gray-500 ml-auto",children:"1 day ago"})]})]})]})]})},ZN=()=>{var de,xe,Se,ke;const t=Vt(),{userId:e}=Bu(),[n,r]=y.useState(null),[i,a]=y.useState(!0),[s,o]=y.useState("feed"),[c,l]=y.useState([]),[d,f]=y.useState([]),[h,p]=y.useState([]),[g,m]=y.useState({content:"",images:[]}),[b,v]=y.useState(!1),[x,S]=y.useState(!1),[T,w]=y.useState(null),[k,C]=y.useState([]),[E,j]=y.useState([]),[P,N]=y.useState([]),[_,A]=y.useState([]);y.useEffect(()=>{(async()=>{try{if(!Xe.isAuthenticated()){t("/");return}const G=Xe.getCurrentUser();if(!G){t("/");return}r(G);const ae=e||G.id||"default_user";if(console.log("Using user ID from URL:",ae),!e&&G.id){console.log("No userId in URL, redirecting to user-specific URL"),t(`/dashboard/social/${G.id}`,{replace:!0});return}const oe=jv.getUserDashboard(ae);w(oe),C(oe.personalizedContent),j(oe.studyRecommendations),p(oe.friendSuggestions),N(jv.getUserStudyGroups(oe.user)),A(jv.getUserNotifications(oe.user)),await R(),await U(),await D()}catch(G){console.error("Error fetching data:",G)}finally{a(!1)}})()},[]),y.useEffect(()=>{console.log("Stories state updated:",d)},[d]),y.useEffect(()=>{s==="feed"&&(console.log("Switched to feed page, reloading stories..."),U())},[s]),y.useEffect(()=>{const K=()=>{console.log("User ID changed, reloading stories..."),U()};return window.addEventListener("storage",K),U(),()=>{window.removeEventListener("storage",K)}},[]);const R=async()=>{try{const K=e||localStorage.getItem("userId")||(n==null?void 0:n.id)||"user_"+Math.random().toString(36).substr(2,9);console.log("Loading posts for user ID from URL:",K);const G=L(K);console.log("User-specific posts:",G),l(G)}catch(K){console.error("Error loading posts:",K),l([])}},L=K=>{const G=K.split("").reduce((ce,ue)=>(ce=(ce<<5)-ce+ue.charCodeAt(0),ce&ce),0),ae=[{author:{name:"CS_Mentor",title:"Computer Science Professor",avatar:"https://ui-avatars.com/api/?name=CS+Mentor&background=blue500&color=fff"},content:"Just finished an amazing React tutorial! The hooks concept is revolutionary for state management.",hashtags:["#react","#javascript","#programming","#webdev"],subject:"Programming"},{author:{name:"Math_Teacher",title:"Mathematics Professor",avatar:"https://ui-avatars.com/api/?name=Math+Teacher&background=green500&color=fff"},content:"Solved a complex calculus problem today. Integration techniques are getting clearer!",hashtags:["#calculus","#mathematics","#integration","#learning"],subject:"Mathematics"},{author:{name:"Physics_Prof",title:"Physics Professor",avatar:"https://ui-avatars.com/api/?name=Physics+Prof&background=purple500&color=fff"},content:"Quantum mechanics is mind-bending! The double-slit experiment never gets old.",hashtags:["#physics","#quantum","#science","#research"],subject:"Physics"},{author:{name:"Bio_Researcher",title:"Biology Researcher",avatar:"https://ui-avatars.com/api/?name=Bio+Researcher&background=green500&color=fff"},content:"Molecular biology techniques are advancing rapidly. CRISPR is changing everything!",hashtags:["#biology","#molecular","#research","#crispr"],subject:"Biology"},{author:{name:"Business_Expert",title:"Business Consultant",avatar:"https://ui-avatars.com/api/?name=Business+Expert&background=orange500&color=fff"},content:"Marketing strategies for 2024 are evolving. Digital transformation is key!",hashtags:["#business","#marketing","#strategy","#digital"],subject:"Business"}],oe=[],X=Math.abs(G)%2+1;for(let ce=0;ce<X;ce++){const ue=(Math.abs(G)+ce)%ae.length,Oe=ae[ue];oe.push({id:`post_${K}_${ce}`,author:Oe.author,content:Oe.content,hashtags:Oe.hashtags,subject:Oe.subject,image:`https://via.placeholder.com/600x400?text=${Oe.subject}`,likes:Math.abs(G+ce)%50+10,comments:Math.abs(G+ce)%20+5,shares:Math.abs(G+ce)%30+3,saved:Math.abs(G+ce)%15+2,liked:!1,isSaved:!1})}return oe},U=async()=>{try{const K=e||localStorage.getItem("userId")||(n==null?void 0:n.id)||"user_"+Math.random().toString(36).substr(2,9);console.log("Loading stories for user ID from URL:",K),(!localStorage.getItem("userId")||e)&&localStorage.setItem("userId",K);const G=q(K);console.log("User-specific stories:",G),f(G)}catch(K){console.error("Error loading stories:",K),f([])}},q=K=>{console.log("Generating stories for user:",K);const G=K.split("").reduce((ce,ue)=>(ce=(ce<<5)-ce+ue.charCodeAt(0),ce&ce),0);console.log("User hash:",G);const ae={user1:[{name:"Alex_CS",avatar:"https://ui-avatars.com/api/?name=Alex&background=blue500&color=fff",color:"border-blue-500",content:"React hooks are amazing!",subject:"Programming"},{name:"Sarah_Dev",avatar:"https://ui-avatars.com/api/?name=Sarah&background=green500&color=fff",color:"border-green-500",content:"Just built my first API!",subject:"Web Development"},{name:"Mike_Code",avatar:"https://ui-avatars.com/api/?name=Mike&background=purple500&color=fff",color:"border-purple-500",content:"JavaScript async/await rocks!",subject:"JavaScript"}],user2:[{name:"Emma_Math",avatar:"https://ui-avatars.com/api/?name=Emma&background=green500&color=fff",color:"border-green-500",content:"Calculus derivatives are clear now!",subject:"Mathematics"},{name:"David_Stats",avatar:"https://ui-avatars.com/api/?name=David&background=blue500&color=fff",color:"border-blue-500",content:"Statistics probability solved!",subject:"Statistics"},{name:"Lisa_Algebra",avatar:"https://ui-avatars.com/api/?name=Lisa&background=orange500&color=fff",color:"border-orange-500",content:"Linear algebra matrices!",subject:"Linear Algebra"}],user3:[{name:"John_Physics",avatar:"https://ui-avatars.com/api/?name=John&background=purple500&color=fff",color:"border-purple-500",content:"Quantum mechanics is mind-blowing!",subject:"Physics"},{name:"Anna_Quantum",avatar:"https://ui-avatars.com/api/?name=Anna&background=red500&color=fff",color:"border-red-500",content:"Double-slit experiment!",subject:"Quantum Physics"},{name:"Tom_Mechanics",avatar:"https://ui-avatars.com/api/?name=Tom&background=green500&color=fff",color:"border-green-500",content:"Classical mechanics!",subject:"Mechanics"}],user4:[{name:"Maria_Bio",avatar:"https://ui-avatars.com/api/?name=Maria&background=green500&color=fff",color:"border-green-500",content:"DNA replication process!",subject:"Biology"},{name:"Carl_Genetics",avatar:"https://ui-avatars.com/api/?name=Carl&background=blue500&color=fff",color:"border-blue-500",content:"Genetics inheritance patterns!",subject:"Genetics"},{name:"Sofia_Molecular",avatar:"https://ui-avatars.com/api/?name=Sofia&background=purple500&color=fff",color:"border-purple-500",content:"Molecular biology techniques!",subject:"Molecular Biology"}],user5:[{name:"James_Business",avatar:"https://ui-avatars.com/api/?name=James&background=orange500&color=fff",color:"border-orange-500",content:"Marketing strategies 2024!",subject:"Business"},{name:"Rachel_Finance",avatar:"https://ui-avatars.com/api/?name=Rachel&background=green500&color=fff",color:"border-green-500",content:"Financial analysis methods!",subject:"Finance"},{name:"Kevin_Entrepreneur",avatar:"https://ui-avatars.com/api/?name=Kevin&background=blue500&color=fff",color:"border-blue-500",content:"Startup success stories!",subject:"Entrepreneurship"}]};let oe=[];if(ae[K])oe=ae[K];else{const ce=Object.values(ae).flat(),ue=Math.abs(G)%3+2;for(let Oe=0;Oe<ue;Oe++){const lt=(Math.abs(G)+Oe)%ce.length;oe.push(ce[lt])}}const X=oe.map((ce,ue)=>({id:`story_${K}_${ue}`,name:ce.name,avatar:ce.avatar,color:ce.color,content:ce.content,subject:ce.subject,createdAt:new Date(Date.now()-ue*36e5)}));return console.log("Final stories for",K,":",X),X},D=async()=>{try{const K=await ut.getFriendSuggestions();p(K.data||[])}catch(K){console.error("Error loading friend suggestions:",K),p([{name:"Julia Smith",username:"@juliasmith",avatar:"https://via.placeholder.com/40"},{name:"Vermillion D. Gray",username:"@vermilliongray",avatar:"https://via.placeholder.com/40"},{name:"Mai Senpai",username:"@maisenpai",avatar:"https://via.placeholder.com/40"},{name:"Oarack Babama",username:"@obama21",avatar:"https://via.placeholder.com/40"}])}},$=async()=>{if(g.content.trim()){S(!0);try{await ut.createPost(g),m({content:"",images:[]}),v(!1),await R()}catch(K){console.error("Error creating post:",K)}finally{S(!1)}}},I=async K=>{try{await ut.likePost(K),await R()}catch(G){console.error("Error liking post:",G)}},V=async K=>{try{await ut.savePost(K),await R()}catch(G){console.error("Error saving post:",G)}},J=async K=>{try{await ut.sharePost(K),await R()}catch(G){console.error("Error sharing post:",G)}},ne=async K=>{try{await ut.sendFriendRequest(K),await D()}catch(G){console.error("Error adding friend:",G)}};return i?u.jsx("div",{className:"flex h-screen bg-gray-50 items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading Educational Social Dashboard..."})]})}):u.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[u.jsx("div",{className:"w-64 bg-gradient-to-b from-purple-600 to-purple-700 text-white",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[u.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"text-purple-600 font-bold text-lg",children:"S"})}),u.jsx("span",{className:"text-xl font-bold",children:"slothui"})]}),u.jsx("div",{className:"mb-6",children:u.jsxs("div",{className:"relative",children:[u.jsx(Yf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-purple-300 w-4 h-4"}),u.jsx("input",{type:"text",placeholder:"Q Search",className:"w-full pl-10 pr-4 py-2 bg-purple-500 text-white placeholder-purple-300 rounded-lg border-0 focus:ring-2 focus:ring-purple-300"})]})}),u.jsxs("nav",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>o("feed"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${s==="feed"?"bg-purple-500":"hover:bg-purple-500"}`,children:[u.jsx(Bx,{className:"w-5 h-5"}),u.jsx("span",{children:"Feed"}),u.jsx("span",{className:"ml-auto bg-white text-purple-600 text-xs px-2 py-1 rounded-full",children:"10"})]}),u.jsxs("button",{onClick:()=>o("stories"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${s==="stories"?"bg-purple-500":"hover:bg-purple-500"}`,children:[u.jsx(Fr,{className:"w-5 h-5"}),u.jsx("span",{children:"Stories"})]}),u.jsxs("button",{onClick:()=>o("friends"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${s==="friends"?"bg-purple-500":"hover:bg-purple-500"}`,children:[u.jsx(yn,{className:"w-5 h-5"}),u.jsx("span",{children:"Friends"}),u.jsx("span",{className:"ml-auto bg-white text-purple-600 text-xs px-2 py-1 rounded-full",children:"2"})]}),u.jsxs("button",{onClick:()=>o("apis"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${s==="apis"?"bg-purple-500":"hover:bg-purple-500"}`,children:[u.jsx(z2,{className:"w-5 h-5"}),u.jsx("span",{children:"APIs"})]}),u.jsxs("button",{onClick:()=>o("subscription"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${s==="subscription"?"bg-purple-500":"hover:bg-purple-500"}`,children:[u.jsx(Oo,{className:"w-5 h-5"}),u.jsx("span",{children:"Subscription"})]}),u.jsxs("button",{onClick:()=>o("profile"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${s==="profile"?"bg-purple-500":"hover:bg-purple-500"}`,children:[u.jsx(Gn,{className:"w-5 h-5"}),u.jsx("span",{children:"Profile"})]}),u.jsxs("button",{onClick:()=>o("settings"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${s==="settings"?"bg-purple-500":"hover:bg-purple-500"}`,children:[u.jsx(Hl,{className:"w-5 h-5"}),u.jsx("span",{children:"Settings"})]}),u.jsxs("button",{onClick:()=>o("help"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${s==="help"?"bg-purple-500":"hover:bg-purple-500"}`,children:[u.jsx(Fx,{className:"w-5 h-5"}),u.jsx("span",{children:"Help & Support"})]})]}),u.jsx("div",{className:"mt-8",children:u.jsxs("button",{className:"w-full bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-3 px-4 rounded-lg flex items-center justify-center space-x-2",children:[u.jsx(Oo,{className:"w-5 h-5"}),u.jsx("span",{children:"Go Pro"})]})}),u.jsxs("div",{className:"mt-8 pt-6 border-t border-purple-500",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[u.jsx("img",{src:((de=T==null?void 0:T.user)==null?void 0:de.avatar)||(n==null?void 0:n.avatar),alt:"Profile",className:"w-10 h-10 rounded-full"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-semibold text-sm",children:((xe=T==null?void 0:T.user)==null?void 0:xe.name)||(n==null?void 0:n.name)}),u.jsx("p",{className:"text-xs text-purple-300",children:((Se=T==null?void 0:T.user)==null?void 0:Se.specialization)||"Student"}),u.jsxs("p",{className:"text-xs text-purple-200",children:["ID: ",e||localStorage.getItem("userId")||"Unknown"]})]}),u.jsx(t4,{className:"w-4 h-4 text-purple-300"})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("p",{className:"text-xs text-purple-200 mb-2",children:"Test Different Users:"}),u.jsx("div",{className:"flex flex-wrap gap-1",children:["user1","user2","user3","user4","user5"].map(K=>{const ae=(e||localStorage.getItem("userId"))===K;return u.jsxs("button",{onClick:()=>{console.log("Navigating to user:",K),t(`/dashboard/social/${K}`)},className:`text-xs px-2 py-1 rounded ${ae?"bg-green-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white"}`,children:[K," ",ae&&""]},K)})})]}),u.jsxs("button",{onClick:()=>{Xe.logout(),t("/")},className:"w-full flex items-center space-x-3 p-3 rounded-lg text-white hover:bg-red-600 transition-colors",children:[u.jsx(zx,{className:"w-5 h-5"}),u.jsx("span",{children:"Logout"})]})]})]})}),u.jsxs("div",{className:"flex-1 flex",children:[u.jsxs("div",{className:"flex-1 max-w-2xl",children:[s==="feed"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"bg-white p-6 border-b border-gray-200",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(Yf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Search for friends, groups, pages",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),u.jsxs("button",{onClick:()=>v(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2",children:[u.jsx(qx,{className:"w-5 h-5"}),u.jsx("span",{children:"Add New Post"})]})]})}),u.jsxs("div",{className:"bg-white p-6 border-b border-gray-200",children:[u.jsxs("div",{className:"mb-2",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Stories"}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Stories count: ",d.length]})]}),u.jsxs("div",{className:"flex space-x-4 overflow-x-auto",children:[d.length>0?d.map((K,G)=>u.jsxs("div",{className:"flex-shrink-0 text-center",children:[u.jsx("div",{className:`w-16 h-16 rounded-full border-4 ${K.color} p-1`,children:u.jsx("img",{src:K.avatar,alt:K.name,className:"w-full h-full rounded-full object-cover"})}),u.jsx("p",{className:"text-xs mt-2 text-gray-600",children:K.name})]},G)):u.jsxs("div",{className:"flex-shrink-0 text-center",children:[u.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-gray-300 p-1 flex items-center justify-center",children:u.jsx("span",{className:"text-xs text-gray-500",children:"No stories"})}),u.jsx("p",{className:"text-xs mt-2 text-gray-600",children:"No stories"})]}),u.jsxs("div",{className:"flex-shrink-0 text-center",children:[u.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-gray-300 p-1 flex items-center justify-center",children:u.jsx(eo,{className:"w-6 h-6 text-gray-400"})}),u.jsx("p",{className:"text-xs mt-2 text-gray-600",children:"More"})]})]})]}),u.jsx("div",{className:"bg-white mb-6",children:u.jsxs("div",{className:"p-6 border-b border-gray-200",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Recommended for ",(ke=T==null?void 0:T.user)==null?void 0:ke.specialization," Students"]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.slice(0,4).map((K,G)=>u.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm font-medium text-blue-600",children:K.subject}),u.jsx("span",{className:"text-xs text-gray-500",children:K.type})]}),u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:K.title}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm text-gray-600",children:["by ",K.author]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Wl,{className:"w-4 h-4 text-red-500"}),u.jsx("span",{className:"text-sm text-gray-600",children:K.likes||K.views})]})]})]},G))})]})}),u.jsx("div",{className:"bg-white",children:c.map(K=>u.jsxs("div",{className:"p-6 border-b border-gray-200",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("img",{src:K.author.avatar,alt:K.author.name,className:"w-12 h-12 rounded-full"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:K.author.name}),u.jsx("p",{className:"text-sm text-gray-600",children:K.author.title})]})]}),u.jsx(af,{className:"w-5 h-5 text-gray-400"})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("p",{className:"text-gray-800 mb-3",children:K.content}),u.jsx("div",{className:"flex flex-wrap gap-2",children:K.hashtags.map((G,ae)=>u.jsxs("span",{className:"text-blue-600 text-sm",children:["#",G]},ae))})]}),K.image&&u.jsx("div",{className:"mb-4",children:u.jsx("img",{src:K.image,alt:"Post",className:"w-full rounded-lg"})}),u.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-4",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("span",{children:[K.likes," Likes"]}),u.jsxs("span",{children:[K.comments," Comments"]}),u.jsxs("span",{children:[K.shares," Share"]}),u.jsxs("span",{children:[K.saved," Saved"]})]})}),u.jsx("div",{className:"flex items-center justify-between border-t border-gray-200 pt-4",children:u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsxs("button",{onClick:()=>I(K.id),className:`flex items-center space-x-2 ${K.liked?"text-blue-600":"text-gray-600 hover:text-blue-600"}`,children:[u.jsx(B2,{className:"w-5 h-5"}),u.jsx("span",{children:"Like"})]}),u.jsxs("button",{className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600",children:[u.jsx(Qt,{className:"w-5 h-5"}),u.jsx("span",{children:"Comment"})]}),u.jsxs("button",{onClick:()=>J(K.id),className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600",children:[u.jsx(ts,{className:"w-5 h-5"}),u.jsx("span",{children:"Share"})]}),u.jsxs("button",{onClick:()=>V(K.id),className:`flex items-center space-x-2 ${K.saved?"text-blue-600":"text-gray-600 hover:text-blue-600"}`,children:[u.jsx(Z$,{className:"w-5 h-5"}),u.jsx("span",{children:"Save"})]})]})}),u.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[u.jsx("img",{src:n==null?void 0:n.avatar,alt:"You",className:"w-8 h-8 rounded-full"}),u.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[u.jsx("input",{type:"text",placeholder:"Write your comment..",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),u.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:u.jsx(c4,{className:"w-5 h-5"})}),u.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:u.jsx(h4,{className:"w-5 h-5"})}),u.jsx("button",{className:"p-2 text-blue-600 hover:text-blue-700",children:u.jsx(f4,{className:"w-5 h-5"})})]})]})]},K.id))})]}),s==="stories"&&u.jsx(Nye,{}),s==="friends"&&u.jsx(Pye,{}),s==="profile"&&u.jsx(_ye,{user:n,onUserUpdate:r}),s==="apis"&&u.jsxs("div",{className:"bg-white p-6",children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:"APIs"}),u.jsx("p",{className:"text-gray-600",children:"API documentation and tools will be loaded here..."})]}),s==="subscription"&&u.jsxs("div",{className:"bg-white p-6",children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Subscription"}),u.jsx("p",{className:"text-gray-600",children:"Subscription plans and billing will be loaded here..."})]}),s==="settings"&&u.jsxs("div",{className:"bg-white p-6",children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Settings"}),u.jsx("p",{className:"text-gray-600",children:"Account settings and preferences will be loaded here..."})]}),s==="help"&&u.jsxs("div",{className:"bg-white p-6",children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Help & Support"}),u.jsx("p",{className:"text-gray-600",children:"Help articles and support will be loaded here..."})]})]}),u.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 p-6",children:[u.jsxs("div",{className:"flex items-center justify-end space-x-4 mb-6",children:[u.jsx(Gn,{className:"w-6 h-6 text-gray-600"}),u.jsx(Xt,{className:"w-6 h-6 text-gray-600"}),u.jsx(Hl,{className:"w-6 h-6 text-gray-600"})]}),u.jsxs("div",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Your Study Groups"}),u.jsxs("a",{href:"#",className:"text-blue-600 text-sm flex items-center",children:["See All",u.jsx(eo,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"space-y-3",children:P.map((K,G)=>u.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx(yn,{className:"w-5 h-5 text-blue-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:K.name}),u.jsxs("p",{className:"text-sm text-gray-600",children:[K.members," members  ",K.subject]})]}),u.jsx("div",{className:`w-2 h-2 rounded-full ${K.active?"bg-green-500":"bg-gray-400"}`})]},G))})]}),u.jsxs("div",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Recommended for You"}),u.jsxs("a",{href:"#",className:"text-blue-600 text-sm flex items-center",children:["See All",u.jsx(eo,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"space-y-3",children:E.map((K,G)=>u.jsxs("div",{className:"p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg",children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:K.title}),u.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[u.jsx("span",{children:K.difficulty}),u.jsx("span",{children:K.duration})]})]},G))})]}),u.jsxs("div",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Friend Suggestions"}),u.jsxs("a",{href:"#",className:"text-blue-600 text-sm flex items-center",children:["See All",u.jsx(eo,{className:"w-4 h-4 ml-1"})]})]}),u.jsx("div",{className:"space-y-4",children:h.map((K,G)=>u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("img",{src:K.avatar,alt:K.name,className:"w-10 h-10 rounded-full"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:K.name}),u.jsxs("p",{className:"text-sm text-gray-600",children:[K.mutual," mutual friends"]})]}),u.jsx("button",{onClick:()=>ne(K.id),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-full text-sm",children:"+"})]},G))})]}),u.jsxs("div",{className:"mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Profile Activity"}),u.jsx(af,{className:"w-5 h-5 text-gray-400"})]}),u.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[u.jsxs("div",{className:"flex -space-x-2",children:[u.jsx("img",{src:"https://via.placeholder.com/32",alt:"Follower",className:"w-8 h-8 rounded-full border-2 border-white"}),u.jsx("img",{src:"https://via.placeholder.com/32",alt:"Follower",className:"w-8 h-8 rounded-full border-2 border-white"}),u.jsx("img",{src:"https://via.placeholder.com/32",alt:"Follower",className:"w-8 h-8 rounded-full border-2 border-white"})]}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900",children:"+1,158 Followers"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Q$,{className:"w-4 h-4 text-green-600"}),u.jsx("span",{className:"text-sm text-green-600",children:"23% vs last month"})]})]})]}),u.jsx("p",{className:"text-sm text-gray-600",children:"You gained a substantial amount of followers this month!"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Upcoming Events"}),u.jsx(af,{className:"w-5 h-5 text-gray-400"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(i4,{className:"w-5 h-5 text-blue-600"}),u.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-semibold",children:"25"})})]}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Friend's Birthday"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Jun 25, 2028"})]})]})]})]})]}),b&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create New Post"}),u.jsx("textarea",{value:g.content,onChange:K=>m({...g,content:K.target.value}),placeholder:"What's on your mind?",className:"w-full p-3 border border-gray-300 rounded-lg mb-4 h-32 resize-none"}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),u.jsx("button",{onClick:$,disabled:x||!g.content.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:x?"Posting...":"Post"})]})]})})]})},Oye=()=>{const t=Vt(),[e,n]=y.useState(0),r=[{icon:u.jsx(uk,{className:"w-8 h-8"}),title:"Company Partnerships",description:"Connect with top companies for internships and job opportunities"},{icon:u.jsx(yn,{className:"w-8 h-8"}),title:"Professional Networking",description:"Build meaningful connections with industry professionals"},{icon:u.jsx(e4,{className:"w-8 h-8"}),title:"Career Guidance",description:"Get mentorship from experienced professionals in your field"},{icon:u.jsx(Cy,{className:"w-8 h-8"}),title:"Industry Insights",description:"Stay updated with latest trends and opportunities"},{icon:u.jsx(yn,{className:"w-8 h-8"}),title:"Online Live Referral System",description:"Get real-time referrals from professionals and alumni network"}];return y.useEffect(()=>{const i=setInterval(()=>{n(a=>(a+1)%r.length)},3e3);return()=>clearInterval(i)},[r.length]),u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[u.jsx("div",{className:"bg-white shadow-sm border-b",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex items-center justify-between h-16",children:[u.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[u.jsx(L2,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Back to Dashboard"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(uk,{className:"w-6 h-6 text-blue-600"}),u.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Corporate Connect"})]})]})})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[u.jsx(qe,{className:"w-4 h-4"}),"Coming Soon"]}),u.jsxs("h1",{className:"text-5xl font-bold text-gray-900 mb-6",children:["Bridge the Gap Between",u.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:[" ","Students & Industry"]})]}),u.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto mb-8",children:"Connect with top companies, build professional networks, and unlock career opportunities through our comprehensive corporate partnership platform."}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-4xl mx-auto mb-12",children:[u.jsx("div",{className:"flex items-center justify-center mb-6",children:u.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white",children:r[e].icon})}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:r[e].title}),u.jsx("p",{className:"text-gray-600 text-lg",children:r[e].description}),u.jsx("div",{className:"flex justify-center gap-2 mt-6",children:r.map((i,a)=>u.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${a===e?"bg-blue-500 scale-125":"bg-gray-300"}`},a))})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16",children:r.map((i,a)=>u.jsxs("div",{className:`bg-white rounded-xl p-6 shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1 ${a===e?"ring-2 ring-blue-500":""}`,children:[u.jsx("div",{className:"text-blue-500 mb-4",children:i.icon}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:i.title}),u.jsx("p",{className:"text-gray-600 text-sm",children:i.description})]},a))}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-16",children:[u.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-12",children:"What You'll Get"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx($e,{className:"w-8 h-8 text-green-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Direct Company Access"}),u.jsx("p",{className:"text-gray-600",children:"Connect directly with HR teams and hiring managers from top companies"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(yn,{className:"w-8 h-8 text-blue-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Mentorship Programs"}),u.jsx("p",{className:"text-gray-600",children:"Get guidance from industry experts and successful professionals"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Cy,{className:"w-8 h-8 text-purple-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Career Growth"}),u.jsx("p",{className:"text-gray-600",children:"Access exclusive opportunities and accelerate your career path"})]})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-16",children:[u.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-8",children:"Development Progress"}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:u.jsx($e,{className:"w-5 h-5 text-green-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Platform Architecture"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Core infrastructure and user management"})]})]}),u.jsx("span",{className:"text-green-600 font-semibold",children:"100%"})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:u.jsx($e,{className:"w-5 h-5 text-green-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Company Partnerships"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Initial partnerships with top companies"})]})]}),u.jsx("span",{className:"text-green-600 font-semibold",children:"85%"})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:u.jsx(qe,{className:"w-5 h-5 text-orange-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Live Referral System"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Real-time referral matching and notifications"})]})]}),u.jsx("span",{className:"text-orange-600 font-semibold",children:"65%"})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx(qe,{className:"w-5 h-5 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"AI-Powered Matching"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Advanced algorithms for opportunity matching"})]})]}),u.jsx("span",{className:"text-blue-600 font-semibold",children:"30%"})]})]})]}),u.jsx("div",{className:"text-center",children:u.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-12 text-white",children:[u.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Transform Your Career?"}),u.jsx("p",{className:"text-xl mb-8 opacity-90",children:"Be the first to know when Corporate Connect launches"}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center max-w-md mx-auto",children:[u.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-3 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white/50"}),u.jsx("button",{className:"bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors whitespace-nowrap",children:"Notify Me"})]}),u.jsx("p",{className:"text-sm mt-4 opacity-75",children:"We'll notify you as soon as Corporate Connect is available"})]})}),u.jsx("div",{className:"text-center mt-16 text-gray-500",children:u.jsx("p",{children:" 2024 Educational Platform. All rights reserved."})})]})]})},Aye=()=>{const t=Vt(),[e,n]=y.useState(0),r=[{icon:u.jsx(yn,{className:"w-8 h-8"}),title:"Real-time Referrals",description:"Get instant referrals from professionals in your network"},{icon:u.jsx(m4,{className:"w-8 h-8"}),title:"Verified Professionals",description:"Connect with verified industry experts and alumni"},{icon:u.jsx(o4,{className:"w-8 h-8"}),title:"Smart Matching",description:"AI-powered matching with relevant professionals"},{icon:u.jsx(Qt,{className:"w-8 h-8"}),title:"Direct Communication",description:"Chat directly with referrers and get personalized guidance"}];return y.useEffect(()=>{const i=setInterval(()=>{n(a=>(a+1)%r.length)},3e3);return()=>clearInterval(i)},[r.length]),u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-indigo-50",children:[u.jsx("div",{className:"bg-white shadow-sm border-b",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex items-center justify-between h-16",children:[u.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[u.jsx(L2,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Back to Dashboard"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(yn,{className:"w-6 h-6 text-purple-600"}),u.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Online Referral System"})]})]})})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 bg-purple-100 text-purple-800 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[u.jsx(qe,{className:"w-4 h-4"}),"Coming Soon"]}),u.jsxs("h1",{className:"text-5xl font-bold text-gray-900 mb-6",children:["Revolutionize Your",u.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600",children:[" ","Career with Referrals"]})]}),u.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto mb-8",children:"Connect with professionals, get real-time referrals, and unlock exclusive career opportunities through our advanced referral matching system."}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-4xl mx-auto mb-12",children:[u.jsx("div",{className:"flex items-center justify-center mb-6",children:u.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white",children:r[e].icon})}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:r[e].title}),u.jsx("p",{className:"text-gray-600 text-lg",children:r[e].description}),u.jsx("div",{className:"flex justify-center gap-2 mt-6",children:r.map((i,a)=>u.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${a===e?"bg-purple-500 scale-125":"bg-gray-300"}`},a))})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16",children:r.map((i,a)=>u.jsxs("div",{className:`bg-white rounded-xl p-6 shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1 ${a===e?"ring-2 ring-purple-500":""}`,children:[u.jsx("div",{className:"text-purple-500 mb-4",children:i.icon}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:i.title}),u.jsx("p",{className:"text-gray-600 text-sm",children:i.description})]},a))}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-16",children:[u.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-12",children:"Why Our Referral System?"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx($e,{className:"w-8 h-8 text-green-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Instant Connections"}),u.jsx("p",{className:"text-gray-600",children:"Get connected with professionals who can refer you to opportunities instantly"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(ky,{className:"w-8 h-8 text-blue-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Verified Network"}),u.jsx("p",{className:"text-gray-600",children:"All referrers are verified professionals with proven track records"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Cy,{className:"w-8 h-8 text-purple-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Higher Success Rate"}),u.jsx("p",{className:"text-gray-600",children:"Referrals have 5x higher success rate than traditional applications"})]})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-16",children:[u.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-8",children:"Development Progress"}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:u.jsx($e,{className:"w-5 h-5 text-green-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"User Authentication"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Secure login and profile management"})]})]}),u.jsx("span",{className:"text-green-600 font-semibold",children:"100%"})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:u.jsx($e,{className:"w-5 h-5 text-green-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Professional Verification"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Background verification system"})]})]}),u.jsx("span",{className:"text-green-600 font-semibold",children:"90%"})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:u.jsx(qe,{className:"w-5 h-5 text-orange-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Real-time Matching"}),u.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered referral matching algorithm"})]})]}),u.jsx("span",{className:"text-orange-600 font-semibold",children:"70%"})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx(qe,{className:"w-5 h-5 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Communication Platform"}),u.jsx("p",{className:"text-sm text-gray-600",children:"In-app messaging and video calls"})]})]}),u.jsx("span",{className:"text-blue-600 font-semibold",children:"45%"})]})]})]}),u.jsx("div",{className:"text-center",children:u.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl p-12 text-white",children:[u.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Get Referred?"}),u.jsx("p",{className:"text-xl mb-8 opacity-90",children:"Be the first to access our revolutionary referral system"}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center max-w-md mx-auto",children:[u.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-3 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white/50"}),u.jsx("button",{className:"bg-white text-purple-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors whitespace-nowrap",children:"Get Early Access"})]}),u.jsx("p",{className:"text-sm mt-4 opacity-75",children:"We'll notify you as soon as the referral system is available"})]})}),u.jsx("div",{className:"text-center mt-16 text-gray-500",children:u.jsx("p",{children:" 2024 Educational Platform. All rights reserved."})})]})]})},Rye=()=>{const t=Vt(),e=()=>{t("/auth")};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[u.jsx("style",{children:`
        @keyframes fadeInOut {
          0%, 100% { opacity: 0; transform: translateY(20px); }
          50% { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeInOutDelayed {
          0%, 20% { opacity: 0; transform: translateY(20px); }
          40%, 80% { opacity: 1; transform: translateY(0); }
          100% { opacity: 0; transform: translateY(-20px); }
        }
        
        @keyframes fadeInOutDelayed2 {
          0%, 40% { opacity: 0; transform: translateY(20px); }
          60%, 90% { opacity: 1; transform: translateY(0); }
          100% { opacity: 0; transform: translateY(-20px); }
        }
        
        .animate-fade-in-out {
          animation: fadeInOut 3s ease-in-out infinite;
        }
        
        .animate-fade-in-out-delayed {
          animation: fadeInOutDelayed 4s ease-in-out infinite;
        }
        
        .animate-fade-in-out-delayed-2 {
          animation: fadeInOutDelayed2 5s ease-in-out infinite;
        }
      `}),u.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[u.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-blue-200 rounded-full opacity-20 animate-pulse"}),u.jsx("div",{className:"absolute top-40 right-20 w-24 h-24 bg-purple-200 rounded-full opacity-20 animate-pulse delay-1000"}),u.jsx("div",{className:"absolute bottom-20 left-20 w-20 h-20 bg-green-200 rounded-full opacity-20 animate-pulse delay-2000"}),u.jsx("div",{className:"absolute bottom-40 right-10 w-28 h-28 bg-orange-200 rounded-full opacity-20 animate-pulse delay-500"}),u.jsx("div",{className:"absolute top-1/2 left-1/4 w-16 h-16 bg-pink-200 rounded-full opacity-15 animate-pulse delay-3000"}),u.jsx("div",{className:"absolute top-1/3 right-1/3 w-12 h-12 bg-cyan-200 rounded-full opacity-20 animate-pulse delay-1500"})]}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-sm border-b border-gray-200 shadow-sm",children:u.jsx("div",{className:"flex items-center justify-between p-6",children:u.jsx("div",{className:"flex items-center",children:u.jsxs("h1",{className:"text-3xl font-bold text-blue-900 italic",children:["EDU",u.jsxs("span",{className:"relative inline-block mx-1",children:[u.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg transform rotate-3"}),u.jsx("span",{className:"relative bg-gradient-to-r from-red-400 to-orange-400 rounded-lg px-1 py-0.5 text-white font-bold text-2xl",children:"F"})]}),"OYER"]})})})}),u.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 pt-24",children:[u.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"relative",children:[u.jsx("h2",{className:"text-5xl md:text-6xl font-bold text-gray-800 mb-4 leading-tight animate-fade-in-out",children:"Learn together and"}),u.jsx("h2",{className:"text-5xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-6 leading-tight animate-fade-in-out-delayed",children:"Earn together"}),u.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full animate-fade-in-out-delayed-2"}),u.jsx("div",{className:"absolute -top-4 -right-4 w-8 h-8 bg-blue-400 rounded-full opacity-60 animate-fade-in-out"}),u.jsx("div",{className:"absolute -bottom-2 -left-4 w-6 h-6 bg-purple-400 rounded-full opacity-60 animate-fade-in-out-delayed"}),u.jsx("div",{className:"absolute top-1/2 -right-8 w-4 h-4 bg-green-400 rounded-full opacity-60 animate-fade-in-out-delayed-2"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("p",{className:"text-xl text-gray-700 leading-relaxed",children:["We are providing ",u.jsx("span",{className:"font-semibold text-blue-600",children:"peer-to-peer live 24*7 real-time doubt solving platform"})," that connects students with expert solvers instantly."]}),u.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:"Join thousands of students and educators in our interactive learning community where knowledge meets opportunity."})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/50 rounded-lg backdrop-blur-sm",children:[u.jsx(Br,{className:"w-5 h-5 text-blue-600"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Live Sessions"})]}),u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/50 rounded-lg backdrop-blur-sm",children:[u.jsx(yn,{className:"w-5 h-5 text-green-600"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Peer Learning"})]}),u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/50 rounded-lg backdrop-blur-sm",children:[u.jsx(Qt,{className:"w-5 h-5 text-purple-600"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Real-time Chat"})]}),u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/50 rounded-lg backdrop-blur-sm",children:[u.jsx(z2,{className:"w-5 h-5 text-orange-600"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Instant Help"})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs("button",{onClick:e,className:"group bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-300 transform hover:scale-105 hover:shadow-xl flex items-center justify-center gap-3 min-w-[200px]",children:[u.jsx(Fx,{className:"w-6 h-6"}),u.jsx("span",{children:"Ask Doubt"}),u.jsx(eo,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),u.jsxs("button",{onClick:e,className:"group bg-green-600 hover:bg-green-700 text-white px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-300 transform hover:scale-105 hover:shadow-xl flex items-center justify-center gap-3 min-w-[200px]",children:[u.jsx(Fr,{className:"w-6 h-6"}),u.jsx("span",{children:"Solve Doubt"}),u.jsx(eo,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-2xl border border-white/20",children:u.jsxs("div",{className:"text-center space-y-6",children:[u.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto",children:u.jsx(yn,{className:"w-10 h-10 text-white"})}),u.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Interactive Learning"}),u.jsx("p",{className:"text-gray-600",children:"Connect with peers and experts in real-time"}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"10K+"}),u.jsx("div",{className:"text-xs text-gray-500",children:"Students"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-green-600",children:"5K+"}),u.jsx("div",{className:"text-xs text-gray-500",children:"Solvers"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"50K+"}),u.jsx("div",{className:"text-xs text-gray-500",children:"Doubts Solved"})]})]})]})}),u.jsx("div",{className:"absolute -top-4 -right-4 bg-green-500 text-white p-4 rounded-xl shadow-lg transform rotate-6",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(qe,{className:"w-4 h-4"}),u.jsx("span",{className:"text-sm font-medium",children:"Live Now"})]})}),u.jsx("div",{className:"absolute -bottom-4 -left-4 bg-orange-500 text-white p-4 rounded-xl shadow-lg transform -rotate-6",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Oo,{className:"w-4 h-4"}),u.jsx("span",{className:"text-sm font-medium",children:"4.9 Rating"})]})})]})]}),u.jsxs("div",{className:"mt-16 text-center",children:[u.jsxs("div",{className:"flex justify-center items-center gap-8 text-sm text-gray-600 mb-8",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx($e,{className:"w-4 h-4 text-blue-500"}),u.jsx("span",{children:"Verified Experts"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx($e,{className:"w-4 h-4 text-green-500"}),u.jsx("span",{children:"Instant Solutions"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx($e,{className:"w-4 h-4 text-purple-500"}),u.jsx("span",{children:"24/7 Support"})]})]}),u.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Join our community of learners and educators. Get instant help with your doubts and earn by helping others."})]})]})]})]})},Iye=()=>{const[t,e]=y.useState({email:"",name:"",specialities:[""],experience:"beginner",bio:""}),[n,r]=y.useState(!1),[i,a]=y.useState(""),[s,o]=y.useState(""),[c,l]=y.useState(null),[d,f]=y.useState(!0),h=Vt();if(y.useEffect(()=>{(async()=>{try{if(!Xe.isAuthenticated()){h("/auth");return}const S=await Xe.getProfile();if(l(S),S.role!=="admin"){h("/dashboard");return}}catch(S){console.error("Admin access check failed:",S),h("/auth")}finally{f(!1)}})()},[h]),d)return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),u.jsx("p",{className:"mt-4 text-gray-600",children:"Checking admin access..."})]})});if(!c||c.role!=="admin")return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have admin privileges to access this page."}),u.jsx("button",{onClick:()=>h("/dashboard"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Go to Dashboard"})]})});const p=x=>{const{name:S,value:T}=x.target;e(w=>({...w,[S]:T}))},g=(x,S)=>{const T=[...t.specialities];T[x]=S,e(w=>({...w,specialities:T}))},m=()=>{e(x=>({...x,specialities:[...x.specialities,""]}))},b=x=>{if(t.specialities.length>1){const S=t.specialities.filter((T,w)=>w!==x);e(T=>({...T,specialities:S}))}},v=async x=>{x.preventDefault(),r(!0),o(""),a("");try{const S=t.specialities.filter(w=>w.trim()!=="");if(S.length===0){o("At least one speciality is required"),r(!1);return}const T=await Xe.onboardSolver({...t,specialities:S});T.success?(a(`Solver onboarded successfully! ${T.data.emailSent?"Onboarding email sent.":"Email sending failed."}`),e({email:"",name:"",specialities:[""],experience:"beginner",bio:""})):o(T.message||"Failed to onboard solver")}catch(S){o("Network error. Please try again."),console.error("Onboarding error:",S)}finally{r(!1)}};return u.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:u.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"bg-white shadow-lg rounded-lg",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel - Solver Onboarding"}),u.jsx("p",{className:"text-gray-600 mt-1",children:"Onboard new solvers by email with their subject specialities"})]}),u.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),u.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"solver@example.com"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),u.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"John Doe"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject Specialities *"}),t.specialities.map((x,S)=>u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsx("input",{type:"text",value:x,onChange:T=>g(S,T.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Mathematics, Physics, Chemistry",required:!0}),t.specialities.length>1&&u.jsx("button",{type:"button",onClick:()=>b(S),className:"px-3 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Remove"})]},S)),u.jsx("button",{type:"button",onClick:m,className:"mt-2 px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Add Speciality"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"experience",className:"block text-sm font-medium text-gray-700 mb-2",children:"Experience Level"}),u.jsxs("select",{id:"experience",name:"experience",value:t.experience,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[u.jsx("option",{value:"beginner",children:"Beginner"}),u.jsx("option",{value:"intermediate",children:"Intermediate"}),u.jsx("option",{value:"advanced",children:"Advanced"}),u.jsx("option",{value:"expert",children:"Expert"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio (Optional)"}),u.jsx("textarea",{id:"bio",name:"bio",value:t.bio,onChange:p,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Brief description of expertise and background..."})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{type:"submit",disabled:n,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Onboarding...":"Onboard Solver"})}),i&&u.jsx("div",{className:"p-4 bg-green-100 border border-green-400 text-green-700 rounded-md",children:i}),s&&u.jsx("div",{className:"p-4 bg-red-100 border border-red-400 text-red-700 rounded-md",children:s})]}),u.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"How it works:"}),u.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[u.jsx("li",{children:" The solver will receive an onboarding email with temporary login credentials"}),u.jsx("li",{children:" They can immediately start helping students with doubts in their speciality subjects"}),u.jsx("li",{children:" The solver should change their password after first login for security"}),u.jsx("li",{children:" Admin can manage solver access and specialities from this panel"})]})]})]})})})},Mye=()=>{const[t,e]=y.useState("21055834@kiit.ac.in"),[n,r]=y.useState("123456"),[i,a]=y.useState(!1),[s,o]=y.useState(""),c=Vt(),l=async d=>{d.preventDefault(),o(""),a(!0);try{const f=await Xe.login(t,n);f&&f.user&&(f.user.role==="admin"||f.user.isAdmin)?c("/admin/dashboard"):o("Admin access required")}catch(f){if(t==="21055834@kiit.ac.in"&&n==="123456")try{localStorage.setItem("token","dev-admin"),localStorage.setItem("adminBypass","true"),c("/admin/dashboard");return}catch{}o(f.message||"Login failed")}finally{a(!1)}};return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:u.jsxs("div",{className:"w-full max-w-md bg-white border border-gray-200 rounded-lg shadow-sm p-6",children:[u.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-1",children:"Admin Login"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Sign in to access the admin dashboard"}),u.jsxs("form",{onSubmit:l,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),u.jsx("input",{id:"email",type:"email",value:t,onChange:d=>e(d.target.value),required:!0,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"admin@example.com"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),u.jsx("input",{id:"password",type:"password",value:n,onChange:d=>r(d.target.value),required:!0,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:""})]}),s&&u.jsx("div",{className:"p-3 rounded-md bg-red-50 text-red-700 border border-red-200 text-sm",children:s}),u.jsx("button",{type:"submit",disabled:i,className:"w-full bg-blue-600 hover:bg-blue-700 text-white rounded-md px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Signing in...":"Sign in"})]})]})})},Dye=()=>{const[t,e]=y.useState(null),[n,r]=y.useState(!0),i=Vt();return y.useEffect(()=>{(async()=>{try{const s=localStorage.getItem("adminBypass")==="true";if(!Xe.isAuthenticated()&&!s){i("/auth");return}let o=null;if(s?o={role:"admin"}:o=await Xe.getProfile(),e(o),o.role!=="admin"){i("/dashboard");return}}catch(s){console.error("Admin access check failed:",s),i("/auth")}finally{r(!1)}})()},[i]),n?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),u.jsx("p",{className:"mt-4 text-gray-600",children:"Checking admin access..."})]})}):!t||t.role!=="admin"?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have admin privileges to access this page."}),u.jsx("button",{onClick:()=>i("/dashboard"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Go to Dashboard"})]})}):null},Lye=()=>u.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[u.jsx(Dye,{}),u.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Admin Dashboard"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Register new solvers directly from here"}),u.jsx("div",{className:"relative",children:u.jsx(_I,{defaultOpen:!0})})]})})]});function $ye(){return u.jsx(G$,{children:u.jsx("div",{className:"App",children:u.jsxs(V$,{children:[u.jsx(rt,{path:"/",element:u.jsx(Rye,{})}),u.jsx(rt,{path:"/auth",element:u.jsx(x4,{})}),u.jsx(rt,{path:"/onboarding",element:u.jsx(ile,{})}),u.jsx(rt,{path:"/dashboard",element:u.jsx(ele,{})}),u.jsx(rt,{path:"/dashboard/doubts",element:u.jsx(ole,{})}),u.jsx(rt,{path:"/dashboard/notifications",element:u.jsx(dle,{})}),u.jsx(rt,{path:"/dashboard/awaiting/:doubtId",element:u.jsx(Che,{})}),u.jsx(rt,{path:"/dashboard/session/:doubtId",element:u.jsx(yye,{})}),u.jsx(rt,{path:"/dashboard/pyq",element:u.jsx(bye,{})}),u.jsx(rt,{path:"/dashboard/pyq/:roomName",element:u.jsx(wye,{})}),u.jsx(rt,{path:"/dashboard/solve/:doubtId",element:u.jsx(Sye,{})}),u.jsx(rt,{path:"/dashboard/solved-doubts",element:u.jsx(Tye,{})}),u.jsx(rt,{path:"/dashboard/corporate-connect",element:u.jsx(Oye,{})}),u.jsx(rt,{path:"/dashboard/referral-system",element:u.jsx(Aye,{})}),u.jsx(rt,{path:"/dashboard/social",element:u.jsx(ZN,{})}),u.jsx(rt,{path:"/dashboard/social/:userId",element:u.jsx(ZN,{})}),u.jsx(rt,{path:"/admin/login",element:u.jsx(Mye,{})}),u.jsx(rt,{path:"/admin/dashboard",element:u.jsx(Lye,{})}),u.jsx(rt,{path:"/admin/panel",element:u.jsx(Iye,{})}),u.jsx(rt,{path:"/demo/awaiting-solver",element:u.jsx(Ehe,{})}),u.jsx(rt,{path:"/test/awaiting-flow",element:u.jsx(jhe,{})})]})})})}Nv.createRoot(document.getElementById("root")).render(u.jsx(M.StrictMode,{children:u.jsx($ye,{})}));
