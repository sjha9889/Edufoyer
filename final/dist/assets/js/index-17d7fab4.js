var xs=Object.defineProperty,hs=Object.defineProperties;var gs=Object.getOwnPropertyDescriptors;var Ut=Object.getOwnPropertySymbols;var bs=Object.prototype.hasOwnProperty,ps=Object.prototype.propertyIsEnumerable;var Mt=(n,s,t)=>s in n?xs(n,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[s]=t,M=(n,s)=>{for(var t in s||(s={}))bs.call(s,t)&&Mt(n,t,s[t]);if(Ut)for(var t of Ut(s))ps.call(s,t)&&Mt(n,t,s[t]);return n},Z=(n,s)=>hs(n,gs(s));var fs=(n,s)=>()=>(s||n((s={exports:{}}).exports,s),s.exports);var g=(n,s,t)=>new Promise((a,r)=>{var i=d=>{try{m(t.next(d))}catch(x){r(x)}},l=d=>{try{m(t.throw(d))}catch(x){r(x)}},m=d=>d.done?a(d.value):Promise.resolve(d.value).then(i,l);m((t=t.apply(n,s)).next())});import{r as o,j as e,M as Ae,b as xe,C as te,c as Ze,S as ys,d as js,u as he,X as de,E as et,e as Oe,F as Ee,f as Pe,g as ne,I as Je,H as Ft,U as ot,h as ke,P as Ge,L as be,W as st,i as Kt,k as Lt,l as vs,T as We,m as ws,B as je,V as Ye,n as _e,o as Ns,p as ft,q as qe,s as Ve,t as lt,v as ye,w as Ce,x as nt,y as Se,z as ks,D as Te,G as Fe,J as Ht,K as at,N as it,O as Qt,Q as Ss,Y as Xt,Z as Zt,_ as xt,$ as Re,a0 as _t,a1 as kt,a2 as Ps,a3 as rt,a4 as St,a5 as Cs,a6 as ut,a7 as Pt,a8 as Ds,a9 as As,aa as ht,ab as yt,ac as es,ad as Es,ae as Qe,af as Rs,ag as Ts,ah as Is,ai as Fs,aj as $t,ak as Ls,al as ts,am as _s,an as $s,ao as Os,ap as Us,aq as Ms,ar as ss,as as qs,at as Ct,au as Bs,av as as,aw as gt,ax as qt,ay as Ot,az as zs,aA as Js,R as Dt,aB as Gs,aC as Ws,aD as Ys,aE as ce,aF as Vs}from"./vendor-react-21dabc43.js";import{v as dt,w as At,x as Ks,y as Et,X as Rt,Y as Tt,z as Hs,B as Qs,D as Bt,E as Xs,F as Zs,G as ea}from"./vendor-45231561.js";/* empty css                       */var jr=fs(I=>{(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const Le="/api/auth";class ta{constructor(){this.token=localStorage.getItem("token")}setToken(s){this.token=s,localStorage.setItem("token",s)}removeToken(){this.token=null,localStorage.removeItem("token")}getToken(){return this.token||localStorage.getItem("token")}isAuthenticated(){return!!this.getToken()}makeAuthenticatedRequest(a){return g(this,arguments,function*(s,t={}){const r=this.getToken();if(!r)throw new Error("No authentication token found");const i={headers:M({"Content-Type":"application/json",Authorization:`Bearer ${r}`},t.headers)},l=yield fetch(s,M(M({},i),t));if(l.status===401)throw this.removeToken(),new Error("Authentication failed");return l})}login(s,t){return g(this,null,function*(){try{console.log("Attempting login to:",`${Le}/login`),console.log("Login data:",{email:s,password:"***"});const a=yield fetch(`${Le}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:t})});console.log("Response status:",a.status),console.log("Response headers:",a.headers);let r;try{r=yield a.json()}catch(i){throw new Error(`Invalid server response (${a.status}).`)}if(console.log("Response data:",r),r===void 0)throw console.error("Data is undefined immediately after parsing"),new Error("Server returned undefined response");if(r===null)throw console.error("Data is null immediately after parsing"),new Error("Server returned null response");if(!a.ok)throw new Error(r.message||"Login failed");if(r==null)throw console.error("Data is undefined/null at final check"),new Error("Server returned invalid response");if(r.success&&r.data.token)return this.setToken(r.data.token),{success:!0,user:r.data.user,token:r.data.token};throw new Error("Invalid response from server")}catch(a){throw console.error("Login error:",a),console.error("Error details:",{name:a.name,message:a.message,stack:a.stack}),a}})}register(s,t,a){return g(this,null,function*(){try{const r=yield fetch(`${Le}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,email:t,password:a})});let i;try{i=yield r.json()}catch(l){throw new Error(`Invalid server response (${r.status}).`)}if(i===void 0)throw console.error("Data is undefined immediately after parsing"),new Error("Server returned undefined response");if(i===null)throw console.error("Data is null immediately after parsing"),new Error("Server returned null response");if(!r.ok)throw new Error(i.message||"Registration failed");if(i==null)throw console.error("Data is undefined/null at final check"),new Error("Server returned invalid response");if(i.success){if(i.data.verificationRequired)return{success:!0,message:i.message,verificationRequired:!0,user:i.data.user};if(i.data.token)return this.setToken(i.data.token),{success:!0,user:i.data.user,token:i.data.token}}throw new Error(i.message||"Invalid response from server")}catch(r){throw console.error("Registration error:",r),r}})}getProfile(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(`${Le}/profile`),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch profile");return t.data.user}catch(s){throw console.error("Profile fetch error:",s),s}})}updateProfile(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${Le}/profile`,{method:"PUT",body:JSON.stringify(s)}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Profile update failed");return a.data.user}catch(t){throw console.error("Profile update error:",t),t}})}logout(){return g(this,null,function*(){try{this.getToken()&&(yield this.makeAuthenticatedRequest(`${Le}/logout`,{method:"POST"}))}catch(s){console.error("Logout error:",s)}finally{this.removeToken()}})}forgotPassword(s){return g(this,null,function*(){try{const t=yield fetch(`${Le}/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})});let a;const r=t.headers.get("content-type");if(r&&r.includes("application/json"))try{const i=yield t.text();a=i?JSON.parse(i):{}}catch(i){throw console.error("JSON parse error:",i),new Error("Invalid server response. Please try again.")}else{const i=yield t.text();throw new Error(i||`Server error (${t.status}). Please try again.`)}if(!t.ok)throw new Error(a.message||"Failed to send password reset email");return{success:!0,message:a.message||"Password reset email sent successfully"}}catch(t){throw console.error("Forgot password error:",t),t instanceof Error?t:new Error(t.message||"Failed to send password reset email. Please try again.")}})}verifyResetOTP(s,t){return g(this,null,function*(){try{const a=yield fetch(`${Le}/verify-reset-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,otp:t})});let r;const i=a.headers.get("content-type");if(i&&i.includes("application/json"))try{const l=yield a.text();r=l?JSON.parse(l):{}}catch(l){throw console.error("JSON parse error:",l),new Error("Invalid server response. Please try again.")}else{const l=yield a.text();throw new Error(l||`Server error (${a.status}). Please try again.`)}if(!a.ok)throw new Error(r.message||"Failed to verify OTP");return{success:!0,message:r.message||"OTP verified successfully"}}catch(a){throw console.error("Verify reset OTP error:",a),a instanceof Error?a:new Error(a.message||"Failed to verify OTP. Please try again.")}})}resetPassword(s,t,a){return g(this,null,function*(){try{const r=yield fetch(`${Le}/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,otp:t,password:a})});let i;const l=r.headers.get("content-type");if(l&&l.includes("application/json"))try{const m=yield r.text();i=m?JSON.parse(m):{}}catch(m){throw console.error("JSON parse error:",m),new Error("Invalid server response. Please try again.")}else{const m=yield r.text();throw new Error(m||`Server error (${r.status}). Please try again.`)}if(!r.ok)throw new Error(i.message||"Failed to reset password");return{success:!0,message:i.message||"Password reset successfully"}}catch(r){throw console.error("Reset password error:",r),r instanceof Error?r:new Error(r.message||"Failed to reset password. Please try again.")}})}onboardSolver(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${Le}/admin/onboard-solver`,{method:"POST",body:JSON.stringify(s)}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to onboard solver");return a}catch(t){throw console.error("Solver onboarding error:",t),t}})}}const ae=new ta,sa=({email:n,onVerificationSuccess:s,onResendVerification:t})=>{const[a,r]=o.useState(""),[i,l]=o.useState(!1),[m,d]=o.useState(!1),[x,c]=o.useState(""),[f,b]=o.useState(""),y=j=>g(I,null,function*(){if(j.preventDefault(),!a.trim()){c("Please enter verification code");return}l(!0),c("");try{const C=yield(yield fetch("/api/auth/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,verificationCode:a.trim()})})).json();if(C===void 0){console.error("Data is undefined immediately after parsing"),c("Server returned undefined response");return}if(C===null){console.error("Data is null immediately after parsing"),c("Server returned null response");return}C.success?(b("Email verified successfully!"),setTimeout(()=>{s(C.data)},1500)):c(C.message||"Verification failed")}catch(N){c("Network error. Please try again.")}finally{l(!1)}}),u=()=>g(I,null,function*(){d(!0),c("");try{const N=yield(yield fetch("/api/auth/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})})).json();if(N===void 0){console.error("Data is undefined immediately after parsing"),c("Server returned undefined response");return}if(N===null){console.error("Data is null immediately after parsing"),c("Server returned null response");return}N.success?b("Verification email sent successfully!"):c(N.message||"Failed to resend verification email")}catch(j){c("Network error. Please try again.")}finally{d(!1)}});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ae,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verify Your Email"}),e.jsx("p",{className:"text-gray-600",children:"We've sent a verification code to"}),e.jsx("p",{className:"font-semibold text-blue-600",children:n})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"verificationCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter Verification Code"}),e.jsx("input",{type:"text",id:"verificationCode",value:a,onChange:j=>r(j.target.value),placeholder:"Enter 6-digit code",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-lg font-mono tracking-widest",maxLength:"6",required:!0})]}),x&&e.jsxs("div",{className:"flex items-center space-x-2 text-red-600 bg-red-50 p-3 rounded-lg",children:[e.jsx(xe,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:x})]}),f&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-600 bg-green-50 p-3 rounded-lg",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:f})]}),e.jsx("button",{type:"submit",disabled:i||!a.trim(),className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Verifying..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Verify Email"})]})})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Didn't receive the code?"}),e.jsx("button",{onClick:u,disabled:m,className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center justify-center space-x-1 mx-auto disabled:opacity-50",children:m?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Resend Code"})]})})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Important:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Check your spam folder if you don't see the email"}),e.jsx("li",{children:"‚Ä¢ The code expires in 10 minutes"}),e.jsx("li",{children:"‚Ä¢ Only verified emails can log in"})]})]})]})})},rs=o.createContext(),aa=()=>{const n=o.useContext(rs);if(!n)throw new Error("useTheme must be used within a ThemeProvider");return n},ra=({children:n})=>{const[s,t]=o.useState(()=>{const r=localStorage.getItem("theme");return r?r==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});o.useEffect(()=>{localStorage.setItem("theme",s?"dark":"light"),s?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[s]);const a=()=>{t(r=>!r)};return e.jsx(rs.Provider,{value:{isDarkMode:s,toggleTheme:a},children:n})},Be=({className:n=""})=>{const{isDarkMode:s,toggleTheme:t}=aa();return e.jsx("button",{onClick:t,className:`p-2.5 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-300 transform hover:scale-110 shadow-md dark:shadow-gray-900/50 ${n}`,"aria-label":"Toggle dark mode",title:s?"Switch to light mode":"Switch to dark mode",children:s?e.jsx(ys,{className:"w-5 h-5 text-yellow-500"}):e.jsx(js,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})})},na=()=>{const[n,s]=o.useState(!1),[t,a]=o.useState(""),[r,i]=o.useState(""),[l,m]=o.useState(!1),[d,x]=o.useState(""),[c,f]=o.useState(""),[b,y]=o.useState(!1),[u,j]=o.useState(""),[N,C]=o.useState(!1),[R,h]=o.useState(""),p=he(),T=o.useRef(null),[P,A]=o.useState({x:0,y:0}),[H,k]=o.useState(!1),[_,W]=o.useState("email"),[S,U]=o.useState(""),[v,E]=o.useState(""),[F,z]=o.useState(""),[$,B]=o.useState(""),[w,Y]=o.useState(!1),[L,J]=o.useState(""),[re,ie]=o.useState(!1),[Ne,ge]=o.useState(!1);o.useEffect(()=>{if(ae.isAuthenticated()){const V=localStorage.getItem("cacheVerified")==="true";p(V?"/dashboard":"/verify-cache")}},[p]);const D=V=>g(I,null,function*(){V.preventDefault(),m(!0),x(""),f("");try{(yield ae.login(t,r)).success&&(localStorage.removeItem("cacheVerified"),p("/verify-cache"))}catch(K){x(K.message||"Login failed. Please try again.")}finally{m(!1)}}),O=V=>g(I,null,function*(){if(V.preventDefault(),!re){x("Please accept the terms and conditions to continue.");return}m(!0),x(""),f("");try{const K=yield ae.register(u,t,r);K.success&&(K.verificationRequired?(h(t),C(!0)):(localStorage.removeItem("cacheVerified"),p("/verify-cache")))}catch(K){x(K.message||"Registration failed. Please try again.")}finally{m(!1)}}),ee=V=>{b?O(V):D(V)},le=V=>{localStorage.setItem("token",V.token),localStorage.setItem("user",JSON.stringify(V.user)),localStorage.removeItem("cacheVerified"),p("/verify-cache")},ue=()=>{},q=V=>g(I,null,function*(){V.preventDefault(),Y(!0),J("");try{(yield ae.forgotPassword(S)).success&&W("otp")}catch(K){J(K.message||"Failed to send OTP. Please try again.")}finally{Y(!1)}}),se=V=>g(I,null,function*(){V.preventDefault(),Y(!0),J("");try{(yield ae.verifyResetOTP(S,v)).success&&W("reset")}catch(K){J(K.message||"Invalid OTP. Please try again.")}finally{Y(!1)}}),G=V=>g(I,null,function*(){if(V.preventDefault(),Y(!0),J(""),F!==$){J("Passwords do not match"),Y(!1);return}if(F.length<6){J("Password must be at least 6 characters long"),Y(!1);return}try{(yield ae.resetPassword(S,v,F)).success&&(k(!1),W("email"),U(""),E(""),z(""),B(""),J(""),f("Password reset successfully! Please login with your new password."),x(""))}catch(K){J(K.message||"Failed to reset password. Please try again.")}finally{Y(!1)}}),X=()=>{k(!1),W("email"),U(""),E(""),z(""),B(""),J("")};return o.useEffect(()=>{const V=we=>{if(!T.current)return;const Q=T.current.getBoundingClientRect(),De=Q.left+Q.width/2,$e=Q.top+Q.height/2,ze=(we.clientX-De)/(Q.width/2),Ue=($e-we.clientY)/(Q.height/2);A({x:Ue*20,y:ze*20})},K=()=>{A({x:0,y:0})},oe=T.current;return oe&&(oe.addEventListener("mousemove",V),oe.addEventListener("mouseleave",K)),()=>{oe&&(oe.removeEventListener("mousemove",V),oe.removeEventListener("mouseleave",K))}},[]),N?e.jsx(sa,{email:R,onVerificationSuccess:le,onResendVerification:ue}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4 relative overflow-hidden transition-colors duration-300",children:[e.jsx("div",{className:"absolute top-6 right-6 z-20",children:e.jsx(Be,{})}),e.jsxs("div",{className:"absolute inset-0 opacity-10 dark:opacity-5",children:[e.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white dark:bg-gray-700 rounded-full blur-xl"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-white dark:bg-gray-700 rounded-full blur-xl"}),e.jsx("div",{className:"absolute top-1/2 left-1/4 w-24 h-24 bg-white dark:bg-gray-700 rounded-full blur-lg"})]}),e.jsx("div",{className:"absolute right-8 top-1/2 transform -translate-y-1/2 w-80 h-96 bg-white dark:bg-gray-800 bg-opacity-20 dark:bg-opacity-30 backdrop-blur-sm rounded-lg shadow-lg"}),e.jsx("div",{className:"absolute left-8 bottom-8 w-48 h-32 bg-green-400 dark:bg-green-600 bg-opacity-60 dark:bg-opacity-40 rounded-lg backdrop-blur-sm"}),e.jsx("div",{className:"relative z-10 w-full max-w-md mx-auto",style:{perspective:"1000px",padding:"0 40px"},children:e.jsxs("div",{ref:T,style:{transform:`rotateX(${P.x}deg) rotateY(${P.y}deg)`,transformStyle:"preserve-3d",transition:"transform 0.1s ease-out",position:"relative",width:"100%"},children:[e.jsx("div",{className:"absolute bg-gradient-to-r from-gray-300 to-gray-200 dark:from-gray-600 dark:to-gray-700",style:{width:"40px",height:"100%",left:"-40px",top:"0",transform:"rotateY(-90deg)",transformOrigin:"right center",borderRadius:"1rem 0 0 1rem",opacity:.9,boxShadow:"inset -5px 0 10px rgba(0, 0, 0, 0.2)"}}),e.jsx("div",{className:"absolute bg-gradient-to-l from-gray-300 to-gray-200 dark:from-gray-600 dark:to-gray-700",style:{width:"40px",height:"100%",right:"-40px",top:"0",transform:"rotateY(90deg)",transformOrigin:"left center",borderRadius:"0 1rem 1rem 0",opacity:.9,boxShadow:"inset 5px 0 10px rgba(0, 0, 0, 0.2)"}}),e.jsx("div",{className:"absolute bg-gradient-to-b from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600",style:{width:"100%",height:"40px",top:"-40px",left:"0",transform:"rotateX(90deg)",transformOrigin:"center bottom",borderRadius:"1rem 1rem 0 0",opacity:.8,boxShadow:"inset 0 5px 10px rgba(0, 0, 0, 0.2)"}}),e.jsx("div",{className:"absolute bg-gradient-to-t from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600",style:{width:"100%",height:"40px",bottom:"-40px",left:"0",transform:"rotateX(-90deg)",transformOrigin:"center top",borderRadius:"0 0 1rem 1rem",opacity:.8,boxShadow:"inset 0 -5px 10px rgba(0, 0, 0, 0.2)"}}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 w-full relative",style:{transform:"translateZ(20px)",minHeight:"540px",boxShadow:`
                ${P.y*3}px ${P.x*3}px 40px rgba(0, 0, 0, 0.4),
                ${-P.y*1.5}px ${-P.x*1.5}px 20px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(0, 0, 0, 0.1)
              `},children:[e.jsx("button",{className:"absolute top-6 right-6 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(de,{size:24})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-black dark:text-white transition-colors duration-300",children:[b?"Create":"Get"," ",e.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"Started"})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1 transition-colors duration-300",children:b?"Create a new account":"Sign in to your account"})]}),c&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg transition-colors duration-300",children:e.jsx("p",{className:"text-green-600 dark:text-green-400 text-sm",children:c})}),d&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg transition-colors duration-300",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:d})}),e.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[b&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2 transition-colors duration-300",children:"Full Name"}),e.jsx("input",{type:"text",value:u,onChange:V=>j(V.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2 transition-colors duration-300",children:["Mail ID ",e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Only @kiit.ac.in)"})]}),e.jsx("input",{type:"email",value:t,onChange:V=>a(V.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"your roll no@kiit.ac.in",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Please use your official KIIT email address to register"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2 transition-colors duration-300",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:n?"text":"password",value:r,onChange:V=>i(V.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all pr-12",placeholder:"Enter your password",required:!0,minLength:6}),e.jsx("button",{type:"button",onClick:()=>s(!n),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:n?e.jsx(et,{size:20}):e.jsx(Oe,{size:20})})]}),e.jsx("div",{className:"text-right mt-2",children:e.jsx("button",{type:"button",onClick:()=>{U(t),k(!0),W("email"),J("")},className:"text-blue-500 dark:text-blue-400 text-sm hover:text-blue-600 dark:hover:text-blue-300 transition-colors",children:"Forgot Password ?"})})]}),b&&e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:re,onChange:V=>ie(V.target.checked),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",required:!0}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["I accept the"," ",e.jsx("button",{type:"button",onClick:V=>{V.preventDefault(),ge(!0)},className:"text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 underline font-medium",children:"Terms & Privacy Policy"})]})]})}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"submit",disabled:l||b&&!re,className:"flex-1 bg-blue-500 dark:bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-600 dark:hover:bg-blue-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Loading...":b?"SIGN UP":"LOGIN"}),e.jsx("button",{type:"button",onClick:()=>{y(!b),x(""),f(""),a(""),i(""),j(""),ie(!1)},className:"flex-1 bg-white dark:bg-gray-700 text-blue-500 dark:text-blue-400 py-3 rounded-lg font-medium border-2 border-blue-500 dark:border-blue-400 hover:bg-blue-50 dark:hover:bg-gray-600 transition-colors",children:b?"LOGIN":"SIGN UP"})]})]})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:X,className:"absolute top-6 right-6 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(de,{size:24})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-black dark:text-white transition-colors duration-300",children:"Reset Password"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1 transition-colors duration-300",children:[_==="email"&&"Enter your email to receive OTP",_==="otp"&&"Enter the OTP sent to your email",_==="reset"&&"Enter your new password"]})]}),L&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg transition-colors duration-300",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:L})}),_==="email"&&e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2 transition-colors duration-300",children:"Email"}),e.jsx("input",{type:"email",value:S,onChange:V=>U(V.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your university email",required:!0})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:X,className:"flex-1 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-3 rounded-lg font-medium border-2 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w,className:"flex-1 bg-blue-500 dark:bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-600 dark:hover:bg-blue-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Sending...":"Send OTP"})]})]}),_==="otp"&&e.jsxs("form",{onSubmit:se,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2 transition-colors duration-300",children:"OTP"}),e.jsx("input",{type:"text",value:v,onChange:V=>E(V.target.value.replace(/\D/g,"").slice(0,6)),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-center text-2xl tracking-widest",placeholder:"000000",maxLength:6,required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:["Enter the 6-digit OTP sent to ",S]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{W("email"),E(""),J("")},className:"flex-1 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-3 rounded-lg font-medium border-2 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Back"}),e.jsx("button",{type:"submit",disabled:w||v.length!==6,className:"flex-1 bg-blue-500 dark:bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-600 dark:hover:bg-blue-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Verifying...":"Verify OTP"})]})]}),_==="reset"&&e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2 transition-colors duration-300",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:n?"text":"password",value:F,onChange:V=>z(V.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all pr-12",placeholder:"Enter new password",required:!0,minLength:6}),e.jsx("button",{type:"button",onClick:()=>s(!n),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:n?e.jsx(et,{size:20}):e.jsx(Oe,{size:20})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-medium mb-2 transition-colors duration-300",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:n?"text":"password",value:$,onChange:V=>B(V.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all pr-12",placeholder:"Confirm new password",required:!0,minLength:6}),e.jsx("button",{type:"button",onClick:()=>s(!n),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:n?e.jsx(et,{size:20}):e.jsx(Oe,{size:20})})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{W("otp"),z(""),B(""),J("")},className:"flex-1 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-3 rounded-lg font-medium border-2 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Back"}),e.jsx("button",{type:"submit",disabled:w||F.length<6||F!==$,className:"flex-1 bg-blue-500 dark:bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-600 dark:hover:bg-blue-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Resetting...":"Reset Password"})]})]})]})}),Ne&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-3xl max-h-[90vh] relative flex flex-col",children:[e.jsx("button",{onClick:()=>ge(!1),className:"absolute top-6 right-6 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors z-10",children:e.jsx(de,{size:24})}),e.jsxs("div",{className:"mb-6 pr-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Ee,{className:"w-6 h-6 text-blue-500 dark:text-blue-400"}),e.jsx("h2",{className:"text-2xl font-bold text-black dark:text-white transition-colors duration-300",children:"DPDP Act Terms & Privacy Policy"})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm transition-colors duration-300",children:"Digital Personal Data Protection Act, 2023"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 mb-6",children:e.jsxs("div",{className:"space-y-5 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"1. Introduction"}),e.jsx("p",{className:"leading-relaxed",children:'This Privacy Policy applies to the use of the EduFoyer platform (the "Service"). Eduackhos Pvt Ltd ("we", "us", "our") collects, stores, and processes your personal data in accordance with the Digital Personal Data Protection Act, 2023.'})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"2. Data Collection and Processing"}),e.jsx("p",{className:"leading-relaxed mb-2",children:"By signing up for EduFoyer, you consent to the collection, storage, and processing of your personal data, including but not limited to your:"}),e.jsxs("ul",{className:"list-disc list-inside ml-4 mt-2 space-y-1",children:[e.jsx("li",{children:"Name"}),e.jsx("li",{children:"Email address"}),e.jsx("li",{children:"University affiliation"}),e.jsx("li",{children:"Academic information"}),e.jsx("li",{children:"Usage and activity data"})]}),e.jsx("p",{className:"leading-relaxed mt-2",children:"This data is collected to provide educational services, facilitate doubt-solving sessions, manage your account, and improve the platform."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"3. Purpose of Data Processing"}),e.jsx("p",{className:"leading-relaxed mb-2",children:"Your personal data will be processed for the following purposes:"}),e.jsxs("ul",{className:"list-disc list-inside ml-4 mt-2 space-y-1",children:[e.jsx("li",{children:"Creating and managing your account"}),e.jsx("li",{children:"Providing educational services and doubt-solving sessions"}),e.jsx("li",{children:"Matching students with appropriate peer solvers"}),e.jsx("li",{children:"Processing payments and wallet transactions"}),e.jsx("li",{children:"Sending important updates and notifications"}),e.jsx("li",{children:"Enhancing user experience and improving our services"}),e.jsx("li",{children:"Complying with legal and regulatory obligations"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"4. Data Sharing and Disclosure"}),e.jsx("p",{className:"leading-relaxed mb-2",children:"We may share your personal data with:"}),e.jsxs("ul",{className:"list-disc list-inside ml-4 mt-2 space-y-1",children:[e.jsx("li",{children:"Authorized peer solvers and educators for service delivery"}),e.jsx("li",{children:"Payment processors for transaction-related activities"}),e.jsx("li",{children:"Third-party service providers who support platform operations"}),e.jsx("li",{children:"Legal or regulatory authorities when required by law"})]}),e.jsx("p",{className:"leading-relaxed mt-2",children:"We do not sell your personal data to any third party."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"5. Data Security"}),e.jsx("p",{className:"leading-relaxed",children:"We implement appropriate technical and organizational measures to safeguard your personal data from unauthorized access, alteration, disclosure, or destruction. However, no method of data transmission over the internet is completely secure, and we cannot guarantee absolute security."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"6. Your Rights Under the DPDP Act"}),e.jsx("p",{className:"leading-relaxed mb-2",children:"You have the right to:"}),e.jsxs("ul",{className:"list-disc list-inside ml-4 mt-2 space-y-1",children:[e.jsx("li",{children:"Access your personal data"}),e.jsx("li",{children:"Correct inaccurate or incomplete data"}),e.jsx("li",{children:"Request deletion of your personal data"}),e.jsx("li",{children:"Withdraw consent for data processing"}),e.jsx("li",{children:"File a complaint with the Data Protection Board of India"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"7. Data Retention"}),e.jsx("p",{className:"leading-relaxed mb-2",children:"We retain your personal data for only as long as necessary to:"}),e.jsxs("ul",{className:"list-disc list-inside ml-4 mt-2 space-y-1",children:[e.jsx("li",{children:"Fulfill the purposes outlined in this policy"}),e.jsx("li",{children:"Comply with legal obligations"}),e.jsx("li",{children:"Resolve disputes"}),e.jsx("li",{children:"Enforce our terms and agreements"})]}),e.jsx("p",{className:"leading-relaxed mt-2",children:"You may request deletion of your data at any time."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"8. Cookies and Tracking"}),e.jsx("p",{className:"leading-relaxed mb-2",children:"We use cookies and similar technologies to:"}),e.jsxs("ul",{className:"list-disc list-inside ml-4 mt-2 space-y-1",children:[e.jsx("li",{children:"Enhance platform functionality"}),e.jsx("li",{children:"Analyze usage behavior"}),e.jsx("li",{children:"Improve user experience"})]}),e.jsx("p",{className:"leading-relaxed mt-2",children:"You may manage or disable cookies through your browser settings."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"9. Contact Information"}),e.jsx("p",{className:"leading-relaxed mb-2",children:"For questions, concerns, or requests related to your personal data, please contact:"}),e.jsxs("p",{className:"leading-relaxed mt-2",children:[e.jsx("strong",{children:"Email:"})," edufoyer2025@gmail.com",e.jsx("br",{}),e.jsx("strong",{children:"Address:"})," Jacobpura, Sector 52, Gurugram, Haryana, India"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"10. Acceptance of Policy"}),e.jsx("p",{className:"leading-relaxed",children:"By checking the acceptance box or continuing to use the EduFoyer platform, you acknowledge that you have read, understood, and agree to be bound by this Privacy Policy. If you do not agree, please refrain from using the Service."})]})]})}),e.jsxs("div",{className:"flex gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>{ge(!1),ie(!0)},className:"flex-1 bg-blue-500 dark:bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-600 dark:hover:bg-blue-700 transition-colors shadow-lg",children:"Accept & Continue"}),e.jsx("button",{onClick:()=>ge(!1),className:"flex-1 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-3 rounded-lg font-medium border-2 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Close"})]})]})})]})},Ie="/api/doubts";class oa{constructor(){this.token=localStorage.getItem("token")}getToken(){return this.token||localStorage.getItem("token")}makeAuthenticatedRequest(a){return g(this,arguments,function*(s,t={}){const r=this.getToken();if(console.log("Making authenticated request to:",s),console.log("Using token:",r?"Token present":"No token"),!r)throw new Error("No authentication token found");const i={headers:M({"Content-Type":"application/json",Authorization:`Bearer ${r}`},t.headers)};console.log("Request headers:",i.headers);const l=yield fetch(s,M(M({},i),t));if(console.log("Response status:",l.status),l.status===401)throw new Error("Authentication failed");return l})}createDoubt(s){return g(this,null,function*(){try{console.log("üöÄ Creating doubt with data:",s),console.log("üîó API URL:",`${Ie}/create`);const t=new AbortController,a=setTimeout(()=>t.abort(),3e4),r=yield this.makeAuthenticatedRequest(`${Ie}/create`,{method:"POST",body:JSON.stringify(s),signal:t.signal});clearTimeout(a),console.log("üìä Doubt creation response status:",r.status);const i=yield r.json();return console.log("üìã Doubt creation response data:",i),r.ok?(console.log("‚úÖ Doubt created successfully, returning:",i.data),Z(M({},i.data),{success:i.data.success!==!1})):(console.error("‚ùå API Error:",i),{success:!1,error:i.error||i.message||"Failed to create doubt",message:i.message||i.error,quotaDetails:i.quotaDetails||null,fieldErrors:i.fieldErrors||null,validationDetails:i.validationDetails||null})}catch(t){throw console.error("‚ùå Create doubt error:",t),t.name==="AbortError"?new Error("Request timeout. Please try again."):(console.error("‚ùå Error details:",{name:t.name,message:t.message,stack:t.stack}),t)}})}getMyDoubts(){return g(this,arguments,function*(s=1,t=10,a={}){try{const r=new URLSearchParams(M({page:s.toString(),limit:t.toString()},a));console.log("Fetching my doubts with params:",r.toString());const i=yield this.makeAuthenticatedRequest(`${Ie}/my-doubts?${r}`);console.log("Get my doubts response status:",i.status);const l=yield i.json();if(console.log("Get my doubts response data:",l),!i.ok)throw new Error(l.message||"Failed to fetch doubts");return l.data}catch(r){throw console.error("Get my doubts error:",r),r}})}getAllDoubts(){return g(this,arguments,function*(s=1,t=10,a={}){try{const r=new URLSearchParams(M({page:s.toString(),limit:t.toString()},a)),i=yield this.makeAuthenticatedRequest(`${Ie}/all?${r}`),l=yield i.json();if(!i.ok)throw new Error(l.message||"Failed to fetch doubts");return l.data}catch(r){throw console.error("Get all doubts error:",r),r}})}getDoubtById(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${Ie}/by-id/${s}`),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to fetch doubt");return a.data.doubt}catch(t){throw console.error("Get doubt error:",t),t}})}answerDoubt(s,t){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${Ie}/${s}/answer`,{method:"POST",body:JSON.stringify({answer:t})}),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to submit answer");return r.data.doubt}catch(a){throw console.error("Answer doubt error:",a),a}})}acceptAnswer(s,t){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${Ie}/${s}/accept-answer/${t}`,{method:"POST"}),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to accept answer");return r.data.doubt}catch(a){throw console.error("Accept answer error:",a),a}})}updateDoubtStatus(s,t){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${Ie}/${s}/status`,{method:"PATCH",body:JSON.stringify({status:t})}),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to update doubt status");return r.data.doubt}catch(a){throw console.error("Update doubt status error:",a),a}})}deleteDoubt(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${Ie}/${s}`,{method:"DELETE"}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to delete doubt");return!0}catch(t){throw console.error("Delete doubt error:",t),t}})}submitFeedback(r,i){return g(this,arguments,function*(s,{rating:t,comment:a}){try{const l=yield this.makeAuthenticatedRequest(`${Ie}/feedback`,{method:"POST",body:JSON.stringify({doubtId:s,rating:t,comment:a})}),m=yield l.json();if(!l.ok)throw new Error(m.message||"Failed to submit feedback");return m}catch(l){throw console.error("Submit feedback error:",l),l}})}submitSolverRating(r,i){return g(this,arguments,function*(s,{rating:t,comment:a}){try{const l=yield this.makeAuthenticatedRequest(`${Ie}/solver-rating`,{method:"POST",body:JSON.stringify({doubtId:s,rating:t,comment:a})}),m=yield l.json();if(!l.ok)throw new Error(m.message||"Failed to submit rating");return m}catch(l){throw console.error("Submit solver rating error:",l),l}})}}const tt=new oa;function ns(n){return!n||n.trim().length===0?{valid:!1,error:"Title is required"}:n.trim().length<3?{valid:!1,error:"Title must be at least 3 characters long"}:n.trim().length>200?{valid:!1,error:"Title cannot exceed 200 characters"}:n.trim().length===0?{valid:!1,error:"Title cannot be only spaces"}:{valid:!0,error:""}}function os(n){return!n||n.trim().length===0?{valid:!1,error:"Please select a subject"}:["operating systems","artificial intelligence","database management systems","data structures and algorithms","java","mern"].includes(n.toLowerCase())?{valid:!0,error:""}:{valid:!1,error:"Please select a valid subject"}}function ls(n){return!n||n.trim().length===0?{valid:!1,error:"Description is required"}:n.trim().length<10?{valid:!1,error:"Description must be at least 10 characters long. Please provide more details."}:n.length>5e3?{valid:!1,error:"Description cannot exceed 5000 characters"}:n.trim().length<10?{valid:!1,error:"Description must contain meaningful content (at least 10 characters)"}:/(.)\1{20,}/.test(n)?{valid:!1,error:"Description contains too many repetitive characters. Please provide meaningful content."}:{valid:!0,error:""}}function is(n){return n?["small","medium","large"].includes(n)?{valid:!0,error:""}:{valid:!1,error:"Please select a valid category"}:{valid:!1,error:"Please select a doubt category"}}function ds(n){if(!n)return{valid:!0,error:""};const s=2*1024*1024;return n.size>s?{valid:!1,error:"Image size must be less than 2MB"}:["image/png","image/jpeg","image/jpg","image/gif"].includes(n.type)?{valid:!0,error:""}:{valid:!1,error:"Only PNG, JPG, and GIF images are allowed"}}function la(n){const{title:s,subject:t,description:a,doubtDescription:r,category:i,doubtCategory:l,image:m}=n,d={};let x=!0;const c=ns(s);c.valid||(d.title=c.error,x=!1);const f=os(t);f.valid||(d.subject=f.error,x=!1);const y=ls(a||r);y.valid||(d.description=y.error,x=!1);const j=is(i||l);if(j.valid||(d.category=j.error,x=!1),m){const N=ds(m);N.valid||(d.image=N.error,x=!1)}return{valid:x,errors:d}}const ia=()=>{const[n,s]=o.useState(!1),[t,a]=o.useState(""),[r,i]=o.useState(""),[l,m]=o.useState("small"),[d,x]=o.useState(""),[c,f]=o.useState(null),[b,y]=o.useState(null),[u,j]=o.useState(!1),[N,C]=o.useState(!1),[R,h]=o.useState(null),[p,T]=o.useState(!1),[P,A]=o.useState(""),[H,k]=o.useState(null),[_,W]=o.useState(!1),[S,U]=o.useState(""),[v,E]=o.useState(""),[F,z]=o.useState(!1),[$,B]=o.useState(null),[w,Y]=o.useState(!1),[L,J]=o.useState(null),[re,ie]=o.useState({title:"",subject:"",description:"",category:"",image:""}),Ne=G=>{if(!G.target.files||G.target.files.length===0)return;const X=G.target.files[0],V=ds(X);if(!V.valid){ie(oe=>Z(M({},oe),{image:V.error})),G.target.value="";return}ie(oe=>Z(M({},oe),{image:""})),f(X),b&&URL.revokeObjectURL(b);const K=URL.createObjectURL(X);y(K)},ge=()=>{a(""),i(""),m("small"),x(""),f(null),W(!1),U(""),E(""),b&&URL.revokeObjectURL(b),y(null)},D=G=>{const X=G.target.value;a(X);const V=ns(X);ie(K=>Z(M({},K),{title:V.error}))},O=G=>{const X=G.target.value;i(X);const V=os(X);ie(K=>Z(M({},K),{subject:V.error}))},ee=G=>{const X=G.target.value;x(X);const V=ls(X);ie(K=>Z(M({},K),{description:V.error}))},le=G=>{const X=G.target.value;m(X);const V=is(X);ie(K=>Z(M({},K),{category:V.error}))},ue={small:{title:"Quick 20-Minute Session",duration:"20 minutes",description:"Perfect for quick clarifications and specific question solving.",features:["Ideal for single concept clarification","Quick problem-solving sessions","Specific question answers","Fast-paced learning","Best for revision and quick doubts"],bestFor:"Students who need quick answers to specific questions or concept clarifications.",pricing:"Most affordable option"},medium:{title:"Medium Topic ‚Äî Unpacking Concepts in 30 Minutes",duration:"30 minutes",description:"Comprehensive coverage of medium-sized topics with detailed explanations.",features:["In-depth concept explanation","Multiple related problems solved","Step-by-step breakdown","Interactive learning session","Better understanding of topic fundamentals"],bestFor:"Students who want to understand a complete topic or concept thoroughly.",pricing:"Moderate pricing with great value"},large:{title:"Large Topic ‚Äî Understand the Entire Chapter in 60 Minutes",duration:"60 minutes",description:"Complete chapter coverage with comprehensive learning and practice.",features:["Full chapter coverage","Comprehensive topic explanation","Multiple examples and problems","Complete understanding of concepts","Practice questions and solutions","Chapter summary and key points"],bestFor:"Students preparing for exams or wanting complete mastery of a chapter.",pricing:"Best value for comprehensive learning"}},q=G=>{J(ue[G]),Y(!0)},se=G=>g(I,null,function*(){var K,oe;G.preventDefault(),ie({title:"",subject:"",description:"",category:"",image:""});const V=la({title:t,subject:r,category:l,description:d,image:c});if(!V.valid){ie(V.errors);const we=Object.keys(V.errors).find(Q=>V.errors[Q]);if(we){const Q=document.getElementById(we==="description"?"description":we);Q&&(Q.scrollIntoView({behavior:"smooth",block:"center"}),Q.focus())}return}j(!0);try{const we={title:t.trim(),subject:r.trim(),category:l,description:d.trim(),imagePath:null,tags:[],isScheduled:_,scheduledDate:_?S:void 0,scheduledTime:_?v:void 0},Q=yield tt.createDoubt(we);if(console.log("üìã Doubt creation result:",Q),console.log("üìÖ isScheduled:",_),console.log("üìÖ scheduledDate:",S),console.log("‚è∞ scheduledTime:",v),!Q.success){Q.fieldErrors?ie(Q.fieldErrors):Q.error==="SUBJECT_MISMATCH"||Q.message?(h({message:Q.message||"Please ask subject-related doubts. Your doubt description does not match the selected subject.",reason:((K=Q.validationDetails)==null?void 0:K.reason)||"",confidence:((oe=Q.validationDetails)==null?void 0:oe.confidence)||0}),C(!0)):Q.error&&(Q.error.toLowerCase().includes("quota")||Q.error.toLowerCase().includes("completed")||Q.error.toLowerCase().includes("limit"))?(A(Q.error||"You've reached your daily doubt limit. Your quota will reset after 12 AM. Please try again tomorrow!"),k(Q.quotaDetails||null),T(!0)):alert(Q.error||"Failed to submit doubt. Please check your input and try again."),j(!1);return}const De=Q.doubtId||Q._id||Q.id,$e=Q.is_scheduled||Q.isScheduled||_;if(console.log("üÜî doubtId:",De),console.log("üìÖ isScheduledDoubt:",$e),console.log("üìÖ result.is_scheduled:",Q.is_scheduled),console.log("üìÖ isScheduled (state):",_),console.log("üìÖ scheduledDate:",S),console.log("‚è∞ scheduledTime:",v),_&&S&&v){const ze=new Date(`${S}T${v}`),Ue=ze.toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Ke=ze.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0});console.log("‚úÖ Showing scheduled popup"),console.log("üìÖ formattedDate:",Ue),console.log("‚è∞ formattedTime:",Ke),B({doubtId:De,subject:r.trim(),scheduledDate:S,scheduledTime:v,formattedDate:Ue,formattedTime:Ke,fullDateTime:`${Ue} at ${Ke}`}),z(!0),s(!1),ge(),j(!1);return}if(_&&S&&v){console.log("‚ö†Ô∏è Scheduled doubt but condition check failed, showing popup anyway");const ze=new Date(`${S}T${v}`),Ue=ze.toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Ke=ze.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0});B({doubtId:De||"pending",subject:r.trim(),scheduledDate:S,scheduledTime:v,formattedDate:Ue,formattedTime:Ke,fullDateTime:`${Ue} at ${Ke}`}),z(!0),s(!1),ge(),j(!1);return}if(De&&!_){window.location.href=`/dashboard/awaiting/${De}`;return}_||(window.location.href=`/dashboard/awaiting/temp-${Date.now()}`)}catch(we){console.error("Error submitting doubt:",we);const Q=we.message||we.error||"Failed to submit doubt. Please check your input and try again.";Q.toLowerCase().includes("quota")||Q.toLowerCase().includes("completed")||Q.toLowerCase().includes("limit")?(A(Q),k(we.quotaDetails||null),T(!0)):alert(`Failed to submit doubt: ${Q}`)}finally{j(!1)}});return e.jsxs(e.Fragment,{children:[F&&$&&e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center p-4 z-[9999]",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full mx-4 animate-in fade-in-0 zoom-in-95 duration-300 transition-colors",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 dark:from-purple-600 dark:to-purple-700 rounded-t-xl p-6 text-white transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 dark:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(Pe,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"Doubt Scheduled!"}),e.jsx("p",{className:"text-purple-100 dark:text-purple-200 text-sm",children:"Your doubt has been scheduled successfully"})]})]}),e.jsx("button",{onClick:()=>{z(!1),B(null)},className:"text-white/80 dark:text-white/90 hover:text-white transition-colors",children:e.jsx(de,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mx-auto mb-4 transition-colors",children:e.jsx(te,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})}),e.jsx("h4",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 transition-colors",children:"Doubt Scheduled Successfully"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 transition-colors",children:['"',$.subject,'" has been scheduled']})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 mb-6 border-2 border-purple-200 dark:border-purple-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-purple-700 dark:text-purple-300 mb-4 transition-colors",children:[e.jsx(Pe,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold text-base",children:"Scheduled Date & Time"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-200 dark:bg-purple-800 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Pe,{className:"w-5 h-5 text-purple-700 dark:text-purple-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium mb-1",children:"Date"}),e.jsx("p",{className:"text-sm font-semibold text-purple-900 dark:text-purple-100",children:$.formattedDate})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-200 dark:bg-purple-800 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ne,{className:"w-5 h-5 text-purple-700 dark:text-purple-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium mb-1",children:"Time"}),e.jsx("p",{className:"text-sm font-semibold text-purple-900 dark:text-purple-100",children:$.formattedTime})]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200 dark:border-purple-700",children:e.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 text-center",children:[e.jsx("span",{className:"font-semibold",children:"Full Schedule:"})," ",$.fullDateTime]})})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Je,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300 transition-colors",children:[e.jsx("p",{className:"font-semibold mb-1",children:"What happens next?"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"Available solvers will be notified about your scheduled doubt"}),e.jsx("li",{children:"A solver will accept your doubt for the scheduled time"}),e.jsx("li",{children:"You'll receive an email with the meeting link at the scheduled time"}),e.jsx("li",{children:"The meeting link will be active at the scheduled date and time"})]})]})]})}),e.jsxs("button",{onClick:()=>{z(!1),B(null)},className:"w-full bg-purple-500 dark:bg-purple-600 hover:bg-purple-600 dark:hover:bg-purple-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsx("span",{children:"Got it!"})]})]})]})}),w&&L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center p-4 z-[9999]",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-lg w-full mx-4 animate-in fade-in-0 zoom-in-95 duration-300 transition-colors",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700 text-white p-6 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Je,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:L.title}),e.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:["Duration: ",L.duration]})]})]}),e.jsx("button",{onClick:()=>{Y(!1),J(null)},className:"text-white/80 dark:text-white/90 hover:text-white transition-colors p-1 hover:bg-white/20 rounded",children:e.jsx(de,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:L.description})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-500 dark:text-blue-400"}),"Key Features"]}),e.jsx("ul",{className:"space-y-2",children:L.features.map((G,X)=>e.jsxs("li",{className:"flex items-start gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"text-blue-500 dark:text-blue-400 mt-1",children:"‚úì"}),e.jsx("span",{children:G})]},X))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Best For"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:L.bestFor})]})]}),e.jsx("div",{className:"p-6 pt-0",children:e.jsxs("button",{onClick:()=>{Y(!1),J(null)},className:"w-full bg-blue-500 dark:bg-blue-600 hover:bg-blue-600 dark:hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsx("span",{children:"Got it!"})]})})]})}),n?e.jsxs(e.Fragment,{children:[N&&e.jsx("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/80 flex items-center justify-center p-4 z-[60]",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-200 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(xe,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2 transition-colors",children:"Subject Mismatch Detected"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 transition-colors",children:(R==null?void 0:R.message)||"Please ask subject-related doubts. Your doubt description does not match the selected subject."}),(R==null?void 0:R.reason)&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-3 mb-4 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Je,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300 transition-colors",children:[e.jsx("span",{className:"font-medium",children:"Reason:"})," ",R.reason]})]})}),e.jsx("div",{className:"flex space-x-3",children:e.jsx("button",{onClick:()=>{C(!1),h(null)},className:"flex-1 bg-blue-500 dark:bg-blue-600 hover:bg-blue-600 dark:hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"I Understand"})})]}),e.jsx("button",{onClick:()=>{C(!1),h(null)},className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 transition-colors",children:e.jsx(de,{className:"w-5 h-5"})})]})})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/80 flex items-center justify-center p-4 z-[60]",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-200 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(xe,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2 transition-colors",children:"Alert"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 transition-colors leading-relaxed",children:P||"You've reached your daily doubt limit. Your quota will reset after 12 AM. Please try again tomorrow!"}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-3 mb-4 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Je,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300 transition-colors",children:[e.jsx("p",{className:"font-medium mb-2",children:"üìä Your Daily Doubt Quota:"}),e.jsxs("ul",{className:"space-y-1.5",children:[e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Small doubts:"}),e.jsx("span",{className:"font-semibold ml-2",children:"2 per day"})]}),e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Medium doubts:"}),e.jsx("span",{className:"font-semibold ml-2",children:"2 per day"})]}),e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Large doubts:"}),e.jsx("span",{className:"font-semibold ml-2",children:"1 per day"})]}),e.jsxs("li",{className:"flex items-center justify-between pt-1 border-t border-blue-200 dark:border-blue-700 mt-1",children:[e.jsx("span",{className:"font-medium",children:"Total limit:"}),e.jsx("span",{className:"font-semibold ml-2",children:"5 doubts per day"})]})]}),e.jsxs("p",{className:"mt-3 pt-2 border-t border-blue-200 dark:border-blue-700 text-xs",children:["üí° Your quota will automatically reset after ",e.jsx("strong",{children:"12:00 AM"}),". You can continue asking doubts tomorrow!"]})]})]})}),e.jsx("div",{className:"flex space-x-3",children:e.jsx("button",{onClick:()=>{T(!1),A(""),k(null),j(!1)},className:"flex-1 bg-blue-500 dark:bg-blue-600 hover:bg-blue-600 dark:hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"I Understand"})})]}),e.jsx("button",{onClick:()=>{T(!1),A(""),k(null),j(!1)},className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 transition-colors",children:e.jsx(de,{className:"w-5 h-5"})})]})})}),e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 border border-gray-200 dark:border-gray-700 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden transition-colors duration-300",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 p-6 transition-colors duration-300",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 transition-colors duration-300",children:"Ask Your Doubt"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 transition-colors duration-300",children:"Fill in the details below to get help with your doubt."})]}),e.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(de,{className:"w-5 h-5"})})]})}),e.jsxs("form",{id:"askDoubtForm",onSubmit:se,className:"p-6 space-y-6 overflow-y-auto max-h-[60vh]",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"title",className:"block text-gray-700 dark:text-gray-300 text-sm font-medium transition-colors duration-300",children:["Doubt Title ",e.jsx("span",{className:"text-red-500 dark:text-red-400",children:"*"})]}),e.jsx("input",{type:"text",id:"title",value:t,onChange:D,className:`w-full bg-gray-50 dark:bg-gray-700 border ${re.title?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} text-gray-900 dark:text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 outline-none transition-colors duration-300`,placeholder:"Enter a clear title for your doubt (min 3 characters)",maxLength:200,required:!0}),re.title&&e.jsxs("div",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 text-sm transition-colors",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{children:re.title})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 transition-colors duration-300",children:[t.length,"/200 characters"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"subject",className:"block text-gray-700 dark:text-gray-300 text-sm font-medium transition-colors duration-300",children:["Subject ",e.jsx("span",{className:"text-red-500 dark:text-red-400",children:"*"})]}),e.jsxs("select",{id:"subject",value:r,onChange:O,className:`w-full bg-gray-50 dark:bg-gray-700 border ${re.subject?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} text-gray-900 dark:text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 outline-none transition-colors duration-300`,required:!0,children:[e.jsx("option",{value:"",children:"Select a subject"}),e.jsx("option",{value:"operating systems",children:"Operating Systems"}),e.jsx("option",{value:"artificial intelligence",children:"Artificial Intelligence"}),e.jsx("option",{value:"database management systems",children:"Database Management Systems"}),e.jsx("option",{value:"data structures and algorithms",children:"Data Structures and Algorithms"}),e.jsx("option",{value:"java",children:"Java"}),e.jsx("option",{value:"mern",children:"MERN"})]}),re.subject&&e.jsxs("div",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 text-sm transition-colors",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{children:re.subject})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-medium transition-colors duration-300",children:"Doubt Category"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer flex-1",children:[e.jsx("input",{type:"radio",name:"doubtCategory",value:"small",checked:l==="small",onChange:le,className:"w-4 h-4 accent-blue-500 dark:accent-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 cursor-pointer"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 transition-colors duration-300",children:"Quick 20-Minute Session"})]}),e.jsx("button",{type:"button",onClick:()=>q("small"),className:"ml-2 p-1.5 text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 transition-colors rounded hover:bg-blue-50 dark:hover:bg-blue-900/20",title:"View details",children:e.jsx(Je,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer flex-1",children:[e.jsx("input",{type:"radio",name:"doubtCategory",value:"medium",checked:l==="medium",onChange:le,className:"w-4 h-4 accent-blue-500 dark:accent-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 cursor-pointer"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 transition-colors duration-300",children:"Medium Topic ‚Äî Unpacking Concepts in 30 Minutes"})]}),e.jsx("button",{type:"button",onClick:()=>q("medium"),className:"ml-2 p-1.5 text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 transition-colors rounded hover:bg-blue-50 dark:hover:bg-blue-900/20",title:"View details",children:e.jsx(Je,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer flex-1",children:[e.jsx("input",{type:"radio",name:"doubtCategory",value:"large",checked:l==="large",onChange:le,className:"w-4 h-4 accent-blue-500 dark:accent-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 cursor-pointer"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 transition-colors duration-300",children:"Large Topic ‚Äî Understand the Entire Chapter in 60 Minutes"})]}),e.jsx("button",{type:"button",onClick:()=>q("large"),className:"ml-2 p-1.5 text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 transition-colors rounded hover:bg-blue-50 dark:hover:bg-blue-900/20",title:"View details",children:e.jsx(Je,{className:"w-4 h-4"})})]})]}),re.category&&e.jsxs("div",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 text-sm transition-colors",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{children:re.category})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"description",className:"block text-gray-700 dark:text-gray-300 text-sm font-medium transition-colors duration-300",children:["Describe your doubt ",e.jsx("span",{className:"text-red-500 dark:text-red-400",children:"*"})]}),e.jsx("textarea",{id:"description",value:d,onChange:ee,placeholder:"What are you having trouble with? Be as detailed as possible (minimum 10 characters).",className:`w-full min-h-[100px] bg-gray-50 dark:bg-gray-700 border ${re.description?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} text-gray-900 dark:text-white rounded-md px-3 py-2 placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 outline-none resize-vertical transition-colors duration-300`,maxLength:5e3,required:!0}),re.description&&e.jsxs("div",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 text-sm transition-colors",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{children:re.description})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 transition-colors duration-300",children:[d.length,"/5000 characters (minimum 10 required)"]})]}),_&&e.jsxs("div",{className:"space-y-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Pe,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Schedule Your Doubt"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"scheduledDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",id:"scheduledDate",value:S,onChange:G=>U(G.target.value),min:new Date().toISOString().split("T")[0],className:"w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 outline-none transition-colors duration-300",required:_})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"scheduledTime",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"time",id:"scheduledTime",value:v,onChange:G=>E(G.target.value),className:"w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 outline-none transition-colors duration-300",required:_})]})]}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-2",children:"Your doubt will be scheduled for the selected date and time. A solver will be notified and a meeting link will be sent to you via email when accepted."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-medium transition-colors duration-300",children:"Upload reference image (optional)"}),re.image&&e.jsxs("div",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 text-sm transition-colors",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{children:re.image})]}),e.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 rounded-md p-4 transition-colors duration-300",children:[e.jsx("input",{type:"file",id:"image-upload",accept:"image/png, image/jpeg",className:"hidden",onChange:Ne,onClick:G=>G.currentTarget.value=""}),e.jsx("label",{htmlFor:"image-upload",className:"flex flex-col items-center justify-center cursor-pointer group",children:b?e.jsxs("div",{className:"relative w-full text-center",children:[e.jsx("img",{src:b,alt:"Doubt reference preview",className:"mx-auto max-h-[200px] w-auto object-contain rounded"}),e.jsx("p",{className:"text-sm text-center mt-2 text-gray-600 dark:text-gray-400 break-all transition-colors duration-300",children:c==null?void 0:c.name}),e.jsx("button",{type:"button",onClick:G=>{G.preventDefault(),f(null),b&&URL.revokeObjectURL(b),y(null)},className:"mt-2 border border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-800 dark:hover:text-gray-100 bg-white dark:bg-gray-800 rounded-md px-3 py-1 text-sm transition-colors duration-300",children:"Remove Image"})]}):e.jsxs("div",{className:"py-8 flex flex-col items-center text-center",children:[e.jsx(ot,{className:"h-10 w-10 text-gray-400 dark:text-gray-500 mb-2 group-hover:text-gray-600 dark:group-hover:text-gray-400 transition-colors"}),e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors duration-300",children:"Click to upload an image"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 transition-colors duration-300",children:"PNG, JPG, GIF up to 2MB"})]})})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6 flex justify-between items-center transition-colors duration-300",children:[e.jsxs("button",{type:"button",onClick:()=>W(!_),className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors duration-300 ${_?"bg-purple-500 dark:bg-purple-600 text-white hover:bg-purple-600 dark:hover:bg-purple-700":"border border-purple-300 dark:border-purple-600 text-purple-700 dark:text-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/20"}`,children:[e.jsx(Pe,{className:"w-4 h-4"}),_?"Cancel Schedule":"Schedule for Later"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>s(!1),className:"border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100 bg-white dark:bg-gray-800 rounded-md px-4 py-2 transition-colors duration-300",children:"Cancel"}),e.jsx("button",{type:"submit",form:"askDoubtForm",disabled:u||_&&(!S||!v),className:"bg-blue-500 dark:bg-blue-600 border border-blue-600 dark:border-blue-700 hover:bg-blue-600 dark:hover:bg-blue-700 hover:border-blue-700 dark:hover:border-blue-800 text-white rounded-md px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-300",children:u?"Submitting...":_?"Schedule Doubt":"Submit Doubt"})]})]})]})})]}):e.jsxs("button",{onClick:()=>s(!0),className:"flex items-center border bg-blue-500 border-blue-600 hover:bg-blue-600 transition-colors text-white rounded-md h-9 px-4 py-2 cursor-pointer",children:["Ask a Doubt",e.jsx(Ft,{className:"ml-2 w-5 h-5"})]})]})},He="/api/solver";class da{constructor(){this.token=localStorage.getItem("token")}getToken(){return this.token||localStorage.getItem("token")}makeAuthenticatedRequest(a){return g(this,arguments,function*(s,t={}){const r=this.getToken();if(!r)throw new Error("No authentication token found");const i={headers:M({"Content-Type":"application/json",Authorization:`Bearer ${r}`},t.headers)};try{const l=yield fetch(s,M(M({},i),t));if(l.status===401)throw new Error("Authentication failed");return l}catch(l){throw console.error("Network request failed:",l),l.name==="TypeError"&&l.message.includes("fetch")?new Error("Network error: Unable to connect to server"):l}})}acceptDoubt(s,t=0){return g(this,null,function*(){try{console.log("Accepting doubt:",s,"retry:",t);const a=this.getToken();if(!a)throw console.error("No authentication token found"),new Error("No authentication token found. Please log in again.");console.log("Authentication token found, length:",a.length);try{const x=a.split(".");if(x.length!==3)throw console.error("Invalid token format:",x.length,"parts"),localStorage.removeItem("token"),new Error("Invalid token format. Please log in again.");console.log("Token format is valid");try{const c=JSON.parse(atob(x[1])),f=Math.floor(Date.now()/1e3);if(c.exp&&c.exp<f)throw console.error("Token is expired"),localStorage.removeItem("token"),new Error("Your session has expired. Please log in again.")}catch(c){console.error("Token expiration check failed:",c)}}catch(x){throw console.error("Token validation error:",x),localStorage.removeItem("token"),new Error("Invalid authentication token. Please log in again.")}const r=new AbortController,i=setTimeout(()=>r.abort(),15e3),l=yield this.makeAuthenticatedRequest(`${He}/accept-doubt`,{method:"POST",body:JSON.stringify({doubtId:s}),signal:r.signal});clearTimeout(i),console.log("Accept doubt response status:",l.status),console.log("Accept doubt response headers:",l.headers);const m=l.headers.get("content-type");if(console.log("Response content type:",m),!m||!m.includes("application/json")){const x=yield l.text();throw console.log("Non-JSON response:",x),new Error("Server returned non-JSON response")}let d;try{if(d=yield l.json(),console.log("=== ACCEPT DOUBT DEBUG ==="),console.log("Response status:",l.status),console.log("Response ok:",l.ok),console.log("Response headers:",l.headers),console.log("Accept doubt response data:",d),console.log("Data type:",typeof d),console.log("Data is null:",d===null),console.log("Data is undefined:",d===void 0),console.log("Data keys:",d?Object.keys(d):"No keys"),console.log("=== END DEBUG ==="),d===void 0)throw console.error("Data is undefined immediately after parsing"),new Error("Server returned undefined response");if(d===null)throw console.error("Data is null immediately after parsing"),new Error("Server returned null response");if(typeof d=="object"&&Object.keys(d).length===0)throw console.error("Data is empty object"),new Error("Server returned empty response");if(typeof d!="object")throw console.error("Data is not an object:",typeof d),new Error("Server returned invalid response format")}catch(x){console.error("Failed to parse JSON response:",x);const c=yield l.text();throw console.log("Raw response text:",c),new Error("Server returned invalid JSON response")}if(!l.ok){let x;if(console.log("=== ERROR RESPONSE DEBUG ==="),console.log("Response status:",l.status),console.log("Response ok:",l.ok),console.log("Data type:",typeof d),console.log("Data is undefined:",d===void 0),console.log("Data is null:",d===null),console.log("Data value:",d),console.log("=== END ERROR DEBUG ==="),d===void 0?x=`Server error (${l.status}): ${l.statusText} - No response data`:d===null?x=`Server error (${l.status}): ${l.statusText} - Null response data`:x=d&&d.message||`Server error (${l.status}): ${l.statusText}`,d==null)throw console.error("Data is undefined/null in error handling"),new Error("Server returned invalid response");if(l.status===429||d&&d.message&&d.message.includes("Too many requests")){if(console.error("Rate limiting error:",x),t<2)return console.log("Retrying after rate limit..."),yield new Promise(c=>setTimeout(c,2e3)),this.acceptDoubt(s,t+1);throw new Error("Too many requests. Please wait a moment and try again.")}throw l.status===401||d&&d.message&&d.message.includes("token")?(console.error("Authentication error:",x),localStorage.removeItem("token"),new Error("Authentication failed. Please log in again.")):new Error(x)}if(!d||typeof d!="object")throw console.error("Invalid response structure:",d),console.error("Data is null:",d===null),console.error("Data is undefined:",d===void 0),console.error("Data type:",typeof d),new Error("Invalid response format from server");if(!d)throw console.error("Data is still undefined after validation"),new Error("No response data received from server");if(d==null)throw console.error("Data is undefined/null at final check"),new Error("Server returned invalid response");if(console.log("=== SUCCESS PATH DEBUG ==="),console.log("Data type:",typeof d),console.log("Data is undefined:",d===void 0),console.log("Data is null:",d===null),console.log("Data value:",d),console.log("Data keys:",d?Object.keys(d):"No keys"),console.log("=== END SUCCESS DEBUG ==="),d.success===void 0&&(console.warn("Response missing success property:",d),d.success=!0),!d.success){const x=d.message||"Request failed";throw new Error(x)}return d}catch(a){throw console.error("Accept doubt error:",a),a.name==="AbortError"?new Error("Request timeout. Please try again."):a.message.includes("Network error")?new Error("Unable to connect to server. Please check your connection and try again."):a}})}getAssignedDoubts(s="all"){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${He}/assigned-doubts?status=${s}`),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to fetch assigned doubts");return a.data}catch(t){throw console.error("Get assigned doubts error:",t),t}})}getAvailableDoubts(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(`${He}/available-doubts`),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch available doubts");return t.data}catch(s){throw console.error("Get available doubts error:",s),s}})}registerSolver(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${He}/register`,{method:"POST",body:JSON.stringify(s)}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to register as solver");return a}catch(t){throw console.error("Register solver error:",t),t}})}completeDoubt(a){return g(this,arguments,function*(s,t={}){try{const r=yield this.makeAuthenticatedRequest(`${He}/complete-doubt`,{method:"POST",body:JSON.stringify(M({doubtId:s},t))}),i=yield r.json();if(!r.ok)throw new Error(i.message||"Failed to complete doubt");return i}catch(r){throw console.error("Complete doubt error:",r),r}})}getSolvedDoubts(s=1,t=10){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${He}/solved-doubts?page=${s}&limit=${t}`),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to fetch solved doubts");return r.data}catch(a){throw console.error("Get solved doubts error:",a),a}})}}const Xe=new da,ca=({isOpen:n,onClose:s,onSuccess:t})=>{const[a,r]=o.useState({name:"",email:"",phoneNumber:"",subjects:[]}),[i,l]=o.useState(null),[m,d]=o.useState(null),[x,c]=o.useState(null),[f,b]=o.useState(null),[y,u]=o.useState(null),[j,N]=o.useState(null),[C,R]=o.useState(null),[h,p]=o.useState(null),[T,P]=o.useState(!1),[A,H]=o.useState(""),[k,_]=o.useState({}),W=["Operating Systems","Artificial Intelligence","Database Management Systems","Data Structures and Algorithms","Java","MERN","Python","Machine Learning","Web Development","Mobile Development"];o.useEffect(()=>{n&&g(I,null,function*(){try{const B=yield ae.getProfile();r(w=>Z(M({},w),{name:(B==null?void 0:B.name)||"",email:(B==null?void 0:B.email)||""}))}catch(B){console.error("Error loading user data:",B)}})},[n]);const S=$=>{const{name:B,value:w}=$.target;r(Y=>Z(M({},Y),{[B]:w})),k[B]&&_(Y=>Z(M({},Y),{[B]:""}))},U=$=>{r(B=>Z(M({},B),{subjects:B.subjects.includes($)?B.subjects.filter(w=>w!==$):[...B.subjects,$]}))},v=($,B)=>{const w=$.target.files[0];if(!w)return;const Y=5*1024*1024;if(w.size>Y){_(J=>Z(M({},J),{[B]:"File size must be less than 5MB"})),$.target.value="";return}if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(w.type)){_(J=>Z(M({},J),{[B]:"Only PDF, JPG, and PNG files are allowed"})),$.target.value="";return}if(_(J=>Z(M({},J),{[B]:""})),B==="resume")if(l(w),w.type.startsWith("image/")){const J=URL.createObjectURL(w);u(J)}else u(null);else if(B==="marksheet")if(d(w),w.type.startsWith("image/")){const J=URL.createObjectURL(w);N(J)}else N(null);else if(B==="aadhar")if(c(w),w.type.startsWith("image/")){const J=URL.createObjectURL(w);R(J)}else R(null);else if(B==="pancard")if(b(w),w.type.startsWith("image/")){const J=URL.createObjectURL(w);p(J)}else p(null)},E=$=>{$==="resume"?(l(null),y&&(URL.revokeObjectURL(y),u(null))):$==="marksheet"?(d(null),j&&(URL.revokeObjectURL(j),N(null))):$==="aadhar"?(c(null),C&&(URL.revokeObjectURL(C),R(null))):$==="pancard"&&(b(null),h&&(URL.revokeObjectURL(h),p(null)))},F=()=>{const $={};return a.name.trim()||($.name="Name is required"),a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||($.email="Invalid email format"):$.email="Email is required",a.phoneNumber.trim()?/^[0-9]{10}$/.test(a.phoneNumber.replace(/[\s-]/g,""))||($.phoneNumber="Invalid phone number (10 digits required)"):$.phoneNumber="Phone number is required",a.subjects.length===0&&($.subjects="Please select at least one subject"),i||($.resume="Resume is required"),m||($.marksheet="Marksheet is required"),x||($.aadhar="Aadhar card is required"),f||($.pancard="Pancard is required"),_($),Object.keys($).length===0},z=$=>g(I,null,function*(){if($.preventDefault(),H(""),!!F()){P(!0);try{const B=localStorage.getItem("token"),w=new FormData;w.append("name",a.name.trim()),w.append("email",a.email.trim().toLowerCase()),w.append("phoneNumber",a.phoneNumber.trim()),w.append("subjects",JSON.stringify(a.subjects)),w.append("resume",i),w.append("marksheet",m),w.append("aadhar",x),w.append("pancard",f);const Y=yield fetch("/api/solver/request",{method:"POST",headers:{Authorization:`Bearer ${B}`},body:w}),L=yield Y.json();if(!Y.ok)throw new Error(L.message||"Failed to submit solver request");H("Solver request submitted successfully! Admin will review your request and get back to you soon."),r({name:"",email:"",phoneNumber:"",subjects:[]}),l(null),d(null),c(null),b(null),y&&(URL.revokeObjectURL(y),u(null)),j&&(URL.revokeObjectURL(j),N(null)),C&&(URL.revokeObjectURL(C),R(null)),h&&(URL.revokeObjectURL(h),p(null)),t?setTimeout(()=>{t(),s&&s()},2e3):s&&setTimeout(()=>s(),2e3)}catch(B){console.error("Solver request error:",B),H(B.message||"Failed to submit solver request. Please try again.")}finally{P(!1)}}});return n?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden border border-white/50",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-white/20 backdrop-blur-lg flex items-center justify-center",children:e.jsx(ke,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:"Solver Request Form"}),e.jsx("p",{className:"text-indigo-100 mt-1 text-sm",children:"Submit your request to become a solver"})]})]}),e.jsx("button",{type:"button",onClick:s,className:"text-white/80 hover:text-white hover:bg-white/20 rounded-lg p-2 transition-all",children:e.jsx(de,{className:"w-5 h-5"})})]})}),e.jsxs("form",{onSubmit:z,className:"p-6 space-y-6 overflow-y-auto max-h-[60vh]",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 text-sm font-semibold",children:"Full Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:S,className:`w-full bg-gradient-to-br from-gray-50 to-gray-100 border-2 ${k.name?"border-red-500":"border-gray-200"} text-gray-900 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all`,placeholder:"Enter your full name",required:!0}),k.name&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1",children:[e.jsx(xe,{className:"w-3 h-3"}),k.name]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-semibold",children:"Email Address *"}),e.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:S,className:`w-full bg-gradient-to-br from-gray-50 to-gray-100 border-2 ${k.email?"border-red-500":"border-gray-200"} text-gray-900 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all`,placeholder:"Enter your email address",required:!0}),k.email&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1",children:[e.jsx(xe,{className:"w-3 h-3"}),k.email]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"phoneNumber",className:"block text-gray-700 text-sm font-semibold",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:a.phoneNumber,onChange:S,className:`w-full bg-gradient-to-br from-gray-50 to-gray-100 border-2 ${k.phoneNumber?"border-red-500":"border-gray-200"} text-gray-900 rounded-xl pl-12 pr-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all`,placeholder:"Enter your 10-digit phone number",maxLength:10,required:!0})]}),k.phoneNumber&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1",children:[e.jsx(xe,{className:"w-3 h-3"}),k.phoneNumber]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-semibold",children:"Select Your Expertise Areas *"}),k.subjects&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1 mb-2",children:[e.jsx(xe,{className:"w-3 h-3"}),k.subjects]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:W.map($=>e.jsxs("label",{className:`flex items-center space-x-2 p-3 border-2 rounded-xl cursor-pointer transition-all ${a.subjects.includes($)?"bg-gradient-to-br from-indigo-50 to-purple-50 border-indigo-500 text-indigo-700 shadow-md":"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200 hover:border-purple-300 hover:shadow-sm"}`,children:[e.jsx("input",{type:"checkbox",checked:a.subjects.includes($),onChange:()=>U($),className:"text-indigo-600 focus:ring-indigo-500 rounded"}),e.jsx("span",{className:"text-sm font-medium",children:$})]},$))}),e.jsx("p",{className:"text-xs text-gray-500",children:"You will receive notifications for doubts in these subjects."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-semibold",children:"Upload Resume * (PDF, JPG, or PNG - Max 5MB)"}),k.resume&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1",children:[e.jsx(xe,{className:"w-3 h-3"}),k.resume]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4 bg-gray-50 hover:border-purple-400 transition-colors",children:[e.jsx("input",{type:"file",id:"resume-upload",accept:"application/pdf,image/jpeg,image/png,image/jpg",className:"hidden",onChange:$=>v($,"resume")}),i?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ee,{className:"w-8 h-8 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:i.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(i.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>E("resume"),className:"text-red-600 hover:text-red-700 p-2",children:e.jsx(de,{className:"w-5 h-5"})})]}):e.jsxs("label",{htmlFor:"resume-upload",className:"flex flex-col items-center justify-center cursor-pointer",children:[e.jsx(ot,{className:"w-10 h-10 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload resume"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, JPG, or PNG (Max 5MB)"})]})]}),y&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:y,alt:"Resume preview",className:"max-h-32 rounded-lg border border-gray-200"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-semibold",children:"Upload Marksheet * (PDF, JPG, or PNG - Max 5MB)"}),k.marksheet&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1",children:[e.jsx(xe,{className:"w-3 h-3"}),k.marksheet]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4 bg-gray-50 hover:border-purple-400 transition-colors",children:[e.jsx("input",{type:"file",id:"marksheet-upload",accept:"application/pdf,image/jpeg,image/png,image/jpg",className:"hidden",onChange:$=>v($,"marksheet")}),m?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ee,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:m.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(m.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>E("marksheet"),className:"text-red-600 hover:text-red-700 p-2",children:e.jsx(de,{className:"w-5 h-5"})})]}):e.jsxs("label",{htmlFor:"marksheet-upload",className:"flex flex-col items-center justify-center cursor-pointer",children:[e.jsx(ot,{className:"w-10 h-10 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload marksheet"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, JPG, or PNG (Max 5MB)"})]})]}),j&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:j,alt:"Marksheet preview",className:"max-h-32 rounded-lg border border-gray-200"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-semibold",children:"Upload Aadhar Card * (PDF, JPG, or PNG - Max 5MB)"}),k.aadhar&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1",children:[e.jsx(xe,{className:"w-3 h-3"}),k.aadhar]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4 bg-gray-50 hover:border-purple-400 transition-colors",children:[e.jsx("input",{type:"file",id:"aadhar-upload",accept:"application/pdf,image/jpeg,image/png,image/jpg",className:"hidden",onChange:$=>v($,"aadhar")}),x?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ee,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(x.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>E("aadhar"),className:"text-red-600 hover:text-red-700 p-2",children:e.jsx(de,{className:"w-5 h-5"})})]}):e.jsxs("label",{htmlFor:"aadhar-upload",className:"flex flex-col items-center justify-center cursor-pointer",children:[e.jsx(ot,{className:"w-10 h-10 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload Aadhar card"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, JPG, or PNG (Max 5MB)"})]})]}),C&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:C,alt:"Aadhar preview",className:"max-h-32 rounded-lg border border-gray-200"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-semibold",children:"Upload Pancard * (PDF, JPG, or PNG - Max 5MB)"}),k.pancard&&e.jsxs("p",{className:"text-red-600 text-xs flex items-center gap-1",children:[e.jsx(xe,{className:"w-3 h-3"}),k.pancard]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4 bg-gray-50 hover:border-purple-400 transition-colors",children:[e.jsx("input",{type:"file",id:"pancard-upload",accept:"application/pdf,image/jpeg,image/png,image/jpg",className:"hidden",onChange:$=>v($,"pancard")}),f?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ee,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(f.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:()=>E("pancard"),className:"text-red-600 hover:text-red-700 p-2",children:e.jsx(de,{className:"w-5 h-5"})})]}):e.jsxs("label",{htmlFor:"pancard-upload",className:"flex flex-col items-center justify-center cursor-pointer",children:[e.jsx(ot,{className:"w-10 h-10 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload Pancard"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, JPG, or PNG (Max 5MB)"})]})]}),h&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:h,alt:"Pancard preview",className:"max-h-32 rounded-lg border border-gray-200"})})]}),A&&e.jsxs("div",{className:`p-4 rounded-xl flex items-center space-x-3 ${A.includes("successfully")?"bg-gradient-to-r from-emerald-50 to-teal-50 text-emerald-700 border-2 border-emerald-200":"bg-gradient-to-r from-red-50 to-pink-50 text-red-700 border-2 border-red-200"}`,children:[A.includes("successfully")?e.jsx(te,{className:"w-5 h-5 flex-shrink-0"}):e.jsx(xe,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium",children:A})]})]}),e.jsxs("div",{className:"border-t border-gray-200 bg-gray-50 p-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-2.5 border-2 border-gray-300 text-gray-700 hover:bg-white hover:border-gray-400 bg-white rounded-xl font-semibold transition-all",children:"Cancel"}),e.jsx("button",{type:"submit",onClick:z,disabled:T,className:"px-6 py-2.5 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 hover:from-indigo-700 hover:via-purple-700 hover:to-pink-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] disabled:transform-none flex items-center gap-2",children:T?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"animate-spin h-4 w-4"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"w-4 h-4"}),"Submit Request"]})})]})]})}):null},ct="/api/wallet";class ma{constructor(){this.token=localStorage.getItem("token")}makeAuthenticatedRequest(s,t={}){const a=this.token||localStorage.getItem("token");if(!a)throw new Error("No authentication token found");const r={headers:M({"Content-Type":"application/json",Authorization:`Bearer ${a}`},t.headers)};return fetch(s,M(M({},r),t))}getWallet(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(ct),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch wallet");return t.data}catch(s){throw console.error("Get wallet error:",s),s}})}getBalance(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(`${ct}/balance`),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch balance");return t.data}catch(s){throw console.error("Get balance error:",s),s}})}createWithdrawalRequest(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${ct}/withdraw`,{method:"POST",body:JSON.stringify(s)}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to create withdrawal request");return a}catch(t){throw console.error("Create withdrawal request error:",t),t}})}getWithdrawals(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(`${ct}/withdrawals`),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch withdrawals");return t.data}catch(s){throw console.error("Get withdrawals error:",s),s}})}}const cs=new ma,ua=({isOpen:n,onClose:s,currentBalance:t,onSuccess:a})=>{const[r,i]=o.useState(""),[l,m]=o.useState("upi"),[d,x]=o.useState(""),[c,f]=o.useState(""),[b,y]=o.useState(""),[u,j]=o.useState(""),[N,C]=o.useState(""),[R,h]=o.useState(!1),[p,T]=o.useState(""),[P,A]=o.useState(!1),H=_=>g(I,null,function*(){_.preventDefault(),T(""),h(!0);try{const W=parseFloat(r);if(!r||W<=0){T("Please enter a valid amount"),h(!1);return}if(W>t){T(`Insufficient balance. Available: ‚Çπ${t}`),h(!1);return}if(!c.trim()){T("Account holder name is required"),h(!1);return}if(l==="upi"){if(!d.trim()){T("UPI ID is required"),h(!1);return}}else if(!b.trim()||!u.trim()||!N.trim()){T("Please fill all bank account details"),h(!1);return}const S=yield cs.createWithdrawalRequest({amount:W,upi_id:l==="upi"?d:null,bank_account_number:l==="bank"?b:null,bank_ifsc:l==="bank"?u:null,bank_name:l==="bank"?N:null,account_holder_name:c});S.success?(A(!0),setTimeout(()=>{a==null||a(),k()},2e3)):T(S.message||"Failed to submit withdrawal request")}catch(W){console.error("Withdrawal error:",W),T(W.message||"Failed to submit withdrawal request")}finally{h(!1)}}),k=()=>{R||(i(""),x(""),f(""),y(""),j(""),C(""),m("upi"),T(""),A(!1),s())};return n?e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center p-3 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto animate-in fade-in-0 zoom-in-95 duration-300 transition-colors",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 p-4 transition-colors duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(st,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-gray-100 transition-colors",children:"Withdraw Rupees"}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 transition-colors",children:["Available: ",e.jsxs("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:["‚Çπ",t]})]})]})]}),e.jsx("button",{onClick:k,disabled:R,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors disabled:opacity-50",children:e.jsx(de,{className:"w-5 h-5"})})]})}),e.jsx("form",{onSubmit:H,className:"p-4",children:P?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-14 h-14 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-3 transition-colors",children:e.jsx(xe,{className:"w-7 h-7 text-green-600 dark:text-green-400"})}),e.jsx("h4",{className:"text-base font-semibold text-gray-900 dark:text-gray-100 mb-2 transition-colors",children:"Request Submitted!"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors",children:"Your withdrawal request has been submitted and is pending admin approval."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"amount",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 transition-colors",children:"Withdrawal Amount (‚Çπ)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 font-semibold text-sm",children:"‚Çπ"}),e.jsx("input",{type:"number",id:"amount",value:r,onChange:_=>i(_.target.value),min:"1",max:t,step:"1",required:!0,className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg pl-8 pr-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Enter amount"})]}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400 transition-colors",children:["Maximum: ",e.jsxs("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:["‚Çπ",t]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"accountHolderName",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 transition-colors",children:["Account Holder Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"accountHolderName",value:c,onChange:_=>f(_.target.value),required:!0,className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Enter account holder name"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 transition-colors",children:"Payment Method"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>m("upi"),className:`p-2.5 rounded-lg border-2 transition-all ${l==="upi"?"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-gray-400 dark:hover:border-gray-500"}`,children:[e.jsx(Kt,{className:`w-4 h-4 mx-auto mb-1 ${l==="upi"?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-gray-500"}`}),e.jsx("span",{className:`text-xs sm:text-sm font-medium ${l==="upi"?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:"UPI"})]}),e.jsxs("button",{type:"button",onClick:()=>m("bank"),className:`p-2.5 rounded-lg border-2 transition-all ${l==="bank"?"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-gray-400 dark:hover:border-gray-500"}`,children:[e.jsx(st,{className:`w-4 h-4 mx-auto mb-1 ${l==="bank"?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-gray-500"}`}),e.jsx("span",{className:`text-xs sm:text-sm font-medium ${l==="bank"?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:"Bank Account"})]})]})]}),l==="upi"&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"upiId",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 transition-colors",children:["UPI ID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"upiId",value:d,onChange:_=>x(_.target.value),required:!0,className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"yourname@paytm"})]}),l==="bank"&&e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"bankAccountNumber",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 transition-colors",children:["Account Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"bankAccountNumber",value:b,onChange:_=>y(_.target.value),required:!0,className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Enter account number"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"bankIFSC",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 transition-colors",children:["IFSC Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"bankIFSC",value:u,onChange:_=>j(_.target.value.toUpperCase()),required:!0,className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"ABCD0123456",maxLength:"11"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"bankName",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 transition-colors",children:["Bank Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"bankName",value:N,onChange:_=>C(_.target.value),required:!0,className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Enter bank name"})]})]}),p&&e.jsxs("div",{className:"mb-3 p-2.5 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-start gap-2 transition-colors",children:[e.jsx(xe,{className:"w-4 h-4 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs sm:text-sm text-red-600 dark:text-red-400",children:p})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:k,disabled:R,className:"flex-1 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 font-medium py-2 px-3 text-sm rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:R||!r||parseFloat(r)<=0,className:"flex-1 bg-blue-500 dark:bg-blue-600 hover:bg-blue-600 dark:hover:bg-blue-700 text-white font-medium py-2 px-3 text-sm rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Submitting...":"Submit Request"})]})]})})]})}):null},xa=()=>{var x;const[n,s]=o.useState(null),[t,a]=o.useState(!0),[r,i]=o.useState(null),[l,m]=o.useState(!1);o.useEffect(()=>{d()},[]);const d=()=>g(I,null,function*(){try{a(!0),i(null);const c=yield cs.getWallet();s(c)}catch(c){console.error("Error fetching wallet:",c),i(c.message||"Failed to load wallet")}finally{a(!1)}});return t?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 transition-colors duration-300",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-32 mb-4"}),e.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded w-24"})]})}):r?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-red-200 dark:border-red-800 p-6 transition-colors duration-300",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:r}),e.jsx("button",{onClick:d,className:"mt-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm transition-colors",children:"Retry"})]}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 transition-colors duration-300 h-fit",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2 transition-colors duration-300",children:[e.jsx(Lt,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),"Wallet"]}),e.jsx("button",{onClick:d,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(vs,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1 transition-colors duration-300",children:"Current Balance"}),e.jsx("p",{className:"text-3xl font-bold transition-colors duration-300",children:e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["‚Çπ",(n==null?void 0:n.balance)||0]})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 transition-colors duration-300",children:[e.jsx(We,{className:"w-4 h-4 text-green-500 dark:text-green-400"}),e.jsxs("span",{children:["Total Earned: ",e.jsxs("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:["‚Çπ",(n==null?void 0:n.total_earned)||0]})]})]}),(n==null?void 0:n.withdrawalEligibility)&&!n.withdrawalEligibility.isEligible&&e.jsxs("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300 font-medium mb-1",children:"Withdrawal Locked"}),e.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:n.withdrawalEligibility.message}),e.jsxs("div",{className:"mt-2 text-xs text-amber-600 dark:text-amber-400 space-y-1",children:[e.jsxs("p",{children:["‚Ä¢ Completed: ",n.withdrawalEligibility.completedDoubts,"/",n.withdrawalEligibility.minDoubtsRequired," doubts"]}),e.jsxs("p",{children:["‚Ä¢ Average Rating: ",n.withdrawalEligibility.averageRating.toFixed(1),"/",n.withdrawalEligibility.minRatingRequired," ‚≠ê"]})]})]}),e.jsxs("button",{onClick:()=>m(!0),disabled:!n||n.balance<=0||(n==null?void 0:n.withdrawalEligibility)&&!n.withdrawalEligibility.isEligible,className:`w-full flex items-center justify-center gap-2 font-medium py-2.5 px-4 rounded-lg transition-colors duration-300 ${n&&n.balance>0&&((x=n==null?void 0:n.withdrawalEligibility)==null?void 0:x.isEligible)!==!1?"bg-blue-500 dark:bg-blue-600 hover:bg-blue-600 dark:hover:bg-blue-700 text-white cursor-pointer":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx(ws,{className:"w-4 h-4"}),e.jsx("span",{children:"Withdraw"})]}),(n==null?void 0:n.transactions)&&n.transactions.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 transition-colors duration-300",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 transition-colors duration-300",children:"Recent Transactions"}),e.jsx("div",{className:"space-y-2 max-h-[140px] overflow-y-auto",children:[...n.transactions].sort((c,f)=>new Date(f.createdAt)-new Date(c.createdAt)).map((c,f)=>{var b,y;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg transition-colors duration-300",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 transition-colors duration-300",children:((b=c.doubt_id)==null?void 0:b.subject)||"Doubt solved"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 transition-colors duration-300",children:[c.doubt_type," ‚Ä¢ Rating: ",c.rating,"/5 ‚Ä¢ Avg: ",((y=c.average_rating)==null?void 0:y.toFixed(1))||"0.0"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400 transition-colors duration-300",children:["+‚Çπ",c.amount]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 transition-colors duration-300",children:new Date(c.createdAt).toLocaleDateString()})]})]},f)})})]})]}),e.jsx(ua,{isOpen:l,onClose:()=>m(!1),currentBalance:(n==null?void 0:n.balance)||0,onSuccess:()=>{d()}})]})},ha=()=>{const[n,s]=o.useState("Overall"),[t,a]=o.useState(null),[r,i]=o.useState(!0),[l,m]=o.useState(0),[d,x]=o.useState(null),[c,f]=o.useState(null),[b,y]=o.useState(!1),[u,j]=o.useState(!1),N=o.useRef(null),C=o.useRef(null),[R,h]=o.useState(null),p=o.useRef(new Set),T=he(),[P,A]=o.useState(!0),[H,k]=o.useState(!1);o.useEffect(()=>{const v=()=>{window.innerWidth>=1024&&A(!0)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),o.useEffect(()=>{(()=>g(I,null,function*(){try{if(!ae.isAuthenticated()){T("/");return}if(!(localStorage.getItem("cacheVerified")==="true")){T("/verify-cache");return}const F=yield ae.getProfile();a(F)}catch(E){console.error("Error fetching user data:",E),ae.logout(),T("/")}finally{i(!1)}}))(),g(I,null,function*(){var E,F,z;try{const $=localStorage.getItem("token");if(!$)return;const w=yield(yield fetch("/api/solver/metrics",{headers:{Authorization:`Bearer ${$}`}})).json();w!=null&&w.success&&(m(((E=w.data)==null?void 0:E.solvedCount)||0),x((z=(F=w.data)==null?void 0:F.avgRating)!=null?z:null))}catch($){}});try{const E=dt(window.location.origin,{withCredentials:!0});N.current=E,g(I,null,function*(){var F;try{const z=yield ae.getProfile(),$=(z==null?void 0:z.id)||(z==null?void 0:z._id);let B=[];try{const Y=yield(yield fetch("/api/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json(),L=(F=Y==null?void 0:Y.data)==null?void 0:F.strongSubject;B=L?[String(L).toLowerCase()]:[]}catch(w){}E.emit("registerSolver",{userId:$,subjects:B})}catch(z){E.emit("registerSolver",{userId:null,subjects:[]})}}),E.on("doubt:available",F=>{f({doubtId:F.doubtId,subject:F.subject,description:F.description,status:F.status,createdAt:F.createdAt,is_scheduled:F.is_scheduled||!1,scheduled_date:F.scheduled_date,scheduled_time:F.scheduled_time}),y(!0)}),E.on("doubt:assigned",({doubtId:F})=>{c&&String(c.doubtId)===String(F)&&(y(!1),f(null))}),E.on("doubt:rated",({doubtId:F,rating:z})=>{h({message:`Asker rated ${z?`(${z}/5)`:""} and ended session. Doubt ${String(F).slice(-6)}.`}),setTimeout(()=>h(null),5e3)})}catch(E){}return N.current&&N.current.on("doubt:completed",()=>g(I,null,function*(){var E,F,z;try{const $=localStorage.getItem("token");if(!$)return;const w=yield(yield fetch("/api/solver/metrics",{headers:{Authorization:`Bearer ${$}`}})).json();w!=null&&w.success&&(m(((E=w.data)==null?void 0:E.solvedCount)||0),x((z=(F=w.data)==null?void 0:F.avgRating)!=null?z:null))}catch($){}})),C.current||(C.current=setInterval(()=>g(I,null,function*(){var E,F,z;try{const $=localStorage.getItem("token");if(!$)return;const w=yield(yield fetch("/api/solver/available-doubts",{headers:{Authorization:`Bearer ${$}`}})).json(),Y=(w==null?void 0:w.data)||[];if(p.current.size===0)Y.forEach(L=>p.current.add(String(L._id||L.id)));else{const L=Y.find(J=>!p.current.has(String(J._id||J.id)));L&&(p.current.add(String(L._id||L.id)),f({doubtId:String(L._id||L.id),subject:L.subject,description:L.description,status:L.status,createdAt:L.createdAt,is_scheduled:L.is_scheduled||!1,scheduled_date:L.scheduled_date,scheduled_time:L.scheduled_time}),y(!0))}}catch($){}try{const $=localStorage.getItem("token");if(!$)return;const w=yield(yield fetch("/api/solver/metrics",{headers:{Authorization:`Bearer ${$}`}})).json();w!=null&&w.success&&(m(((E=w.data)==null?void 0:E.solvedCount)||0),x((z=(F=w.data)==null?void 0:F.avgRating)!=null?z:null))}catch($){}}),15e3)),()=>{N.current&&(N.current.disconnect(),N.current=null),C.current&&(clearInterval(C.current),C.current=null)}},[T,c]);const _=()=>g(I,null,function*(){if(c)try{j(!0);const v=localStorage.getItem("token");if(!(yield fetch("/api/solver/accept-doubt",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({doubtId:c.doubtId})})).ok)throw new Error("Failed to accept doubt");if(yield new Promise(z=>setTimeout(z,1200)),c.is_scheduled&&c.scheduled_date){y(!1),f(null),j(!1),alert("Doubt accepted successfully! You will receive an email with the meeting link at the scheduled time.");return}const F=c.doubtId;y(!1),f(null),T(`/dashboard/session/${F}`)}catch(v){j(!1)}}),W=()=>g(I,null,function*(){try{yield ae.logout(),T("/")}catch(v){console.error("Logout error:",v),T("/")}});if(r)return e.jsx("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 items-center justify-center transition-colors duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 dark:border-blue-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})});const S=[{name:"Mon",value:2.8},{name:"Tue",value:2.2},{name:"Wed",value:2},{name:"Thu",value:2.1},{name:"Fri",value:3.8},{name:"Sat",value:2}],U=()=>{const v=(t==null?void 0:t.id)||"default_user",E=[{icon:ft,label:"Home",active:!0,path:"/dashboard"},{icon:je,label:"My Doubts",path:"/dashboard/doubts"},{icon:qe,label:"Available Doubts",path:"/dashboard/doubts?tab=available"},{icon:je,label:"Solved Doubts",path:"/dashboard/solved-doubts"},{icon:Ve,label:"Educational Social",path:`/dashboard/social/${v}`},{icon:lt,label:"Corporate Connect",path:"/dashboard/corporate-connect"},{icon:ke,label:"Online Referral System",path:"/dashboard/referral-system"},{icon:Pe,label:"Previous Year Live",path:"/dashboard/pyq"},{icon:ye,label:"Notifications",path:"/dashboard/notifications"},{icon:Ce,label:"Profile",path:"/dashboard/profile"},{icon:nt,label:"Logout",onClick:W}];return(t==null?void 0:t.role)==="admin"&&E.splice(-1,0,{icon:Se,label:"Admin Panel",path:"/admin/panel"}),E};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes wave {
          0%, 100% {
            transform: perspective(1000px) rotateY(-15deg) rotateZ(0deg) translateY(0px);
          }
          25% {
            transform: perspective(1000px) rotateY(-10deg) rotateZ(20deg) translateY(-2px);
          }
          50% {
            transform: perspective(1000px) rotateY(-15deg) rotateZ(0deg) translateY(0px);
          }
          75% {
            transform: perspective(1000px) rotateY(-20deg) rotateZ(-20deg) translateY(-2px);
          }
        }
        .welcome-3d {
          display: inline-block;
          position: relative;
          transform: perspective(800px) rotateX(3deg) rotateY(-5deg);
          transform-style: preserve-3d;
          font-weight: 900;
          letter-spacing: 0px;
          color: #ffffff;
          padding: 2px 4px;
          margin: 0;
          line-height: 1.2;
          cursor: pointer;
          transition: transform 0.2s ease-out;
          background: linear-gradient(
            135deg,
            rgba(255,255,255,0.15) 0%,
            rgba(255,255,255,0.05) 50%,
            rgba(0,0,0,0.1) 100%
          );
          border: 1.5px solid rgba(255,255,255,0.2);
          border-top: 1.5px solid rgba(255,255,255,0.3);
          border-left: 1.5px solid rgba(255,255,255,0.3);
          border-bottom: 1.5px solid rgba(0,0,0,0.3);
          border-right: 1.5px solid rgba(0,0,0,0.3);
          box-shadow: 
            /* Multiple shadow layers for brick depth */
            inset 0px 1px 0px rgba(255,255,255,0.2),
            inset 1px 0px 0px rgba(255,255,255,0.15),
            inset 0px -1px 0px rgba(0,0,0,0.2),
            inset -1px 0px 0px rgba(0,0,0,0.2),
            /* Outer shadows for 3D effect */
            2px 2px 0px rgba(0,0,0,0.3),
            4px 4px 0px rgba(0,0,0,0.25),
            6px 6px 0px rgba(0,0,0,0.2),
            8px 8px 0px rgba(0,0,0,0.15),
            10px 10px 0px rgba(0,0,0,0.1),
            12px 12px 0px rgba(0,0,0,0.05),
            /* Glow */
            0px 0px 15px rgba(255,255,255,0.2);
          text-shadow: 
            /* Text depth */
            1px 1px 2px rgba(0,0,0,0.5),
            2px 2px 4px rgba(0,0,0,0.4),
            /* Highlight */
            -1px -1px 1px rgba(255,255,255,0.3);
          filter: drop-shadow(8px 8px 16px rgba(0,0,0,0.5));
        }
        .welcome-3d:hover {
          transform: perspective(800px) rotateX(8deg) rotateY(-8deg) translateY(-8px) scale(1.1);
          z-index: 10;
          filter: drop-shadow(12px 12px 24px rgba(0,0,0,0.6));
          box-shadow: 
            inset 0px 1px 0px rgba(255,255,255,0.3),
            inset 1px 0px 0px rgba(255,255,255,0.25),
            inset 0px -1px 0px rgba(0,0,0,0.3),
            inset -1px 0px 0px rgba(0,0,0,0.3),
            2px 2px 0px rgba(0,0,0,0.3),
            4px 4px 0px rgba(0,0,0,0.25),
            6px 6px 0px rgba(0,0,0,0.2),
            8px 8px 0px rgba(0,0,0,0.15),
            10px 10px 0px rgba(0,0,0,0.1),
            12px 12px 0px rgba(0,0,0,0.05),
            0px 0px 20px rgba(255,255,255,0.3);
        }
        .welcome-3d::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: 
            repeating-linear-gradient(
              0deg,
              transparent,
              transparent 2px,
              rgba(0,0,0,0.05) 2px,
              rgba(0,0,0,0.05) 4px
            ),
            repeating-linear-gradient(
              90deg,
              transparent,
              transparent 20px,
              rgba(255,255,255,0.03) 20px,
              rgba(255,255,255,0.03) 22px
            );
          pointer-events: none;
          border-radius: 2px;
        }
        .welcome-3d::after {
          content: '';
          position: absolute;
          top: -2px;
          left: -2px;
          right: -2px;
          bottom: -2px;
          background: linear-gradient(
            135deg,
            rgba(255,255,255,0.1) 0%,
            transparent 30%,
            transparent 70%,
            rgba(0,0,0,0.15) 100%
          );
          pointer-events: none;
          z-index: -1;
          border-radius: 4px;
        }
      `}),e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300",children:[R&&e.jsx("div",{className:"fixed top-4 right-4 z-50 bg-gray-900 dark:bg-gray-800 text-white px-4 py-3 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full"}),e.jsx("span",{className:"text-sm",children:R.message})]})}),b&&c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full mx-4 animate-in fade-in-0 zoom-in-95 duration-300 transition-colors",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 dark:from-green-600 dark:to-green-700 rounded-t-xl p-4 text-white transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 dark:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(te,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold",children:"New Doubt Available!"}),e.jsx("p",{className:"text-green-100 dark:text-green-200 text-xs",children:"A new doubt is waiting for you"})]})]}),e.jsx("button",{onClick:()=>{u||(y(!1),f(null))},disabled:u,className:"text-white/80 dark:text-white/90 hover:text-white transition-colors disabled:opacity-50",children:e.jsx(de,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-2 transition-colors",children:e.jsx(je,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-1 transition-colors",children:"New Doubt Available"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors",children:['"',c.subject,'" needs your expertise']})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3 mb-4 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300 mb-2 transition-colors",children:[e.jsx(je,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"font-medium text-sm",children:"Doubt Details"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"w-3 h-3"}),e.jsxs("span",{className:"text-xs",children:["Subject: ",c.subject]})]}),c.is_scheduled&&c.scheduled_date&&e.jsxs("div",{className:"flex items-center space-x-2 mt-1.5 p-1.5 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[e.jsx(Pe,{className:"w-3 h-3 text-blue-600 dark:text-blue-400"}),e.jsxs("span",{className:"text-blue-700 dark:text-blue-300 font-semibold text-xs",children:["Scheduled: ",new Date(c.scheduled_date).toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," at ",c.scheduled_time||new Date(c.scheduled_date).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"mt-1.5 text-gray-700 dark:text-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-0.5",children:"Description:"}),e.jsx("p",{className:"line-clamp-2 text-xs",children:c.description})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:_,disabled:u,className:"w-full bg-green-500 dark:bg-green-600 hover:bg-green-600 dark:hover:bg-green-700 text-white font-semibold py-2.5 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 text-sm",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:c.is_scheduled?"Accepting...":"Joining Session..."})]}):e.jsx(e.Fragment,{children:c.is_scheduled?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Accept"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-4 h-4"}),e.jsx("span",{children:"Accept & Join"})]})})}),e.jsx("button",{onClick:()=>{u||(y(!1),f(null))},disabled:u,className:"w-full border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50 text-sm",children:"Dismiss"})]}),e.jsx("div",{className:"mt-3 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg transition-colors",children:e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 text-center transition-colors",children:"üí° You can also accept doubts from your dashboard anytime"})})]})]})}),e.jsx("aside",{className:`fixed inset-y-0 left-0 z-40 w-64 transition-transform duration-300 ease-in-out ${P?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"w-64 bg-gray-100 dark:bg-gray-800 shadow-sm border-r border-gray-200 dark:border-gray-700 transition-colors duration-300 flex flex-col h-screen",children:e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"p-6 flex items-center justify-between",children:[e.jsx(_e,{to:"/dashboard",className:"flex items-center",children:e.jsxs("h1",{className:"text-xl font-bold text-blue-900 dark:text-blue-300 italic transition-colors duration-300 hover:opacity-80",children:["EDU",e.jsxs("span",{className:"relative inline-block mx-0.5",children:[e.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg transform rotate-3"}),e.jsx("span",{className:"relative bg-gradient-to-r from-red-400 to-orange-400 rounded-lg px-1 py-0.5 text-white font-bold text-lg",children:"F"})]}),"OYER"]})}),e.jsx("button",{onClick:()=>A(!1),className:"lg:hidden text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"mt-6 overflow-x-hidden",children:U().map((v,E)=>e.jsxs("div",{onClick:()=>{v.onClick?v.onClick():v.path&&T(v.path)},className:`flex items-center px-4 py-3 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer relative transition-colors duration-300 min-w-0 ${v.active?"text-blue-500 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 border-r-2 border-blue-500 dark:border-blue-400":""} ${v.label==="Logout"?"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20":""}`,children:[e.jsx(v.icon,{className:"w-5 h-5 mr-2 flex-shrink-0"}),e.jsx("span",{className:"font-medium truncate min-w-0",children:v.label}),v.badge&&e.jsx("span",{className:"ml-auto bg-blue-500 dark:bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center flex-shrink-0",children:v.badge})]},E))})]})})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden transition-opacity duration-300",onClick:()=>A(!1)}),e.jsxs("main",{className:`flex-1 overflow-hidden transition-all duration-300 ${P?"ml-64":"ml-0"}`,children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 transition-colors duration-300",children:e.jsx("div",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>A(!P),className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:e.jsx(Ns,{className:"w-6 h-6"})}),e.jsx(Be,{})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-blue-500 dark:bg-blue-600 border border-blue-600 dark:border-blue-700 text-white rounded-md font-medium hover:bg-blue-600 dark:hover:bg-blue-700 flex items-center gap-2 transition-colors text-sm",children:[e.jsx(je,{className:"w-4 h-4"}),"Solve a Doubt"]}),e.jsx(ia,{})]})]})})}),e.jsxs("div",{className:"p-6 pb-8 overflow-y-auto h-full bg-gray-100 dark:bg-gray-900 transition-colors duration-300",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 dark:from-blue-600 dark:to-blue-700 rounded-2xl p-8 text-white mb-6 relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2 flex items-center flex-wrap gap-1",children:[("Welcome back, "+((t==null?void 0:t.name)||"User")).split("").map((v,E)=>v===" "?e.jsx("span",{className:"w-2"},E):e.jsx("span",{className:"welcome-3d",children:v},E)),e.jsx("span",{className:"ml-2 inline-block",children:e.jsx("span",{className:"inline-block text-4xl",style:{animation:"wave 1s ease-in-out infinite",transformStyle:"preserve-3d",transform:"perspective(1000px) rotateY(-15deg) rotateZ(0deg)",filter:"drop-shadow(4px 4px 8px rgba(0,0,0,0.3))",textShadow:"2px 2px 4px rgba(0,0,0,0.2), -1px -1px 2px rgba(255,255,255,0.1)"},children:"üëã"})})]}),e.jsxs("p",{className:"text-blue-100 dark:text-blue-200 mb-1",children:["You've cleared ",e.jsx("span",{className:"font-semibold",children:l})," doubts this month"]}),e.jsxs("p",{className:"text-blue-100 dark:text-blue-200",children:["Average rating: ",e.jsx("span",{className:"font-semibold",children:d?d.toFixed(1):"‚Äî"})]})]}),e.jsxs("div",{className:"absolute right-8 top-4",children:[e.jsx("div",{className:"w-32 h-32 bg-blue-300 dark:bg-blue-500 rounded-full opacity-30"}),e.jsx("div",{className:"absolute top-4 right-4 w-20 h-20 bg-white rounded-full opacity-20"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsx(xa,{}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 transition-colors duration-300",children:"Performance"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex space-x-2",children:["Overall","Completed"].map(v=>e.jsx("button",{onClick:()=>s(v),className:`px-3 py-1 text-sm font-medium rounded transition-colors duration-300 ${n===v?"text-blue-500 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:v},v))}),e.jsx("button",{className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),e.jsx("div",{className:"h-64",children:e.jsx(At,{width:"100%",height:"100%",children:e.jsxs(Ks,{data:S,children:[e.jsx(Et,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:stroke-gray-700"}),e.jsx(Rt,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#9ca3af",fontSize:12},className:"dark:text-gray-400"}),e.jsx(Tt,{axisLine:!1,tickLine:!1,tick:{fill:"#9ca3af",fontSize:12},domain:[1,4],className:"dark:text-gray-400"}),e.jsx(Hs,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",strokeWidth:2,r:4},fill:"url(#gradient)"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]})})]})})})]})]})]})]}),e.jsx(ca,{isOpen:H,onClose:()=>k(!1),onSuccess:()=>{k(!1),h({type:"success",message:"Solver request submitted successfully! Admin will review your request."})}})]})]})},zt="/api/profile";class ga{constructor(){this.token=localStorage.getItem("token")}getToken(){return this.token||localStorage.getItem("token")}makeAuthenticatedRequest(a){return g(this,arguments,function*(s,t={}){const r=this.getToken();if(!r)throw new Error("No authentication token found");const i={headers:M({"Content-Type":"application/json",Authorization:`Bearer ${r}`},t.headers)},l=yield fetch(s,M(M({},i),t));if(l.status===401)throw new Error("Authentication failed");return l})}createProfile(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${zt}/create`,{method:"POST",body:JSON.stringify(s)}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to create profile");return a}catch(t){throw console.error("Create profile error:",t),t}})}getProfile(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(`${zt}`),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch profile");return t.data}catch(s){throw console.error("Get profile error:",s),s}})}}const ba=new ga,pa=()=>{const[n,s]=o.useState({mobileNumber:"",strongSubject:"",universityName:"",course:""}),[t,a]=o.useState({}),[r,i]=o.useState(!1),l=he(),m=["Operating Systems","Artificial Intelligence","Database Management Systems","Data Structures and Algorithms","Java","MERN"],d=["Kalinga Institute of Industrial Technology"],x=f=>{const{name:b,value:y}=f.target;s(u=>Z(M({},u),{[b]:y})),t[b]&&a(u=>Z(M({},u),{[b]:""}))},c=f=>g(I,null,function*(){f.preventDefault(),i(!0),a({});try{yield ba.createProfile(n),l("/dashboard")}catch(b){console.error("Profile creation error:",b),a({form:b.message||"Failed to create profile. Please try again."})}finally{i(!1)}});return e.jsxs("div",{className:"relative min-h-screen w-full bg-[#171717] dark:bg-gray-900 text-gray-200 dark:text-gray-100 transition-colors duration-300",children:[e.jsx("div",{className:"absolute top-0 bottom-0 left-[calc(50%-220px)] border-t-3 border-l-3 border-dotted border-[#2b2b2b]"}),e.jsx("div",{className:"absolute top-0 bottom-0 right-[calc(50%-220px)] border-t-3 border-l-3 border-dotted border-[#2b2b2b]"}),e.jsx("div",{className:"absolute left-0 right-0 top-[15%] border-t-3 border-l-3 border-dotted border-[#2b2b2b]"}),e.jsx("div",{className:"absolute left-0 right-0 bottom-[15%] border-t-3 border-l-3 border-dotted border-[#2b2b2b]"}),e.jsx("div",{className:"flex items-center justify-center min-h-screen py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8 bg-transparent p-8 rounded-lg relative z-10",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-200",children:"Welcome!"}),e.jsx("p",{className:"mt-2 text-gray-300",children:"We would love to know more about you"})]}),e.jsxs("form",{onSubmit:c,className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mobileNumber",className:"block text-sm font-medium text-gray-200",children:"What is your mobile number?"}),e.jsx("input",{id:"mobileNumber",name:"mobileNumber",type:"tel",required:!0,value:n.mobileNumber,onChange:x,className:"mt-1 block w-full px-3 py-2 border border-[#343434] rounded-md shadow-sm focus:outline-none focus:ring-gray-300 focus:border-gray-300"}),t.mobileNumber&&e.jsx("p",{className:"text-sm text-red-400",children:t.mobileNumber})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"strongSubject",className:"block text-sm font-medium text-gray-200",children:"What is your strong subject?"}),e.jsxs("select",{id:"strongSubject",name:"strongSubject",required:!0,value:n.strongSubject,onChange:x,className:"mt-1 block w-full px-3 py-2 border bg-[#1d1d1d] border-[#343434] text-gray-200 rounded-md shadow-sm",children:[e.jsx("option",{value:"",children:"Select a subject"}),m.map(f=>e.jsx("option",{className:"bg-[#1d1d1d] border-[#343434] text-gray-200",value:f.toLowerCase(),children:f},f))]}),t.strongSubject&&e.jsx("p",{className:"text-sm text-red-400",children:t.strongSubject})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"universityName",className:"block text-sm font-medium text-gray-200",children:"What is your university name?"}),e.jsxs("select",{id:"universityName",name:"universityName",required:!0,value:n.universityName,onChange:x,className:"mt-1 block w-full px-3 py-2 border rounded-md shadow-sm bg-[#1d1d1d] border-[#343434] text-gray-200",children:[e.jsx("option",{value:"",children:"Select a university"}),d.map(f=>e.jsx("option",{className:"bg-[#1d1d1d] border-[#343434] text-gray-200",value:f.toLowerCase(),children:f},f))]}),t.universityName&&e.jsx("p",{className:"text-sm text-red-400",children:t.universityName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"course",className:"block text-sm font-medium text-gray-200",children:"What is your course?"}),e.jsx("input",{id:"course",name:"course",type:"text",required:!0,value:n.course,onChange:x,className:"mt-1 block w-full px-3 py-2 border border-[#343434] rounded-md shadow-sm focus:outline-none focus:ring-gray-300 focus:border-gray-300"}),t.course&&e.jsx("p",{className:"text-sm text-red-400",children:t.course})]})]}),t.form&&e.jsx("div",{className:"bg-red-50 p-4 rounded-md",children:e.jsx("p",{className:"text-sm text-red-700",children:t.form})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:r,className:"w-full bg-[#2b2b2b] py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:ring-2 hover:ring-gray-300 transition-all cursor-pointer disabled:opacity-50",children:r?"Submitting...":"Submit"})})]})]})})]})};function fa({status:n}){if(!n)return null;let s="text-xs font-medium px-2 py-0.5 rounded-full capitalize border whitespace-nowrap ",t=n.toString().replace("_"," ");switch(n.toLowerCase()){case"open":s+="bg-blue-900/60 text-blue-300 border-blue-800/70";break;case"assigned":s+="bg-yellow-900/60 text-yellow-300 border-yellow-800/70";break;case"resolved":s+="bg-green-900/60 text-green-300 border-green-800/70";break;case"closed":s+="bg-neutral-700 text-neutral-400 border-neutral-600";break;case"needs_info":s+="bg-purple-900/60 text-purple-300 border-purple-800/70";break;default:s+="bg-neutral-800 text-neutral-300 border-neutral-700",t="Unknown";break}return e.jsx("span",{className:s,children:t})}function ya({status:n}){if(!n)return null;let s="text-[11px] font-medium px-1.5 py-0.5 rounded-full capitalize border whitespace-nowrap ",t=n.toString().replace("_"," ");switch(n.toLowerCase()){case"pending":s+="bg-neutral-700 text-neutral-300 border-neutral-600";break;case"session_scheduled":s+="bg-blue-900/70 text-blue-300 border-blue-800/80";break;case"session_completed":s+="bg-green-900/70 text-green-300 border-green-800/80";break;case"accepted":s+="bg-green-900/70 text-green-300 border-green-800/80";break;case"rejected":s+="bg-red-900/70 text-red-300 border-red-800/80";break;case"needs_revision":s+="bg-yellow-900/70 text-yellow-300 border-yellow-800/80";break;default:s+="bg-neutral-800 text-neutral-300 border-neutral-700",t="Unknown";break}return e.jsx("span",{className:s,children:t})}const ja=()=>{const n=he(),[s]=ks(),t=s.get("tab"),[a,r]=o.useState(t==="available"?"available":"my-doubts"),[i,l]=o.useState([]),[m,d]=o.useState([]),[x,c]=o.useState([]),[f,b]=o.useState(!0),[y,u]=o.useState(null),[j,N]=o.useState(null),[C,R]=o.useState(!1),[h,p]=o.useState(!1),T=o.useRef(null),P=o.useRef(new Set),A=o.useRef(null),[H,k]=o.useState(null),[_,W]=o.useState(null),[S,U]=o.useState(!0);o.useEffect(()=>{(()=>g(I,null,function*(){try{if(!ae.isAuthenticated()){n("/");return}const J=yield ae.getProfile();W(J)}catch(J){console.error("Error fetching user data:",J),ae.logout(),n("/")}finally{U(!1)}}))()},[n]);const v=()=>g(I,null,function*(){var L;try{console.log("üîÑ Fetching my doubts...");const J=yield tt.getMyDoubts();console.log("üìä Received doubt data:",J),console.log("üìù Number of doubts:",((L=J.doubts)==null?void 0:L.length)||0),l(J.doubts||[]),console.log("‚úÖ Doubts state updated")}catch(J){console.error("‚ùå Error fetching my doubts:",J),u(J.message||"Failed to load your doubts.")}}),E=()=>g(I,null,function*(){try{const L=yield Xe.getAvailableDoubts();d(L||[])}catch(L){console.error("Error fetching available doubts:",L),u(L.message||"Failed to load available doubts.")}}),F=()=>g(I,null,function*(){try{const L=yield Xe.getAssignedDoubts();c(L||[])}catch(L){console.error("Error fetching assigned doubts:",L),u(L.message||"Failed to load assigned doubts.")}}),z=L=>g(I,null,function*(){try{yield Xe.acceptDoubt(L),E(),F()}catch(J){console.error("Error accepting doubt:",J),u(J.message||"Failed to accept doubt.")}});o.useEffect(()=>{const L=s.get("tab");L==="available"?r("available"):L==="assigned"&&r("assigned")},[s]),o.useEffect(()=>{(()=>g(I,null,function*(){b(!0),u(null);try{if(!ae.isAuthenticated()){n("/");return}if(localStorage.getItem("cacheVerified")!=="true"){n("/verify-cache");return}yield Promise.all([v(),E(),F()])}catch(D){console.error("Error loading data:",D),u("Failed to load data.")}finally{b(!1)}}))();try{const D=dt(window.location.origin,{withCredentials:!0});T.current=D,D.on("connect",()=>{console.log("‚úÖ Solver socket connected",D.id)}),D.on("connect_error",O=>{console.error("‚ùå Solver socket connect_error",O)}),g(I,null,function*(){var O;try{const ee=yield ae.getProfile(),le=(ee==null?void 0:ee.id)||(ee==null?void 0:ee._id);let ue=[];try{const se=yield(yield fetch("/api/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json(),G=(O=se==null?void 0:se.data)==null?void 0:O.strongSubject;ue=G?[String(G).toLowerCase()]:[]}catch(q){}D.emit("registerSolver",{userId:le,subjects:ue})}catch(ee){D.emit("registerSolver",{userId:null,subjects:[]})}}),D.on("doubt:available",O=>{console.log("üì• doubt:available",O),N({doubtId:O.doubtId,subject:O.subject,description:O.description,status:O.status,createdAt:O.createdAt,is_scheduled:O.is_scheduled||!1,scheduled_date:O.scheduled_date,scheduled_time:O.scheduled_time}),R(!0),d(ee=>ee.some(ue=>String(ue._id||ue.id)===String(O.doubtId))?ee:[{_id:O.doubtId,subject:O.subject,description:O.description,status:O.status,createdAt:O.createdAt,is_scheduled:O.is_scheduled||!1,scheduled_date:O.scheduled_date,scheduled_time:O.scheduled_time},...ee])}),D.on("doubt:assigned",({doubtId:O})=>{d(ee=>ee.filter(le=>String(le._id||le.id)!==String(O))),j&&String(j.doubtId)===String(O)&&(R(!1),N(null))}),D.on("doubt:rated",({doubtId:O,rating:ee})=>{k({message:`Asker rated the session${ee?` (${ee}/5)`:""} and left. Doubt ${String(O).slice(-6)}.`}),c(le=>le.map(ue=>String(ue._id||ue.id)===String(O)?Z(M({},ue),{solverDoubt:Z(M({},ue.solverDoubt||{}),{resolution_status:"session_completed"})}):ue)),setTimeout(()=>k(null),5e3)})}catch(D){console.error("Socket setup error:",D)}A.current||(A.current=setInterval(()=>g(I,null,function*(){try{const D=yield Xe.getAvailableDoubts();P.current.size===0&&D.forEach(ee=>P.current.add(String(ee._id||ee.id)));const O=D.find(ee=>!P.current.has(String(ee._id||ee.id)));O&&(P.current.add(String(O._id||O.id)),d(ee=>ee.some(ue=>String(ue._id||ue.id)===String(O._id||O.id))?ee:[O,...ee]),N({doubtId:String(O._id||O.id),subject:O.subject,description:O.description,status:O.status,createdAt:O.createdAt,is_scheduled:O.is_scheduled||!1,scheduled_date:O.scheduled_date,scheduled_time:O.scheduled_time}),R(!0))}catch(D){}}),5e3));const J=()=>{console.log("üéØ Callback: Doubt created, refreshing doubts list..."),v()},re=D=>{console.log("üéØ Event: Doubt created event received:",D.detail),v()},ie=D=>{D.key==="doubtCreated"&&(console.log("üéØ Storage: Doubt created flag detected, refreshing doubts list..."),v())};window.onDoubtCreated=J,window.addEventListener("doubtCreated",re),window.addEventListener("storage",ie);const Ne=setInterval(()=>{localStorage.getItem("doubtCreated")&&(console.log("üéØ Periodic: Doubt created flag found, refreshing..."),v(),localStorage.removeItem("doubtCreated"))},1e3),ge=()=>{console.log("üéØ Page focused, checking for new doubts..."),v()};return window.addEventListener("focus",ge),()=>{window.onDoubtCreated=null,window.removeEventListener("doubtCreated",re),window.removeEventListener("storage",ie),window.removeEventListener("focus",ge),clearInterval(Ne),T.current&&(T.current.disconnect(),T.current=null),A.current&&(clearInterval(A.current),A.current=null)}},[]);const $=(L,J)=>{const re=new Date(J),ie=new Date;if(L==="resolved"||L==="closed")return"Completed";const Ne=ie.getTime()-re.getTime(),ge=Math.floor(Ne/1e3),D=Math.floor(ge/60),O=Math.floor(D/60),ee=Math.floor(O/24);return ee>1?`${ee} days ago`:ee===1?"Yesterday":O>=1?`${O} hour${O>1?"s":""} ago`:D>=1?`${D} min${D>1?"s":""} ago`:"Just now"},B=(L,J)=>{var Ne,ge;const re=J==="assigned"&&((Ne=L.solverDoubt)==null?void 0:Ne.resolution_status)==="session_scheduled",ie=J==="available";return e.jsxs("div",{className:`rounded-xl shadow-sm border p-6 hover:shadow-md transition-all duration-300 overflow-hidden ${ie?"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-800 hover:shadow-lg":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 break-words transition-colors duration-300",children:L.subject}),ie&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:"Available"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 break-words break-all overflow-hidden transition-colors duration-300",children:L.description})]}),e.jsxs("div",{className:"ml-4 flex flex-col items-end space-y-2",children:[e.jsx(fa,{status:L.status}),L.solverDoubt&&e.jsx(ya,{status:L.solverDoubt.resolution_status})]})]}),e.jsx("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-4 transition-colors duration-300",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),$(L.status,L.createdAt)]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Oe,{className:"w-4 h-4 mr-1"}),L.views||0]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Fe,{className:"w-4 h-4 mr-1"}),((ge=L.answers)==null?void 0:ge.length)||0]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[J==="available"&&e.jsx("button",{onClick:()=>z(L._id),className:"px-6 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors text-sm font-medium shadow-md hover:shadow-lg",children:"Accept & Solve"}),re&&e.jsxs("button",{onClick:()=>n(`/dashboard/session/${L._id}`),className:"px-4 py-2 bg-green-600 dark:bg-green-500 text-white rounded-lg hover:bg-green-700 dark:hover:bg-green-600 transition-colors text-sm font-medium flex items-center",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Join Session"]})]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 transition-colors duration-300",children:new Date(L.createdAt).toLocaleDateString()})]})]},L._id)},w=()=>g(I,null,function*(){if(j)try{if(p(!0),yield z(j.doubtId),yield new Promise(L=>setTimeout(L,1500)),j.is_scheduled&&j.scheduled_date){R(!1),N(null),p(!1),alert("Doubt accepted successfully! You will receive an email with the meeting link at the scheduled time.");return}R(!1),N(null),n(`/dashboard/session/${j.doubtId}`)}catch(L){p(!1)}});if(f)return e.jsxs("div",{className:"flex items-center justify-center min-h-64 bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 dark:border-blue-400"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading doubts..."})]});if(y)return e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center transition-colors duration-300",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400",children:y}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-3 text-blue-500 dark:text-blue-400 hover:underline text-sm transition-colors",children:"Try again"})]});const Y=()=>{const L=(_==null?void 0:_.id)||"default_user",J=[{icon:ft,label:"Home",path:"/dashboard"},{icon:je,label:"My Doubts",active:!0,path:"/dashboard/doubts"},{icon:qe,label:"Available Doubts",path:"/dashboard/doubts?tab=available"},{icon:je,label:"Solved Doubts",path:"/dashboard/solved-doubts"},{icon:Ve,label:"Educational Social",path:`/dashboard/social/${L}`},{icon:lt,label:"Corporate Connect",path:"/dashboard/corporate-connect"},{icon:ke,label:"Online Referral System",path:"/dashboard/referral-system"},{icon:Pe,label:"Previous Year Live",path:"/dashboard/pyq"},{icon:ye,label:"Notifications",path:"/dashboard/notifications"},{icon:nt,label:"Logout",onClick:()=>g(I,null,function*(){try{yield ae.logout(),n("/")}catch(re){n("/")}})}];return(_==null?void 0:_.role)==="admin"&&J.splice(-1,0,{icon:Se,label:"Admin Panel",path:"/admin/panel"}),J};return e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[e.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 shadow-sm border-r border-gray-200 dark:border-gray-700 transition-colors duration-300",children:[e.jsx("div",{className:"p-6",children:e.jsx(_e,{to:"/dashboard",className:"flex items-center",children:e.jsxs("h1",{className:"text-xl font-bold text-blue-900 dark:text-blue-300 italic transition-colors duration-300 hover:opacity-80",children:["EDU",e.jsxs("span",{className:"relative inline-block mx-0.5",children:[e.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg transform rotate-3"}),e.jsx("span",{className:"relative bg-gradient-to-r from-red-400 to-orange-400 rounded-lg px-1 py-0.5 text-white font-bold text-lg",children:"F"})]}),"OYER"]})})}),e.jsx("nav",{className:"mt-6 overflow-x-hidden",children:Y().map((L,J)=>e.jsxs("div",{onClick:()=>{L.onClick?L.onClick():L.path&&n(L.path)},className:`flex items-center px-4 py-3 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer relative transition-colors duration-300 min-w-0 ${L.active?"text-blue-500 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 border-r-2 border-blue-500 dark:border-blue-400":""} ${L.label==="Logout"?"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20":""}`,children:[e.jsx(L.icon,{className:"w-5 h-5 mr-2 flex-shrink-0"}),e.jsx("span",{className:"font-medium truncate min-w-0",children:L.label}),L.badge&&e.jsx("span",{className:"ml-auto bg-blue-500 dark:bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center flex-shrink-0",children:L.badge})]},J))})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6 transition-colors duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 max-w-2xl",children:[e.jsxs("button",{onClick:()=>n("/dashboard"),className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Back to Dashboard"})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search your doubts...",className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(Be,{})})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto h-full bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[H&&e.jsx("div",{className:"fixed top-4 right-4 z-50 bg-gray-900 text-white px-4 py-3 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full"}),e.jsx("span",{className:"text-sm",children:H.message})]})}),C&&j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 dark:bg-black/70",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md mx-4 animate-in fade-in-0 zoom-in-95 duration-300 transition-colors",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 dark:from-green-600 dark:to-green-700 rounded-t-xl p-4 text-white transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 dark:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(te,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold",children:"New Doubt Available!"}),e.jsx("p",{className:"text-green-100 dark:text-green-200 text-xs",children:"A new doubt is waiting for you"})]})]}),e.jsx("button",{onClick:()=>{h||(R(!1),N(null))},disabled:h,className:"text-white/80 dark:text-white/90 hover:text-white transition-colors disabled:opacity-50",children:e.jsx(de,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-2 transition-colors",children:e.jsx(je,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-1 transition-colors",children:"New Doubt Available"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors",children:['"',j.subject,'" needs your expertise']})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3 mb-4 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300 mb-2 transition-colors",children:[e.jsx(je,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"font-medium text-sm",children:"Doubt Details"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"w-3 h-3"}),e.jsxs("span",{className:"text-xs",children:["Subject: ",j.subject]})]}),j.is_scheduled&&j.scheduled_date&&e.jsxs("div",{className:"flex items-center space-x-2 mt-1.5 p-1.5 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[e.jsx(Pe,{className:"w-3 h-3 text-blue-600 dark:text-blue-400"}),e.jsxs("span",{className:"text-blue-700 dark:text-blue-300 font-semibold text-xs",children:["Scheduled: ",new Date(j.scheduled_date).toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," at ",j.scheduled_time||new Date(j.scheduled_date).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"mt-1.5 text-gray-700 dark:text-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-0.5",children:"Description:"}),e.jsx("p",{className:"line-clamp-2 text-xs",children:j.description})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:w,disabled:h,className:"w-full bg-green-500 dark:bg-green-600 hover:bg-green-600 dark:hover:bg-green-700 text-white font-semibold py-2.5 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 text-sm",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:j.is_scheduled?"Accepting...":"Joining Session..."})]}):e.jsx(e.Fragment,{children:j.is_scheduled?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Accept"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-4 h-4"}),e.jsx("span",{children:"Accept & Join"})]})})}),e.jsx("button",{onClick:()=>{h||(R(!1),N(null))},disabled:h,className:"w-full border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50 text-sm",children:"Dismiss"})]}),e.jsx("div",{className:"mt-3 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg transition-colors",children:e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 text-center transition-colors",children:"üí° You can also accept doubts from your dashboard anytime"})})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/30 dark:bg-black/50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex items-center gap-3 transition-colors duration-300",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 dark:border-blue-400"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Preparing your session‚Ä¶"})]})}),e.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg transition-colors duration-300",children:[e.jsxs("button",{onClick:()=>r("my-doubts"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${a==="my-doubts"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["My Doubts (",i.length,")"]}),e.jsxs("button",{onClick:()=>r("available"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${a==="available"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Available (",m.length,")"]}),e.jsxs("button",{onClick:()=>r("assigned"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${a==="assigned"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Assigned (",x.length,")"]})]}),e.jsxs("div",{className:"mt-6",children:[a==="my-doubts"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 transition-colors duration-300",children:"My Doubts"}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:v,className:"px-4 py-2 bg-gray-600 dark:bg-gray-700 text-white rounded-lg hover:bg-gray-700 dark:hover:bg-gray-600 transition-colors text-sm font-medium",children:"Refresh"})})]}),i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fe,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You haven't asked any doubts yet."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(L=>B(L,"my-doubts"))})]}),a==="available"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-6 transition-colors duration-300",children:"Available Doubts"}),m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(te,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No available doubts matching your skills."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(L=>B(L,"available"))})]}),a==="assigned"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-6 transition-colors duration-300",children:"Assigned Doubts"}),x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ne,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No assigned doubts."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(L=>B(L,"assigned"))})]})]})]})]})]})},jt="/api/notifications";class va{constructor(){this.token=localStorage.getItem("token")}getToken(){return this.token||localStorage.getItem("token")}makeAuthenticatedRequest(a){return g(this,arguments,function*(s,t={}){const r=this.getToken();if(!r)throw new Error("No authentication token found");const i={headers:M({"Content-Type":"application/json",Authorization:`Bearer ${r}`},t.headers)},l=yield fetch(s,M(M({},i),t));if(l.status===401)throw new Error("Authentication failed");return l})}getNotifications(s=1,t=20){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${jt}?page=${s}&limit=${t}`),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to fetch notifications");return r.data}catch(a){throw console.error("Get notifications error:",a),a}})}markAllAsRead(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(`${jt}/mark-read`,{method:"PATCH"}),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to mark notifications as read");return t}catch(s){throw console.error("Mark all as read error:",s),s}})}markAsRead(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${jt}/${s}/read`,{method:"PATCH"}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to mark notification as read");return a.data}catch(t){throw console.error("Mark as read error:",t),t}})}}const It=new va,wa=n=>{const t=Math.floor((new Date-new Date(n))/1e3);return t<60?"Just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<2592e3?`${Math.floor(t/86400)}d ago`:new Date(n).toLocaleDateString()},Na=()=>{const n=he(),[s,t]=o.useState([]),[a,r]=o.useState(!0),[i,l]=o.useState(null),[m,d]=o.useState(!1),x=u=>{if(!u)return u;const j=/(https?:\/\/[\w\-._~:/?#[\]@!$&'()*+,;=%]+)/g;return String(u).split(j).map((C,R)=>j.test(C)?e.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 underline break-all transition-colors",children:C},`url-${R}`):e.jsx("span",{children:C},`text-${R}`))},c=()=>g(I,null,function*(){try{const u=yield It.getNotifications();t(u||[])}catch(u){console.error("Error fetching notifications:",u),l(u.message||"Failed to load notifications.")}finally{r(!1)}}),f=()=>g(I,null,function*(){if(!m){d(!0);try{yield It.markAllAsRead(),t(u=>u.map(j=>Z(M({},j),{is_read:!0})))}catch(u){console.error("Error marking notifications as read:",u),l("Failed to mark notifications as read.")}finally{d(!1)}}}),b=u=>{switch(u){case"ASSIGNED_TO_SOLVER":return e.jsx(Ce,{className:"h-5 w-5 text-blue-400"});case"SOLUTION_SUBMITTED":return e.jsx(at,{className:"h-5 w-5 text-yellow-400"});case"SOLUTION_ACCEPTED":return e.jsx(te,{className:"h-5 w-5 text-green-400"});case"DOUBT_SUBMITTED":return e.jsx(ye,{className:"h-5 w-5 text-blue-400"});case"DOUBT_ASSIGNED":return e.jsx(Ce,{className:"h-5 w-5 text-green-400"});case"DOUBT_AVAILABLE":return e.jsx(ye,{className:"h-5 w-5 text-yellow-400"});default:return e.jsx(ye,{className:"h-5 w-5 text-gray-400"})}};if(o.useEffect(()=>{c()},[]),a)return e.jsxs("div",{className:"flex items-center justify-center min-h-64 bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 dark:border-blue-400"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading notifications..."})]});if(i)return e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center transition-colors duration-300",children:[e.jsx(Ht,{className:"w-8 h-8 text-red-500 dark:text-red-400 mx-auto mb-2"}),e.jsx("p",{className:"text-red-600 dark:text-red-400",children:i}),e.jsx("button",{onClick:c,className:"mt-3 text-blue-500 dark:text-blue-400 hover:underline text-sm transition-colors",children:"Try again"})]});const y=s.filter(u=>!u.is_read).length;return e.jsx("div",{className:"px-6 pt-2 md:pt-4 pb-10 bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-300",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden w-full max-w-7xl mx-auto mt-0 transition-colors duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700 transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>n("/dashboard"),className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Back"})]}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center transition-colors duration-300",children:[e.jsx(ye,{className:"h-5 w-5 mr-2"}),"Notifications",y>0&&e.jsxs("span",{className:"ml-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800 text-xs px-2 py-0.5 rounded-full transition-colors duration-300",children:[y," new"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[y>0&&e.jsx("button",{onClick:f,disabled:m,className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 disabled:opacity-50 transition-colors",children:m?"Marking...":"Mark all as read"}),e.jsx(Be,{})]})]}),s.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(ye,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No notifications yet."}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Updates about your doubts will appear here."})]}):e.jsx("div",{className:"max-h-[80vh] overflow-y-auto pb-6",children:s.map(u=>e.jsxs("div",{className:`flex items-start gap-4 p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-300 ${u.is_read?"":"bg-blue-50 dark:bg-blue-900/20"}`,children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:b(u.message_type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm transition-colors duration-300 ${u.is_read?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-gray-100 font-medium"}`,children:x(u.content)}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:wa(u.createdAt)}),!u.is_read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 dark:bg-blue-400 rounded-full"})]})]})]},u._id))})]})})},mt="/api/livekit";class ka{constructor(){this.token=localStorage.getItem("token")}getToken(){return this.token||localStorage.getItem("token")}makeAuthenticatedRequest(a){return g(this,arguments,function*(s,t={}){const r=this.getToken();if(!r)throw new Error("No authentication token found");const i={headers:M({"Content-Type":"application/json",Authorization:`Bearer ${r}`},t.headers)};try{const l=yield fetch(s,M(M({},i),t));if(l.status===401)throw new Error("Authentication failed");return l}catch(l){throw console.error("Network request failed:",l),l.name==="TypeError"&&l.message.includes("fetch")?new Error("Network error: Unable to connect to server"):l}})}generateToken(s){return g(this,null,function*(){try{const t=new AbortController,a=setTimeout(()=>t.abort(),1e4),r=yield this.makeAuthenticatedRequest(`${mt}/generate-token`,{method:"POST",body:JSON.stringify({doubtId:s}),signal:t.signal});if(clearTimeout(a),!r.ok){let l="Failed to generate token";try{l=(yield r.json()).message||l}catch(m){console.error("Error parsing error response:",m),l=`Server error (${r.status}): ${r.statusText}`}throw new Error(l)}const i=yield r.json();if(i===void 0)throw console.error("Data is undefined immediately after parsing"),new Error("Server returned undefined response");if(i===null)throw console.error("Data is null immediately after parsing"),new Error("Server returned null response");if(typeof i=="object"&&Object.keys(i).length===0)throw console.error("Data is empty object"),new Error("Server returned empty response");if(!i||typeof i!="object")throw new Error("Invalid response format from server");if(!i)throw console.error("Data is still undefined after validation"),new Error("No response data received from server");return i.success===void 0&&(console.warn("Response missing success property:",i),i.success=!0),i}catch(t){throw console.error("Generate token error:",t),t.name==="AbortError"?new Error("Token generation timeout. Please try again."):t.message.includes("Network error")?new Error("Unable to connect to server. Please check your connection and try again."):t}})}scheduleRoom(r){return g(this,arguments,function*({roomBase:s="pyq",scheduledAt:t,maxParticipants:a=2}){try{const i=yield this.makeAuthenticatedRequest(`${mt}/schedule-room`,{method:"POST",body:JSON.stringify({roomBase:s,scheduledAt:t,maxParticipants:a})}),l=yield i.json();if(!i.ok)throw new Error(l.message||"Failed to schedule room");return l}catch(i){throw console.error("Schedule room error:",i),i}})}tokenByRoom(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${mt}/token-by-room`,{method:"POST",body:JSON.stringify({roomName:s})}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to generate token");return a}catch(t){throw console.error("Token by room error:",t),t}})}generateTokenForEmailJoin(s){return g(this,null,function*(){try{console.log("Generating LiveKit token for email join, doubt:",s);const t=new AbortController,a=setTimeout(()=>t.abort(),1e4),r=yield fetch(`${mt}/generate-token-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doubtId:s}),signal:t.signal});if(clearTimeout(a),!r.ok){const l=r.statusText||`Server error (${r.status})`;throw new Error(l)}const i=yield r.json();if(i===void 0)throw console.error("Data is undefined immediately after parsing"),new Error("Server returned undefined response");if(i===null)throw console.error("Data is null immediately after parsing"),new Error("Server returned null response");if(typeof i=="object"&&Object.keys(i).length===0)throw console.error("Data is empty object"),new Error("Server returned empty response");if(!i||typeof i!="object")throw new Error("Invalid response format from server");if(!i)throw console.error("Data is still undefined after validation"),new Error("No response data received from server");return i.success===void 0&&(console.warn("Response missing success property:",i),i.success=!0),i}catch(t){throw console.error("Generate token for email join error:",t),t.name==="AbortError"?new Error("Token generation timeout. Please try again."):t.message.includes("Network error")?new Error("Network error: Unable to connect to server"):t}})}}const bt=new ka,ms=({isVisible:n,onClose:s,doubtId:t,solverName:a,doubtTitle:r,sessionUrl:i})=>{const l=he(),[m,d]=o.useState(!1),x=()=>g(I,null,function*(){d(!0);try{l(`/dashboard/session/${t}`)}catch(c){console.error("Error joining session:",c)}finally{d(!1)}});return n?e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full mx-4 animate-in fade-in-0 zoom-in-95 duration-300 transition-colors",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 dark:from-green-600 dark:to-green-700 rounded-t-xl p-4 text-white transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 dark:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(te,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold",children:"Solver Found!"}),e.jsx("p",{className:"text-green-100 dark:text-green-200 text-xs",children:"Your doubt has been accepted"})]})]}),e.jsx("button",{onClick:s,className:"text-white/80 dark:text-white/90 hover:text-white transition-colors",children:e.jsx(de,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-2 transition-colors",children:e.jsx(Ce,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-1 transition-colors",children:[a||"A Solver"," has accepted your doubt"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors",children:['"',r,'" is ready to be solved']})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3 mb-4 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300 mb-2 transition-colors",children:[e.jsx(Ye,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"font-medium text-sm",children:"Session Details"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:"Session is ready to start"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"w-3 h-3"}),e.jsxs("span",{className:"text-xs",children:["Solver: ",a||"Available"]})]})]})]}),e.jsx("button",{onClick:x,disabled:m,className:"w-full bg-green-500 dark:bg-green-600 hover:bg-green-600 dark:hover:bg-green-700 text-white font-semibold py-2.5 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 text-sm",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Joining Session..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-4 h-4"}),e.jsx("span",{children:"Join Session Now"})]})})]})]})}):null},Sa=()=>{const{doubtId:n}=it();he();const[s,t]=o.useState(null),[a,r]=o.useState(!0),[i,l]=o.useState(null),[m,d]=o.useState([]),[x,c]=o.useState(!1),[f,b]=o.useState(0),[y,u]=o.useState(!1),[j,N]=o.useState(null),C=o.useRef(null),R=P=>{const A=Math.floor(P/3600),H=Math.floor(P%3600/60),k=P%60;return A>0?`${A}h ${H}m ${k}s`:H>0?`${H}m ${k}s`:`${k}s`},h=()=>g(I,null,function*(){try{const P=yield tt.getDoubtById(n);console.log("üìã Doubt response:",P);let A;if(P&&P.data&&P.data.doubt)A=P.data.doubt;else if(P&&P.doubt)A=P.doubt;else if(P&&P._id)A=P;else throw new Error("Invalid response structure");console.log("üìã Processed doubt data:",A),t(A),A.status==="assigned"&&(N({name:"Solver",doubtTitle:A.subject}),u(!0))}catch(P){console.error("Error fetching doubt:",P);const A={_id:n,subject:"Your Submitted Doubt",category:"medium",description:"This is your submitted doubt. The awaiting solver flow is working correctly!",status:"open",createdAt:new Date(Date.now()-2*60*1e3),doubter_id:"test-user"};t(A),console.log("Using mock doubt due to API issues with ID:",n)}}),p=()=>g(I,null,function*(){try{const P=yield It.getNotifications();console.log("üìã Notifications response:",P);let A=[];Array.isArray(P)?A=P:P&&Array.isArray(P.data)?A=P.data:P&&Array.isArray(P.notifications)&&(A=P.notifications),d(A),A.find(k=>k.doubt_id===n&&k.message_type==="DOUBT_ASSIGNED")&&(N({name:"Solver",doubtTitle:(s==null?void 0:s.subject)||"Your doubt"}),u(!0))}catch(P){console.error("Error fetching notifications:",P);const A=[{_id:"mock-notif-1",doubt_id:n,message_type:"DOUBT_SUBMITTED",content:'Your doubt "Your Submitted Doubt" has been submitted successfully and is awaiting a solver.',is_read:!0,createdAt:new Date(Date.now()-2*60*1e3)}];d(A),console.log("Using mock notifications due to API issues with doubt ID:",n)}}),T=()=>g(I,null,function*(){c(!0);try{yield Promise.all([h(),p()])}finally{c(!1)}});return o.useEffect(()=>{const P=setInterval(()=>{T()},3e4);return()=>clearInterval(P)},[n]),o.useEffect(()=>{(()=>g(I,null,function*(){r(!0);try{yield Promise.all([h(),p()])}finally{r(!1)}}))()},[n]),o.useEffect(()=>{if(s!=null&&s.subject){try{const P=dt(window.location.origin,{withCredentials:!0});C.current=P;const A=[String(s.subject).toLowerCase()];P.emit("registerSolver",{userId:null,subjects:A}),P.on("doubt:assigned",({doubtId:H})=>{String(H)===String(n)&&(N({name:"Solver",doubtTitle:s.subject}),u(!0))})}catch(P){}return()=>{C.current&&(C.current.disconnect(),C.current=null)}}},[n,s==null?void 0:s.subject]),o.useEffect(()=>{if(s!=null&&s.createdAt){const P=new Date(s.createdAt).getTime(),A=setInterval(()=>{const H=new Date().getTime(),k=Math.floor((H-P)/1e3);b(k)},1e3);return()=>clearInterval(A)}},[s==null?void 0:s.createdAt]),a?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 dark:border-blue-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading doubt details..."})]})}):i?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border-2 border-gray-300 dark:border-gray-600 p-8 text-center max-w-md transition-colors duration-300",children:[e.jsx(xe,{className:"w-12 h-12 text-red-500 dark:text-red-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300",children:"Error Loading Doubt"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 transition-colors duration-300",children:i}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-500 dark:bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-600 dark:hover:bg-blue-700 transition-colors",children:"Try Again"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6 transition-colors duration-300",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 transition-colors duration-300",children:"Awaiting Solver"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 transition-colors duration-300",children:"Your doubt is waiting for a solver to accept it"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-200 transition-colors duration-300",children:"Please keep refreshing"}),e.jsxs("button",{onClick:T,disabled:x,className:"flex items-center space-x-1 bg-blue-500 dark:bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-600 dark:hover:bg-blue-700 disabled:opacity-50 transition-colors text-sm",children:[e.jsx(Ze,{className:`w-3 h-3 ${x?"animate-spin":""}`}),e.jsx("span",{children:"Refresh"})]})]})]})})}),e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border-2 border-gray-300 dark:border-gray-600 p-8 transition-colors duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-6 transition-colors duration-300",children:e.jsx(ne,{className:"w-10 h-10 text-blue-500 dark:text-blue-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300",children:"Waiting for Solver"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 transition-colors duration-300",children:"Your doubt has been submitted and is being matched with available solvers."}),s&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6 mb-6 text-left transition-colors duration-300",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300",children:"Doubt Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Subject:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-800 dark:text-gray-200",children:s.subject})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Category:"}),e.jsx("span",{className:"ml-2 font-medium capitalize text-gray-800 dark:text-gray-200",children:s.category})]}),s.is_scheduled&&s.scheduled_date&&e.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border-2 border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-purple-700 dark:text-purple-300 mb-1",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold text-sm",children:"Scheduled Date & Time:"})]}),e.jsxs("div",{className:"text-sm text-purple-800 dark:text-purple-200 ml-6",children:[new Date(s.scheduled_date).toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," at ",s.scheduled_time||new Date(s.scheduled_date).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Description:"}),e.jsx("p",{className:"mt-1 text-sm text-gray-700 dark:text-gray-300",children:s.description})]})]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6 transition-colors duration-300",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-700 dark:text-blue-300",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-semibold",children:["Time Elapsed: ",R(f)]})]})}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 transition-colors duration-300",children:e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-700 dark:text-yellow-300",children:[e.jsx(xe,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Please wait while we find a suitable solver for your doubt."})]})})]})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border-2 border-gray-300 dark:border-gray-600 p-6 transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ye,{className:"w-5 h-5 text-blue-500 dark:text-blue-400"}),e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 transition-colors duration-300",children:"Live Updates"})]}),m.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(ye,{className:"w-8 h-8 text-gray-400 dark:text-gray-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No updates yet"})]}):e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:m.filter(P=>P.doubt_id===n).map(P=>e.jsx("div",{className:`p-3 rounded-lg border transition-colors duration-300 ${P.message_type==="DOUBT_ASSIGNED"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[P.message_type==="DOUBT_ASSIGNED"?e.jsx(te,{className:"w-4 h-4 text-green-500 dark:text-green-400 mt-0.5"}):e.jsx(ye,{className:"w-4 h-4 text-blue-500 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 transition-colors duration-300",children:P.content}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 transition-colors duration-300",children:new Date(P.createdAt).toLocaleTimeString()})]})]})},P._id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border-2 border-gray-300 dark:border-gray-600 p-6 transition-colors duration-300",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-4 transition-colors duration-300",children:"What happens next?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5 transition-colors duration-300",children:e.jsx("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400",children:"1"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 transition-colors duration-300",children:"Solver Notification"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 transition-colors duration-300",children:"Available solvers are notified about your doubt"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5 transition-colors duration-300",children:e.jsx("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400",children:"2"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 transition-colors duration-300",children:"Solver Accepts"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 transition-colors duration-300",children:"A solver reviews and accepts your doubt"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5 transition-colors duration-300",children:e.jsx("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400",children:"3"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 transition-colors duration-300",children:"Session Ready"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 transition-colors duration-300",children:"You can join after clicking Accept/Join in the popup"})]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl border-2 border-blue-300 dark:border-blue-600 p-6 transition-colors duration-300",children:[e.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2 transition-colors duration-300",children:"Need Help?"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-3 transition-colors duration-300",children:"If no solver accepts your doubt within 30 minutes, it will be automatically reassigned."}),e.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors",children:"Contact Support"})]})]})]})}),e.jsx(ms,{isVisible:y,onClose:()=>u(!1),doubtId:n,solverName:j==null?void 0:j.name,doubtTitle:j==null?void 0:j.doubtTitle})]})},Pa=()=>{const[n,s]=o.useState("form"),[t,a]=o.useState(!1),[r,i]=o.useState(!1),l="demo-doubt-123",m={_id:l,subject:"JavaScript Closures",category:"medium",description:"I am having trouble understanding how closures work in JavaScript. Can someone explain with examples?",status:"open",createdAt:new Date(Date.now()-5*60*1e3),doubter_id:"user123"},d=[{_id:"notif1",doubt_id:l,message_type:"DOUBT_SUBMITTED",content:'Your doubt "JavaScript Closures" has been submitted successfully and is awaiting a solver.',is_read:!0,createdAt:new Date(Date.now()-5*60*1e3)},{_id:"notif2",doubt_id:l,message_type:"DOUBT_ASSIGNED",content:'Solver assigned for "JavaScript Closures". Join the session: /dashboard/session/demo-doubt-123',is_read:!1,createdAt:new Date}],x=()=>{i(!0),s("awaiting"),setTimeout(()=>{a(!0)},3e3)},c=()=>{s("form"),a(!1),i(!1)},f=()=>{a(!1),s("session")};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Awaiting Solver Flow Demo"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Interactive demonstration of the awaiting solver experience"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:x,disabled:r,className:"flex items-center space-x-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 disabled:opacity-50 transition-colors",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsx("span",{children:"Start Demo"})]}),e.jsxs("button",{onClick:c,className:"flex items-center space-x-2 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:[e.jsx(Ss,{className:"w-4 h-4"}),e.jsx("span",{children:"Reset"})]})]})]})})}),n==="form"&&e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ye,{className:"w-8 h-8 text-blue-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Step 1: Submit Doubt"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"User fills out the doubt form and submits it. After submission, they are redirected to the awaiting page."}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6 text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Mock Doubt Details:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Subject:"})," JavaScript Closures"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Category:"})," Medium"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Description:"})," I am having trouble understanding how closures work in JavaScript..."]})]})]}),e.jsx("button",{onClick:x,className:"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors",children:"Simulate Doubt Submission"})]})})}),n==="awaiting"&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-4 right-4 z-50",children:e.jsx("div",{className:"bg-yellow-100 border border-yellow-300 rounded-lg px-3 py-2 text-sm",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-yellow-800 font-medium",children:"Demo Mode"})]})})}),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Awaiting Solver"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Your doubt is waiting for a solver to accept it"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),e.jsx("span",{className:"text-sm",children:"Polling for updates..."})]})]})})}),e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ne,{className:"w-10 h-10 text-blue-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Waiting for Solver"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your doubt has been submitted and is being matched with available solvers."}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6 text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Doubt Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Subject:"}),e.jsx("span",{className:"ml-2 font-medium",children:m.subject})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Category:"}),e.jsx("span",{className:"ml-2 font-medium capitalize",children:m.category})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Description:"}),e.jsx("p",{className:"mt-1 text-sm text-gray-700",children:m.description})]})]})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-700",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Time Elapsed: 5m 23s"})]})}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-700",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Please wait while we find a suitable solver for your doubt."})]})})]})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ye,{className:"w-5 h-5 text-blue-500"}),e.jsx("h3",{className:"font-semibold text-gray-800",children:"Live Updates"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:d.map(b=>e.jsx("div",{className:`p-3 rounded-lg border ${b.message_type==="DOUBT_ASSIGNED"?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"}`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[b.message_type==="DOUBT_ASSIGNED"?e.jsx(te,{className:"w-4 h-4 text-green-500 mt-0.5"}):e.jsx(ye,{className:"w-4 h-4 text-blue-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:b.content}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(b.createdAt).toLocaleTimeString()})]})]})},b._id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"What happens next?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"1"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Solver Notification"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Available solvers are notified about your doubt"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-semibold text-green-600",children:"2"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Solver Accepts"}),e.jsx("p",{className:"text-xs text-gray-600",children:"A solver reviews and accepts your doubt"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"3"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Session Starts"}),e.jsx("p",{className:"text-xs text-gray-600",children:"You'll be redirected to the solving session"})]})]})]})]})]})]})})]})]}),n==="session"&&e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(te,{className:"w-8 h-8 text-green-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Step 3: Session Started"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The solver has accepted your doubt and you've been redirected to the session page."}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Session Details:"}),e.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Solver:"})," John Doe (JavaScript Expert)"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Session ID:"})," session-123"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"})," Active"]})]})]}),e.jsx("button",{onClick:c,className:"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors",children:"Start Over"})]})})}),e.jsx(ms,{isVisible:t,onClose:f,doubtId:l,solverName:"John Doe",doubtTitle:m.subject})]})},Ca=()=>{const[n,s]=o.useState("start"),[t,a]=o.useState(!1),r=()=>{s("awaiting"),setTimeout(()=>{a(!0)},5e3)},i=()=>{a(!1),s("session")},l=()=>{s("start"),a(!1)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Test Awaiting Solver Flow"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Interactive test of the awaiting solver experience"})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n==="start"&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Qt,{className:"w-10 h-10 text-blue-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Ready to Test?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This will simulate the complete awaiting solver flow:"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6 text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Test Flow:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"1"})}),e.jsx("span",{children:"Show awaiting solver page with mock doubt"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"2"})}),e.jsx("span",{children:"Display real-time polling and notifications"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"3"})}),e.jsx("span",{children:"Simulate solver acceptance notification"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"4"})}),e.jsx("span",{children:"Show session redirect option"})]})]})]}),e.jsx("button",{onClick:r,className:"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors",children:"Start Test Flow"})]})}),n==="awaiting"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2 text-blue-700",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Test Mode: Awaiting Solver (Solver will accept in 5 seconds)"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ne,{className:"w-10 h-10 text-blue-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Waiting for Solver"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your doubt has been submitted and is being matched with available solvers."}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6 text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Doubt Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Subject:"}),e.jsx("span",{className:"ml-2 font-medium",children:"JavaScript Closures"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Category:"}),e.jsx("span",{className:"ml-2 font-medium capitalize",children:"Medium"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Description:"}),e.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"I am having trouble understanding how closures work in JavaScript. Can someone explain with examples?"})]})]})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-700",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Time Elapsed: 2m 15s"})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(ye,{className:"w-5 h-5 text-blue-500"}),e.jsx("h3",{className:"font-semibold text-gray-800",children:"Live Updates"})]}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ye,{className:"w-4 h-4 text-blue-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:'Your doubt "JavaScript Closures" has been submitted successfully and is awaiting a solver.'}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"2 minutes ago"})]})]})})})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-6",children:e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-700",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Please wait while we find a suitable solver for your doubt."})]})})]})})]}),n==="session"&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(te,{className:"w-10 h-10 text-green-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Session Started!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The solver has accepted your doubt and you've been redirected to the session page."}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Session Details:"}),e.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Solver:"})," John Doe (JavaScript Expert)"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Session ID:"})," session-123"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"})," Active"]})]})]}),e.jsx("button",{onClick:l,className:"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors",children:"Test Again"})]})}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 animate-in fade-in-0 zoom-in-95 duration-300",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-t-xl p-6 text-white",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(te,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"Solver Found!"}),e.jsx("p",{className:"text-green-100 text-sm",children:"Your doubt has been accepted"})]})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ce,{className:"w-8 h-8 text-green-600"})}),e.jsx("h4",{className:"text-xl font-semibold text-gray-800 mb-2",children:"John Doe has accepted your doubt"}),e.jsx("p",{className:"text-gray-600",children:'"JavaScript Closures" is ready to be solved'})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 mb-2",children:[e.jsx(Ce,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Session Details"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"w-3 h-3"}),e.jsx("span",{children:"Session is ready to start"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"w-3 h-3"}),e.jsx("span",{children:"Solver: John Doe"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:i,className:"w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Ce,{className:"w-4 h-4"}),e.jsx("span",{children:"Join Session Now"})]}),e.jsx("button",{onClick:()=>a(!1),className:"w-full border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium py-2 px-4 rounded-lg transition-colors",children:"Join Later"})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-700 text-center",children:"üí° You can also join the session from your dashboard anytime"})})]})]})})]})]})},Da=["fuck","fucking","fucked","fucker","shit","shitting","shitty","damn","damned","dammit","bitch","bitches","bitching","ass","asses","asshole","assholes","bastard","bastards","piss","pissing","pissed","crap","crappy","hell","hells","idiot","idiots","idiotic","stupid","stupidity","dumb","dumber","dumbest","moron","moronic","retard","retarded","hate","hated","hating","kill","killing","killed","die","died","dying","damn","damned"],Aa=["madarchod","madarchod","maderchod","behenchod","behenchoda","behenchod","chutiya","chutiyapa","chutiye","gaand","gand","gaandu","gandu","lund","loda","lode","bhosdi","bhosdike","bhosdika","harami","haramkhor","haramkhor","kutta","kutti","kutte","sala","saale","sali","randi","rand","randi","chakke","chakka","bhenchod","bhenchoda","machod","machod","teri maa","teri maa ki","maa chod","maa ka","behen ka","bhosda","gandu","loda","chutiya"],Ea=[/[a@]ss/i,/f[u@]ck/i,/sh[i1]t/i,/b[i1]tch/i,/d[i1]ck/i,/p[i1]ss/i,/f+u+c+k+/i,/s+h+i+t+/i,/b+i+t+c+h+/i,/f\s*u\s*c\s*k/i,/s\s*h\s*i\s*t/i];function Ra(n){if(!n||typeof n!="string")return"";let s=n.toLowerCase();return s=s.replace(/[^\w\s]/g,""),s=s.replace(/\s+/g," "),s.trim()}function vt(n){if(!n||typeof n!="string")return!1;const s=Ra(n),t=n.toLowerCase();for(const r of Da){const i=new RegExp(`\\b${r}\\b`,"i");if(i.test(s)||i.test(t))return!0}for(const r of Aa){const i=new RegExp(`\\b${r}\\b`,"i");if(i.test(s)||i.test(t))return!0}for(const r of Ea)if(r.test(n))return!0;if(/(.)\1{4,}/.test(s)){const r=["hello","good","thank","please","sorry","okay","yes","no"],i=s.split(/\s+/);for(const l of i)if(l.length>10&&!r.some(m=>l.includes(m)))return!0}return!1}function wt(){const n=["Please use respectful language in the chat.","Abusive language is not allowed. Please rephrase your message.","Your message contains inappropriate content. Please use respectful language.","Please maintain a professional and respectful tone in the chat."];return n[Math.floor(Math.random()*n.length)]}function Ta(){const n={isRecording:!1,methods:[],warnings:[]},s={open:!1,orientation:null};return setInterval(()=>{const t=window.outerWidth-window.innerWidth>160,a=window.outerHeight-window.innerHeight>160;t||a?s.open||(s.open=!0,n.isRecording=!0,n.methods.push("DevTools"),n.warnings.push("Developer Tools detected")):s.open=!1},500),window.self!==window.top&&(n.isRecording=!0,n.methods.push("iframe"),n.warnings.push("Page loaded in iframe")),document.addEventListener("contextmenu",t=>{t.isTrusted===!1&&(n.isRecording=!0,n.methods.push("contextMenu"))},!0),n}function Jt(n=[]){const s=["Screen recording is not allowed in this session. Please stop recording.","Recording detected. This session is private and cannot be recorded.","Unauthorized recording detected. Please disable screen recording.","Screen capture is not permitted. Please stop any recording software."];return n.length>0?`Recording detected via ${n.join(", ")}. Please stop recording.`:s[Math.floor(Math.random()*s.length)]}function Ia(){const n=document.createElement("style");n.textContent=`
    /* Prevent right-click context menu */
    video, [data-lk-video] {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      pointer-events: auto;
    }
    
    /* Disable text selection */
    [data-lk-theme] {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    
    /* Prevent drag */
    video, [data-lk-video] {
      -webkit-user-drag: none;
      -khtml-user-drag: none;
      -moz-user-drag: none;
      -o-user-drag: none;
      user-drag: none;
    }
  `,document.head.appendChild(n),document.addEventListener("contextmenu",s=>{if(s.target.tagName==="VIDEO"||s.target.closest("video"))return s.preventDefault(),!1},!0),document.addEventListener("keydown",s=>{if(s.key==="PrintScreen"||s.ctrlKey&&s.shiftKey&&s.key==="I"||s.key==="F12"||s.ctrlKey&&s.shiftKey&&s.key==="C")return s.preventDefault(),!1},!0)}const Fa=()=>{const{doubtId:n}=it(),s=he(),[t,a]=o.useState(null),[r,i]=o.useState(null),[l,m]=o.useState(null),[d,x]=o.useState(!0),[c,f]=o.useState(!1),[b,y]=o.useState(!1),[u,j]=o.useState(5),[N,C]=o.useState(""),[R,h]=o.useState(5),[p,T]=o.useState(""),[P,A]=o.useState(!1),[H,k]=o.useState(!1),[_,W]=o.useState(!1),[S,U]=o.useState(!1),[v,E]=o.useState(!1),[F,z]=o.useState(null),[$,B]=o.useState(null),[w,Y]=o.useState(null),[L,J]=o.useState(!1),[re,ie]=o.useState(null),[Ne,ge]=o.useState(!0),D=o.useRef(null),O=o.useRef(null),ee="wss://remote-opgy8hh4.livekit.cloud";o.useEffect(()=>{if(new URLSearchParams(window.location.search).get("email")==="true")return;localStorage.getItem("token")||(window.location.href=`/?next=${encodeURIComponent(`/dashboard/session/${n||""}`)}`)},[n]),o.useEffect(()=>{n&&(()=>g(I,null,function*(){try{x(!0),m(null);const G=new URLSearchParams(window.location.search).get("email")==="true"?yield bt.generateTokenForEmailJoin(n):yield bt.generateToken(n);if(!(G!=null&&G.success)||!(G!=null&&G.token))throw new Error((G==null?void 0:G.message)||"Failed to generate LiveKit token");a(G.token),i(G.roomName||`doubt-session-${n}`)}catch(se){m(se.message)}finally{x(!1)}}))()},[n]),o.useEffect(()=>{n&&(()=>g(I,null,function*(){var se;try{const[G,X]=yield Promise.all([ae.getProfile(),tt.getDoubtById(n)]),V=(G==null?void 0:G.id)||(G==null?void 0:G._id),K=(X==null?void 0:X.doubter_id)||((se=X==null?void 0:X.doubter)==null?void 0:se._id);if(W(String(V)===String(K)),X!=null&&X.is_scheduled&&(X!=null&&X.scheduled_date)){J(!0);const Q=new Date(X.scheduled_date);ie(Q),ge(new Date>=Q)}const oe=(X==null?void 0:X.category)||"medium";z((oe==="small"?20:oe==="medium"?30:60)*60)}catch(G){W(!1)}}))()},[n]),o.useEffect(()=>{if(F==null||F<=0)return;const q=setInterval(()=>z(se=>se!=null?se-1:se),1e3);return()=>clearInterval(q)},[F]),o.useEffect(()=>{F===0&&_&&!S&&f(!0)},[F,_,S]),o.useEffect(()=>{const q=()=>{const G=()=>{const K=['input[type="text"][placeholder*="message" i]','textarea[placeholder*="message" i]',"[data-lk-chat-input]",'input[aria-label*="message" i]',".lk-chat-form input",".lk-chat-form textarea",'form input[type="text"]',"form textarea"];for(const oe of K){const we=document.querySelectorAll(oe);for(const Q of we)if(Q.closest('[data-lk-chat], .lk-chat, [class*="chat"]'))return Q}return null},X=()=>{const K=G();if(!K||K.hasAttribute("data-profanity-bound"))return;K.setAttribute("data-profanity-bound","true"),D.current=K;const oe=K.closest("form");oe&&(oe.onsubmit,oe.addEventListener("submit",Q=>{const De=K.value||K.textContent||"";if(vt(De)){Q.preventDefault(),Q.stopPropagation();const $e=wt();return B($e),K.value="",K.textContent&&(K.textContent=""),setTimeout(()=>B(null),5e3),!1}},!0)),K.addEventListener("keydown",Q=>{if(Q.key==="Enter"&&!Q.shiftKey){const De=K.value||K.textContent||"";if(vt(De)){Q.preventDefault(),Q.stopPropagation();const $e=wt();return B($e),K.value="",K.textContent&&(K.textContent=""),setTimeout(()=>B(null),5e3),!1}}},!0);const we=oe==null?void 0:oe.querySelector('button[type="submit"], button[aria-label*="send" i], [data-lk-send]');we&&we.addEventListener("click",Q=>{const De=K.value||K.textContent||"";if(vt(De)){Q.preventDefault(),Q.stopPropagation();const $e=wt();return B($e),K.value="",K.textContent&&(K.textContent=""),setTimeout(()=>B(null),5e3),!1}},!0)};X();const V=new MutationObserver(()=>{X()});return V.observe(document.body,{childList:!0,subtree:!0}),()=>{V.disconnect()}},se=setTimeout(()=>{q()},1e3);return()=>{clearTimeout(se)}},[t]),o.useEffect(()=>{if(!t)return;Ia();const q=Ta();O.current=q;const se=setInterval(()=>{if(q.isRecording&&q.methods.length>0){const V=["Screen Sharing","Tab Switch","getDisplayMedia"],K=q.methods.filter(oe=>!V.includes(oe));if(K.length>0){const oe=Jt(K);Y(oe)}}},3e3);let G={open:!1,orientation:null};const X=setInterval(()=>{const V=window.outerWidth-window.innerWidth>160,K=window.outerHeight-window.innerHeight>160;if(V||K){if(!G.open){G.open=!0;const oe=Jt(["Developer Tools"]);Y(oe),setTimeout(()=>Y(null),5e3)}}else G.open=!1},500);return()=>{clearInterval(se),clearInterval(X)}},[t]),o.useEffect(()=>{const q=X=>{try{if(_&&!S)return X.stopPropagation(),X.preventDefault(),f(!0),!1;if(!_&&!v)return X.stopPropagation(),X.preventDefault(),y(!0),!1;setTimeout(()=>s("/dashboard"),0)}catch(V){}},se=()=>{const X=document.querySelector('[data-lk-leave], button[title="Leave"], [aria-label="Leave"]');return X?(X.removeEventListener("click",q,!0),X.addEventListener("click",q,!0),!0):!1};se();const G=new MutationObserver(()=>se());return G.observe(document.body,{childList:!0,subtree:!0}),()=>{G.disconnect();const X=document.querySelector('[data-lk-leave], button[title="Leave"], [aria-label="Leave"]');X&&X.removeEventListener("click",q,!0)}},[_,S,v,s]),o.useEffect(()=>{const q=()=>{_&&!S&&f(!0)},se=()=>{!_&&!v&&y(!0)};return window.addEventListener("EF_RATE_PROMPT",q),window.addEventListener("EF_SOLVER_RATE_PROMPT",se),()=>{window.removeEventListener("EF_RATE_PROMPT",q),window.removeEventListener("EF_SOLVER_RATE_PROMPT",se)}},[_,S,v]);const le=()=>g(I,null,function*(){try{A(!0),yield tt.submitFeedback(n,{rating:u,comment:N}),U(!0),alert("Doubt completed successfully!"),s("/dashboard")}catch(q){console.error("Error submitting feedback:",q),alert("Failed to submit feedback. Please try again.")}finally{A(!1)}}),ue=()=>g(I,null,function*(){try{k(!0),yield tt.submitSolverRating(n,{rating:R,comment:p}),E(!0),alert("Rating submitted successfully!"),s("/dashboard")}catch(q){console.error("Error submitting solver rating:",q),alert("Failed to submit rating. Please try again.")}finally{k(!1)}});if(d)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:e.jsx("div",{children:"Initializing session‚Ä¶"})});if(l||!ee)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white text-center p-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Session Error"}),e.jsx("p",{className:"text-gray-300 mb-4",children:l||"LiveKit URL not configured"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 rounded hover:bg-blue-700",onClick:()=>s("/dashboard/doubts"),children:"Back to Dashboard"})]})});if(!t)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:e.jsx("div",{children:"Waiting for token‚Ä¶"})});if(L&&!Ne&&re){const q=re.toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),se=re.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"});return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white p-6",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"w-20 h-20 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ne,{className:"w-10 h-10"})}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Session Scheduled"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"This session is scheduled for:"}),e.jsxs("div",{className:"bg-purple-800 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-lg font-semibold",children:q}),e.jsx("p",{className:"text-xl font-bold mt-2",children:se})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"The meeting link will be active at the scheduled time. You'll receive an email notification when it's time to join."})]})})}return e.jsxs("div",{"data-lk-theme":"default",className:"h-screen bg-black relative",onContextMenu:q=>{if(q.target.tagName!=="INPUT"&&q.target.tagName!=="TEXTAREA")return q.preventDefault(),!1},style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},children:[e.jsx(Xt,{token:t,serverUrl:ee,connectOptions:{autoSubscribe:!0},audio:!0,video:!0,onError:q=>m((q==null?void 0:q.message)||"LiveKit error"),onDisconnected:()=>{_&&!S?f(!0):s("/dashboard")},className:"h-full",children:e.jsx(Zt,{})}),$&&e.jsxs("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-[60] bg-red-600 text-white px-6 py-3 rounded-lg shadow-xl flex items-center gap-3 animate-fade-in",children:[e.jsx(xe,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"font-medium",children:$})]}),w&&e.jsxs("div",{className:"fixed top-32 left-1/2 transform -translate-x-1/2 z-[60] bg-orange-600 text-white px-6 py-3 rounded-lg shadow-xl flex items-center gap-3 animate-fade-in",children:[e.jsx(xt,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"font-medium",children:w})]}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none z-40 overflow-hidden",children:[e.jsxs("div",{className:`absolute left-4 text-white/30 text-xs font-mono select-none ${F!=null&&F>0?"top-16":"top-4"}`,style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},children:["EduFoyer Session - ",new Date().toISOString().split("T")[0]]}),e.jsx("div",{className:"absolute bottom-4 right-4 text-white/30 text-xs font-mono select-none",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},children:"Private Session - Do Not Record"}),e.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",style:{background:"repeating-linear-gradient(45deg, transparent, transparent 100px, rgba(255,255,255,0.1) 100px, rgba(255,255,255,0.1) 200px)",userSelect:"none",WebkitUserSelect:"none"}})]}),F!=null&&F>0&&e.jsxs("div",{className:"absolute top-4 left-4 z-50 bg-black/70 text-white px-3 py-1.5 rounded-lg flex items-center gap-2 shadow-lg",children:[e.jsx(ne,{className:"w-4 h-4 flex-shrink-0"}),e.jsxs("span",{className:"font-mono font-semibold",children:[Math.floor(F/60),":",String(F%60).padStart(2,"0")]})]}),!_&&!v&&e.jsx("div",{className:"absolute top-4 right-4 z-50",children:e.jsxs("button",{onClick:()=>y(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 shadow-lg",children:[e.jsx(te,{className:"w-4 h-4"}),"Rate Asker & Leave"]})}),e.jsx("script",{dangerouslySetInnerHTML:{__html:`
        (function(){
          const tryBind = () => {
            const btn = document.querySelector('[data-lk-leave], button[title="Leave"], [aria-label="Leave"]');
            if (!btn || btn.getAttribute('data-nav-bound')) return;
            btn.setAttribute('data-nav-bound','1');
            btn.addEventListener('click', function(e){
              try {
                const isDoubter = ${JSON.stringify(!0)} && ${_?"true":"false"};
                const hasRated = ${S?"true":"false"};
                const hasSolverRated = ${v?"true":"false"};
                if (isDoubter && !hasRated) {
                  e.stopPropagation();
                  e.preventDefault();
                  const evt = new CustomEvent('EF_RATE_PROMPT');
                  window.dispatchEvent(evt);
                  return false;
                } else if (!isDoubter && !hasSolverRated) {
                  e.stopPropagation();
                  e.preventDefault();
                  const evt = new CustomEvent('EF_SOLVER_RATE_PROMPT');
                  window.dispatchEvent(evt);
                  return false;
                } else {
                  setTimeout(function(){ window.history.pushState({}, '', '/dashboard'); window.location.assign('/dashboard'); }, 0);
                }
              } catch(_) {}
            }, true);
          };
          const obs = new MutationObserver(tryBind);
          obs.observe(document.body, { childList: true, subtree: true });
          tryBind();
        })();
      `}}),_&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Complete Doubt Session"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rate the session (1-5)"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(q=>e.jsx("button",{onClick:()=>j(q),className:`p-1 ${u>=q?"text-yellow-400":"text-gray-300"}`,children:e.jsx(Re,{className:"w-6 h-6 fill-current"})},q))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments (optional)"}),e.jsx("textarea",{value:N,onChange:q=>C(q.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Any feedback about the session..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 text-gray-700",disabled:P,children:"Cancel"}),e.jsx("button",{onClick:le,disabled:P,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:P?"Submitting...":"Submit Rating"})]})]})}),!_&&b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Rate the Asker"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rate the asker (1-5)"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(q=>e.jsx("button",{onClick:()=>h(q),className:`p-1 ${R>=q?"text-yellow-400":"text-gray-300"}`,children:e.jsx(Re,{className:"w-6 h-6 fill-current"})},q))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments (optional)"}),e.jsx("textarea",{value:p,onChange:q=>T(q.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Any feedback about the asker..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 text-gray-700",disabled:H,children:"Cancel"}),e.jsx("button",{onClick:ue,disabled:H,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:H?"Submitting...":"Submit Rating"})]})]})})]})},La=()=>{const n=he(),[s,t]=o.useState(""),[a,r]=o.useState(""),[i,l]=o.useState(2),[m,d]=o.useState(!1),[x,c]=o.useState(null),[f,b]=o.useState(null),y=j=>g(I,null,function*(){if(j.preventDefault(),c(null),!s){c("Please enter/select a previous year paper");return}if(!a){c("Please select a date and time");return}try{d(!0);const N=yield bt.scheduleRoom({roomBase:`pyq-${s.replace(/\s+/g,"-").toLowerCase()}`,scheduledAt:a,maxParticipants:i});if(!(N!=null&&N.success))throw new Error((N==null?void 0:N.message)||"Failed to schedule");b(N.data)}catch(N){c(N.message||"Failed to schedule")}finally{d(!1)}}),u=()=>{f!=null&&f.roomName&&n(`/dashboard/pyq/${encodeURIComponent(f.roomName)}`)};return e.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:()=>n("/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Back to Dashboard"})]})}),e.jsxs("h1",{className:"text-2xl font-semibold mb-6 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-6 h-6 text-green-600"}),"Live Previous Year Solution"]}),e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-100 to-emerald-100 border-4 border-green-500 px-8 py-4 rounded-2xl shadow-2xl",children:[e.jsx(ne,{className:"w-8 h-8 text-green-600 animate-pulse"}),e.jsx("span",{className:"text-3xl font-bold text-green-800",children:"Coming Soon"})]})}),e.jsxs("form",{onSubmit:y,className:"space-y-5 bg-white rounded-lg p-5 shadow",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Previous Year Paper"}),e.jsx("input",{type:"text",placeholder:"e.g., JEE Main 2022 Shift 1",value:s,onChange:j=>t(j.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"})," Select Date & Time"]}),e.jsx("input",{type:"datetime-local",value:a,onChange:j=>r(j.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4"})," Number of Participants"]}),e.jsxs("select",{value:i,onChange:j=>l(Number(j.target.value)),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:2,children:"2"}),e.jsx("option",{value:3,children:"3"}),e.jsx("option",{value:4,children:"4"}),e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"})]})]}),x&&e.jsx("div",{className:"text-red-600 text-sm",children:x}),e.jsxs("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-70 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),m?"Scheduling...":"Schedule Session"]})]}),f&&e.jsxs("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-800 font-medium mb-2",children:[e.jsx(te,{className:"w-5 h-5"})," Scheduled Successfully"]}),e.jsxs("div",{className:"text-sm text-green-900",children:["Room: ",e.jsx("span",{className:"font-mono",children:f.roomName})]}),e.jsxs("div",{className:"text-sm text-green-900",children:["Time: ",new Date(f.scheduledAt).toLocaleString()]}),e.jsxs("div",{className:"text-sm text-green-900 mb-3",children:["Max Participants: ",f.maxParticipants]}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Join Now"})]})]})},_a="wss://remote-opgy8hh4.livekit.cloud",$a=()=>{const{roomName:n}=it(),[s,t]=o.useState(null),[a,r]=o.useState(null),[i,l]=o.useState(!0);return o.useEffect(()=>{n&&(()=>g(I,null,function*(){try{l(!0);const d=yield bt.tokenByRoom(decodeURIComponent(n));if(!(d!=null&&d.success)||!(d!=null&&d.token))throw new Error((d==null?void 0:d.message)||"Token error");t(d.token)}catch(d){r(d.message||"Failed to join room")}finally{l(!1)}}))()},[n]),i?e.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-600",children:"Joining..."}):a?e.jsx("div",{className:"min-h-screen flex items-center justify-center text-red-600",children:a}):s?e.jsx("div",{"data-lk-theme":"default",className:"h-screen bg-black",children:e.jsx(Xt,{token:s,serverUrl:_a,connectOptions:{autoSubscribe:!0},audio:!0,video:!0,className:"h-full",children:e.jsx(Zt,{})})}):null},Oa=()=>{const{doubtId:n}=it(),s=he(),[t,a]=o.useState("pending"),[r,i]=o.useState("Accepting the doubt...");return o.useEffect(()=>{if(!localStorage.getItem("token")){console.log("No authentication token found, redirecting to login"),a("error"),i("Please log in to accept this doubt."),setTimeout(()=>{window.location.href="/"},2e3);return}n&&(()=>g(I,null,function*(){try{a("pending"),i("Accepting the doubt...");const d=yield Xe.acceptDoubt(n);a("success"),i((d==null?void 0:d.message)||"Doubt accepted. Redirecting to session..."),setTimeout(()=>{s(`/dashboard/session/${n}`)},1200)}catch(d){console.error("SolveDoubt error:",d),a("error");let x="Failed to accept the doubt.";d.message.includes("timeout")?x="Request timed out. Please try again.":d.message.includes("Network error")||d.message.includes("Unable to connect")?x="Network error. Please check your connection and try again.":d.message.includes("Too many requests")?x="Too many requests. Please wait a moment and try again.":d.message.includes("Authentication failed")||d.message.includes("No authentication token")||d.message.includes("Invalid token format")||d.message.includes("session has expired")?(x="Authentication failed. Please log in again.",setTimeout(()=>{localStorage.removeItem("token"),window.location.href="/"},2e3)):d.message.includes("Invalid response format")||d.message.includes("undefined response")||d.message.includes("null response")?x="Server returned invalid response. Please try again.":x=(d==null?void 0:d.message)||"Failed to accept the doubt.",i(x)}}))()},[n,s]),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 w-full max-w-md text-center",children:[t==="pending"&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(ne,{className:"w-8 h-8 text-blue-600 animate-spin"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:r}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait..."})]}),t==="success"&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(te,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:r}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Redirecting to session..."})]}),t==="error"&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(xe,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:r}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"Try Again"})]})]})})},Ua=()=>{const[n,s]=o.useState([]),[t,a]=o.useState(!0),[r,i]=o.useState(null),[l,m]=o.useState(1),[d,x]=o.useState(null);o.useEffect(()=>{c()},[l]);const c=()=>g(I,null,function*(){try{a(!0),i(null);const y=yield Xe.getSolvedDoubts(l,10);s(y.solvedDoubts),x(y.pagination)}catch(y){i(y.message)}finally{a(!1)}}),f=y=>new Date(y).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=y=>Array.from({length:5},(u,j)=>e.jsx(Re,{className:`w-4 h-4 transition-colors duration-300 ${j<y?"text-yellow-400 dark:text-yellow-500 fill-current":"text-gray-300 dark:text-gray-600"}`},j));return t?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 dark:border-blue-400"})}):r?e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 transition-colors duration-300",children:[e.jsxs("p",{className:"text-red-600 dark:text-red-400",children:["Error: ",r]}),e.jsx("button",{onClick:c,className:"mt-2 px-4 py-2 bg-red-600 dark:bg-red-500 text-white rounded-md hover:bg-red-700 dark:hover:bg-red-600 transition-colors",children:"Try Again"})]}):n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(te,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 dark:text-gray-400 mb-2",children:"No Solved Doubts Yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Start solving doubts to see them here!"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 transition-colors duration-300",children:"Solved Doubts"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 transition-colors duration-300",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsxs("span",{children:[(d==null?void 0:d.totalCount)||0," doubts solved"]})]})]}),e.jsx("div",{className:"space-y-4",children:n.map(y=>{const u=y.doubt_id,j=u==null?void 0:u.doubter_id;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 shadow-sm hover:shadow-md transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300",children:u==null?void 0:u.subject}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3 line-clamp-2 transition-colors duration-300",children:u==null?void 0:u.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400 transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"w-4 h-4"}),e.jsx("span",{children:(j==null?void 0:j.name)||"Unknown Student"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsxs("span",{children:["Solved on ",f(y.resolved_at)]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("div",{className:"flex items-center gap-1",children:b(y.feedback_rating||0)}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors duration-300",children:[y.feedback_rating||0,"/5"]})]})]}),y.feedback_comment&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3 transition-colors duration-300",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(at,{className:"w-4 h-4 text-gray-500 dark:text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 transition-colors duration-300",children:"Feedback:"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors duration-300",children:y.feedback_comment})]})]})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700 transition-colors duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 transition-colors duration-300",children:[e.jsx(te,{className:"w-3 h-3 mr-1"}),"Completed"]})}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 transition-colors duration-300",children:["Session completed on ",f(y.resolved_at)]})]})})]},y._id)})}),d&&d.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6",children:[e.jsx("button",{onClick:()=>m(l-1),disabled:!d.hasPrevPage,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-300",children:"Previous"}),e.jsxs("span",{className:"px-3 py-2 text-sm text-gray-700 dark:text-gray-300 transition-colors duration-300",children:["Page ",d.currentPage," of ",d.totalPages]}),e.jsx("button",{onClick:()=>m(l+1),disabled:!d.hasNextPage,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-300",children:"Next"})]})]})},Ma=()=>{const[n,s]=o.useState(null),[t,a]=o.useState(!0),r=he();o.useEffect(()=>{(()=>g(I,null,function*(){try{if(!ae.isAuthenticated()){r("/");return}if(localStorage.getItem("cacheVerified")!=="true"){r("/verify-cache");return}const d=yield ae.getProfile();s(d)}catch(d){console.error("Error fetching user data:",d),ae.logout(),r("/")}finally{a(!1)}}))()},[r]);const i=()=>g(I,null,function*(){try{yield ae.logout(),r("/")}catch(m){console.error("Logout error:",m),r("/")}});if(t)return e.jsx("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 items-center justify-center transition-colors duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 dark:border-blue-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})});const l=()=>{const m=(n==null?void 0:n.id)||"default_user",d=[{icon:ft,label:"Home",path:"/dashboard"},{icon:je,label:"My Doubts",path:"/dashboard/doubts"},{icon:qe,label:"Available Doubts",path:"/dashboard/doubts?tab=available"},{icon:je,label:"Solved Doubts",active:!0,path:"/dashboard/solved-doubts"},{icon:Ve,label:"Educational Social",path:`/dashboard/social/${m}`},{icon:lt,label:"Corporate Connect",path:"/dashboard/corporate-connect"},{icon:ke,label:"Online Referral System",path:"/dashboard/referral-system"},{icon:Pe,label:"Previous Year Live",path:"/dashboard/pyq"},{icon:ye,label:"Notifications",path:"/dashboard/notifications"},{icon:nt,label:"Logout",onClick:i}];return(n==null?void 0:n.role)==="admin"&&d.splice(-1,0,{icon:Se,label:"Admin Panel",path:"/admin/panel"}),d};return e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[e.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 shadow-sm border-r border-gray-200 dark:border-gray-700 transition-colors duration-300",children:[e.jsx("div",{className:"p-6",children:e.jsx(_e,{to:"/dashboard",className:"flex items-center",children:e.jsxs("h1",{className:"text-xl font-bold text-blue-900 dark:text-blue-300 italic transition-colors duration-300 hover:opacity-80",children:["EDU",e.jsxs("span",{className:"relative inline-block mx-0.5",children:[e.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg transform rotate-3"}),e.jsx("span",{className:"relative bg-gradient-to-r from-red-400 to-orange-400 rounded-lg px-1 py-0.5 text-white font-bold text-lg",children:"F"})]}),"OYER"]})})}),e.jsx("nav",{className:"mt-6 overflow-x-hidden",children:l().map((m,d)=>e.jsxs("div",{onClick:()=>{m.onClick?m.onClick():m.path&&r(m.path)},className:`flex items-center px-4 py-3 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer relative transition-colors duration-300 min-w-0 ${m.active?"text-blue-500 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 border-r-2 border-blue-500 dark:border-blue-400":""} ${m.label==="Logout"?"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20":""}`,children:[e.jsx(m.icon,{className:"w-5 h-5 mr-2 flex-shrink-0"}),e.jsx("span",{className:"font-medium truncate min-w-0",children:m.label}),m.badge&&e.jsx("span",{className:"ml-auto bg-blue-500 dark:bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center flex-shrink-0",children:m.badge})]},d))})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6 transition-colors duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 max-w-2xl",children:[e.jsxs("button",{onClick:()=>r("/dashboard"),className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Back to Dashboard"})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search solved doubts...",className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(Be,{})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto h-full bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:e.jsx(Ua,{})})]})]})},me="/api/social";class qa{constructor(){this.token=localStorage.getItem("token")}getToken(){return this.token||localStorage.getItem("token")}makeAuthenticatedRequest(a){return g(this,arguments,function*(s,t={}){const r=this.getToken();if(console.log("Making authenticated request to:",s),console.log("Token available:",!!r),!r)throw console.error("No authentication token found for social request"),new Error("Authentication required");const i={headers:M({"Content-Type":"application/json",Authorization:`Bearer ${r}`},t.headers)};try{const l=yield fetch(s,M(M({},i),t));if(console.log("Response status:",l.status),l.status===401)throw console.error("Authentication failed - 401 status"),new Error("Authentication failed");return l}catch(l){throw console.error("Fetch error:",l),l}})}createPost(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${me}/posts`,{method:"POST",body:JSON.stringify(s)}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to create post");return a}catch(t){throw console.error("Create post error:",t),t}})}getPosts(){return g(this,arguments,function*(s=1,t=10,a={}){try{const r=new URLSearchParams(M({page:s.toString(),limit:t.toString()},a)),i=yield this.makeAuthenticatedRequest(`${me}/posts?${r}`),l=yield i.json();if(!i.ok)throw new Error(l.message||"Failed to fetch posts");return l.data}catch(r){throw console.error("Get posts error:",r),r}})}toggleLike(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${me}/posts/${s}/like`,{method:"POST"}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to toggle like");return a}catch(t){throw console.error("Toggle like error:",t),t}})}addComment(s,t){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${me}/posts/${s}/comment`,{method:"POST",body:JSON.stringify({content:t})}),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to add comment");return r}catch(a){throw console.error("Add comment error:",a),a}})}sharePost(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${me}/posts/${s}/share`,{method:"POST"}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to share post");return a}catch(t){throw console.error("Share post error:",t),t}})}toggleSave(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${me}/posts/${s}/save`,{method:"POST"}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to toggle save");return a}catch(t){throw console.error("Toggle save error:",t),t}})}sendFriendRequest(s,t=""){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${me}/users/find-by-email`,{method:"POST",body:JSON.stringify({email:s})});if(!a.ok)throw new Error("User not found with this email address");const i=(yield a.json()).data.id,l=yield this.makeAuthenticatedRequest(`${me}/friends/request`,{method:"POST",body:JSON.stringify({recipientId:i,message:t})}),m=yield l.json();if(!l.ok)throw new Error(m.message||"Failed to send friend request");return m}catch(a){throw console.error("Send friend request error:",a),a}})}sendFriendRequestById(s,t=""){return g(this,null,function*(){try{console.log("sendFriendRequestById called with recipientId:",s);const a=yield this.makeAuthenticatedRequest(`${me}/friends/request`,{method:"POST",body:JSON.stringify({recipientId:s,message:t})});console.log("Friend request response status:",a.status);const r=yield a.json();if(console.log("Friend request response data:",r),!a.ok)throw new Error(r.message||"Failed to send friend request");return r}catch(a){throw console.error("Send friend request by ID error:",a),a}})}getUserPosts(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(`${me}/posts/user`),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch user posts");return t}catch(s){throw console.error("Get user posts error:",s),s}})}getUserStories(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(`${me}/stories/user`),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch user stories");return t}catch(s){throw console.error("Get user stories error:",s),s}})}getFriends(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(`${me}/friends`),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch friends");return t.data}catch(s){throw console.error("Get friends error:",s),s}})}getFriendRequests(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(`${me}/friends/requests`),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch friend requests");return t.data}catch(s){throw console.error("Get friend requests error:",s),s}})}acceptFriendRequest(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${me}/friends/${s}/accept`,{method:"POST"}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to accept friend request");return a}catch(t){throw console.error("Accept friend request error:",t),t}})}declineFriendRequest(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${me}/friends/${s}/decline`,{method:"POST"}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to decline friend request");return a}catch(t){throw console.error("Decline friend request error:",t),t}})}getFriendSuggestions(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(`${me}/friends/suggestions`),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch friend suggestions");return t.data}catch(s){throw console.error("Get friend suggestions error:",s),s}})}searchUsers(s){return g(this,null,function*(){try{console.log("socialService.searchUsers called with:",s);const t=yield this.makeAuthenticatedRequest(`${me}/users/search`,{method:"POST",body:JSON.stringify({name:s})});console.log("Search users response status:",t.status);const a=yield t.json();if(console.log("Search users response data:",a),!t.ok)throw new Error(a.message||"Failed to search users");return a.data}catch(t){throw console.error("Search users error:",t),t}})}createStudyGroup(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${me}/study-groups`,{method:"POST",body:JSON.stringify(s)}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to create study group");return a}catch(t){throw console.error("Create study group error:",t),t}})}getStudyGroups(){return g(this,arguments,function*(s=1,t=10,a={}){try{const r=new URLSearchParams(M({page:s.toString(),limit:t.toString()},a)),i=yield this.makeAuthenticatedRequest(`${me}/study-groups?${r}`),l=yield i.json();if(!i.ok)throw new Error(l.message||"Failed to fetch study groups");return l.data}catch(r){throw console.error("Get study groups error:",r),r}})}joinStudyGroup(s,t=null){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${me}/study-groups/${s}/join`,{method:"POST",body:JSON.stringify({inviteCode:t})}),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to join study group");return r}catch(a){throw console.error("Join study group error:",a),a}})}createStory(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${me}/stories`,{method:"POST",body:JSON.stringify(s)}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to create story");return a}catch(t){throw console.error("Create story error:",t),t}})}getStories(){return g(this,null,function*(){try{try{const s=yield this.makeAuthenticatedRequest(`${me}/stories`),t=yield s.json();if(console.log("getStories - Authenticated response:",t),!s.ok)throw new Error(t.message||"Failed to fetch stories");return t}catch(s){console.log("Authentication failed, trying test route:",s.message);const t=yield fetch(`${me}/test/stories`),a=yield t.json();if(console.log("getStories - Test route response:",a),!t.ok)throw new Error(a.message||"Failed to fetch stories");return a}}catch(s){throw console.error("Get stories error:",s),s}})}viewStory(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${me}/stories/${s}/view`,{method:"POST"}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to view story");return a}catch(t){throw console.error("View story error:",t),t}})}searchUsers(s,t=1,a=10){return g(this,null,function*(){try{const r=new URLSearchParams({q:s,page:t.toString(),limit:a.toString()}),i=yield this.makeAuthenticatedRequest(`${me}/search/users?${r}`),l=yield i.json();if(!i.ok)throw new Error(l.message||"Failed to search users");return l.data}catch(r){throw console.error("Search users error:",r),r}})}searchPosts(s,t=1,a=10){return g(this,null,function*(){try{const r=new URLSearchParams({q:s,page:t.toString(),limit:a.toString()}),i=yield this.makeAuthenticatedRequest(`${me}/search/posts?${r}`),l=yield i.json();if(!i.ok)throw new Error(l.message||"Failed to search posts");return l.data}catch(r){throw console.error("Search posts error:",r),r}})}}const fe=new qa;class Ba{constructor(){this.userProfiles={student_cs:{name:"Computer Science Student",specialization:"Computer Science",interests:["Programming","AI","Web Development","Data Science"],color:"blue",dashboard:{featuredSubjects:["Programming","Algorithms","Data Structures","Machine Learning"],studyGroups:["CS Study Group","Programming Club","AI Enthusiasts"],recommendedContent:["React Tutorials","Python Basics","Algorithm Problems"]}},student_math:{name:"Mathematics Student",specialization:"Mathematics",interests:["Calculus","Linear Algebra","Statistics","Number Theory"],color:"green",dashboard:{featuredSubjects:["Calculus","Linear Algebra","Statistics","Discrete Math"],studyGroups:["Math Study Group","Statistics Club","Calculus Help"],recommendedContent:["Calculus Problems","Linear Algebra","Statistics Tutorials"]}},student_physics:{name:"Physics Student",specialization:"Physics",interests:["Quantum Physics","Mechanics","Thermodynamics","Electromagnetism"],color:"purple",dashboard:{featuredSubjects:["Quantum Mechanics","Classical Mechanics","Thermodynamics","Electromagnetism"],studyGroups:["Physics Study Group","Quantum Club","Mechanics Help"],recommendedContent:["Physics Problems","Quantum Theory","Mechanics Tutorials"]}},student_biology:{name:"Biology Student",specialization:"Biology",interests:["Molecular Biology","Genetics","Ecology","Biochemistry"],color:"green",dashboard:{featuredSubjects:["Molecular Biology","Genetics","Ecology","Biochemistry"],studyGroups:["Biology Study Group","Genetics Club","Ecology Society"],recommendedContent:["Biology Notes","Genetics Problems","Ecology Studies"]}},student_business:{name:"Business Student",specialization:"Business Administration",interests:["Marketing","Finance","Management","Entrepreneurship"],color:"orange",dashboard:{featuredSubjects:["Marketing","Finance","Management","Entrepreneurship"],studyGroups:["Business Club","Finance Society","Entrepreneurship Group"],recommendedContent:["Business Cases","Finance Tutorials","Marketing Strategies"]}}}}getUserDashboard(s,t="student"){const a=Object.keys(this.userProfiles),r=s.length%a.length,i=this.userProfiles[a[r]];return{user:{id:s,name:i.name,specialization:i.specialization,interests:i.interests,color:i.color,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(i.name)}&background=${i.color}500&color=fff&size=120`},dashboard:i.dashboard,personalizedContent:this.getPersonalizedContent(i),studyRecommendations:this.getStudyRecommendations(i),friendSuggestions:this.getFriendSuggestions(i)}}getPersonalizedContent(s){const t={"Computer Science":[{type:"post",title:"React Hooks Tutorial",author:"Tech Mentor",likes:45,subject:"Programming"},{type:"post",title:"Python Data Structures",author:"Code Master",likes:32,subject:"Programming"},{type:"story",title:"Algorithm Problem Solving",author:"Algo Expert",views:128,subject:"Algorithms"}],Mathematics:[{type:"post",title:"Calculus Integration Techniques",author:"Math Professor",likes:67,subject:"Calculus"},{type:"post",title:"Linear Algebra Applications",author:"Math Tutor",likes:43,subject:"Linear Algebra"},{type:"story",title:"Statistics Problem Walkthrough",author:"Stats Expert",views:89,subject:"Statistics"}],Physics:[{type:"post",title:"Quantum Mechanics Basics",author:"Physics Prof",likes:78,subject:"Quantum Physics"},{type:"post",title:"Classical Mechanics Problems",author:"Physics Tutor",likes:56,subject:"Mechanics"},{type:"story",title:"Thermodynamics Experiments",author:"Lab Assistant",views:156,subject:"Thermodynamics"}],Biology:[{type:"post",title:"Molecular Biology Techniques",author:"Bio Researcher",likes:89,subject:"Molecular Biology"},{type:"post",title:"Genetics Problem Solving",author:"Genetics Expert",likes:54,subject:"Genetics"},{type:"story",title:"Ecology Field Study",author:"Ecology Student",views:134,subject:"Ecology"}],"Business Administration":[{type:"post",title:"Marketing Strategies 2024",author:"Marketing Pro",likes:92,subject:"Marketing"},{type:"post",title:"Financial Analysis Methods",author:"Finance Expert",likes:67,subject:"Finance"},{type:"story",title:"Entrepreneurship Success Stories",author:"Business Mentor",views:203,subject:"Entrepreneurship"}]};return t[s.specialization]||t["Computer Science"]}getStudyRecommendations(s){return[{title:`Advanced ${s.specialization} Course`,difficulty:"Intermediate",duration:"8 weeks"},{title:`${s.specialization} Study Group`,difficulty:"Beginner",duration:"Ongoing"},{title:`${s.specialization} Certification`,difficulty:"Advanced",duration:"12 weeks"}]}getFriendSuggestions(s){return[{name:`${s.specialization} Study Buddy`,avatar:"https://ui-avatars.com/api/?name=Study+Buddy&background=blue500&color=fff",mutual:5},{name:`${s.specialization} Mentor`,avatar:"https://ui-avatars.com/api/?name=Mentor&background=green500&color=fff",mutual:3},{name:`${s.specialization} Classmate`,avatar:"https://ui-avatars.com/api/?name=Classmate&background=purple500&color=fff",mutual:8}]}getUserStudyGroups(s){return[{name:`${s.specialization} Study Group`,members:24,active:!0,subject:s.specialization},{name:`${s.specialization} Problem Solving`,members:18,active:!0,subject:"Problem Solving"},{name:`${s.specialization} Exam Prep`,members:31,active:!1,subject:"Exam Preparation"}]}getUserNotifications(s){return[{type:"study_reminder",message:`Don't forget your ${s.specialization} study session!`,time:"2 hours ago"},{type:"group_invite",message:`You've been invited to join ${s.specialization} Study Group`,time:"1 day ago"},{type:"achievement",message:`Congratulations! You've completed ${s.specialization} Module 3`,time:"3 days ago"}]}}const Nt=new Ba,za=()=>{var p,T,P,A,H,k,_,W;const[n,s]=o.useState([]);o.useState([]);const[t,a]=o.useState(!0),[r,i]=o.useState(!1),[l,m]=o.useState({content:"",type:"text",image:null,subject:"",hashtags:[]}),[d,x]=o.useState(!1),[c,f]=o.useState(0),[b,y]=o.useState(!1);o.useEffect(()=>{u()},[]);const u=()=>g(I,null,function*(){var S;try{const U=yield fe.getStories();console.log("StoriesPage - Stories API response:",U),console.log("StoriesPage - Response data:",U.data),console.log("StoriesPage - Response data length:",(S=U.data)==null?void 0:S.length),console.log("StoriesPage - Response data type:",typeof U.data),console.log("StoriesPage - Response data is array:",Array.isArray(U.data));const v=(U.data||[]).map((E,F)=>{var z,$,B,w,Y,L;return console.log(`StoriesPage - Processing story ${F}:`,E),console.log("StoriesPage - Story author:",E.author),{id:E._id,author:{name:((z=E.author)==null?void 0:z.name)||"Unknown",avatar:(($=E.author)==null?void 0:$.avatar)||"https://via.placeholder.com/40",username:`@${((w=(B=E.author)==null?void 0:B.name)==null?void 0:w.toLowerCase().replace(/\s+/g,""))||"unknown"}`},content:E.content||"",type:E.mediaType||"text",image:E.media&&E.media.length>0?E.media[0]:null,createdAt:new Date(E.createdAt),views:((Y=E.views)==null?void 0:Y.length)||0,likes:((L=E.reactions)==null?void 0:L.length)||0,subject:E.subject,hashtags:E.hashtags||[]}});console.log("StoriesPage - Transformed stories:",v),s(v)}catch(U){console.error("Error loading stories:",U),s([{id:1,author:{name:"x_ae-23b",avatar:"https://via.placeholder.com/40",username:"@x_ae-23b"},content:"Just finished an amazing coding session! üöÄ",type:"text",image:null,createdAt:new Date(Date.now()-2*60*60*1e3),views:45,likes:12},{id:2,author:{name:"maisenpai",avatar:"https://via.placeholder.com/40",username:"@maisenpai"},content:"Learning React hooks today!",type:"text",image:null,createdAt:new Date(Date.now()-4*60*60*1e3),views:32,likes:8},{id:3,author:{name:"saylortwift",avatar:"https://via.placeholder.com/40",username:"@saylortwift"},content:"Beautiful sunset from my study room",type:"image",image:"https://via.placeholder.com/400x600",createdAt:new Date(Date.now()-6*60*60*1e3),views:78,likes:23}])}finally{a(!1)}}),j=()=>g(I,null,function*(){if(!(!l.content.trim()&&!l.image)){if(!l.subject){alert("Please select a subject for your story");return}x(!0);try{console.log("Creating story with data:",l),yield fe.createStory(l),console.log("Story created successfully, reloading stories..."),m({content:"",type:"text",image:null,subject:"",hashtags:[]}),i(!1),yield u()}catch(S){console.error("Error creating story:",S)}finally{x(!1)}}}),N=S=>{const U=S.target.files[0];if(U){const v=new FileReader;v.onload=E=>{m(Z(M({},l),{image:E.target.result,type:"image"}))},v.readAsDataURL(U)}},C=S=>{f(S),y(!0)},R=S=>g(I,null,function*(){try{yield fe.likeStory(S),yield u()}catch(U){console.error("Error liking story:",U)}}),h=S=>{const v=Math.floor((new Date-S)/(1e3*60*60));return v<1?"Just now":v<24?`${v}h ago`:`${Math.floor(v/24)}d ago`};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Stories"}),e.jsx("p",{className:"text-gray-600",children:"Share your learning moments"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2",children:[e.jsx(_t,{className:"w-5 h-5"}),e.jsx("span",{children:"Create Story"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map((S,U)=>e.jsxs("div",{onClick:()=>C(U),className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden cursor-pointer hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:S.author.avatar,alt:S.author.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:S.author.name}),e.jsx("p",{className:"text-sm text-gray-600",children:S.author.username})]}),e.jsx("span",{className:"text-xs text-gray-500",children:h(S.createdAt)})]})}),e.jsxs("div",{className:"relative",children:[S.type==="image"&&S.image?e.jsx("img",{src:S.image,alt:"Story",className:"w-full h-64 object-cover"}):e.jsx("div",{className:"w-full h-64 bg-gradient-to-br from-purple-100 to-blue-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(kt,{className:"w-8 h-8 text-purple-600"})}),e.jsx("p",{className:"text-gray-700 font-medium",children:S.content})]})}),e.jsx("div",{className:"absolute top-3 right-3",children:S.type==="image"?e.jsxs("div",{className:"bg-black bg-opacity-50 text-white px-2 py-1 rounded-full text-xs flex items-center space-x-1",children:[e.jsx(Ps,{className:"w-3 h-3"}),e.jsx("span",{children:"Photo"})]}):e.jsxs("div",{className:"bg-black bg-opacity-50 text-white px-2 py-1 rounded-full text-xs flex items-center space-x-1",children:[e.jsx(Fe,{className:"w-3 h-3"}),e.jsx("span",{children:"Text"})]})})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:v=>{v.stopPropagation(),R(S.id)},className:"flex items-center space-x-1 hover:text-red-600",children:[e.jsx(rt,{className:"w-4 h-4"}),e.jsx("span",{children:S.likes})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Fe,{className:"w-4 h-4"}),e.jsx("span",{children:S.views})]})]}),e.jsx("button",{className:"hover:text-gray-800",children:e.jsx(Ve,{className:"w-4 h-4"})})]})})]},S.id))}),n.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(kt,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Stories Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Be the first to share your learning journey!"}),e.jsx("button",{onClick:()=>i(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium",children:"Create Your First Story"})]})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Create Story"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(de,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),e.jsxs("select",{value:l.subject,onChange:S=>m(Z(M({},l),{subject:S.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select a subject"}),e.jsx("option",{value:"Mathematics",children:"Mathematics"}),e.jsx("option",{value:"Physics",children:"Physics"}),e.jsx("option",{value:"Chemistry",children:"Chemistry"}),e.jsx("option",{value:"Biology",children:"Biology"}),e.jsx("option",{value:"Computer Science",children:"Computer Science"}),e.jsx("option",{value:"Engineering",children:"Engineering"}),e.jsx("option",{value:"Literature",children:"Literature"}),e.jsx("option",{value:"History",children:"History"}),e.jsx("option",{value:"Data Science",children:"Data Science"}),e.jsx("option",{value:"Artificial Intelligence",children:"Artificial Intelligence"}),e.jsx("option",{value:"Business",children:"Business"}),e.jsx("option",{value:"Economics",children:"Economics"}),e.jsx("option",{value:"Psychology",children:"Psychology"}),e.jsx("option",{value:"Sociology",children:"Sociology"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Story Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>m(Z(M({},l),{type:"text"})),className:`px-4 py-2 rounded-lg border ${l.type==="text"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-300 text-gray-700"}`,children:"Text"}),e.jsx("button",{onClick:()=>m(Z(M({},l),{type:"image"})),className:`px-4 py-2 rounded-lg border ${l.type==="image"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-300 text-gray-700"}`,children:"Image"})]})]}),l.type==="image"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"w-full p-3 border border-gray-300 rounded-lg"}),l.image&&e.jsx("img",{src:l.image,alt:"Preview",className:"w-full h-32 object-cover rounded-lg mt-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),e.jsx("textarea",{value:l.content,onChange:S=>m(Z(M({},l),{content:S.target.value})),placeholder:"What's happening in your learning journey?",className:"w-full p-3 border border-gray-300 rounded-lg h-32 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags (optional)"}),e.jsx("input",{type:"text",value:l.hashtags.join(", "),onChange:S=>m(Z(M({},l),{hashtags:S.target.value.split(",").map(U=>U.trim()).filter(U=>U)})),placeholder:"Enter hashtags separated by commas (e.g., #learning, #coding, #math)",className:"w-full p-3 border border-gray-300 rounded-lg"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple hashtags with commas"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{onClick:j,disabled:d||!l.content.trim()&&!l.image||!l.subject,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:d?"Creating...":"Create Story"})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",children:e.jsxs("div",{className:"relative w-full max-w-md h-96 bg-white rounded-lg overflow-hidden",children:[e.jsx("button",{onClick:()=>y(!1),className:"absolute top-4 left-4 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full",children:e.jsx(de,{className:"w-6 h-6"})}),e.jsxs("div",{className:"p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("img",{src:(p=n[c])==null?void 0:p.author.avatar,alt:(T=n[c])==null?void 0:T.author.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:(P=n[c])==null?void 0:P.author.name}),e.jsx("p",{className:"text-sm text-gray-600",children:h((A=n[c])==null?void 0:A.createdAt)})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:((H=n[c])==null?void 0:H.type)==="image"&&((k=n[c])!=null&&k.image)?e.jsx("img",{src:n[c].image,alt:"Story",className:"max-w-full max-h-full object-contain"}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Fe,{className:"w-8 h-8 text-purple-600"})}),e.jsx("p",{className:"text-gray-700 text-lg",children:(_=n[c])==null?void 0:_.content})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>{var S;return R((S=n[c])==null?void 0:S.id)},className:"flex items-center space-x-2 text-gray-600 hover:text-red-600",children:[e.jsx(rt,{className:"w-5 h-5"}),e.jsx("span",{children:(W=n[c])==null?void 0:W.likes})]}),e.jsxs("button",{className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600",children:[e.jsx(Fe,{className:"w-5 h-5"}),e.jsx("span",{children:"Reply"})]})]}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800",children:e.jsx(Ve,{className:"w-5 h-5"})})]})]})]})})]})},Ja=()=>{const[n,s]=o.useState([]),[t,a]=o.useState([]);o.useState([]);const[r,i]=o.useState([]),[l,m]=o.useState(!0),[d,x]=o.useState(""),[c,f]=o.useState("all"),[b,y]=o.useState(!1),[u,j]=o.useState(""),[N,C]=o.useState(!1),[R,h]=o.useState([]),[p,T]=o.useState(!1),[P,A]=o.useState(""),[H,k]=o.useState(!1),[_,W]=o.useState("");o.useEffect(()=>{S()},[]),o.useEffect(()=>{const w=setTimeout(()=>{P.length>=2?z(P):h([])},300);return()=>clearTimeout(w)},[P]);const S=()=>g(I,null,function*(){try{m(!0),console.log("Loading friends data...");const[w,Y,L]=yield Promise.all([fe.getFriends().catch(()=>({data:[]})),fe.getFriendRequests().catch(()=>({data:[]})),fe.getFriendSuggestions().catch(()=>({data:[]}))]);console.log("Friends response:",w),console.log("Requests response:",Y),console.log("Suggestions response:",L),s(w.data||[]),a(Y.data||[]),i(L.data||[])}catch(w){console.error("Error loading friends data:",w),s([{id:1,name:"John Doe",email:"john@example.com",avatar:"https://via.placeholder.com/40",status:"online",lastActive:"2 minutes ago",mutualFriends:5,isOnline:!0},{id:2,name:"Jane Smith",email:"jane@example.com",avatar:"https://via.placeholder.com/40",status:"offline",lastActive:"1 hour ago",mutualFriends:3,isOnline:!1},{id:3,name:"Mike Johnson",email:"mike@example.com",avatar:"https://via.placeholder.com/40",status:"online",lastActive:"5 minutes ago",mutualFriends:8,isOnline:!0}]),a([{id:1,name:"Alice Brown",email:"alice@example.com",avatar:"https://via.placeholder.com/40",sentAt:"2 hours ago"}]),i([{id:1,name:"Sarah Wilson",email:"sarah@example.com",avatar:"https://via.placeholder.com/40",mutualFriends:2,reason:"You have 2 mutual friends"},{id:2,name:"Tom Davis",email:"tom@example.com",avatar:"https://via.placeholder.com/40",mutualFriends:1,reason:"You have 1 mutual friend"}])}finally{m(!1)}}),U=()=>g(I,null,function*(){if(u.trim()){C(!0);try{yield fe.sendFriendRequest(u),W("Friend request sent successfully!"),k(!0),j(""),y(!1),yield S()}catch(w){console.error("Error sending friend request:",w)}finally{C(!1)}}}),v=w=>g(I,null,function*(){try{yield fe.acceptFriendRequest(w),yield S()}catch(Y){console.error("Error accepting friend request:",Y)}}),E=w=>g(I,null,function*(){try{yield fe.declineFriendRequest(w),yield S()}catch(Y){console.error("Error rejecting friend request:",Y)}}),F=w=>g(I,null,function*(){try{yield fe.sendFriendRequestById(w),yield S()}catch(Y){console.error("Error adding friend from suggestion:",Y)}}),z=w=>g(I,null,function*(){if(w.length<2){h([]);return}T(!0);try{console.log("Searching for users with query:",w);const Y=yield fe.searchUsers(w);console.log("Search results:",Y),h(Y)}catch(Y){console.error("Error searching users:",Y),h([])}finally{T(!1)}}),$=w=>g(I,null,function*(){try{console.log("Sending friend request to user ID:",w),yield fe.sendFriendRequestById(w),console.log("Friend request sent successfully"),W("Friend request sent successfully!"),k(!0),h([]),A(""),yield S()}catch(Y){console.error("Error sending friend request:",Y)}}),B=n.filter(w=>w.name.toLowerCase().includes(d.toLowerCase())||w.email.toLowerCase().includes(d.toLowerCase()));return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Friends"}),e.jsx("p",{className:"text-gray-600",children:"Manage your connections and discover new friends"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>y(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2",children:[e.jsx(ke,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Friend"})]}),e.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-800",children:e.jsx(St,{className:"w-5 h-5"})})]})]})}),e.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search friends...",value:d,onChange:w=>x(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),e.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-800",children:e.jsx(Cs,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-1 p-6",children:[e.jsxs("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-lg font-medium ${c==="all"?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-gray-900"}`,children:["All Friends (",n.length,")"]}),e.jsxs("button",{onClick:()=>f("requests"),className:`px-4 py-2 rounded-lg font-medium ${c==="requests"?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-gray-900"}`,children:["Requests (",t.length,")"]}),e.jsxs("button",{onClick:()=>f("suggestions"),className:`px-4 py-2 rounded-lg font-medium ${c==="suggestions"?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-gray-900"}`,children:["Suggestions (",r.length,")"]})]})}),e.jsxs("div",{className:"p-6",children:[c==="all"&&e.jsx("div",{className:"space-y-4",children:B.length>0?B.map(w=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:w.avatar,alt:w.name,className:"w-12 h-12 rounded-full"}),w.isOnline&&e.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:w.name}),e.jsx("p",{className:"text-sm text-gray-600",children:w.email}),e.jsx("p",{className:"text-xs text-gray-500",children:w.lastActive})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-600 hover:text-blue-600",children:e.jsx(Fe,{className:"w-5 h-5"})}),e.jsx("button",{className:"p-2 text-gray-600 hover:text-red-600",children:e.jsx(rt,{className:"w-5 h-5"})}),e.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-800",children:e.jsx(ut,{className:"w-5 h-5"})})]})]})},w.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Se,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Friends Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Start building your network by adding friends!"}),e.jsx("button",{onClick:()=>y(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium",children:"Add Your First Friend"})]})}),c==="requests"&&e.jsx("div",{className:"space-y-4",children:t.length>0?t.map(w=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:w.avatar,alt:w.name,className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:w.name}),e.jsx("p",{className:"text-sm text-gray-600",children:w.email}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Sent ",w.sentAt]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>v(w.id),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),e.jsx("span",{children:"Accept"})]}),e.jsxs("button",{onClick:()=>E(w.id),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{children:"Decline"})]})]})]})},w.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ke,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Pending Requests"}),e.jsx("p",{className:"text-gray-600",children:"You're all caught up!"})]})}),c==="suggestions"&&e.jsx("div",{className:"space-y-4",children:r.length>0?r.map(w=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:w.avatar,alt:w.name,className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:w.name}),e.jsx("p",{className:"text-sm text-gray-600",children:w.email}),e.jsx("p",{className:"text-xs text-gray-500",children:w.reason})]})]}),e.jsxs("button",{onClick:()=>F(w.id),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"Add"})]})]})},w.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Re,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Suggestions"}),e.jsx("p",{className:"text-gray-600",children:"We couldn't find any friend suggestions at the moment."})]})})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Friend"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search by Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:P,onChange:w=>A(w.target.value),placeholder:"Search by name...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}),p&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(be,{className:"w-4 h-4 animate-spin text-gray-400"})})]}),R.length>0&&e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg",children:R.map(w=>e.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:w.avatar||"https://via.placeholder.com/32",alt:w.name,className:"w-8 h-8 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:w.name}),e.jsx("p",{className:"text-sm text-gray-500",children:w.email})]})]}),e.jsxs("button",{onClick:()=>$(w.id),className:"px-4 py-2 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 flex items-center space-x-1",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Friend"})]})]},w.id))}),P.length>=2&&R.length===0&&!p&&e.jsx("div",{className:"mt-2 p-3 text-center text-gray-500 bg-gray-50 rounded-lg",children:e.jsxs("p",{children:['No users found with name "',P,'"']})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"OR"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add by Email Address"}),e.jsx("input",{type:"email",value:u,onChange:w=>j(w.target.value),placeholder:"Enter friend's email",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>{y(!1),A(""),h([]),j("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{onClick:U,disabled:N||!u.trim(),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center space-x-2",children:N?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"Send Request"})]})})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8 w-full max-w-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Pt,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Success!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:_}),e.jsx("button",{onClick:()=>k(!1),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium",children:"OK"})]})})]})},Ga=({user:n,onUserUpdate:s})=>{const[t,a]=o.useState(!1),[r,i]=o.useState({}),[l,m]=o.useState({posts:0,friends:0,stories:0,likes:0}),[d,x]=o.useState(!0);o.useEffect(()=>{n&&(i(M({},n)),c())},[n]);const c=()=>g(I,null,function*(){var y,u,j;try{x(!0);const[N,C,R]=yield Promise.all([fe.getUserPosts().catch(()=>({data:[]})),fe.getFriends().catch(()=>({data:[]})),fe.getUserStories().catch(()=>({data:[]}))]);m({posts:((y=N.data)==null?void 0:y.length)||0,friends:((u=C.data)==null?void 0:u.length)||0,stories:((j=R.data)==null?void 0:j.length)||0,likes:0})}catch(N){console.error("Error loading user stats:",N)}finally{x(!1)}}),f=()=>g(I,null,function*(){try{yield ae.updateProfile(r),s(r),a(!1)}catch(y){console.error("Error updating profile:",y)}}),b=()=>{i(M({},n)),a(!1)};return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})}):e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.avatar||"https://via.placeholder.com/120",alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-purple-100"}),t&&e.jsx("button",{className:"absolute bottom-0 right-0 bg-purple-500 text-white p-2 rounded-full hover:bg-purple-600",children:e.jsx(kt,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[t?e.jsx("input",{type:"text",value:r.name||"",onChange:y=>i(Z(M({},r),{name:y.target.value})),className:"text-2xl font-bold text-gray-900 border border-gray-300 rounded px-3 py-1"}):e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n==null?void 0:n.name}),t?e.jsx("input",{type:"text",value:r.email||"",onChange:y=>i(Z(M({},r),{email:y.target.value})),className:"text-gray-600 border border-gray-300 rounded px-3 py-1 mt-1"}):e.jsx("p",{className:"text-gray-600",children:n==null?void 0:n.email}),e.jsx("p",{className:"text-sm text-purple-600 mt-1",children:(n==null?void 0:n.membership)||"Student"})]})]}),e.jsx("div",{className:"flex space-x-2",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:f,className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center space-x-2",children:[e.jsx(Ds,{className:"w-4 h-4"}),e.jsx("span",{children:"Save"})]}),e.jsxs("button",{onClick:b,className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 flex items-center space-x-2",children:[e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{children:"Cancel"})]})]}):e.jsxs("button",{onClick:()=>a(!0),className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 flex items-center space-x-2",children:[e.jsx(As,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit Profile"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.posts}),e.jsx("div",{className:"text-sm text-gray-600",children:"Posts"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.friends}),e.jsx("div",{className:"text-sm text-gray-600",children:"Friends"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.stories}),e.jsx("div",{className:"text-sm text-gray-600",children:"Stories"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.likes}),e.jsx("div",{className:"text-sm text-gray-600",children:"Likes"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ce,{className:"w-5 h-5 mr-2"}),"Personal Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ae,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:n==null?void 0:n.email})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Pe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:["Joined ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(je,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Student"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ht,{className:"w-5 h-5 mr-2"}),"Academic Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(je,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Computer Science"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ht,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Bachelor's Degree"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(yt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"University"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(rt,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-gray-700",children:"Liked a post about React Hooks"}),e.jsx("span",{className:"text-sm text-gray-500 ml-auto",children:"2 hours ago"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Fe,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"text-gray-700",children:"Commented on a study group post"}),e.jsx("span",{className:"text-sm text-gray-500 ml-auto",children:"4 hours ago"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Ve,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-gray-700",children:"Shared a helpful resource"}),e.jsx("span",{className:"text-sm text-gray-500 ml-auto",children:"1 day ago"})]})]})]})]})},Gt=()=>{var re,ie,Ne,ge;const n=he(),{userId:s}=it(),[t,a]=o.useState(null),[r,i]=o.useState(!0),[l,m]=o.useState("feed"),[d,x]=o.useState([]),[c,f]=o.useState([]),[b,y]=o.useState([]),[u,j]=o.useState({content:"",images:[]}),[N,C]=o.useState(!1),[R,h]=o.useState(!1),[p,T]=o.useState(null),[P,A]=o.useState([]),[H,k]=o.useState([]),[_,W]=o.useState([]),[S,U]=o.useState([]);o.useEffect(()=>{(()=>g(I,null,function*(){try{if(!ae.isAuthenticated()){n("/");return}const O=ae.getCurrentUser();if(!O){n("/");return}a(O);const ee=s||O.id||"default_user";if(console.log("Using user ID from URL:",ee),!s&&O.id){console.log("No userId in URL, redirecting to user-specific URL"),n(`/dashboard/social/${O.id}`,{replace:!0});return}const le=Nt.getUserDashboard(ee);T(le),A(le.personalizedContent),k(le.studyRecommendations),y(le.friendSuggestions),W(Nt.getUserStudyGroups(le.user)),U(Nt.getUserNotifications(le.user)),yield v(),yield F(),yield $()}catch(O){console.error("Error fetching data:",O)}finally{i(!1)}}))()},[]),o.useEffect(()=>{console.log("Stories state updated:",c)},[c]),o.useEffect(()=>{l==="feed"&&(console.log("Switched to feed page, reloading stories..."),F())},[l]),o.useEffect(()=>{const D=()=>{console.log("User ID changed, reloading stories..."),F()};return window.addEventListener("storage",D),F(),()=>{window.removeEventListener("storage",D)}},[]);const v=()=>g(I,null,function*(){try{const D=s||localStorage.getItem("userId")||(t==null?void 0:t.id)||"user_"+Math.random().toString(36).substr(2,9);console.log("Loading posts for user ID from URL:",D);const O=E(D);console.log("User-specific posts:",O),x(O)}catch(D){console.error("Error loading posts:",D),x([])}}),E=D=>{const O=D.split("").reduce((q,se)=>(q=(q<<5)-q+se.charCodeAt(0),q&q),0),ee=[{author:{name:"CS_Mentor",title:"Computer Science Professor",avatar:"https://ui-avatars.com/api/?name=CS+Mentor&background=blue500&color=fff"},content:"Just finished an amazing React tutorial! The hooks concept is revolutionary for state management.",hashtags:["#react","#javascript","#programming","#webdev"],subject:"Programming"},{author:{name:"Math_Teacher",title:"Mathematics Professor",avatar:"https://ui-avatars.com/api/?name=Math+Teacher&background=green500&color=fff"},content:"Solved a complex calculus problem today. Integration techniques are getting clearer!",hashtags:["#calculus","#mathematics","#integration","#learning"],subject:"Mathematics"},{author:{name:"Physics_Prof",title:"Physics Professor",avatar:"https://ui-avatars.com/api/?name=Physics+Prof&background=purple500&color=fff"},content:"Quantum mechanics is mind-bending! The double-slit experiment never gets old.",hashtags:["#physics","#quantum","#science","#research"],subject:"Physics"},{author:{name:"Bio_Researcher",title:"Biology Researcher",avatar:"https://ui-avatars.com/api/?name=Bio+Researcher&background=green500&color=fff"},content:"Molecular biology techniques are advancing rapidly. CRISPR is changing everything!",hashtags:["#biology","#molecular","#research","#crispr"],subject:"Biology"},{author:{name:"Business_Expert",title:"Business Consultant",avatar:"https://ui-avatars.com/api/?name=Business+Expert&background=orange500&color=fff"},content:"Marketing strategies for 2024 are evolving. Digital transformation is key!",hashtags:["#business","#marketing","#strategy","#digital"],subject:"Business"}],le=[],ue=Math.abs(O)%2+1;for(let q=0;q<ue;q++){const se=(Math.abs(O)+q)%ee.length,G=ee[se];le.push({id:`post_${D}_${q}`,author:G.author,content:G.content,hashtags:G.hashtags,subject:G.subject,image:`https://via.placeholder.com/600x400?text=${G.subject}`,likes:Math.abs(O+q)%50+10,comments:Math.abs(O+q)%20+5,shares:Math.abs(O+q)%30+3,saved:Math.abs(O+q)%15+2,liked:!1,isSaved:!1})}return le},F=()=>g(I,null,function*(){try{const D=s||localStorage.getItem("userId")||(t==null?void 0:t.id)||"user_"+Math.random().toString(36).substr(2,9);console.log("Loading stories for user ID from URL:",D),(!localStorage.getItem("userId")||s)&&localStorage.setItem("userId",D);const O=z(D);console.log("User-specific stories:",O),f(O)}catch(D){console.error("Error loading stories:",D),f([])}}),z=D=>{console.log("Generating stories for user:",D);const O=D.split("").reduce((q,se)=>(q=(q<<5)-q+se.charCodeAt(0),q&q),0);console.log("User hash:",O);const ee={user1:[{name:"Alex_CS",avatar:"https://ui-avatars.com/api/?name=Alex&background=blue500&color=fff",color:"border-blue-500",content:"React hooks are amazing!",subject:"Programming"},{name:"Sarah_Dev",avatar:"https://ui-avatars.com/api/?name=Sarah&background=green500&color=fff",color:"border-green-500",content:"Just built my first API!",subject:"Web Development"},{name:"Mike_Code",avatar:"https://ui-avatars.com/api/?name=Mike&background=purple500&color=fff",color:"border-purple-500",content:"JavaScript async/await rocks!",subject:"JavaScript"}],user2:[{name:"Emma_Math",avatar:"https://ui-avatars.com/api/?name=Emma&background=green500&color=fff",color:"border-green-500",content:"Calculus derivatives are clear now!",subject:"Mathematics"},{name:"David_Stats",avatar:"https://ui-avatars.com/api/?name=David&background=blue500&color=fff",color:"border-blue-500",content:"Statistics probability solved!",subject:"Statistics"},{name:"Lisa_Algebra",avatar:"https://ui-avatars.com/api/?name=Lisa&background=orange500&color=fff",color:"border-orange-500",content:"Linear algebra matrices!",subject:"Linear Algebra"}],user3:[{name:"John_Physics",avatar:"https://ui-avatars.com/api/?name=John&background=purple500&color=fff",color:"border-purple-500",content:"Quantum mechanics is mind-blowing!",subject:"Physics"},{name:"Anna_Quantum",avatar:"https://ui-avatars.com/api/?name=Anna&background=red500&color=fff",color:"border-red-500",content:"Double-slit experiment!",subject:"Quantum Physics"},{name:"Tom_Mechanics",avatar:"https://ui-avatars.com/api/?name=Tom&background=green500&color=fff",color:"border-green-500",content:"Classical mechanics!",subject:"Mechanics"}],user4:[{name:"Maria_Bio",avatar:"https://ui-avatars.com/api/?name=Maria&background=green500&color=fff",color:"border-green-500",content:"DNA replication process!",subject:"Biology"},{name:"Carl_Genetics",avatar:"https://ui-avatars.com/api/?name=Carl&background=blue500&color=fff",color:"border-blue-500",content:"Genetics inheritance patterns!",subject:"Genetics"},{name:"Sofia_Molecular",avatar:"https://ui-avatars.com/api/?name=Sofia&background=purple500&color=fff",color:"border-purple-500",content:"Molecular biology techniques!",subject:"Molecular Biology"}],user5:[{name:"James_Business",avatar:"https://ui-avatars.com/api/?name=James&background=orange500&color=fff",color:"border-orange-500",content:"Marketing strategies 2024!",subject:"Business"},{name:"Rachel_Finance",avatar:"https://ui-avatars.com/api/?name=Rachel&background=green500&color=fff",color:"border-green-500",content:"Financial analysis methods!",subject:"Finance"},{name:"Kevin_Entrepreneur",avatar:"https://ui-avatars.com/api/?name=Kevin&background=blue500&color=fff",color:"border-blue-500",content:"Startup success stories!",subject:"Entrepreneurship"}]};let le=[];if(ee[D])le=ee[D];else{const q=Object.values(ee).flat(),se=Math.abs(O)%3+2;for(let G=0;G<se;G++){const X=(Math.abs(O)+G)%q.length;le.push(q[X])}}const ue=le.map((q,se)=>({id:`story_${D}_${se}`,name:q.name,avatar:q.avatar,color:q.color,content:q.content,subject:q.subject,createdAt:new Date(Date.now()-se*36e5)}));return console.log("Final stories for",D,":",ue),ue},$=()=>g(I,null,function*(){try{const D=yield fe.getFriendSuggestions();y(D.data||[])}catch(D){console.error("Error loading friend suggestions:",D),y([{name:"Julia Smith",username:"@juliasmith",avatar:"https://via.placeholder.com/40"},{name:"Vermillion D. Gray",username:"@vermilliongray",avatar:"https://via.placeholder.com/40"},{name:"Mai Senpai",username:"@maisenpai",avatar:"https://via.placeholder.com/40"},{name:"Oarack Babama",username:"@obama21",avatar:"https://via.placeholder.com/40"}])}}),B=()=>g(I,null,function*(){if(u.content.trim()){h(!0);try{yield fe.createPost(u),j({content:"",images:[]}),C(!1),yield v()}catch(D){console.error("Error creating post:",D)}finally{h(!1)}}}),w=D=>g(I,null,function*(){try{yield fe.likePost(D),yield v()}catch(O){console.error("Error liking post:",O)}}),Y=D=>g(I,null,function*(){try{yield fe.savePost(D),yield v()}catch(O){console.error("Error saving post:",O)}}),L=D=>g(I,null,function*(){try{yield fe.sharePost(D),yield v()}catch(O){console.error("Error sharing post:",O)}}),J=D=>g(I,null,function*(){try{yield fe.sendFriendRequest(D),yield $()}catch(O){console.error("Error adding friend:",O)}});return r?e.jsx("div",{className:"flex h-screen bg-gray-50 items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading Educational Social Dashboard..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-purple-100 to-pink-100 border-b-4 border-purple-500 shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-center",children:e.jsxs("div",{className:"inline-flex items-center gap-3",children:[e.jsx(ne,{className:"w-8 h-8 text-purple-600 animate-pulse"}),e.jsx("span",{className:"text-3xl font-bold text-purple-800",children:"Coming Soon"})]})})}),e.jsx("div",{className:"w-64 bg-gradient-to-b from-purple-600 to-purple-700 text-white pt-12",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[e.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold text-lg",children:"S"})}),e.jsx("span",{className:"text-xl font-bold",children:"slothui"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-purple-300 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Q Search",className:"w-full pl-10 pr-4 py-2 bg-purple-500 text-white placeholder-purple-300 rounded-lg border-0 focus:ring-2 focus:ring-purple-300"})]})}),e.jsxs("nav",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>m("feed"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${l==="feed"?"bg-purple-500":"hover:bg-purple-500"}`,children:[e.jsx(ft,{className:"w-5 h-5"}),e.jsx("span",{children:"Feed"}),e.jsx("span",{className:"ml-auto bg-white text-purple-600 text-xs px-2 py-1 rounded-full",children:"10"})]}),e.jsxs("button",{onClick:()=>m("stories"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${l==="stories"?"bg-purple-500":"hover:bg-purple-500"}`,children:[e.jsx(je,{className:"w-5 h-5"}),e.jsx("span",{children:"Stories"})]}),e.jsxs("button",{onClick:()=>m("friends"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${l==="friends"?"bg-purple-500":"hover:bg-purple-500"}`,children:[e.jsx(Se,{className:"w-5 h-5"}),e.jsx("span",{children:"Friends"}),e.jsx("span",{className:"ml-auto bg-white text-purple-600 text-xs px-2 py-1 rounded-full",children:"2"})]}),e.jsxs("button",{onClick:()=>m("apis"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${l==="apis"?"bg-purple-500":"hover:bg-purple-500"}`,children:[e.jsx(es,{className:"w-5 h-5"}),e.jsx("span",{children:"APIs"})]}),e.jsxs("button",{onClick:()=>m("subscription"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${l==="subscription"?"bg-purple-500":"hover:bg-purple-500"}`,children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{children:"Subscription"})]}),e.jsxs("button",{onClick:()=>m("profile"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${l==="profile"?"bg-purple-500":"hover:bg-purple-500"}`,children:[e.jsx(Ce,{className:"w-5 h-5"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{onClick:()=>m("settings"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${l==="settings"?"bg-purple-500":"hover:bg-purple-500"}`,children:[e.jsx(St,{className:"w-5 h-5"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{onClick:()=>m("help"),className:`w-full flex items-center space-x-3 p-3 rounded-lg text-white ${l==="help"?"bg-purple-500":"hover:bg-purple-500"}`,children:[e.jsx(Ft,{className:"w-5 h-5"}),e.jsx("span",{children:"Help & Support"})]})]}),e.jsx("div",{className:"mt-8",children:e.jsxs("button",{className:"w-full bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-3 px-4 rounded-lg flex items-center justify-center space-x-2",children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{children:"Go Pro"})]})}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-purple-500",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("img",{src:((re=p==null?void 0:p.user)==null?void 0:re.avatar)||(t==null?void 0:t.avatar),alt:"Profile",className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm",children:((ie=p==null?void 0:p.user)==null?void 0:ie.name)||(t==null?void 0:t.name)}),e.jsx("p",{className:"text-xs text-purple-300",children:((Ne=p==null?void 0:p.user)==null?void 0:Ne.specialization)||"Student"}),e.jsxs("p",{className:"text-xs text-purple-200",children:["ID: ",s||localStorage.getItem("userId")||"Unknown"]})]}),e.jsx(Es,{className:"w-4 h-4 text-purple-300"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-purple-200 mb-2",children:"Test Different Users:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:["user1","user2","user3","user4","user5"].map(D=>{const ee=(s||localStorage.getItem("userId"))===D;return e.jsxs("button",{onClick:()=>{console.log("Navigating to user:",D),n(`/dashboard/social/${D}`)},className:`text-xs px-2 py-1 rounded ${ee?"bg-green-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white"}`,children:[D," ",ee&&"‚úì"]},D)})})]}),e.jsxs("button",{onClick:()=>{ae.logout(),n("/")},className:"w-full flex items-center space-x-3 p-3 rounded-lg text-white hover:bg-red-600 transition-colors",children:[e.jsx(nt,{className:"w-5 h-5"}),e.jsx("span",{children:"Logout"})]})]})]})}),e.jsxs("div",{className:"flex-1 flex pt-20",children:[e.jsxs("div",{className:"flex-1 max-w-2xl",children:[l==="feed"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>n("/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Back to Dashboard"})]}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search for friends, groups, pages",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("button",{onClick:()=>C(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2",children:[e.jsx(_t,{className:"w-5 h-5"}),e.jsx("span",{children:"Add New Post"})]})]})}),e.jsxs("div",{className:"bg-white p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Stories"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Stories count: ",c.length]})]}),e.jsxs("div",{className:"flex space-x-4 overflow-x-auto",children:[c.length>0?c.map((D,O)=>e.jsxs("div",{className:"flex-shrink-0 text-center",children:[e.jsx("div",{className:`w-16 h-16 rounded-full border-4 ${D.color} p-1`,children:e.jsx("img",{src:D.avatar,alt:D.name,className:"w-full h-full rounded-full object-cover"})}),e.jsx("p",{className:"text-xs mt-2 text-gray-600",children:D.name})]},O)):e.jsxs("div",{className:"flex-shrink-0 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-gray-300 p-1 flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-500",children:"No stories"})}),e.jsx("p",{className:"text-xs mt-2 text-gray-600",children:"No stories"})]}),e.jsxs("div",{className:"flex-shrink-0 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-gray-300 p-1 flex items-center justify-center",children:e.jsx(Qe,{className:"w-6 h-6 text-gray-400"})}),e.jsx("p",{className:"text-xs mt-2 text-gray-600",children:"More"})]})]})]}),e.jsx("div",{className:"bg-white mb-6",children:e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Recommended for ",(ge=p==null?void 0:p.user)==null?void 0:ge.specialization," Students"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:P.slice(0,4).map((D,O)=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-600",children:D.subject}),e.jsx("span",{className:"text-xs text-gray-500",children:D.type})]}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:D.title}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["by ",D.author]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:D.likes||D.views})]})]})]},O))})]})}),e.jsx("div",{className:"bg-white",children:d.map(D=>e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:D.author.avatar,alt:D.author.name,className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:D.author.name}),e.jsx("p",{className:"text-sm text-gray-600",children:D.author.title})]})]}),e.jsx(ut,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-gray-800 mb-3",children:D.content}),e.jsx("div",{className:"flex flex-wrap gap-2",children:D.hashtags.map((O,ee)=>e.jsxs("span",{className:"text-blue-600 text-sm",children:["#",O]},ee))})]}),D.image&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:D.image,alt:"Post",className:"w-full rounded-lg"})}),e.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:[D.likes," Likes"]}),e.jsxs("span",{children:[D.comments," Comments"]}),e.jsxs("span",{children:[D.shares," Share"]}),e.jsxs("span",{children:[D.saved," Saved"]})]})}),e.jsx("div",{className:"flex items-center justify-between border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("button",{onClick:()=>w(D.id),className:`flex items-center space-x-2 ${D.liked?"text-blue-600":"text-gray-600 hover:text-blue-600"}`,children:[e.jsx(Rs,{className:"w-5 h-5"}),e.jsx("span",{children:"Like"})]}),e.jsxs("button",{className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600",children:[e.jsx(Fe,{className:"w-5 h-5"}),e.jsx("span",{children:"Comment"})]}),e.jsxs("button",{onClick:()=>L(D.id),className:"flex items-center space-x-2 text-gray-600 hover:text-blue-600",children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("span",{children:"Share"})]}),e.jsxs("button",{onClick:()=>Y(D.id),className:`flex items-center space-x-2 ${D.saved?"text-blue-600":"text-gray-600 hover:text-blue-600"}`,children:[e.jsx(Ts,{className:"w-5 h-5"}),e.jsx("span",{children:"Save"})]})]})}),e.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[e.jsx("img",{src:t==null?void 0:t.avatar,alt:"You",className:"w-8 h-8 rounded-full"}),e.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Write your comment..",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(Is,{className:"w-5 h-5"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(Fs,{className:"w-5 h-5"})}),e.jsx("button",{className:"p-2 text-blue-600 hover:text-blue-700",children:e.jsx($t,{className:"w-5 h-5"})})]})]})]},D.id))})]}),l==="stories"&&e.jsx(za,{}),l==="friends"&&e.jsx(Ja,{}),l==="profile"&&e.jsx(Ga,{user:t,onUserUpdate:a}),l==="apis"&&e.jsxs("div",{className:"bg-white p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"APIs"}),e.jsx("p",{className:"text-gray-600",children:"API documentation and tools will be loaded here..."})]}),l==="subscription"&&e.jsxs("div",{className:"bg-white p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Subscription"}),e.jsx("p",{className:"text-gray-600",children:"Subscription plans and billing will be loaded here..."})]}),l==="settings"&&e.jsxs("div",{className:"bg-white p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Settings"}),e.jsx("p",{className:"text-gray-600",children:"Account settings and preferences will be loaded here..."})]}),l==="help"&&e.jsxs("div",{className:"bg-white p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Help & Support"}),e.jsx("p",{className:"text-gray-600",children:"Help articles and support will be loaded here..."})]})]}),e.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-end space-x-4 mb-6",children:[e.jsx(Ce,{className:"w-6 h-6 text-gray-600"}),e.jsx(ye,{className:"w-6 h-6 text-gray-600"}),e.jsx(St,{className:"w-6 h-6 text-gray-600"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Your Study Groups"}),e.jsxs("a",{href:"#",className:"text-blue-600 text-sm flex items-center",children:["See All",e.jsx(Qe,{className:"w-4 h-4 ml-1"})]})]}),e.jsx("div",{className:"space-y-3",children:_.map((D,O)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Se,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:D.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[D.members," members ‚Ä¢ ",D.subject]})]}),e.jsx("div",{className:`w-2 h-2 rounded-full ${D.active?"bg-green-500":"bg-gray-400"}`})]},O))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Recommended for You"}),e.jsxs("a",{href:"#",className:"text-blue-600 text-sm flex items-center",children:["See All",e.jsx(Qe,{className:"w-4 h-4 ml-1"})]})]}),e.jsx("div",{className:"space-y-3",children:H.map((D,O)=>e.jsxs("div",{className:"p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:D.title}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsx("span",{children:D.difficulty}),e.jsx("span",{children:D.duration})]})]},O))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Friend Suggestions"}),e.jsxs("a",{href:"#",className:"text-blue-600 text-sm flex items-center",children:["See All",e.jsx(Qe,{className:"w-4 h-4 ml-1"})]})]}),e.jsx("div",{className:"space-y-4",children:b.map((D,O)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:D.avatar,alt:D.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:D.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[D.mutual," mutual friends"]})]}),e.jsx("button",{onClick:()=>J(D.id),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-full text-sm",children:"+"})]},O))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Profile Activity"}),e.jsx(ut,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:"https://via.placeholder.com/32",alt:"Follower",className:"w-8 h-8 rounded-full border-2 border-white"}),e.jsx("img",{src:"https://via.placeholder.com/32",alt:"Follower",className:"w-8 h-8 rounded-full border-2 border-white"}),e.jsx("img",{src:"https://via.placeholder.com/32",alt:"Follower",className:"w-8 h-8 rounded-full border-2 border-white"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"+1,158 Followers"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ls,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600",children:"23% vs last month"})]})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"You gained a substantial amount of followers this month!"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Upcoming Events"}),e.jsx(ut,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ts,{className:"w-5 h-5 text-blue-600"}),e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold",children:"25"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Friend's Birthday"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Jun 25, 2028"})]})]})]})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create New Post"}),e.jsx("textarea",{value:u.content,onChange:D=>j(Z(M({},u),{content:D.target.value})),placeholder:"What's on your mind?",className:"w-full p-3 border border-gray-300 rounded-lg mb-4 h-32 resize-none"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{onClick:B,disabled:R||!u.content.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:R?"Posting...":"Post"})]})]})})]})},Wa=()=>{const n=he(),[s,t]=o.useState(0),a=[{icon:e.jsx(lt,{className:"w-8 h-8"}),title:"Company Partnerships",description:"Connect with top companies for internships and job opportunities"},{icon:e.jsx(Se,{className:"w-8 h-8"}),title:"Professional Networking",description:"Build meaningful connections with industry professionals"},{icon:e.jsx(_s,{className:"w-8 h-8"}),title:"Career Guidance",description:"Get mentorship from experienced professionals in your field"},{icon:e.jsx(We,{className:"w-8 h-8"}),title:"Industry Insights",description:"Stay updated with latest trends and opportunities"},{icon:e.jsx(Se,{className:"w-8 h-8"}),title:"Online Live Referral System",description:"Get real-time referrals from professionals and alumni network"}];return o.useEffect(()=>{const r=setInterval(()=>{t(i=>(i+1)%a.length)},3e3);return()=>clearInterval(r)},[a.length]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("button",{onClick:()=>n("/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Back to Dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lt,{className:"w-6 h-6 text-blue-600"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Corporate Connect"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-100 to-indigo-100 border-4 border-blue-500 px-8 py-4 rounded-2xl shadow-2xl",children:[e.jsx(ne,{className:"w-8 h-8 text-blue-600 animate-pulse"}),e.jsx("span",{className:"text-3xl font-bold text-blue-800",children:"Coming Soon"})]})}),e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h1",{className:"text-5xl font-bold text-gray-900 mb-6",children:["Bridge the Gap Between",e.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:[" ","Students & Industry"]})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto mb-8",children:"Connect with top companies, build professional networks, and unlock career opportunities through our comprehensive corporate partnership platform."}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-4xl mx-auto mb-12",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white",children:a[s].icon})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:a[s].title}),e.jsx("p",{className:"text-gray-600 text-lg",children:a[s].description}),e.jsx("div",{className:"flex justify-center gap-2 mt-6",children:a.map((r,i)=>e.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${i===s?"bg-blue-500 scale-125":"bg-gray-300"}`},i))})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16",children:a.map((r,i)=>e.jsxs("div",{className:`bg-white rounded-xl p-6 shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1 ${i===s?"ring-2 ring-blue-500":""}`,children:[e.jsx("div",{className:"text-blue-500 mb-4",children:r.icon}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r.title}),e.jsx("p",{className:"text-gray-600 text-sm",children:r.description})]},i))}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-12",children:"What You'll Get"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(te,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Direct Company Access"}),e.jsx("p",{className:"text-gray-600",children:"Connect directly with HR teams and hiring managers from top companies"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Se,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Mentorship Programs"}),e.jsx("p",{className:"text-gray-600",children:"Get guidance from industry experts and successful professionals"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(We,{className:"w-8 h-8 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Career Growth"}),e.jsx("p",{className:"text-gray-600",children:"Access exclusive opportunities and accelerate your career path"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-8",children:"Development Progress"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(te,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Platform Architecture"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Core infrastructure and user management"})]})]}),e.jsx("span",{className:"text-green-600 font-semibold",children:"100%"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(te,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Company Partnerships"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Initial partnerships with top companies"})]})]}),e.jsx("span",{className:"text-green-600 font-semibold",children:"85%"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(ne,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Live Referral System"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Real-time referral matching and notifications"})]})]}),e.jsx("span",{className:"text-orange-600 font-semibold",children:"65%"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(ne,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"AI-Powered Matching"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Advanced algorithms for opportunity matching"})]})]}),e.jsx("span",{className:"text-blue-600 font-semibold",children:"30%"})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-12 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Transform Your Career?"}),e.jsx("p",{className:"text-xl mb-8 opacity-90",children:"Be the first to know when Corporate Connect launches"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center max-w-md mx-auto",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-3 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white/50"}),e.jsx("button",{className:"bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors whitespace-nowrap",children:"Notify Me"})]}),e.jsx("p",{className:"text-sm mt-4 opacity-75",children:"We'll notify you as soon as Corporate Connect is available"})]})}),e.jsx("div",{className:"text-center mt-16 text-gray-500",children:e.jsx("p",{children:"¬© 2024 Educational Platform. All rights reserved."})})]})]})},Ya=()=>{const n=he(),[s,t]=o.useState(0),a=[{icon:e.jsx(Se,{className:"w-8 h-8"}),title:"Real-time Referrals",description:"Get instant referrals from professionals in your network"},{icon:e.jsx($s,{className:"w-8 h-8"}),title:"Verified Professionals",description:"Connect with verified industry experts and alumni"},{icon:e.jsx(Os,{className:"w-8 h-8"}),title:"Smart Matching",description:"AI-powered matching with relevant professionals"},{icon:e.jsx(Fe,{className:"w-8 h-8"}),title:"Direct Communication",description:"Chat directly with referrers and get personalized guidance"}];return o.useEffect(()=>{const r=setInterval(()=>{t(i=>(i+1)%a.length)},3e3);return()=>clearInterval(r)},[a.length]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-indigo-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("button",{onClick:()=>n("/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Back to Dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"w-6 h-6 text-purple-600"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Online Referral System"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-purple-100 to-pink-100 border-4 border-purple-500 px-8 py-4 rounded-2xl shadow-2xl",children:[e.jsx(ne,{className:"w-8 h-8 text-purple-600 animate-pulse"}),e.jsx("span",{className:"text-3xl font-bold text-purple-800",children:"Coming Soon"})]})}),e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h1",{className:"text-5xl font-bold text-gray-900 mb-6",children:["Revolutionize Your",e.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600",children:[" ","Career with Referrals"]})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto mb-8",children:"Connect with professionals, get real-time referrals, and unlock exclusive career opportunities through our advanced referral matching system."}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-4xl mx-auto mb-12",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white",children:a[s].icon})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:a[s].title}),e.jsx("p",{className:"text-gray-600 text-lg",children:a[s].description}),e.jsx("div",{className:"flex justify-center gap-2 mt-6",children:a.map((r,i)=>e.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${i===s?"bg-purple-500 scale-125":"bg-gray-300"}`},i))})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16",children:a.map((r,i)=>e.jsxs("div",{className:`bg-white rounded-xl p-6 shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1 ${i===s?"ring-2 ring-purple-500":""}`,children:[e.jsx("div",{className:"text-purple-500 mb-4",children:r.icon}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r.title}),e.jsx("p",{className:"text-gray-600 text-sm",children:r.description})]},i))}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-12",children:"Why Our Referral System?"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(te,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Instant Connections"}),e.jsx("p",{className:"text-gray-600",children:"Get connected with professionals who can refer you to opportunities instantly"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ht,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Verified Network"}),e.jsx("p",{className:"text-gray-600",children:"All referrers are verified professionals with proven track records"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(We,{className:"w-8 h-8 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Higher Success Rate"}),e.jsx("p",{className:"text-gray-600",children:"Referrals have 5x higher success rate than traditional applications"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-8",children:"Development Progress"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(te,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"User Authentication"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Secure login and profile management"})]})]}),e.jsx("span",{className:"text-green-600 font-semibold",children:"100%"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(te,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Professional Verification"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Background verification system"})]})]}),e.jsx("span",{className:"text-green-600 font-semibold",children:"90%"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(ne,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Real-time Matching"}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered referral matching algorithm"})]})]}),e.jsx("span",{className:"text-orange-600 font-semibold",children:"70%"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(ne,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Communication Platform"}),e.jsx("p",{className:"text-sm text-gray-600",children:"In-app messaging and video calls"})]})]}),e.jsx("span",{className:"text-blue-600 font-semibold",children:"45%"})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl p-12 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Get Referred?"}),e.jsx("p",{className:"text-xl mb-8 opacity-90",children:"Be the first to access our revolutionary referral system"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center max-w-md mx-auto",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-3 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white/50"}),e.jsx("button",{className:"bg-white text-purple-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors whitespace-nowrap",children:"Get Early Access"})]}),e.jsx("p",{className:"text-sm mt-4 opacity-75",children:"We'll notify you as soon as the referral system is available"})]})}),e.jsx("div",{className:"text-center mt-16 text-gray-500",children:e.jsx("p",{children:"¬© 2024 Educational Platform. All rights reserved."})})]})]})},Va=({isOpen:n,onClose:s})=>{const[t,a]=o.useState({user_name:"",user_email:"",rating:0,feedback:""}),[r,i]=o.useState(0),[l,m]=o.useState(!1),[d,x]=o.useState(""),c=f=>g(I,null,function*(){if(f.preventDefault(),!t.user_name||!t.rating||!t.feedback){x("Please fill all required fields");return}if(t.rating===0){x("Please select a rating");return}m(!0),x("");try{console.log("Submitting rating:",t);const b=yield fetch("/api/rating/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_name:t.user_name,user_email:t.user_email||void 0,rating:t.rating,feedback:t.feedback})});if(console.log("Response status:",b.status),!b.ok){const u=yield b.json().catch(()=>({message:"Failed to submit feedback"}));throw new Error(u.message||`Server error: ${b.status}`)}const y=yield b.json();console.log("Response data:",y),y.success?(x("Thank you for your feedback!"),a({user_name:"",user_email:"",rating:0,feedback:""}),setTimeout(()=>{s(),x("")},2e3)):x(y.message||"Failed to submit feedback. Please try again.")}catch(b){console.error("Submit rating error:",b),x(b.message||"Network error. Please try again.")}finally{m(!1)}});return n?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-3 sm:p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm relative max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-4 sm:p-5 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Rate Your Experience"}),e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mt-1",children:"Help us improve by sharing your feedback"})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors flex-shrink-0 mt-1",children:e.jsx(de,{className:"w-5 h-5"})})]})}),e.jsxs("form",{onSubmit:c,className:"p-4 sm:p-5 space-y-4 sm:space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5",children:"Your Name *"}),e.jsx("input",{type:"text",value:t.user_name,onChange:f=>a(Z(M({},t),{user_name:f.target.value})),className:"w-full bg-gray-50 border-2 border-gray-200 text-gray-900 rounded-lg sm:rounded-xl px-3 sm:px-4 py-2 sm:py-2.5 text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",placeholder:"Enter your name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5",children:"Email (Optional)"}),e.jsx("input",{type:"email",value:t.user_email,onChange:f=>a(Z(M({},t),{user_email:f.target.value})),className:"w-full bg-gray-50 border-2 border-gray-200 text-gray-900 rounded-lg sm:rounded-xl px-3 sm:px-4 py-2 sm:py-2.5 text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",placeholder:"your.email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-2",children:"Rating *"}),e.jsx("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[1,2,3,4,5].map(f=>e.jsx("button",{type:"button",onClick:()=>a(Z(M({},t),{rating:f})),onMouseEnter:()=>i(f),onMouseLeave:()=>i(0),className:"transition-transform transform hover:scale-110",children:e.jsx(Re,{className:`w-7 h-7 sm:w-8 sm:h-8 ${f<=(r||t.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},f))}),t.rating>0&&e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mt-1.5",children:[t.rating===5&&"Excellent!",t.rating===4&&"Great!",t.rating===3&&"Good!",t.rating===2&&"Fair",t.rating===1&&"Poor"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5",children:"Your Feedback *"}),e.jsx("textarea",{value:t.feedback,onChange:f=>a(Z(M({},t),{feedback:f.target.value})),className:"w-full min-h-[100px] sm:min-h-[120px] bg-gray-50 border-2 border-gray-200 text-gray-900 rounded-lg sm:rounded-xl px-3 sm:px-4 py-2 sm:py-2.5 placeholder:text-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none resize-vertical transition-all text-sm",placeholder:"Tell us about your experience...",required:!0})]}),d&&e.jsxs("div",{className:`p-2.5 sm:p-3 rounded-lg sm:rounded-xl flex items-center gap-2 text-xs sm:text-sm ${d.includes("Thank you")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[d.includes("Thank you")?e.jsx(te,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}):null,e.jsx("span",{className:"break-words",children:d})]}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 pt-1",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 sm:px-6 py-2 sm:py-2.5 border-2 border-gray-300 text-gray-700 rounded-lg sm:rounded-xl font-semibold text-sm sm:text-base hover:bg-gray-50 transition-all",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l||t.rating===0,className:"flex-1 px-4 sm:px-6 py-2 sm:py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-lg sm:rounded-xl font-semibold text-sm sm:text-base shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] disabled:transform-none flex items-center justify-center gap-1.5 sm:gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 animate-spin"}),e.jsx("span",{className:"hidden sm:inline",children:"Submitting..."}),e.jsx("span",{className:"sm:hidden",children:"Submit..."})]}):e.jsxs(e.Fragment,{children:[e.jsx($t,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Submit"]})})]})]})]})}):null},Ka=()=>{const n=he(),[s,t]=o.useState(!1),[a,r]=o.useState([]),[i,l]=o.useState(0);o.useEffect(()=>{m()},[]);const m=()=>g(I,null,function*(){var x;try{const c=yield fetch("/api/rating/public?limit=3");if(!c.ok){console.warn("Failed to fetch ratings:",c.status,c.statusText),r([]),l(0);return}const f=yield c.text();if(!f){console.warn("Empty response from ratings API"),r([]),l(0);return}let b;try{b=JSON.parse(f)}catch(y){console.error("Failed to parse ratings response:",y),r([]),l(0);return}b.success?(r(b.data||[]),l(((x=b.stats)==null?void 0:x.averageRating)||0)):(r([]),l(0))}catch(c){console.error("Error fetching ratings:",c),r([]),l(0)}}),d=()=>{n("/auth")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 relative overflow-hidden transition-colors duration-300",children:[e.jsx("style",{children:`
        @keyframes fadeInOut {
          0%, 100% { opacity: 0; transform: translateY(20px); }
          50% { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeInOutDelayed {
          0%, 20% { opacity: 0; transform: translateY(20px); }
          40%, 80% { opacity: 1; transform: translateY(0); }
          100% { opacity: 0; transform: translateY(-20px); }
        }
        
        @keyframes fadeInOutDelayed2 {
          0%, 40% { opacity: 0; transform: translateY(20px); }
          60%, 90% { opacity: 1; transform: translateY(0); }
          100% { opacity: 0; transform: translateY(-20px); }
        }
        
        .animate-fade-in-out {
          animation: fadeInOut 3s ease-in-out infinite;
        }
        
        .animate-fade-in-out-delayed {
          animation: fadeInOutDelayed 4s ease-in-out infinite;
        }
        
        .animate-fade-in-out-delayed-2 {
          animation: fadeInOutDelayed2 5s ease-in-out infinite;
        }
      `}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-blue-200 dark:bg-blue-800 rounded-full opacity-20 dark:opacity-10 animate-pulse"}),e.jsx("div",{className:"absolute top-40 right-20 w-24 h-24 bg-purple-200 dark:bg-purple-800 rounded-full opacity-20 dark:opacity-10 animate-pulse delay-1000"}),e.jsx("div",{className:"absolute bottom-20 left-20 w-20 h-20 bg-green-200 dark:bg-green-800 rounded-full opacity-20 dark:opacity-10 animate-pulse delay-2000"}),e.jsx("div",{className:"absolute bottom-40 right-10 w-28 h-28 bg-orange-200 dark:bg-orange-800 rounded-full opacity-20 dark:opacity-10 animate-pulse delay-500"}),e.jsx("div",{className:"absolute top-1/2 left-1/4 w-16 h-16 bg-pink-200 dark:bg-pink-800 rounded-full opacity-15 dark:opacity-10 animate-pulse delay-3000"}),e.jsx("div",{className:"absolute top-1/3 right-1/3 w-12 h-12 bg-cyan-200 dark:bg-cyan-800 rounded-full opacity-20 dark:opacity-10 animate-pulse delay-1500"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700 shadow-sm transition-colors duration-300",children:e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(_e,{to:"/",className:"flex items-center",children:e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-blue-900 dark:text-blue-300 italic transition-colors duration-300 hover:opacity-80",children:["EDU",e.jsxs("span",{className:"relative inline-block mx-1",children:[e.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg transform rotate-3"}),e.jsx("span",{className:"relative bg-gradient-to-r from-red-400 to-orange-400 rounded-lg px-1 py-0.5 text-white font-bold text-xl md:text-2xl",children:"F"})]}),"OYER"]})})}),e.jsxs("div",{className:"flex items-center gap-4 md:gap-6",children:[e.jsxs("nav",{className:"hidden md:flex items-center gap-4",children:[e.jsx(_e,{to:"/about",className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition-colors duration-300",children:"About Us"}),e.jsx(_e,{to:"/contact",className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition-colors duration-300",children:"Contact Us"})]}),e.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[e.jsx(_e,{to:"/about",className:"text-sm text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition-colors duration-300 px-2",children:"About"}),e.jsx(_e,{to:"/contact",className:"text-sm text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition-colors duration-300 px-2",children:"Contact"})]}),e.jsx(Be,{className:"p-2 md:p-3"})]})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8 md:py-12 pt-20 md:pt-24",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 md:gap-12 items-center",children:[e.jsxs("div",{className:"space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-800 dark:text-gray-100 mb-4 leading-tight animate-fade-in-out transition-colors duration-300",children:"Learn together and"}),e.jsx("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 mb-6 leading-tight animate-fade-in-out-delayed",children:"Earn together"}),e.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-blue-500 to-purple-500 dark:from-blue-400 dark:to-purple-400 rounded-full animate-fade-in-out-delayed-2"}),e.jsx("div",{className:"absolute -top-4 -right-4 w-8 h-8 bg-blue-400 dark:bg-blue-600 rounded-full opacity-60 dark:opacity-40 animate-fade-in-out"}),e.jsx("div",{className:"absolute -bottom-2 -left-4 w-6 h-6 bg-purple-400 dark:bg-purple-600 rounded-full opacity-60 dark:opacity-40 animate-fade-in-out-delayed"}),e.jsx("div",{className:"absolute top-1/2 -right-8 w-4 h-4 bg-green-400 dark:bg-green-600 rounded-full opacity-60 dark:opacity-40 animate-fade-in-out-delayed-2"})]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("p",{className:"text-lg md:text-xl text-gray-700 dark:text-gray-300 leading-relaxed transition-colors duration-300",children:["We are providing ",e.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"peer-to-peer live 24*7 real-time doubt solving platform"})," that connects students with expert solvers instantly."]}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-400 leading-relaxed transition-colors duration-300",children:"Join thousands of students and educators in our interactive learning community where knowledge meets opportunity."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4 pt-2",children:[e.jsxs("button",{onClick:d,className:"group bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 text-white px-6 md:px-8 py-3 md:py-4 rounded-xl font-semibold text-base md:text-lg transition-all duration-300 transform hover:scale-105 hover:shadow-xl flex items-center justify-center gap-3 shadow-lg",children:[e.jsx(Ft,{className:"w-5 h-5 md:w-6 md:h-6"}),e.jsx("span",{children:"Ask Doubt"}),e.jsx(Qe,{className:"w-4 h-4 md:w-5 md:h-5 group-hover:translate-x-1 transition-transform"})]}),e.jsxs("button",{onClick:d,className:"group bg-green-600 dark:bg-green-500 hover:bg-green-700 dark:hover:bg-green-600 text-white px-6 md:px-8 py-3 md:py-4 rounded-xl font-semibold text-base md:text-lg transition-all duration-300 transform hover:scale-105 hover:shadow-xl flex items-center justify-center gap-3 shadow-lg",children:[e.jsx(je,{className:"w-5 h-5 md:w-6 md:h-6"}),e.jsx("span",{children:"Solve Doubt"}),e.jsx(Qe,{className:"w-4 h-4 md:w-5 md:h-5 group-hover:translate-x-1 transition-transform"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4 pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 p-2 md:p-3 bg-white/50 dark:bg-gray-800/50 rounded-lg backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 transition-colors duration-300",children:[e.jsx(Ye,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Live Sessions"})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 p-2 md:p-3 bg-white/50 dark:bg-gray-800/50 rounded-lg backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 transition-colors duration-300",children:[e.jsx(Se,{className:"w-4 h-4 md:w-5 md:h-5 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Peer Learning"})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 p-2 md:p-3 bg-white/50 dark:bg-gray-800/50 rounded-lg backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 transition-colors duration-300",children:[e.jsx(ts,{className:"w-4 h-4 md:w-5 md:h-5 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Receive Incentives"})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 p-2 md:p-3 bg-white/50 dark:bg-gray-800/50 rounded-lg backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 transition-colors duration-300",children:[e.jsx(es,{className:"w-4 h-4 md:w-5 md:h-5 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Instant Help"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-8 shadow-2xl border border-white/20 dark:border-gray-700/20 transition-colors duration-300",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-500 dark:from-blue-600 dark:to-purple-600 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Se,{className:"w-10 h-10 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 transition-colors duration-300",children:"Interactive Learning"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 transition-colors duration-300",children:"Connect with peers and experts in real-time"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 transition-colors duration-300",children:"5K+"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 transition-colors duration-300",children:"Students"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 transition-colors duration-300",children:"1K+"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 transition-colors duration-300",children:"Solvers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 transition-colors duration-300",children:"10K+"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 transition-colors duration-300",children:"Doubts Solved"})]})]})]})}),e.jsx("div",{className:"absolute -bottom-4 -left-4 bg-orange-500 text-white p-4 rounded-xl shadow-lg transform -rotate-6 cursor-pointer hover:scale-110 transition-transform",onClick:()=>t(!0),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:i>0?`${i.toFixed(1)} Rating`:"4.9 Rating"})]})})]})]}),e.jsxs("div",{className:"mt-20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300",children:"What Our Users Say"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 transition-colors duration-300",children:"Read feedback from our community"})]}),e.jsxs("button",{onClick:()=>t(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center gap-2",children:[e.jsx(at,{className:"w-5 h-5"}),"Share Your Feedback"]})]}),a.length>0?e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:a.map(x=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:[1,2,3,4,5].map(c=>e.jsx(Re,{className:`w-4 h-4 ${c<=x.rating?"fill-yellow-400 text-yellow-400 dark:fill-yellow-500 dark:text-yellow-500":"text-gray-300 dark:text-gray-600"}`},c))}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3 line-clamp-3 transition-colors duration-300",children:x.feedback}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 transition-colors duration-300",children:x.user_name}),x.is_featured&&e.jsx("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-lg text-xs font-medium transition-colors duration-300",children:"Featured"})]})]},x._id))}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center border border-gray-200 dark:border-gray-700 transition-colors duration-300",children:[e.jsx(at,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 transition-colors duration-300",children:"No reviews yet. Be the first to share your experience!"})]})]}),e.jsxs("div",{className:"mt-16 text-center",children:[e.jsxs("div",{className:"flex justify-center items-center gap-8 text-sm text-gray-600 dark:text-gray-400 mb-8 transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4 text-blue-500 dark:text-blue-400"}),e.jsx("span",{children:"Verified Experts"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-500 dark:text-green-400"}),e.jsx("span",{children:"Instant Solutions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4 text-purple-500 dark:text-purple-400"}),e.jsx("span",{children:"24/7 Support"})]})]}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto transition-colors duration-300",children:"Join our community of learners and educators. Get instant help with your doubts and earn by helping others."})]})]})]}),e.jsx("footer",{className:"relative z-10 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 border-t border-gray-200 dark:border-gray-700 transition-colors duration-300 mt-20",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 md:py-16",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 md:gap-12 mb-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("h2",{className:"text-2xl font-bold text-blue-900 dark:text-blue-300 italic",children:["EDU",e.jsxs("span",{className:"relative inline-block mx-1",children:[e.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg transform rotate-3"}),e.jsx("span",{className:"relative bg-gradient-to-r from-red-400 to-orange-400 rounded-lg px-1 py-0.5 text-white font-bold text-xl",children:"F"})]}),"OYER"]})}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed",children:"Empowering students through peer-to-peer learning and real-time doubt solving."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Quick Links"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(_e,{to:"/about",className:"text-sm text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 w-fit",children:"About Us"}),e.jsx(_e,{to:"/contact",className:"text-sm text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 w-fit",children:"Contact Us"}),e.jsxs("a",{href:"mailto:edufoyer2025@gmail.com",className:"text-sm text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 w-fit flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Support"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Get in Touch"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("a",{href:"mailto:edufoyer2025@gmail.com",className:"flex items-center gap-3 text-sm md:text-base text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 group",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg group-hover:bg-blue-200 dark:group-hover:bg-blue-900/50 transition-colors",children:e.jsx(Ae,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsx("span",{className:"font-medium",children:"edufoyer2025@gmail.com"})]}),e.jsxs("a",{href:"tel:+919065343339",className:"flex items-center gap-3 text-sm md:text-base text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 group",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg group-hover:bg-blue-200 dark:group-hover:bg-blue-900/50 transition-colors",children:e.jsx(Ge,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsx("span",{className:"font-medium",children:"9065343339"})]}),e.jsxs("a",{href:"tel:+919211249724",className:"flex items-center gap-3 text-sm md:text-base text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 group",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg group-hover:bg-blue-200 dark:group-hover:bg-blue-900/50 transition-colors",children:e.jsx(Ge,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsx("span",{className:"font-medium",children:"9211249724"})]}),e.jsxs("div",{className:"flex items-start gap-3 text-sm md:text-base text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(yt,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsx("span",{className:"font-medium",children:"Jacobpura, Sector 52, Gurugram, Haryana, India- 122022"})]})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-8"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors duration-300 text-center md:text-left",children:["¬© ",new Date().getFullYear()," ",e.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Eduackhos Pvt Ltd."})," All rights reserved."]}),e.jsx("div",{className:"flex items-center gap-6 text-xs md:text-sm text-gray-500 dark:text-gray-500",children:e.jsx("span",{children:"Made with ‚ù§Ô∏è for students"})})]})]})}),e.jsx(Va,{isOpen:s,onClose:()=>{t(!1),m()}})]})},Ha=()=>{const n=he(),s=[{icon:Se,title:"Peer-to-Peer Learning",description:"Connect with fellow students and learn together in a collaborative environment."},{icon:Us,title:"24/7 Support",description:"Get instant help with your doubts anytime, anywhere from expert solvers."},{icon:ht,title:"Earn While Learning",description:"Help others solve doubts and earn coins while enhancing your knowledge."},{icon:rt,title:"Community Driven",description:"Join a vibrant community of learners and educators passionate about education."}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 transition-colors duration-300",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700 shadow-sm transition-colors duration-300",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("button",{onClick:()=>n("/"),className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Back to Home"})]}),e.jsx(Be,{className:"p-3"})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 pt-24",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-gray-800 dark:text-gray-100 mb-6 transition-colors duration-300 tracking-tight",children:["About ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400",children:"Us"})]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto transition-colors duration-300 leading-relaxed font-medium",children:"Empowering students through peer-to-peer learning and real-time doubt solving"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 md:p-12 shadow-lg mb-12 transition-colors duration-300",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 mb-6 transition-colors duration-300 tracking-tight",children:"Our Mission"}),e.jsx("p",{className:"text-base md:text-lg text-gray-700 dark:text-gray-300 leading-relaxed mb-4 transition-colors duration-300 font-normal",children:"At EDUFOYER, we believe that learning is a collaborative journey. Our mission is to create a platform where students can learn together, help each other, and earn while doing so. We're building a community-driven educational ecosystem that breaks down barriers to learning."}),e.jsx("p",{className:"text-base md:text-lg text-gray-700 dark:text-gray-300 leading-relaxed transition-colors duration-300 font-normal",children:"We envision a world where every student has access to instant help, where knowledge is shared freely, and where helping others is rewarded. Our platform connects students with skilled peers who are experts in their respective domains, offering real-time support that makes learning more accessible and engaging."})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-12",children:s.map((t,a)=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(t.icon,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-3 transition-colors duration-300 tracking-tight",children:t.title}),e.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400 transition-colors duration-300 leading-relaxed",children:t.description})]})]})},a))}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-700 dark:to-purple-700 rounded-2xl p-8 md:p-12 text-white mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-10 text-center tracking-tight",children:"Our Impact"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2 tracking-tight",children:"5K+"}),e.jsx("div",{className:"text-blue-100 text-sm md:text-base font-medium",children:"Active Students"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2 tracking-tight",children:"1K+"}),e.jsx("div",{className:"text-blue-100 text-sm md:text-base font-medium",children:"Expert Solvers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2 tracking-tight",children:"10K+"}),e.jsx("div",{className:"text-blue-100 text-sm md:text-base font-medium",children:"Doubts Solved"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2 tracking-tight",children:"24/7"}),e.jsx("div",{className:"text-blue-100 text-sm md:text-base font-medium",children:"Support Available"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 md:p-12 shadow-lg transition-colors duration-300",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 mb-8 transition-colors duration-300 tracking-tight",children:"Our Values"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-blue-600 dark:bg-blue-400 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300 tracking-tight",children:"Accessibility"}),e.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400 transition-colors duration-300 leading-relaxed",children:"We believe education should be accessible to everyone, regardless of time or location."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-purple-600 dark:bg-purple-400 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300 tracking-tight",children:"Collaboration"}),e.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400 transition-colors duration-300 leading-relaxed",children:"Learning together makes us stronger. We foster a collaborative learning environment."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-green-600 dark:bg-green-400 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300 tracking-tight",children:"Innovation"}),e.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400 transition-colors duration-300 leading-relaxed",children:"We continuously innovate to provide the best learning experience for our community."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-orange-600 dark:bg-orange-400 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300 tracking-tight",children:"Excellence"}),e.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400 transition-colors duration-300 leading-relaxed",children:"We strive for excellence in everything we do, ensuring quality education for all."})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 md:p-12 shadow-lg transition-colors duration-300",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 mb-8 transition-colors duration-300 tracking-tight text-center",children:"Contact Us"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4 transition-colors",children:e.jsx(Ae,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300",children:"Email"}),e.jsx("a",{href:"mailto:edufoyer2025@gmail.com",className:"text-base text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"edufoyer2025@gmail.com"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4 transition-colors",children:e.jsx(Ge,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300",children:"Phone"}),e.jsx("a",{href:"tel:+919065343339",className:"text-base text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"9065343339"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4 transition-colors",children:e.jsx(yt,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300",children:"Address"}),e.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400 transition-colors duration-300",children:"Jacobpura, Sector 52, Gurugram, Haryana, India- 122022"})]})]})]})]})]})},Qa=()=>{const n=he(),[s,t]=o.useState({name:"",email:"",subject:"",message:""}),[a,r]=o.useState(!1),[i,l]=o.useState(null),m=c=>{const{name:f,value:b}=c.target;t(y=>Z(M({},y),{[f]:b}))},d=c=>g(I,null,function*(){c.preventDefault(),r(!0),l(null),setTimeout(()=>{r(!1),l("success"),t({name:"",email:"",subject:"",message:""}),setTimeout(()=>l(null),5e3)},1500)}),x=[{icon:Ae,title:"Email",content:"edufoyer2025@gmail.com",link:"mailto:edufoyer2025@gmail.com"},{icon:Ge,title:"Phone",content:"9065343339",link:"tel:+919065343339"},{icon:Ge,title:"Phone",content:"9211249724",link:"tel:+919211249724"},{icon:yt,title:"Address",content:"Jacobpura, Sector 52, Gurugram, Haryana, India- 122022",link:null}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 transition-colors duration-300",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700 shadow-sm transition-colors duration-300",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[e.jsxs("button",{onClick:()=>n("/"),className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Back to Home"})]}),e.jsx(Be,{className:"p-3"})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 pt-24",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-gray-800 dark:text-gray-100 mb-6 transition-colors duration-300 tracking-tight",children:["Contact ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400",children:"Us"})]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto transition-colors duration-300 leading-relaxed font-medium",children:"Have questions? We'd love to hear from you. Send us a message and we'll respond as soon as possible."})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1 space-y-6",children:x.map((c,f)=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg transition-colors duration-300",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(c.icon,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300 tracking-tight",children:c.title}),c.link?e.jsx("a",{href:c.link,className:"text-base text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors leading-relaxed",children:c.content}):e.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400 transition-colors duration-300 leading-relaxed",children:c.content})]})]})},f))}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8 shadow-lg transition-colors duration-300",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 transition-colors duration-300 tracking-tight",children:"Send us a Message"}),i==="success"&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:e.jsx("p",{className:"text-green-600 dark:text-green-400 text-sm",children:"Thank you for your message! We'll get back to you soon."})}),e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm md:text-base font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-300",children:[e.jsx(Ce,{className:"w-4 h-4 inline mr-2"}),"Your Name"]}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:m,required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-base",placeholder:"Enter your name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm md:text-base font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-300",children:[e.jsx(Ae,{className:"w-4 h-4 inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:m,required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-base",placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm md:text-base font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-300",children:[e.jsx(at,{className:"w-4 h-4 inline mr-2"}),"Subject"]}),e.jsx("input",{type:"text",name:"subject",value:s.subject,onChange:m,required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-base",placeholder:"What is this regarding?"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm md:text-base font-semibold text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-300",children:[e.jsx(Fe,{className:"w-4 h-4 inline mr-2"}),"Message"]}),e.jsx("textarea",{name:"message",value:s.message,onChange:m,required:!0,rows:6,className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none text-base leading-relaxed",placeholder:"Tell us more about your inquiry..."})]}),e.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx($t,{className:"w-5 h-5"}),e.jsx("span",{children:"Send Message"})]})})]})]})})]})]})]})},Xa=()=>{const[n,s]=o.useState({email:"",name:"",specialities:[""],experience:"beginner",bio:""}),[t,a]=o.useState(!1),[r,i]=o.useState(""),[l,m]=o.useState(""),[d,x]=o.useState(null),[c,f]=o.useState(!0),b=he();if(o.useEffect(()=>{(()=>g(I,null,function*(){try{if(!ae.isAuthenticated()){b("/auth");return}const h=yield ae.getProfile();if(x(h),h.role!=="admin"){b("/dashboard");return}}catch(h){console.error("Admin access check failed:",h),b("/auth")}finally{f(!1)}}))()},[b]),c)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Checking admin access..."})]})});if(!d||d.role!=="admin")return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have admin privileges to access this page."}),e.jsx("button",{onClick:()=>b("/dashboard"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Go to Dashboard"})]})});const y=R=>{const{name:h,value:p}=R.target;s(T=>Z(M({},T),{[h]:p}))},u=(R,h)=>{const p=[...n.specialities];p[R]=h,s(T=>Z(M({},T),{specialities:p}))},j=()=>{s(R=>Z(M({},R),{specialities:[...R.specialities,""]}))},N=R=>{if(n.specialities.length>1){const h=n.specialities.filter((p,T)=>T!==R);s(p=>Z(M({},p),{specialities:h}))}},C=R=>g(I,null,function*(){R.preventDefault(),a(!0),m(""),i("");try{const h=n.specialities.filter(T=>T.trim()!=="");if(h.length===0){m("At least one speciality is required"),a(!1);return}const p=yield ae.onboardSolver(Z(M({},n),{specialities:h}));p.success?(i(`Solver onboarded successfully! ${p.data.emailSent?"Onboarding email sent.":"Email sending failed."}`),s({email:"",name:"",specialities:[""],experience:"beginner",bio:""})):m(p.message||"Failed to onboard solver")}catch(h){m("Network error. Please try again."),console.error("Onboarding error:",h)}finally{a(!1)}});return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel - Solver Onboarding"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Onboard new solvers by email with their subject specialities"})]}),e.jsxs("form",{onSubmit:C,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"solver@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject Specialities *"}),n.specialities.map((R,h)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:R,onChange:p=>u(h,p.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Mathematics, Physics, Chemistry",required:!0}),n.specialities.length>1&&e.jsx("button",{type:"button",onClick:()=>N(h),className:"px-3 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Remove"})]},h)),e.jsx("button",{type:"button",onClick:j,className:"mt-2 px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Add Speciality"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"experience",className:"block text-sm font-medium text-gray-700 mb-2",children:"Experience Level"}),e.jsxs("select",{id:"experience",name:"experience",value:n.experience,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"}),e.jsx("option",{value:"expert",children:"Expert"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio (Optional)"}),e.jsx("textarea",{id:"bio",name:"bio",value:n.bio,onChange:y,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Brief description of expertise and background..."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:t,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Onboarding...":"Onboard Solver"})}),r&&e.jsx("div",{className:"p-4 bg-green-100 border border-green-400 text-green-700 rounded-md",children:r}),l&&e.jsx("div",{className:"p-4 bg-red-100 border border-red-400 text-red-700 rounded-md",children:l})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"How it works:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ The solver will receive an onboarding email with temporary login credentials"}),e.jsx("li",{children:"‚Ä¢ They can immediately start helping students with doubts in their speciality subjects"}),e.jsx("li",{children:"‚Ä¢ The solver should change their password after first login for security"}),e.jsx("li",{children:"‚Ä¢ Admin can manage solver access and specialities from this panel"})]})]})]})})})},Wt={email:"eduackhos@gmail.com",password:"123456"},Yt="admin_authenticated",Za=()=>{const[n,s]=o.useState(""),[t,a]=o.useState(""),[r,i]=o.useState(""),[l,m]=o.useState("login"),[d,x]=o.useState(!1),[c,f]=o.useState(""),[b,y]=o.useState(!1),u=he();o.useEffect(()=>{localStorage.getItem(Yt)==="true"&&u("/admin/dashboard",{replace:!0})},[u]);const j=h=>g(I,null,function*(){h.preventDefault(),f(""),x(!0);try{if(n!==Wt.email||t!==Wt.password){try{const P=yield ae.login(n,t);if(P&&P.user&&P.user.role==="admin"){const H=yield(yield fetch("/api/admin/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:t})})).json();H.success?(y(!0),m("otp")):f(H.message||"Failed to send OTP. Please try again.");return}}catch(P){}f("Invalid admin credentials."),x(!1);return}const T=yield(yield fetch("/api/admin/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:t})})).json();T.success?(y(!0),m("otp")):f(T.message||"Failed to send OTP. Please try again.")}catch(p){f("Network error. Please check your connection and try again.")}finally{x(!1)}}),N=h=>g(I,null,function*(){h.preventDefault(),f(""),x(!0);try{const T=yield(yield fetch("/api/admin/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,otp:r})})).json();T.success?(localStorage.setItem(Yt,"true"),localStorage.setItem("token","admin-token-"+Date.now()),u("/admin/dashboard")):f(T.message||"Invalid OTP. Please try again.")}catch(p){f("Network error. Please check your connection and try again.")}finally{x(!1)}}),C=()=>g(I,null,function*(){f(""),x(!0),i("");try{const p=yield(yield fetch("/api/admin/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:t})})).json();p.success?(f(""),alert("OTP resent successfully!")):f(p.message||"Failed to resend OTP. Please try again.")}catch(h){f("Network error. Please check your connection and try again.")}finally{x(!1)}}),R=()=>{m("login"),i(""),f(""),y(!1)};return l==="otp"?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center px-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-72 h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-1/2 right-1/4 w-72 h-72 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"}),e.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-72 h-72 bg-indigo-300 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"}),e.jsxs("div",{className:"w-full max-w-md bg-white/80 backdrop-blur-xl border border-white/50 rounded-2xl shadow-xl p-8 relative z-10 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(Ae,{className:"text-blue-600",size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"OTP Verification"}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["OTP sent to ",n]})]})]}),b&&e.jsx("div",{className:"mb-4 p-3 rounded-xl bg-green-50 text-green-700 border border-green-200 text-sm",children:"OTP has been sent to your email. Please check your inbox."}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Enter OTP"}),e.jsx("input",{id:"otp",type:"text",value:r,onChange:h=>i(h.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,className:"w-full bg-gray-50 border-2 border-gray-200 text-gray-900 rounded-xl px-4 py-3 text-center text-2xl tracking-widest focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",autoFocus:!0,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"6-digit code sent to your email"})]}),c&&e.jsx("div",{className:"p-3 rounded-xl bg-red-50 text-red-700 border border-red-200 text-sm",children:c}),e.jsx("button",{type:"submit",disabled:d||r.length!==6,className:"w-full bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 hover:from-indigo-700 hover:via-purple-700 hover:to-pink-700 text-white rounded-xl px-4 py-3 font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] disabled:transform-none",children:d?"Verifying...":"Verify OTP"}),e.jsxs("div",{className:"flex items-center justify-between text-sm mt-4",children:[e.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Te,{size:16}),"Back to Login"]}),e.jsx("button",{type:"button",onClick:C,disabled:d,className:"text-blue-600 hover:text-blue-700 disabled:opacity-50 transition-colors",children:"Resend OTP"})]})]})]})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center px-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-72 h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-1/2 right-1/4 w-72 h-72 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"}),e.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-72 h-72 bg-indigo-300 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"}),e.jsxs("div",{className:"w-full max-w-md bg-white/80 backdrop-blur-xl border border-white/50 rounded-2xl shadow-xl p-8 relative z-10 animate-fade-in",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Admin Login"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Sign in to access the admin dashboard"}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:n,onChange:h=>s(h.target.value),required:!0,className:"w-full bg-gray-50 border-2 border-gray-200 text-gray-900 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",placeholder:"admin@nls.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),e.jsx("input",{id:"password",type:"password",value:t,onChange:h=>a(h.target.value),required:!0,className:"w-full bg-gray-50 border-2 border-gray-200 text-gray-900 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"})]}),c&&e.jsx("div",{className:"p-3 rounded-xl bg-red-50 text-red-700 border border-red-200 text-sm",children:c}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 hover:from-indigo-700 hover:via-purple-700 hover:to-pink-700 text-white rounded-xl px-4 py-3 font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] disabled:transform-none",children:d?"Sending OTP...":"Send OTP"})]})]})]})},er=()=>{const[n,s]=o.useState(null),[t,a]=o.useState(!0),r=he();return o.useEffect(()=>{(()=>g(I,null,function*(){try{const l=localStorage.getItem("adminBypass")==="true",m=localStorage.getItem("admin_authenticated")==="true";if(!ae.isAuthenticated()&&!l&&!m){r("/admin/login");return}let d=null;if(l||m)d={role:"admin"};else try{d=yield ae.getProfile()}catch(x){if(m)d={role:"admin"};else throw x}if(s(d),d.role!=="admin"){r("/dashboard");return}}catch(l){console.error("Admin access check failed:",l),localStorage.getItem("admin_authenticated")==="true"?s({role:"admin"}):r("/admin/login")}finally{a(!1)}}))()},[r]),t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-xl p-8 rounded-2xl shadow-xl border border-white/50 animate-fade-in",children:[e.jsx(be,{className:"animate-spin h-12 w-12 text-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 text-lg font-medium",children:"Checking admin access..."})]})}):!n||n.role!=="admin"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-xl p-8 rounded-2xl shadow-xl border border-white/50 animate-fade-in",children:[e.jsx(Ms,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-700 mb-6",children:"You don't have admin privileges to access this page."}),e.jsx("button",{onClick:()=>r("/dashboard"),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:"Go to Dashboard"})]})}):null},pe="/api/admin";class tr{constructor(){}getToken(){return localStorage.getItem("token")}makeAuthenticatedRequest(a){return g(this,arguments,function*(s,t={}){const r=this.getToken();if(console.log("üîê AdminService - Token check:",r?"Token found":"No token"),console.log("üîê AdminService - Token preview:",r?r.substring(0,20)+"...":"No token"),!r)throw new Error("No authentication token found");const i={headers:M({"Content-Type":"application/json",Authorization:`Bearer ${r}`},t.headers)};console.log("üì° AdminService - Making request to:",s),console.log("üì° AdminService - Headers:",i.headers);try{const l=yield fetch(s,M(M({},i),t));if(console.log("üì° AdminService - Response status:",l.status),console.log("üì° AdminService - Response ok:",l.ok),l.status===401)throw console.error("‚ùå AdminService - Authentication failed (401)"),new Error("Authentication failed");return l}catch(l){throw console.error("‚ùå AdminService - Network request failed:",l),l.name==="TypeError"&&l.message.includes("fetch")?new Error("Network error: Unable to connect to server"):l}})}registerUserAsSolver(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${pe}/register-solver`,{method:"POST",body:JSON.stringify(s)}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to register user as solver");return a}catch(t){throw console.error("Register user as solver error:",t),t}})}getAllUsers(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(`${pe}/users`),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch users");return t.data}catch(s){throw console.error("Get all users error:",s),s}})}getAllSolvers(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(`${pe}/solvers`),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch solvers");return t.data}catch(s){throw console.error("Get all solvers error:",s),s}})}createDoubtPack(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${pe}/doubt-packs`,{method:"POST",body:JSON.stringify(s)}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to create doubt pack");return a.data}catch(t){throw console.error("Create doubt pack error:",t),t}})}getDoubtPacks(s=!0){return g(this,null,function*(){try{const t=s!==void 0?`?isActive=${s}`:"",a=yield fetch(`${pe}/doubt-packs${t}`,{method:"GET",headers:{"Content-Type":"application/json"}}),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to fetch doubt packs");return r.data||[]}catch(t){throw console.error("Get doubt packs error:",t),t}})}deleteDoubtPack(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${pe}/doubt-packs/${s}`,{method:"DELETE"}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to delete doubt pack");return!0}catch(t){throw console.error("Delete doubt pack error:",t),t}})}getSolverRequests(s=null){return g(this,null,function*(){try{const t=s?`?status=${s}`:"",a=yield this.makeAuthenticatedRequest(`${pe}/solver-requests${t}`),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to fetch solver requests");return r.data}catch(t){throw console.error("Get solver requests error:",t),t}})}approveSolverRequest(s,t=""){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${pe}/solver-requests/${s}/approve`,{method:"POST",body:JSON.stringify({admin_notes:t})}),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to approve solver request");return r}catch(a){throw console.error("Approve solver request error:",a),a}})}rejectSolverRequest(s,t=""){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${pe}/solver-requests/${s}/reject`,{method:"POST",body:JSON.stringify({admin_notes:t})}),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to reject solver request");return r}catch(a){throw console.error("Reject solver request error:",a),a}})}getAdminNotifications(){return g(this,null,function*(){try{const s=yield this.makeAuthenticatedRequest(`${pe}/notifications`),t=yield s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch notifications");return t.data||[]}catch(s){throw console.error("Get admin notifications error:",s),s}})}markNotificationAsRead(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${pe}/notifications/${s}/read`,{method:"POST"}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to mark notification as read");return a}catch(t){throw console.error("Mark notification as read error:",t),t}})}recordDoubtPackPurchase(s){return g(this,null,function*(){try{const t=yield fetch(`${pe}/doubt-pack-purchases`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to record purchase");return a}catch(t){throw console.error("Record purchase error:",t),t}})}getDoubtPackPurchases(s=50,t=0){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${pe}/doubt-pack-purchases?limit=${s}&skip=${t}`),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to fetch purchases");return r.data||[]}catch(a){throw console.error("Get purchases error:",a),a}})}getRatingsFeedback(){return g(this,arguments,function*(s={}){try{const t=new URLSearchParams;s.approved!==void 0&&t.append("approved",s.approved),s.featured!==void 0&&t.append("featured",s.featured),s.limit&&t.append("limit",s.limit),s.skip&&t.append("skip",s.skip);const a=yield this.makeAuthenticatedRequest(`${pe}/ratings-feedback?${t.toString()}`),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to fetch ratings");return r}catch(t){throw console.error("Get ratings error:",t),t}})}approveRating(s,t=!1){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${pe}/ratings-feedback/${s}/approve`,{method:"POST",body:JSON.stringify({featured:t})}),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to approve rating");return r}catch(a){throw console.error("Approve rating error:",a),a}})}deleteRating(s){return g(this,null,function*(){try{const t=yield this.makeAuthenticatedRequest(`${pe}/ratings-feedback/${s}`,{method:"DELETE"}),a=yield t.json();if(!t.ok)throw new Error(a.message||"Failed to delete rating");return a}catch(t){throw console.error("Delete rating error:",t),t}})}getWithdrawals(s=null){return g(this,null,function*(){try{const t=s?`${pe}/withdrawals?status=${s}`:`${pe}/withdrawals`,a=yield this.makeAuthenticatedRequest(t),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to fetch withdrawals");return r.data}catch(t){throw console.error("Get withdrawals error:",t),t}})}approveWithdrawal(s,t=""){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${pe}/withdrawals/${s}/approve`,{method:"POST",body:JSON.stringify({admin_notes:t})}),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to approve withdrawal");return r}catch(a){throw console.error("Approve withdrawal error:",a),a}})}disburseWithdrawal(s,t=""){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${pe}/withdrawals/${s}/disburse`,{method:"POST",body:JSON.stringify({admin_notes:t})}),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to disburse withdrawal");return r}catch(a){throw console.error("Disburse withdrawal error:",a),a}})}rejectWithdrawal(s,t=""){return g(this,null,function*(){try{const a=yield this.makeAuthenticatedRequest(`${pe}/withdrawals/${s}/reject`,{method:"POST",body:JSON.stringify({admin_notes:t})}),r=yield a.json();if(!a.ok)throw new Error(r.message||"Failed to reject withdrawal");return r}catch(a){throw console.error("Reject withdrawal error:",a),a}})}}const ve=new tr,sr=({defaultOpen:n=!1,inline:s=!1,onSolverRegistered:t})=>{const[a,r]=o.useState(n),[i,l]=o.useState({name:"",email:"",subjects:[],experience:"",bio:""}),[m,d]=o.useState(!1),[x,c]=o.useState(""),f=["Operating Systems","Artificial Intelligence","Database Management Systems","Data Structures and Algorithms","Java","MERN","Python","Machine Learning","Web Development","Mobile Development"],b=N=>{const{name:C,value:R}=N.target;l(h=>Z(M({},h),{[C]:R}))},y=N=>{l(C=>Z(M({},C),{subjects:C.subjects.includes(N)?C.subjects.filter(R=>R!==N):[...C.subjects,N]}))},u=N=>g(I,null,function*(){if(N.preventDefault(),!i.name||!i.email||i.subjects.length===0){c("Please fill all required fields and select at least one subject.");return}d(!0),c("");try{const C=yield ve.registerUserAsSolver(i);C.success?(c(`Successfully registered ${i.email} as a solver! They will now receive notifications for doubts in their subjects.`),l({name:"",email:"",subjects:[],experience:"",bio:""}),setTimeout(()=>{c("")},5e3),t&&t()):c(C.message||"Registration failed. Please try again.")}catch(C){console.error("Registration error:",C),c(C.message||"Registration failed. Please try again.")}finally{d(!1)}}),j=()=>{l({name:"",email:"",subjects:[],experience:"",bio:""}),c("")};return!a&&!s?e.jsxs("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-purple-500 border border-purple-600 text-white rounded-md font-medium hover:bg-purple-600 flex items-center gap-2 transition-colors text-sm",children:[e.jsx(xt,{className:"w-4 h-4"}),"Register User as Solver"]}):s?e.jsx("div",{className:"w-full",children:e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700",children:"Full Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:b,className:"w-full bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 text-gray-900 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",placeholder:"Enter the user's full name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700",children:"Email Address *"}),e.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:b,className:"w-full bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 text-gray-900 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",placeholder:"Enter the user's email address",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The user will receive notifications at this email address."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Select Expertise Areas * ",e.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["(",i.subjects.length," selected)"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:f.map(N=>e.jsxs("label",{className:`flex items-center gap-2 p-3 border-2 rounded-xl cursor-pointer transition-all ${i.subjects.includes(N)?"bg-gradient-to-br from-purple-50 to-indigo-50 border-purple-500 text-purple-700 shadow-md":"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200 hover:border-purple-300 hover:bg-purple-50/50"}`,children:[e.jsx("input",{type:"checkbox",checked:i.subjects.includes(N),onChange:()=>y(N),className:"w-4 h-4 text-purple-600 focus:ring-purple-500 rounded"}),e.jsx("span",{className:"text-sm font-medium flex-1",children:N})]},N))}),e.jsx("p",{className:"text-xs text-gray-500",children:"The user will receive notifications for doubts in these subjects."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"experience",className:"block text-sm font-semibold text-gray-700",children:"Experience Level"}),e.jsxs("select",{id:"experience",name:"experience",value:i.experience,onChange:b,className:"w-full bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 text-gray-900 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",children:[e.jsx("option",{value:"",children:"Select experience level"}),e.jsx("option",{value:"beginner",children:"Beginner (0-1 years)"}),e.jsx("option",{value:"intermediate",children:"Intermediate (1-3 years)"}),e.jsx("option",{value:"advanced",children:"Advanced (3-5 years)"}),e.jsx("option",{value:"expert",children:"Expert (5+ years)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"bio",className:"block text-sm font-semibold text-gray-700",children:"Bio (Optional)"}),e.jsx("textarea",{id:"bio",name:"bio",value:i.bio,onChange:b,placeholder:"Tell us about the user's background and expertise...",className:"w-full min-h-[100px] bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 text-gray-900 rounded-xl px-4 py-3 placeholder:text-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none resize-vertical transition-all"})]}),x&&e.jsxs("div",{className:`p-4 rounded-xl flex items-start gap-3 ${x.includes("Successfully")?"bg-green-50 text-green-700 border-2 border-green-200":"bg-red-50 text-red-700 border-2 border-red-200"}`,children:[x.includes("Successfully")?e.jsx(te,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}):e.jsx(de,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm flex-1",children:x})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:j,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all",children:"Clear Form"}),e.jsx("button",{type:"submit",disabled:m,className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 hover:from-indigo-700 hover:via-purple-700 hover:to-pink-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] disabled:transform-none flex items-center justify-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4 animate-spin"}),"Registering..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"w-5 h-5"}),"Register as Solver"]})})]})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white text-gray-800 border border-gray-200 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5 text-purple-600"}),"Admin: Register User as Solver"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Register any user as a solver by entering their email address and expertise areas."})]}),e.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(de,{className:"w-5 h-5"})})]})}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-6 overflow-y-auto max-h-[60vh]",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 text-sm font-medium",children:"Full Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:b,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none",placeholder:"Enter the user's full name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium",children:"Email Address *"}),e.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:b,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none",placeholder:"Enter the user's email address",required:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:"The user will receive notifications at this email address."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-medium",children:"Select Expertise Areas *"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:f.map(N=>e.jsxs("label",{className:`flex items-center space-x-2 p-3 border rounded-md cursor-pointer transition-colors ${i.subjects.includes(N)?"bg-purple-50 border-purple-500 text-purple-700":"bg-gray-50 border-gray-300 hover:bg-gray-100"}`,children:[e.jsx("input",{type:"checkbox",checked:i.subjects.includes(N),onChange:()=>y(N),className:"text-purple-500 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-medium",children:N})]},N))}),e.jsx("p",{className:"text-xs text-gray-500",children:"The user will receive notifications for doubts in these subjects."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"experience",className:"block text-gray-700 text-sm font-medium",children:"Experience Level"}),e.jsxs("select",{id:"experience",name:"experience",value:i.experience,onChange:b,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none",children:[e.jsx("option",{value:"",children:"Select experience level"}),e.jsx("option",{value:"beginner",children:"Beginner (0-1 years)"}),e.jsx("option",{value:"intermediate",children:"Intermediate (1-3 years)"}),e.jsx("option",{value:"advanced",children:"Advanced (3-5 years)"}),e.jsx("option",{value:"expert",children:"Expert (5+ years)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"bio",className:"block text-gray-700 text-sm font-medium",children:"Bio (Optional)"}),e.jsx("textarea",{id:"bio",name:"bio",value:i.bio,onChange:b,placeholder:"Tell us about the user's background and expertise...",className:"w-full min-h-[80px] bg-gray-50 border border-gray-300 text-gray-900 rounded-md px-3 py-2 placeholder:text-gray-500 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none resize-vertical"})]}),x&&e.jsxs("div",{className:`p-3 rounded-md flex items-center space-x-2 ${x.includes("Successfully")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[x.includes("Successfully")?e.jsx(te,{className:"w-4 h-4"}):e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:x})]})]}),e.jsxs("div",{className:"border-t border-gray-200 p-6 flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{r(!1),j()},className:"border border-gray-300 text-gray-700 hover:bg-gray-50 hover:text-gray-900 bg-white rounded-md px-4 py-2 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",onClick:u,disabled:m,className:"bg-purple-500 border border-purple-600 hover:bg-purple-600 hover:border-purple-700 text-white rounded-md px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Registering...":"Register as Solver"})]})]})})},ar=[{id:"small",name:"Small",count:""},{id:"medium",name:"Medium",count:""},{id:"large",name:"Large",count:""}],rr=({className:n="",defaultOpen:s=!1,onDoubtPackCreated:t})=>{const[a,r]=o.useState(s),[i,l]=o.useState(s?1:0),[m,d]=o.useState({totalDoubts:"",categories:[]}),[x,c]=o.useState(""),[f,b]=o.useState(""),[y,u]=o.useState([]),[j,N]=o.useState(!1),[C,R]=o.useState(!0),h=()=>g(I,null,function*(){try{R(!0);const U=(yield ve.getDoubtPacks(!0)).map(v=>({id:v._id,totalDoubts:v.totalDoubts,categories:v.categories,createdAt:new Date(v.createdAt).toLocaleString()}));u(U)}catch(S){console.error("Error loading doubt packs:",S);const U=localStorage.getItem("admin_doubt_packs");if(U)try{const v=JSON.parse(U);u(v)}catch(v){console.error("Error loading from localStorage:",v)}}finally{R(!1)}});o.useEffect(()=>{h()},[]);const p=()=>{r(S=>{const U=!S;return l(U?1:0),d({totalDoubts:"",categories:[]}),c(""),b(""),U})},T=S=>{Number(S)<0||d(U=>Z(M({},U),{totalDoubts:S}))},P=()=>{const S=parseInt(m.totalDoubts,10);if(!S||S<=0){c("Please enter total doubts greater than zero");return}c(""),d(U=>Z(M({},U),{categories:U.categories.length?U.categories:ar})),l(2)},A=(S,U,v)=>{d(E=>{const F=E.categories.map((z,$)=>$===S?Z(M({},z),{[U]:v}):z);return Z(M({},E),{categories:F})})},H=()=>{d(S=>Z(M({},S),{categories:[...S.categories,{id:`${Date.now()}-${Math.random()}`,name:"",count:""}]}))},k=S=>{d(U=>Z(M({},U),{categories:U.categories.filter((v,E)=>E!==S)}))},_=()=>g(I,null,function*(){c(""),b(""),N(!0);const S=parseInt(m.totalDoubts,10);if(!S||S<=0){c("Total doubts must be greater than zero"),l(1),N(!1);return}const U=(m.categories||[]).map(E=>{var F;return{name:((F=E.name)==null?void 0:F.trim())||"",count:Number(E.count)||0}}).filter(E=>E.name&&E.count>0);if(!U.length){c("Please add at least one category with a valid count"),N(!1);return}if(U.reduce((E,F)=>E+F.count,0)!==S){c("Category counts must add up to the total number of doubts"),N(!1);return}try{const E=yield ve.createDoubtPack({totalDoubts:S,categories:U}),z=[{id:E._id,totalDoubts:E.totalDoubts,categories:E.categories,createdAt:new Date(E.createdAt).toLocaleString()},...y];u(z);try{localStorage.setItem("admin_doubt_packs",JSON.stringify(z))}catch($){console.error("Error saving to localStorage:",$)}b("Doubts pack added successfully!"),d({totalDoubts:"",categories:[]}),l(1),t&&t()}catch(E){console.error("Error saving doubt pack:",E),c(E.message||"Failed to save doubt pack. Please try again.")}finally{N(!1)}}),W=S=>g(I,null,function*(){if(window.confirm("Are you sure you want to delete this doubt pack?")){N(!0);try{yield ve.deleteDoubtPack(S),u(U=>U.filter(v=>v.id!==S)),b("Doubt pack deleted successfully!"),setTimeout(()=>b(""),3e3),t&&t()}catch(U){console.error("Error deleting doubt pack:",U),c(U.message||"Failed to delete doubt pack."),setTimeout(()=>c(""),5e3)}finally{N(!1)}}});return a?e.jsxs("div",{className:`space-y-6 ${n}`,children:[f&&e.jsxs("div",{className:"p-4 rounded-xl bg-green-50 text-green-700 border-2 border-green-200 flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsx("span",{children:f})]}),x&&e.jsxs("div",{className:"p-4 rounded-xl bg-red-50 text-red-700 border-2 border-red-200 flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),e.jsx("span",{children:x})]}),i===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Total Number of Doubts *"}),e.jsx("input",{type:"number",value:m.totalDoubts,onChange:S=>T(S.target.value),className:"w-full bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 text-gray-900 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",placeholder:"Enter total number of doubts",min:"1",required:!0})]}),e.jsx("button",{onClick:P,className:"w-full px-6 py-3 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 hover:from-indigo-700 hover:via-purple-700 hover:to-pink-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all transform hover:scale-[1.02]",children:"Next: Add Categories"})]}),i===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Categories (Total: ",m.totalDoubts,")"]}),e.jsxs("button",{onClick:H,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(_t,{className:"w-4 h-4"}),"Add Category"]})]}),e.jsx("div",{className:"space-y-3",children:m.categories.map((S,U)=>e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("input",{type:"text",value:S.name,onChange:v=>A(U,"name",v.target.value),className:"flex-1 bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 text-gray-900 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",placeholder:"Category name (e.g., Small, Medium, Large)"}),e.jsx("input",{type:"number",value:S.count,onChange:v=>A(U,"count",v.target.value),className:"w-32 bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 text-gray-900 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-all",placeholder:"Count",min:"0"}),m.categories.length>1&&e.jsx("button",{onClick:()=>k(U),className:"p-3 bg-red-100 text-red-600 rounded-xl hover:bg-red-200 transition-colors",children:e.jsx(qs,{className:"w-4 h-4"})})]},U))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>l(1),className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all flex items-center justify-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4"}),"Back"]}),e.jsx("button",{onClick:_,disabled:j,className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 hover:from-indigo-700 hover:via-purple-700 hover:to-pink-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] disabled:transform-none flex items-center justify-center gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4"}),"Create Pack"]})})]})]}),y.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Existing Doubt Packs"}),C?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(be,{className:"w-6 h-6 text-indigo-600 animate-spin"})}):e.jsx("div",{className:"space-y-3",children:y.map(S=>e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:["Total: ",S.totalDoubts," doubts"]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:S.categories.map((U,v)=>e.jsxs("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg text-sm font-medium",children:[U.name,": ",U.count]},v))}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Created: ",S.createdAt]})]}),e.jsx("button",{onClick:()=>W(S.id),className:"px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",children:"Delete"})]},S.id))})]})]}):e.jsxs("button",{onClick:p,className:"w-full px-6 py-3 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 hover:from-indigo-700 hover:via-purple-700 hover:to-pink-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl flex items-center justify-center gap-2 transition-all transform hover:scale-[1.02]",children:[e.jsx(ss,{className:"w-5 h-5"}),"Create New Doubt Pack"]})},nr=({onRequestProcessed:n})=>{const[s,t]=o.useState([]),[a,r]=o.useState(!0),[i,l]=o.useState("pending"),[m,d]=o.useState(null),[x,c]=o.useState("");o.useEffect(()=>{f();const h=setInterval(f,1e4);return()=>clearInterval(h)},[i]);const f=()=>g(I,null,function*(){try{r(!0),c("");const h=i==="all"?null:i,p=yield ve.getSolverRequests(h);t(p||[])}catch(h){console.error("Error fetching solver requests:",h),c("Failed to load solver requests")}finally{r(!1)}}),b=h=>g(I,null,function*(){try{d(h),yield ve.approveSolverRequest(h),yield f(),n&&n()}catch(p){alert(p.message||"Failed to approve request")}finally{d(null)}}),y=h=>g(I,null,function*(){const p=prompt("Enter rejection reason (optional):");if(p!==null)try{d(h),yield ve.rejectSolverRequest(h,p||""),yield f(),n&&n()}catch(T){alert(T.message||"Failed to reject request")}finally{d(null)}}),u=h=>new Date(h).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),j=h=>{const p={pending:"bg-yellow-100 text-yellow-700 border-yellow-200",approved:"bg-green-100 text-green-700 border-green-200",rejected:"bg-red-100 text-red-700 border-red-200"};return p[h]||p.pending},N=h=>{if(!h)return null;let p=h.replace(/\\/g,"/");if(p.match(/^[A-Z]:/i)){if(p.includes("uploads/")){const T=p.split("uploads/");if(T.length>1)return`/uploads/${T[T.length-1]}`}if(p.includes("solver-requests/")){const T=p.split("solver-requests/");if(T.length>1)return`/uploads/solver-requests/${T[T.length-1]}`}return console.error("Unable to extract relative path from:",h),null}if(p.includes("uploads/")){const T=p.split("uploads/");return`/uploads/${T[T.length-1]}`}else if(p.includes("solver-requests/")){const T=p.split("solver-requests/");return`/uploads/solver-requests/${T[T.length-1]}`}else if(p.startsWith("/")){if(p.startsWith("/uploads"))return p}else return p.includes("resume-")||p.includes("marksheet-")?`/uploads/solver-requests/${p}`:`/uploads/${p}`;return`/uploads/solver-requests/${p}`},C=(h,p)=>{const T=N(h);if(!T){alert("File not available");return}window.open(T,"_blank")},R=(h,p)=>g(I,null,function*(){const T=N(h);if(!T){alert("File not available");return}try{const P=yield fetch(T);if(!P.ok)throw new Error("File not found");const A=yield P.blob(),H=window.URL.createObjectURL(A),k=document.createElement("a");k.href=H,k.download=p||"file",document.body.appendChild(k),k.click(),document.body.removeChild(k),window.URL.revokeObjectURL(H)}catch(P){console.error("Download error:",P),window.open(T,"_blank")}});return a&&s.length===0?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(be,{className:"w-8 h-8 text-indigo-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading solver requests..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex gap-2 bg-white/80 backdrop-blur-lg rounded-xl p-1 shadow-lg border border-white/50",children:["pending","approved","rejected","all"].map(h=>e.jsxs("button",{onClick:()=>l(h),className:`flex-1 px-4 py-2 rounded-lg font-semibold text-sm transition-all capitalize ${i===h?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900"}`,children:[h==="all"?"All Requests":h,h==="pending"&&s.filter(p=>p.status==="pending").length>0&&e.jsx("span",{className:"ml-2 bg-white/20 px-2 py-0.5 rounded-full text-xs",children:s.filter(p=>p.status==="pending").length})]},h))}),x&&e.jsxs("div",{className:"p-4 rounded-xl bg-red-50 border-2 border-red-200 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-red-700",children:x})]}),s.length===0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center border border-white/50",children:[e.jsx(ke,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Solver Requests"}),e.jsx("p",{className:"text-gray-500",children:i==="pending"?"No pending solver requests at the moment.":`No ${i} requests found.`})]}):e.jsx("div",{className:"space-y-4",children:s.map(h=>e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-white/50 overflow-hidden hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg flex-shrink-0",children:e.jsx(ke,{className:"text-white",size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:h.name}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${j(h.status)}`,children:h.status.toUpperCase()})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 mb-4 border border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Email Address"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:h.email})]})]}),h.phoneNumber&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Phone Number"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:h.phoneNumber})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Request Date"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:u(h.createdAt)})]})]}),h.user_id&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"User ID"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 font-mono",children:h.user_id._id||h.user_id})]})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4 text-purple-600"}),"Expertise Areas (",h.subjects.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.subjects.map((p,T)=>e.jsxs("span",{className:"px-4 py-2 bg-gradient-to-br from-indigo-50 to-purple-50 border-2 border-indigo-200 text-indigo-700 rounded-lg text-sm font-semibold shadow-sm",children:[e.jsx(je,{className:"w-3 h-3 inline mr-1.5"}),p]},T))})]}),(h.resume||h.marksheet)&&e.jsxs("div",{className:"mb-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border-2 border-blue-200",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-blue-600"}),"Documents"]}),h.resume&&e.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-indigo-600"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Resume"})]}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:h.resume.split("/").pop()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>C(h.resume,`${h.name}_Resume.pdf`),className:"flex-1 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white rounded-lg font-semibold shadow-md hover:shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),"View Resume"]}),e.jsxs("button",{onClick:()=>R(h.resume,`${h.name}_Resume.pdf`),className:"flex-1 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-lg font-semibold shadow-md hover:shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"}),"Download Resume"]})]})]}),h.marksheet&&e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Marksheet"})]}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:h.marksheet.split("/").pop()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>C(h.marksheet,`${h.name}_Marksheet.pdf`),className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-lg font-semibold shadow-md hover:shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),"View Marksheet"]}),e.jsxs("button",{onClick:()=>R(h.marksheet,`${h.name}_Marksheet.pdf`),className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-lg font-semibold shadow-md hover:shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"}),"Download Marksheet"]})]})]})]}),h.admin_notes&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 rounded-xl border-2 border-yellow-200",children:[e.jsx("p",{className:"text-xs font-bold text-yellow-800 mb-2",children:"Admin Notes:"}),e.jsx("p",{className:"text-sm text-yellow-900",children:h.admin_notes})]})]})]})}),h.status==="pending"&&e.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-100",children:[e.jsx("button",{onClick:()=>b(h._id),disabled:m===h._id,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] disabled:transform-none flex items-center justify-center gap-2",children:m===h._id?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4 animate-spin"}),"Approving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"w-5 h-5"}),"Approve Request"]})}),e.jsx("button",{onClick:()=>y(h._id),disabled:m===h._id,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] disabled:transform-none flex items-center justify-center gap-2",children:m===h._id?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4 animate-spin"}),"Rejecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-5 h-5"}),"Reject Request"]})})]})]})},h._id))})]})},or=({onNotificationClick:n})=>{const[s,t]=o.useState([]),[a,r]=o.useState(!0),[i,l]=o.useState(0);o.useEffect(()=>{m();const b=setInterval(m,5e3);return()=>clearInterval(b)},[]);const m=()=>g(I,null,function*(){try{const y=((yield ve.getAdminNotifications())||[]).filter(u=>u.message_type==="SOLVER_REQUEST");t(y),l(y.filter(u=>!u.is_read).length||0)}catch(b){console.error("Error fetching notifications:",b)}finally{r(!1)}}),d=b=>g(I,null,function*(){try{yield ve.markNotificationAsRead(b),t(y=>y.map(u=>u._id===b?Z(M({},u),{is_read:!0}):u)),l(y=>Math.max(0,y-1))}catch(y){console.error("Error marking notification as read:",y)}}),x=b=>{const y=new Date,u=new Date(b),j=Math.floor((y-u)/1e3);return j<60?"Just now":j<3600?`${Math.floor(j/60)}m ago`:j<86400?`${Math.floor(j/3600)}h ago`:j<2592e3?`${Math.floor(j/86400)}d ago`:u.toLocaleDateString()},c=b=>b==="DOUBT_SUBMITTED"||b.includes("SOLVER")||b==="SOLVER_REQUEST"?e.jsx(ke,{className:"w-5 h-5 text-indigo-600"}):e.jsx(ye,{className:"w-5 h-5 text-blue-600"});if(a&&s.length===0)return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(be,{className:"w-6 h-6 text-indigo-600 animate-spin"})});s.filter(b=>!b.is_read);const f=s.slice(0,5);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-white/50 backdrop-blur-lg overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",children:e.jsx(ye,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Notifications"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Solver request notifications"})]})]}),i>0&&e.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-r from-red-500 to-pink-600 flex items-center justify-center text-white font-bold text-sm shadow-lg",children:i>9?"9+":i})]})}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:f.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ye,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Notifications"}),e.jsx("p",{className:"text-gray-500",children:"You're all caught up!"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:f.map(b=>e.jsx("div",{onClick:()=>{b.is_read||d(b._id),n&&n(b)},className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${b.is_read?"":"bg-indigo-50/50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:c(b.message_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("p",{className:`text-sm ${b.is_read?"text-gray-700":"font-semibold text-gray-900"}`,children:b.content}),!b.is_read&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-indigo-600 flex-shrink-0 mt-1.5"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(ne,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:x(b.createdAt)})]})]})]})},b._id))})}),s.length>5&&e.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing 5 of ",s.length," notifications"]})})]})},lr=()=>{const[n,s]=o.useState([]),[t,a]=o.useState(!0),[r,i]=o.useState("");o.useEffect(()=>{l()},[]);const l=()=>g(I,null,function*(){try{a(!0),i("");const c=yield ve.getDoubtPackPurchases(100);s(c||[])}catch(c){console.error("Error fetching purchases:",c),i("Failed to load purchases")}finally{a(!1)}}),m=c=>new Date(c).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),d=c=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(c),x=n.reduce((c,f)=>c+(f.amount||0),0);return t?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(be,{className:"w-8 h-8 text-indigo-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading purchases..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 rounded-2xl p-6 border-2 border-emerald-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-700 mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-3xl font-bold text-emerald-900",children:d(x)}),e.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[n.length," purchase",n.length!==1?"s":""]})]}),e.jsx("div",{className:"h-16 w-16 rounded-xl bg-gradient-to-br from-emerald-500 to-green-600 flex items-center justify-center shadow-lg",children:e.jsx(We,{className:"text-white",size:28})})]})}),r&&e.jsx("div",{className:"p-4 rounded-xl bg-red-50 border-2 border-red-200 text-red-700",children:r}),n.length===0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center border border-white/50",children:[e.jsx(gt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Purchases Yet"}),e.jsx("p",{className:"text-gray-500",children:"Doubt pack purchases will appear here"})]}):e.jsx("div",{className:"space-y-4",children:n.map(c=>{var f,b,y;return e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-white/50 overflow-hidden hover:shadow-2xl transition-all",children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-emerald-500 to-green-600 flex items-center justify-center shadow-lg flex-shrink-0",children:e.jsx(gt,{className:"text-white",size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:c.university_name}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700 border border-emerald-200",children:c.payment_status==="completed"?"Paid":c.payment_status})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:c.university_email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{children:m(c.purchase_date||c.createdAt)})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 mb-3 border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Doubt Pack Details"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ss,{className:"w-4 h-4 text-indigo-600"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[((f=c.doubt_pack_details)==null?void 0:f.totalDoubts)||((b=c.doubt_pack_id)==null?void 0:b.totalDoubts)||"N/A"," Doubts"]})]}),((y=c.doubt_pack_details)==null?void 0:y.categories)&&c.doubt_pack_details.categories.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.doubt_pack_details.categories.map((u,j)=>e.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded-lg text-xs font-medium",children:[u.name,": ",u.count]},j))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Payment"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"w-5 h-5 text-emerald-600"}),e.jsx("span",{className:"text-2xl font-bold text-emerald-700",children:d(c.amount)})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:c.currency||"INR"})]})]})})]})]})})})},c._id)})})]})},ir=()=>{const[n,s]=o.useState([]),[t,a]=o.useState(!0),[r,i]=o.useState("all"),[l,m]=o.useState({total:0,approved:0,averageRating:0}),[d,x]=o.useState(null);o.useEffect(()=>{c()},[r]),o.useEffect(()=>{const u=setInterval(()=>{c()},3e4);return()=>clearInterval(u)},[r]);const c=()=>g(I,null,function*(){try{a(!0);const u=new URLSearchParams;u.append("limit","100"),r==="approved"?u.append("approved","true"):r==="pending"&&u.append("approved","false"),console.log("üìä Fetching ratings with filter:",r,"params:",u.toString());const j=yield ve.makeAuthenticatedRequest(`/api/admin/ratings-feedback?${u.toString()}`,{method:"GET"});if(!j.ok)throw new Error(`HTTP error! status: ${j.status}`);const N=yield j.json();console.log("üìä Ratings fetched:",N),N.success?(s(N.data||[]),m(N.stats||{total:0,approved:0,averageRating:0})):(console.error("Failed to fetch ratings:",N.message),s([]))}catch(u){console.error("Error fetching ratings:",u),s([])}finally{a(!1)}}),f=u=>g(I,null,function*(){try{x(u),(yield(yield ve.makeAuthenticatedRequest(`/api/admin/ratings-feedback/${u}/approve`,{method:"POST",body:JSON.stringify({})})).json()).success&&(yield c())}catch(j){alert(j.message||"Failed to approve rating")}finally{x(null)}}),b=u=>g(I,null,function*(){if(window.confirm("Are you sure you want to delete this rating?"))try{x(u),(yield(yield ve.makeAuthenticatedRequest(`/api/admin/ratings-feedback/${u}`,{method:"DELETE"})).json()).success&&(yield c())}catch(j){alert(j.message||"Failed to delete rating")}finally{x(null)}}),y=u=>new Date(u).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return t?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(be,{className:"w-8 h-8 text-indigo-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading ratings..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border-2 border-blue-200",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-700 mb-1",children:"Total Ratings"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:l.total})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 border-2 border-green-200",children:[e.jsx("p",{className:"text-sm font-semibold text-green-700 mb-1",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:l.approved})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl p-4 border-2 border-yellow-200",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-700 mb-1",children:"Avg Rating"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:l.averageRating>0?l.averageRating.toFixed(1):"0.0"})]})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"flex gap-2 bg-white/80 backdrop-blur-lg rounded-xl p-1 shadow-lg border border-white/50 flex-1",children:["all","pending","approved"].map(u=>e.jsx("button",{onClick:()=>i(u),className:`flex-1 px-4 py-2 rounded-lg font-semibold text-sm transition-all capitalize ${r===u?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900"}`,children:u},u))}),e.jsxs("button",{onClick:c,disabled:t,className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 disabled:transform-none flex items-center gap-2",children:[e.jsx(Ze,{className:`w-4 h-4 ${t?"animate-spin":""}`}),"Refresh"]})]}),n.length===0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center border border-white/50",children:[e.jsx(at,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Ratings Found"}),e.jsx("p",{className:"text-gray-500",children:r==="pending"?"No pending ratings to review.":`No ${r} ratings found.`})]}):e.jsx("div",{className:"space-y-4",children:n.map(u=>e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-white/50 overflow-hidden hover:shadow-2xl transition-all",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center shadow-lg flex-shrink-0",children:e.jsx(Re,{className:"text-white",size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:u.user_name}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(j=>e.jsx(Re,{className:`w-4 h-4 ${j<=u.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},j))}),!u.is_approved&&e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded-lg text-xs font-semibold",children:"Pending"})]}),u.user_email&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border-2 border-blue-200 mb-3",children:[e.jsx(Ae,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-base font-semibold text-blue-900",children:u.user_email})]}),!u.user_email&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-xl border-2 border-gray-200 mb-3",children:[e.jsx(Ae,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500 italic",children:"No email provided"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{children:y(u.createdAt)})]}),e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:u.feedback})})]})]})}),!u.is_approved&&e.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-100",children:[e.jsx("button",{onClick:()=>f(u._id),disabled:d===u._id,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] disabled:transform-none flex items-center justify-center gap-2",children:d===u._id?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4 animate-spin"}),"Approving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-5 h-5"}),"Approve"]})}),e.jsx("button",{onClick:()=>b(u._id),disabled:d===u._id,className:"px-6 py-3 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] disabled:transform-none flex items-center justify-center gap-2",children:d===u._id?e.jsx(be,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(qt,{className:"w-5 h-5"}),"Delete"]})})]}),u.is_approved&&e.jsx("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-100",children:e.jsx("button",{onClick:()=>b(u._id),disabled:d===u._id,className:"px-6 py-3 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] disabled:transform-none flex items-center justify-center gap-2",children:d===u._id?e.jsx(be,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(qt,{className:"w-5 h-5"}),"Delete"]})})})]})},u._id))})]})},dr=()=>{var H;const[n,s]=o.useState([]),[t,a]=o.useState(!0),[r,i]=o.useState(""),[l,m]=o.useState("all"),[d,x]=o.useState(null),[c,f]=o.useState(!1),[b,y]=o.useState(""),[u,j]=o.useState(""),[N,C]=o.useState(!1);o.useEffect(()=>{R()},[l]);const R=()=>g(I,null,function*(){try{a(!0),i("");const k=l==="all"?null:l,_=yield ve.getWithdrawals(k);s(_||[])}catch(k){console.error("Fetch withdrawals error:",k),i(k.message||"Failed to fetch withdrawals")}finally{a(!1)}}),h=(k,_)=>{x(k),y(_),j(""),f(!0)},p=()=>g(I,null,function*(){if(d)try{C(!0);let k;b==="approve"?k=yield ve.approveWithdrawal(d._id,u):b==="disburse"?k=yield ve.disburseWithdrawal(d._id,u):b==="reject"&&(k=yield ve.rejectWithdrawal(d._id,u)),k.success?(f(!1),x(null),R()):i(k.message||"Action failed")}catch(k){console.error("Action error:",k),i(k.message||"Action failed")}finally{C(!1)}}),T=k=>{const _={pending:"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-300",approved:"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300",disbursed:"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300",rejected:"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-300"};return _[k]||_.pending},P=k=>{switch(k){case"pending":return e.jsx(ne,{className:"w-4 h-4"});case"approved":return e.jsx(te,{className:"w-4 h-4"});case"disbursed":return e.jsx(te,{className:"w-4 h-4"});case"rejected":return e.jsx(as,{className:"w-4 h-4"});default:return e.jsx(ne,{className:"w-4 h-4"})}},A=l==="all"?n:n.filter(k=>k.status===l);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center transition-colors",children:e.jsx(st,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 transition-colors",children:"Withdrawal Requests"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors",children:"Manage user withdrawal requests"})]})]}),e.jsx("button",{onClick:R,disabled:t,className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",children:e.jsx(Ze,{className:`w-5 h-5 ${t?"animate-spin":""}`})})]}),e.jsx("div",{className:"flex gap-2 mb-6 flex-wrap",children:["all","pending","approved","disbursed","rejected"].map(k=>e.jsx("button",{onClick:()=>m(k),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors capitalize ${l===k?"bg-blue-500 dark:bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:k},k))}),r&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-start gap-2 transition-colors",children:[e.jsx(xe,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r})]}),t?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 dark:border-blue-400"})}):A.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(st,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No withdrawal requests found"})]}):e.jsx("div",{className:"space-y-4",children:A.map(k=>{var _,W;return e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-all duration-300",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-semibold flex items-center gap-1 ${T(k.status)}`,children:[P(k.status),k.status]}),e.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:["‚Çπ",k.amount]})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4"}),e.jsx("span",{children:((_=k.user_id)==null?void 0:_.name)||"Unknown User"}),e.jsxs("span",{className:"text-gray-400",children:["(",((W=k.user_id)==null?void 0:W.email)||"N/A",")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-4 h-4"}),e.jsx("span",{children:k.account_holder_name})]}),k.upi_id&&e.jsxs("div",{className:"text-gray-500 dark:text-gray-500",children:["UPI: ",k.upi_id]}),k.bank_account_number&&e.jsxs("div",{className:"text-gray-500 dark:text-gray-500",children:["Bank: ",k.bank_name," ‚Ä¢ ",k.bank_account_number.slice(-4)," ‚Ä¢ ",k.bank_ifsc]}),e.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Requested: ",new Date(k.createdAt).toLocaleString()]}),k.admin_notes&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 dark:bg-gray-700/50 rounded text-xs",children:[e.jsx("strong",{children:"Admin Notes:"})," ",k.admin_notes]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[k.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>h(k,"approve"),className:"px-3 py-1.5 bg-blue-500 dark:bg-blue-600 hover:bg-blue-600 dark:hover:bg-blue-700 text-white text-sm rounded-lg transition-colors",children:"Approve"}),e.jsx("button",{onClick:()=>h(k,"reject"),className:"px-3 py-1.5 bg-red-500 dark:bg-red-600 hover:bg-red-600 dark:hover:bg-red-700 text-white text-sm rounded-lg transition-colors",children:"Reject"})]}),k.status==="approved"&&e.jsx("button",{onClick:()=>h(k,"disburse"),className:"px-3 py-1.5 bg-green-500 dark:bg-green-600 hover:bg-green-600 dark:hover:bg-green-700 text-white text-sm rounded-lg transition-colors",children:"Disburse Payment"})]})]})},k._id)})}),c&&d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full p-6 transition-colors",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 capitalize",children:[b," Withdrawal Request"]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Amount:"})," ",e.jsxs("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:["‚Çπ",d.amount]})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"User:"})," ",((H=d.user_id)==null?void 0:H.name)||"Unknown"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:u,onChange:k=>j(k.target.value),rows:3,className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Add notes about this action..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{f(!1),x(null),j("")},disabled:N,className:"flex-1 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:p,disabled:N,className:`flex-1 text-white font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50 ${b==="reject"?"bg-red-500 dark:bg-red-600 hover:bg-red-600 dark:hover:bg-red-700":b==="disburse"?"bg-green-500 dark:bg-green-600 hover:bg-green-600 dark:hover:bg-green-700":"bg-blue-500 dark:bg-blue-600 hover:bg-blue-600 dark:hover:bg-blue-700"}`,children:N?"Processing...":`Confirm ${b}`})]})]})})]})},cr="admin_authenticated",mr=()=>{const n=he(),[s,t]=o.useState("requests"),[a,r]=o.useState({totalSolvers:0,totalDoubtPacks:0,loading:!0});o.useEffect(()=>{i()},[]);const i=()=>g(I,null,function*(){try{r(b=>Z(M({},b),{loading:!0}));const[m,d]=yield Promise.allSettled([ve.getAllSolvers(),ve.getDoubtPacks()]),x=m.status==="fulfilled"?m.value||[]:[],c=d.status==="fulfilled"?d.value||[]:[],f=Array.isArray(x)?x.filter(b=>b.isActive!==!1).length:0;r({totalSolvers:f,totalDoubtPacks:Array.isArray(c)?c.length:0,loading:!1})}catch(m){console.error("Error fetching stats:",m),r(d=>Z(M({},d),{loading:!1}))}}),l=()=>{localStorage.removeItem(cr),localStorage.removeItem("token"),n("/admin/login")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50",children:[e.jsx(er,{}),e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 shadow-xl",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-white/20 backdrop-blur-lg flex items-center justify-center shadow-lg flex-shrink-0",children:e.jsx(xt,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Admin Dashboard"}),e.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:"Manage solvers and doubt packs"})]})]}),e.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-lg text-white rounded-xl font-semibold transition-all shadow-lg hover:shadow-xl flex-shrink-0",children:[e.jsx(nt,{size:18}),"Logout"]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 border border-white/50 backdrop-blur-lg",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium mb-3",children:"Total Solvers"}),a.loading?e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(be,{className:"w-6 h-6 text-indigo-600 animate-spin"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Loading..."})]}):e.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent leading-tight mb-3",children:a.totalSolvers})]}),e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg flex-shrink-0 ml-4",children:e.jsx(Se,{className:"text-white",size:24})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-600 mt-4",children:[e.jsx(We,{size:16}),e.jsx("span",{className:"font-medium",children:"Active solvers"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 border border-white/50 backdrop-blur-lg",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium mb-3",children:"Doubt Packs"}),a.loading?e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(be,{className:"w-6 h-6 text-purple-600 animate-spin"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Loading..."})]}):e.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent leading-tight mb-3",children:a.totalDoubtPacks})]}),e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center shadow-lg flex-shrink-0 ml-4",children:e.jsx(je,{className:"text-white",size:24})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-600 mt-4",children:[e.jsx(We,{size:16}),e.jsx("span",{className:"font-medium",children:"Total packs created"})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(or,{onNotificationClick:m=>{m.content.includes("solver request")&&t("requests")}})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"flex gap-2 bg-white/80 backdrop-blur-lg rounded-xl p-1 shadow-lg border border-white/50",children:[e.jsxs("button",{onClick:()=>t("requests"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all text-sm ${s==="requests"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Ee,{size:18}),"Solver Requests"]}),e.jsxs("button",{onClick:()=>t("solver"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all text-sm ${s==="solver"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(ke,{size:18}),"Register Solver"]}),e.jsxs("button",{onClick:()=>t("doubts"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all text-sm ${s==="doubts"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(je,{size:18}),"Doubt Packs"]}),e.jsxs("button",{onClick:()=>t("purchases"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all text-sm ${s==="purchases"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Ee,{size:18}),"Purchases"]}),e.jsxs("button",{onClick:()=>t("ratings"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all text-sm ${s==="ratings"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Re,{size:18}),"Ratings & Feedback"]}),e.jsxs("button",{onClick:()=>t("withdrawals"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all text-sm ${s==="withdrawals"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(st,{size:18}),"Withdrawals"]})]}),e.jsxs("div",{children:[s==="requests"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-white/50 backdrop-blur-lg overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",children:e.jsx(Ee,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Solver Requests"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Review and approve/reject solver requests"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx(nr,{onRequestProcessed:i})})]}),s==="solver"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-white/50 backdrop-blur-lg overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",children:e.jsx(ke,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Register New Solver"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Add users as solvers with their expertise areas"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx(sr,{defaultOpen:!0,inline:!0,onSolverRegistered:i})})]}),s==="doubts"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-white/50 backdrop-blur-lg overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center",children:e.jsx(je,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Doubt Pack Builder"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Create and manage doubt packs for students"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx(rr,{defaultOpen:!1,onDoubtPackCreated:i})})]}),s==="purchases"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-white/50 backdrop-blur-lg overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-emerald-500 to-green-600 flex items-center justify-center",children:e.jsx(Ee,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Doubt Pack Purchases"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"View all university doubt pack purchases and revenue"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx(lr,{})})]}),s==="ratings"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-white/50 backdrop-blur-lg overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center",children:e.jsx(ye,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Ratings & Feedback"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Manage user ratings and feedback from landing page"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx(ir,{})})]}),s==="withdrawals"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-white/50 backdrop-blur-lg overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:e.jsx(st,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Withdrawal Requests"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Review and process user withdrawal requests"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx(dr,{})})]})]})]})]})})]})},Me={email:"2105834@kiit.ac.in",password:"123456"},pt="kiitUniversityAdminSession",ur="admin_doubt_packs",xr=({isOpen:n,onClose:s,universityInfo:t,onPurchaseSuccess:a})=>{const[r,i]=o.useState([]),[l,m]=o.useState(!1),[d,x]=o.useState(null),[c,f]=o.useState(null),b=u=>u*110;o.useEffect(()=>{n&&g(I,null,function*(){m(!0);try{const N=(yield ve.getDoubtPacks(!0)).map(C=>({id:C._id||C.id,totalDoubts:C.totalDoubts,categories:C.categories,createdAt:C.createdAt?new Date(C.createdAt).toLocaleString():C.createdAt}));i(N)}catch(j){console.error("Error loading doubt packs from API:",j);const N=localStorage.getItem(ur);if(N)try{const C=JSON.parse(N);i(C)}catch(C){console.error("Error loading from localStorage:",C),i([])}else i([])}finally{m(!1)}})},[n]),o.useEffect(()=>{const u=document.createElement("script");return u.src="https://checkout.razorpay.com/v1/checkout.js",u.async=!0,document.body.appendChild(u),()=>{document.body.contains(u)&&document.body.removeChild(u)}},[]);const y=u=>g(I,null,function*(){var N,C,R,h,p,T,P,A,H,k;if(!t){alert("University information not available");return}if(!window.Razorpay){alert("Payment gateway is loading. Please wait a moment and try again.");return}const j=b(u.totalDoubts);try{x(u.id),f(null);const _=u.id||u._id;if(!_)throw new Error("Invalid doubt pack ID");console.log("üí≥ Creating order for pack:",{packId:_,totalDoubts:u.totalDoubts,amount:j});const W=yield fetch("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:j,doubt_pack_id:_,university_name:t.name||"KIIT University",university_email:t.email||"admin@kiit.ac.in",university_id:t.id||t._id})});if(!W.ok){const E=yield W.json().catch(()=>({message:"Unknown error"}));throw console.error("‚ùå Order creation failed:",E),new Error(E.message||E.error||`Failed to create payment order (${W.status})`)}const S=yield W.json();if(console.log("‚úÖ Order created successfully:",S),!S.success)throw new Error(S.message||"Failed to create payment order");console.log("üí≥ Initializing Razorpay checkout with UPI, PhonePe, and Google Pay...");const U={key:S.key_id,amount:S.order.amount,currency:S.order.currency,name:"EduFoyer",description:`Doubt Pack - ${u.totalDoubts} doubts`,order_id:S.order.id,handler:function(E){return g(this,null,function*(){try{const z=yield(yield fetch("/api/payment/verify-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_order_id:E.razorpay_order_id,razorpay_payment_id:E.razorpay_payment_id,razorpay_signature:E.razorpay_signature,orderData:{doubt_pack_id:_,university_name:t.name||"KIIT University",university_email:t.email||"admin@kiit.ac.in",university_id:t.id||t._id,amount:j}})})).json();if(z.success)x(null),f(u.id),setTimeout(()=>{f(null)},5e3),alert("Payment successful! Purchase recorded. Available doubts updated."),a&&(console.log("üîÑ Calling onPurchaseSuccess to refresh doubt balance..."),a(),setTimeout(()=>{console.log("üîÑ Refreshing doubt balance after 1s..."),a()},1e3),setTimeout(()=>{console.log("üîÑ Refreshing doubt balance after 2s..."),a()},2e3));else throw new Error(z.message||"Payment verification failed")}catch(F){console.error("Payment verification error:",F),alert("Payment verification failed: "+(F.message||"Unknown error")),x(null)}})},prefill:{name:t.name||"University Admin",email:t.email||"admin@kiit.ac.in",contact:""},modal:{ondismiss:function(){x(null)},escape:!0,animation:!0,backdropclose:!0},image:"",notes:{payment_methods:"upi,phonepe,googlepay",description:`Purchase ${u.totalDoubts} doubts for ${t.name||"your university"}`},theme:{color:"#10b981",backdrop_color:"#000000cc",hide:!1},method:{upi:!0,card:!0,netbanking:!0,wallet:!0,paylater:!1},display:{blocks:{banks:{name:"Payment Methods",instruments:[{method:"upi",title:"UPI Payment",description:"Pay using UPI apps"},{method:"card",title:"Debit/Credit Cards",description:"Visa, Mastercard, RuPay & more"},{method:"netbanking",title:"Net Banking",description:"All major banks"},{method:"wallet",title:"Wallets",description:"Paytm, PhonePe & more"}]}},sequence:["block.banks"],preferences:{show_default_blocks:!0}},config:{upi:{flow:"collect",apps:{paytm:!0,phonepe:!0,googlepay:!0,bhim:!0,whatsapp:!1,amazonpay:!1},display:{order:["phonepe","googlepay","paytm","bhim"]}},card:{display:{order:["visa","mastercard","rupay","maestro"]}},netbanking:{display:{order:["sbi","hdfc","icici","axis","kotak"]}},wallet:{display:{order:["paytm","phonepe","airtelmoney","mobikwik"]}}}};console.log("üí≥ Razorpay options:",JSON.stringify(U,null,2)),console.log("üí≥ UPI Configuration:",{upiEnabled:(N=U.method)==null?void 0:N.upi,phonepeEnabled:(h=(R=(C=U.config)==null?void 0:C.upi)==null?void 0:R.apps)==null?void 0:h.phonepe,googlepayEnabled:(P=(T=(p=U.config)==null?void 0:p.upi)==null?void 0:T.apps)==null?void 0:P.googlepay,paytmEnabled:(k=(H=(A=U.config)==null?void 0:A.upi)==null?void 0:H.apps)==null?void 0:k.paytm});const v=new window.Razorpay(U);v.on("payment.failed",function(E){console.error("Payment failed:",E),alert("Payment failed: "+(E.error.description||"Unknown error")),x(null)}),console.log("üí≥ Opening Razorpay checkout..."),v.open()}catch(_){console.error("Purchase error:",_),alert(_.message||"Failed to initiate payment. Please try again."),x(null)}});return n?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-md animate-fade-in",children:e.jsxs("div",{className:"relative w-full max-w-5xl max-h-[90vh] bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 border border-slate-700/50 rounded-3xl shadow-2xl overflow-hidden transform transition-all",children:[e.jsxs("div",{className:"relative flex items-center justify-between p-8 border-b border-slate-700/50 bg-gradient-to-r from-blue-600/10 via-purple-600/10 to-emerald-600/10",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-5xl font-heading bg-gradient-to-r from-emerald-400 via-green-400 to-emerald-500 bg-clip-text text-transparent tracking-tight leading-tight drop-shadow-lg",children:"Recharge Wallet"}),e.jsx("p",{className:"text-lg text-slate-200 mt-3 font-elegant tracking-normal font-semibold",children:"View doubts added from Admin Dashboard"})]}),e.jsx("button",{onClick:s,className:"rounded-xl p-2.5 text-slate-400 hover:text-white hover:bg-slate-700/50 transition-all transform hover:rotate-90 duration-300",children:e.jsx(de,{size:22})})]}),e.jsx("div",{className:"p-8 overflow-y-auto max-h-[calc(90vh-180px)] bg-gradient-to-b from-slate-900/50 to-slate-900",children:l?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(be,{className:"w-14 h-14 animate-spin text-emerald-400 mx-auto mb-6 drop-shadow-lg"}),e.jsx("p",{className:"text-slate-200 text-2xl font-heading tracking-tight",children:"Loading doubt packs..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-8 rounded-full bg-gradient-to-br from-slate-800/50 to-slate-900/50 flex items-center justify-center shadow-xl",children:e.jsx(gt,{className:"w-12 h-12 text-slate-400"})}),e.jsx("p",{className:"text-slate-200 text-3xl font-heading mb-3 tracking-tight",children:"No doubt packs found"}),e.jsx("p",{className:"text-slate-300 text-lg font-elegant",children:"Add doubt packs from the Admin Dashboard to see them here"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"mb-8 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-heading text-white tracking-tight mb-2",children:"Available Doubt Packs"}),e.jsxs("p",{className:"text-base text-slate-300 mt-2 font-elegant",children:["Total ",e.jsx("span",{className:"text-gradient-primary font-bold text-lg",children:r.length})," doubt pack",r.length!==1?"s":""," available"]})]})}),r.map((u,j)=>e.jsxs("div",{className:"group relative rounded-2xl border border-slate-700/50 bg-gradient-to-br from-slate-800/80 via-slate-800/60 to-slate-900/80 p-6 hover:border-emerald-500/50 hover:shadow-2xl hover:shadow-emerald-500/10 transition-all duration-300 transform hover:-translate-y-1",style:{animationDelay:`${j*100}ms`},children:[e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-emerald-500/0 via-blue-500/0 to-purple-500/0 group-hover:from-emerald-500/5 group-hover:via-blue-500/5 group-hover:to-purple-500/5 transition-all duration-300 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsxs("div",{className:"relative h-16 w-16 rounded-2xl bg-gradient-to-br from-emerald-500/20 via-blue-500/20 to-purple-500/20 flex items-center justify-center border border-emerald-500/30 shadow-lg",children:[e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-emerald-400 to-blue-400 bg-clip-text text-transparent",children:u.totalDoubts}),e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-emerald-500/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-3xl font-heading text-white mb-2 tracking-tight leading-tight",children:[u.totalDoubts," Doubts Pack"]}),e.jsxs("p",{className:"text-sm text-slate-300 font-elegant flex items-center gap-2.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse shadow-lg shadow-emerald-400/50"}),e.jsx("span",{className:"font-semibold",children:"Added on"}),e.jsx("span",{className:"text-slate-200 font-bold",children:u.createdAt})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx(Lt,{className:"w-6 h-6 text-emerald-400 drop-shadow-lg"}),e.jsx("p",{className:"text-4xl font-heading bg-gradient-to-r from-emerald-400 via-green-400 to-emerald-500 bg-clip-text text-transparent tracking-tight text-shadow-glow",children:b(u.totalDoubts).toLocaleString("en-IN")})]}),e.jsx("p",{className:"text-xs text-slate-300 font-elegant mt-2 uppercase tracking-widest font-bold",children:"Total Price"})]})]}),e.jsx("div",{className:"mt-5 flex flex-wrap gap-3",children:u.categories.map((N,C)=>e.jsxs("span",{className:"inline-flex items-center gap-2.5 rounded-xl border border-slate-600/50 bg-gradient-to-r from-slate-700/50 to-slate-800/50 px-5 py-2.5 text-sm font-elegant text-slate-200 hover:border-emerald-500/50 hover:bg-gradient-to-r hover:from-emerald-500/10 hover:to-blue-500/10 transition-all duration-200 shadow-md hover:shadow-emerald-500/20",children:[e.jsxs("span",{className:"font-bold text-white text-base tracking-wide",children:[N.name,":"]}),e.jsx("span",{className:"text-emerald-400 font-heading text-lg font-extrabold",children:N.count})]},C))}),c===u.id&&e.jsxs("div",{className:"mt-5 p-5 bg-gradient-to-r from-emerald-500/20 via-green-500/20 to-emerald-500/20 border border-emerald-500/40 rounded-xl flex items-center gap-3 animate-fade-in shadow-lg shadow-emerald-500/20",children:[e.jsx(te,{className:"w-6 h-6 text-emerald-400 flex-shrink-0 drop-shadow-lg"}),e.jsx("span",{className:"text-base font-elegant font-bold text-emerald-300 tracking-wide",children:"Purchase successful! Your doubts have been added."})]})]}),e.jsx("div",{className:"flex-shrink-0 lg:ml-6",children:e.jsxs("button",{onClick:()=>y(u),disabled:d===u.id,className:"relative px-10 py-5 bg-gradient-to-r from-emerald-500 via-green-500 to-emerald-600 hover:from-emerald-600 hover:via-green-600 hover:to-emerald-700 text-white rounded-xl font-heading text-lg shadow-xl hover:shadow-2xl hover:shadow-emerald-500/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 disabled:transform-none flex items-center gap-3 overflow-hidden group tracking-wide",children:[e.jsx("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),d===u.id?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-6 h-6 animate-spin relative z-10"}),e.jsx("span",{className:"relative z-10 font-bold",children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"w-6 h-6 relative z-10"}),e.jsx("span",{className:"relative z-10 font-bold",children:"Purchase Now"})]})]})})]})]},u.id))]})}),e.jsxs("div",{className:"flex items-center justify-between gap-4 p-6 border-t border-slate-700/50 bg-gradient-to-r from-slate-900/50 to-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-300",children:[e.jsx("span",{className:"font-elegant font-semibold tracking-wide",children:"Secured by"}),e.jsx("span",{className:"text-gradient-primary font-heading font-bold text-base",children:"Razorpay"})]}),e.jsx("button",{onClick:s,className:"rounded-xl border border-slate-600/50 px-10 py-3.5 text-base font-heading font-bold text-slate-200 hover:bg-slate-700/50 hover:border-slate-600 hover:text-white transition-all duration-200 transform hover:scale-105 tracking-wide",children:"Close"})]})]})}):null},hr=()=>{var S,U;const[n,s]=o.useState(""),[t,a]=o.useState(""),[r,i]=o.useState(""),[l,m]=o.useState(!1),[d,x]=o.useState({doubtBuckets:{small:0,medium:0,large:0},totalAvailable:0}),[c,f]=o.useState(!1),[b,y]=o.useState([]),[u,j]=o.useState(!1),[N,C]=o.useState(0),R=o.useRef(null),h=o.useCallback(()=>g(I,null,function*(){try{j(!0);const v=yield fetch("/api/university/kiit-users",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},cache:"no-cache",credentials:"include"});if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);const E=yield v.json();if(E.success&&E.data){const F=E.data.users||[];y(F),C(F.length),console.log("‚úÖ KIIT users fetched:",F.length,"users"),console.log("‚úÖ Users data:",F)}else console.warn("‚ö†Ô∏è API response not successful:",E),y([]),C(0)}catch(v){console.error("‚ùå Error fetching KIIT users:",v),y([]),C(0)}finally{j(!1)}}),[]),p=o.useCallback(()=>g(I,null,function*(){try{console.log("üîÑ ============================================"),console.log("üîÑ Fetching doubt balance from backend..."),console.log("üîÑ Function called at:",new Date().toISOString()),console.log("üîÑ Current window location:",window.location.href),f(!0),console.log("‚úÖ setLoadingBalance(true) called");const v="/api/university/doubt-balance?university_email=admin@kiit.ac.in";console.log("üåê Making fetch request to:",v),console.log("üåê Full URL would be:",window.location.origin+v),console.log("üåê Fetch options:",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},cache:"no-cache",credentials:"include"});const E=Date.now();console.log("‚è±Ô∏è Fetch start time:",E);const F=yield fetch(v,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},cache:"no-cache",credentials:"include"}),z=Date.now();if(console.log("‚è±Ô∏è Fetch end time:",z),console.log("‚è±Ô∏è Fetch duration:",z-E,"ms"),console.log("üåê Fetch completed, response received"),console.log("üì° Response status:",F.status),console.log("üì° Response ok:",F.ok),!F.ok){const B=yield F.text();throw console.error("‚ùå Response not OK:",B),new Error(`HTTP error! status: ${F.status}`)}const $=yield F.json();if(console.log("üìä Full API response:",JSON.stringify($,null,2)),$.success&&$.data){const B={doubtBuckets:$.data.doubtBuckets||{small:0,medium:0,large:0},totalAvailable:$.data.totalAvailableDoubts||$.data.totalAvailable||0};console.log("‚úÖ Parsed new balance:",B),console.log("üîÑ About to call setDoubtBalance..."),console.log("üîÑ New balance to set:",B),x(w=>{var L,J,re,ie,Ne,ge;console.log("üîÑ Previous state in callback:",w);const Y={doubtBuckets:{small:Number((L=B.doubtBuckets)==null?void 0:L.small)||0,medium:Number((J=B.doubtBuckets)==null?void 0:J.medium)||0,large:Number((re=B.doubtBuckets)==null?void 0:re.large)||0},totalAvailable:Number(B.totalAvailable)||0};return console.log("üîÑ ========== setDoubtBalance CALLBACK =========="),console.log("üîÑ Previous state:",w),console.log("üîÑ Updated state:",Y),console.log("üîÑ Values changed:",{totalAvailable:Y.totalAvailable!==w.totalAvailable,small:Y.doubtBuckets.small!==((ie=w.doubtBuckets)==null?void 0:ie.small),medium:Y.doubtBuckets.medium!==((Ne=w.doubtBuckets)==null?void 0:Ne.medium),large:Y.doubtBuckets.large!==((ge=w.doubtBuckets)==null?void 0:ge.large)}),console.log("üîÑ ============================================"),Y}),console.log("‚úÖ setDoubtBalance called, waiting for React to update..."),console.log("üîÑ ============================================")}else console.warn("‚ö†Ô∏è API response not successful:",$),console.log("üîÑ ============================================")}catch(v){console.error("‚ùå ============================================"),console.error("‚ùå Error fetching doubt balance:",v),console.error("‚ùå Error details:",{message:v.message,stack:v.stack}),console.error("‚ùå ============================================"),x({doubtBuckets:{small:0,medium:0,large:0},totalAvailable:0})}finally{f(!1)}}),[]);console.log("üîç fetchDoubtBalance function defined:",{type:typeof p,isFunction:typeof p=="function",functionName:p==null?void 0:p.name,functionLength:p==null?void 0:p.length}),o.useEffect(()=>{if(console.log("üîç useEffect triggered - isAuthenticated:",l),console.log("üîç fetchDoubtBalance in useEffect:",typeof p),l){console.log("‚úÖ User authenticated, fetching data..."),typeof p=="function"?p():console.error("‚ùå fetchDoubtBalance is not a function in useEffect!"),h();const v=dt(window.location.origin,{withCredentials:!0,transports:["websocket","polling"],reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5});R.current=v,v.on("connect",()=>{console.log("‚úÖ Socket connected:",v.id),v.emit("join:admin",{university_email:"admin@kiit.ac.in"})}),v.on("disconnect",()=>{console.log("‚ùå Socket disconnected")}),v.on("connect_error",F=>{console.error("Socket connection error:",F)}),v.on("university:balance-updated",F=>{console.log("üì° Received balance update from server:",F),F.university_email==="admin@kiit.ac.in"&&(x({doubtBuckets:F.doubtBuckets||{small:0,medium:0,large:0},totalAvailable:F.totalAvailable||0}),console.log("‚úÖ Balance updated from socket event"))}),v.on("doubt:balance:updated",F=>{if(console.log("üì° Received doubt balance update from server:",F),F&&(F.university_email==="admin@kiit.ac.in"||!F.university_email)){const z={doubtBuckets:F.doubtBuckets||{small:0,medium:0,large:0},totalAvailable:F.totalAvailable||0};console.log("üîÑ Setting doubt balance state:",z),x(z),console.log("‚úÖ Balance updated from doubt creation event:",z)}else console.log("üîÑ Refreshing balance via API call (fallback)..."),typeof p=="function"&&setTimeout(()=>p(),500)}),v.on("user:registered",()=>{console.log("üì° New user registered, refreshing KIIT users..."),h()}),v.on("doubt:created",F=>{console.log("üì° New doubt created event received:",F),typeof h=="function"&&h(),typeof p=="function"&&setTimeout(()=>{console.log("üîÑ Refreshing balance after doubt creation (API call)..."),p()},300)});const E=setInterval(()=>{console.log("‚è∞ Auto-refresh: Fetching data..."),typeof p=="function"&&p(),typeof h=="function"&&h()},5e3);return()=>{console.log("üßπ Cleaning up interval and socket..."),clearInterval(E),R.current&&(R.current.disconnect(),R.current=null),v&&v.disconnect()}}else console.log("‚ùå User not authenticated, skipping fetch")},[l,p,h]);const T=o.useMemo(()=>{const v=b.reduce((B,w)=>B+(w.doubts||0),0),E=b.reduce((B,w)=>B+(w.doubts||0)*110,0),F=b.length?Math.round(v/b.length*10)/10:0,z=d.totalAvailable||0,$=d.doubtBuckets||{small:0,medium:0,large:0};return console.log("üìä Summary recalculated (DYNAMIC):",{totalUsers:b.length,totalDoubts:v,totalWallet:E,availableDoubts:z,doubtBuckets:$,"doubtBalance object":d}),{totalUsers:b.length,totalDoubts:v,averagePerUser:F,walletBalance:z*110,walletUsed:E,availableDoubts:z,doubtBuckets:$}},[b,d]),P=v=>{if(v.preventDefault(),n===Me.email&&t===Me.password){m(!0),i("");return}i("Invalid KIIT admin credentials.")},A=()=>{s(""),a(""),m(!1),i("")};if(!l)return e.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-lg bg-slate-900 border border-slate-800 rounded-2xl p-8 shadow-2xl shadow-blue-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-blue-500/10 flex items-center justify-center",children:e.jsx(Ot,{className:"text-blue-400",size:28})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-white",children:"KIIT Admin Access"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Authenticate to enter the university control room"})]})]}),e.jsxs("form",{className:"space-y-4",onSubmit:P,children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:"Email"}),e.jsx("input",{type:"email",value:n,onChange:v=>s(v.target.value),placeholder:"2105834@kiit.ac.in",className:"w-full rounded-xl bg-slate-800 border border-slate-700 px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:"Password"}),e.jsx("input",{type:"password",value:t,onChange:v=>a(v.target.value),placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",className:"w-full rounded-xl bg-slate-800 border border-slate-700 px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r&&e.jsx("div",{className:"rounded-xl border border-red-400/40 bg-red-500/10 px-4 py-2 text-sm text-red-300",children:r}),e.jsx("button",{type:"submit",className:"w-full rounded-xl bg-gradient-to-r from-blue-600 to-cyan-500 py-3 font-semibold text-white shadow-lg shadow-blue-900/40 transition hover:shadow-cyan-900/40",children:"Grant Access"})]}),e.jsxs("div",{className:"mt-6 rounded-2xl border border-slate-800 bg-slate-900/60 p-4 text-xs text-slate-400",children:[e.jsx("p",{children:"Demo credentials"}),e.jsxs("p",{children:["Email: ",Me.email]}),e.jsxs("p",{children:["Password: ",Me.password]})]})]})});console.log("üîç ========== KiitAdminPanel RENDER =========="),console.log("üîç About to render KiitAdminDashboardView"),console.log("üîç fetchDoubtBalance details:",{type:typeof p,isFunction:typeof p=="function",value:p,name:p==null?void 0:p.name,toString:(U=(S=p==null?void 0:p.toString)==null?void 0:S.call(p))==null?void 0:U.substring(0,100)}),console.log("üîç doubtBalance:",d),console.log("üîç loadingBalance:",c),console.log("üîç summary:",T),typeof p!="function"?(console.error("‚ùå ========== CRITICAL ERROR =========="),console.error("‚ùå fetchDoubtBalance is NOT a function!"),console.error("‚ùå Type:",typeof p),console.error("‚ùå Value:",p),console.error("‚ùå ====================================")):console.log("‚úÖ fetchDoubtBalance is a valid function");const H=o.useCallback(()=>{console.log("üîÑ handlePurchaseSuccess wrapper called"),console.log("üîÑ fetchDoubtBalance available:",typeof p=="function"),typeof p=="function"?p():console.error("‚ùå fetchDoubtBalance is not a function in handlePurchaseSuccess")},[p]),k=o.useCallback(()=>{console.log("üîÑ handleRefreshDoubtBalance wrapper called"),console.log("üîÑ fetchDoubtBalance available:",typeof p=="function"),typeof p=="function"?p():console.error("‚ùå fetchDoubtBalance is not a function in handleRefreshDoubtBalance")},[p]);console.log("üîç Wrapper functions created:",{handlePurchaseSuccess:typeof H,handleRefreshDoubtBalance:typeof k,"handlePurchaseSuccess is function":typeof H=="function","handleRefreshDoubtBalance is function":typeof k=="function"});const _=o.useMemo(()=>{const v=[],E=new Date;for(let F=6;F>=0;F--){const z=new Date(E);z.setDate(z.getDate()-F);const $=z.toLocaleDateString("en-US",{month:"short",day:"numeric"}),Y=b.filter(L=>L.registeredAt?new Date(L.registeredAt).toDateString()===z.toDateString():!1).reduce((L,J)=>L+(J.doubts||0),0)*110;v.push({date:$,balance:Y})}return v},[b]),W={summary:T,kiitUsers:b,allUsers:b,walletHistory:_,onLogout:A,onPurchaseSuccess:H,refreshDoubtBalance:k,doubtBalance:d,loadingBalance:c,loadingUsers:u,totalUsers:N};return console.log("üîç Props being passed to KiitAdminDashboardView:",{onPurchaseSuccess:typeof W.onPurchaseSuccess,refreshDoubtBalance:typeof W.refreshDoubtBalance,"onPurchaseSuccess is function":typeof W.onPurchaseSuccess=="function","refreshDoubtBalance is function":typeof W.refreshDoubtBalance=="function",allKeys:Object.keys(W),"propsToPass object":W}),console.log("üîç ============================================"),(!W.onPurchaseSuccess||!W.refreshDoubtBalance)&&(console.error("‚ùå ========== CRITICAL: MISSING PROPS =========="),console.error("‚ùå onPurchaseSuccess:",W.onPurchaseSuccess),console.error("‚ùå refreshDoubtBalance:",W.refreshDoubtBalance),console.error("‚ùå handlePurchaseSuccess:",H),console.error("‚ùå handleRefreshDoubtBalance:",k),console.error("‚ùå fetchDoubtBalance:",p),console.error("‚ùå ============================================")),e.jsx(us,{summary:W.summary,kiitUsers:b,allUsers:b,walletHistory:W.walletHistory,onLogout:W.onLogout,onPurchaseSuccess:W.onPurchaseSuccess||H,refreshDoubtBalance:W.refreshDoubtBalance||k,doubtBalance:W.doubtBalance,loadingBalance:W.loadingBalance,loadingUsers:u,totalUsers:N})},us=n=>{var P;const{summary:s,kiitUsers:t=[],allUsers:a=[],walletHistory:r,onLogout:i,onPurchaseSuccess:l,refreshDoubtBalance:m,doubtBalance:d,loadingBalance:x,loadingUsers:c=!1,totalUsers:f=0}=n,[b,y]=o.useState(!1),[u,j]=o.useState(5);o.useEffect(()=>{console.log("üîç ========== KiitAdminDashboardView PROPS (useEffect) =========="),console.log("üîç All props object:",n),console.log("üîç Props keys:",Object.keys(n||{})),console.log("üîç Expected keys:",["summary","kiitUsers","allUsers","walletHistory","onLogout","onPurchaseSuccess","refreshDoubtBalance","doubtBalance","loadingBalance"]),console.log("üîç Missing keys:",["summary","kiitUsers","allUsers","walletHistory","onLogout","onPurchaseSuccess","refreshDoubtBalance","doubtBalance","loadingBalance"].filter(A=>!(A in(n||{})))),console.log("üîç Destructured props:",{refreshDoubtBalance:{type:typeof m,value:m,isFunction:typeof m=="function",name:m==null?void 0:m.name,"in props":"refreshDoubtBalance"in(n||{})},onPurchaseSuccess:{type:typeof l,value:l,isFunction:typeof l=="function",name:l==null?void 0:l.name,"in props":"onPurchaseSuccess"in(n||{})},doubtBalance:{value:d,"in props":"doubtBalance"in(n||{})},loadingBalance:{value:x,"in props":"loadingBalance"in(n||{})}}),console.log("üîç ================================================")},[n,m,l,d,x]),console.log("üîç KiitAdminDashboardView render - props:",{hasProps:!!n,propsKeys:n?Object.keys(n):[],refreshDoubtBalance:typeof m,onPurchaseSuccess:typeof l,"refreshDoubtBalance in props":n&&"refreshDoubtBalance"in n,"onPurchaseSuccess in props":n&&"onPurchaseSuccess"in n,"doubtBalance in props":n&&"doubtBalance"in n,"loadingBalance in props":n&&"loadingBalance"in n}),o.useCallback(()=>{if(console.log("üîÑ ========== handleRefreshBalance CALLED =========="),console.log("üîÑ Current props:",{refreshDoubtBalance:{type:typeof m,value:m,isFunction:typeof m=="function",name:m==null?void 0:m.name},onPurchaseSuccess:{type:typeof l,value:l,isFunction:typeof l=="function",name:l==null?void 0:l.name}}),m&&typeof m=="function"){console.log("‚úÖ Using refreshDoubtBalance prop");try{m()}catch(A){console.error("‚ùå Error calling refreshDoubtBalance:",A)}return}if(l&&typeof l=="function"){console.log("‚úÖ Using onPurchaseSuccess prop");try{l()}catch(A){console.error("‚ùå Error calling onPurchaseSuccess:",A)}return}console.error("‚ùå ========== NO REFRESH FUNCTION AVAILABLE =========="),console.error("‚ùå refreshDoubtBalance:",m),console.error("‚ùå onPurchaseSuccess:",l),console.error("‚ùå Full props object:",n),console.error("‚ùå This means fetchDoubtBalance was not properly passed from parent"),console.error("‚ùå ================================================")},[m,l,n]),o.useEffect(()=>{console.log("üîç KiitAdminDashboardView - Props received:",{refreshDoubtBalance:typeof m,onPurchaseSuccess:typeof l,doubtBalance:d,loadingBalance:x,"refreshDoubtBalance is function":typeof m=="function","onPurchaseSuccess is function":typeof l=="function","refreshDoubtBalance value":m,"onPurchaseSuccess value":l})},[m,l,d,x]);const N=o.useMemo(()=>t.map(A=>({name:A.email.split("@")[0],doubts:A.doubts})),[t]),C=(d==null?void 0:d.doubtBuckets)||{small:0,medium:0,large:0},R=(P=d==null?void 0:d.totalAvailable)!=null?P:0,{small:h=0,medium:p=0,large:T=0}=C;return console.log("üîç ========== KiitAdminDashboardView RENDER =========="),console.log("üîç Props received:",{doubtBalance:d,loadingBalance:x,"doubtBalance type":typeof d,"doubtBalance is null":d===null,"doubtBalance is undefined":d===void 0}),console.log("üîç Calculated values:",{currentAvailableDoubts:R,currentDoubtBuckets:C,small:h,medium:p,large:T}),console.log("üîç Summary:",s),console.log("üîç ================================================"),o.useEffect(()=>{console.log("üîÑ KiitAdminDashboardView - doubtBalance prop changed:",{oldValue:d,totalAvailable:d==null?void 0:d.totalAvailable,doubtBuckets:d==null?void 0:d.doubtBuckets})},[d]),o.useEffect(()=>{console.log("üîÑ KiitAdminDashboardView - loadingBalance changed:",x)},[x]),e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsxs("div",{className:"mx-auto max-w-7xl px-6 py-10 space-y-10",children:[e.jsxs("header",{className:"flex flex-col gap-4 rounded-3xl border border-slate-800 bg-gradient-to-r from-slate-900/80 to-slate-900/40 p-6 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-blue-400",children:"KIIT Command"}),e.jsx("h1",{className:"text-3xl font-semibold mt-1",children:"University Admin Control Room"}),e.jsx("p",{className:"text-slate-400 mt-2",children:"Live view of KIIT wallet burn, authenticated askers, and their doubt traffic."})]}),e.jsxs("button",{onClick:i,className:"flex items-center gap-2 rounded-2xl border border-slate-700 px-4 py-3 text-sm text-slate-300 transition hover:border-red-400 hover:text-white",children:[e.jsx(nt,{size:16}),"End Secure Session"]})]}),e.jsxs("section",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:[e.jsx(Vt,{icon:e.jsx(zs,{className:"text-emerald-400",size:26,width:26,height:26}),label:"Available Doubts",value:x?"...":String(R),subLabel:x?"Loading...":`S:${h} M:${p} L:${T}`,ctaLabel:"Recharge Wallet",onCtaClick:()=>{console.log("üîç Recharge Wallet button clicked"),y(!0)}},`doubt-balance-${R}-${h}-${p}-${T}`),e.jsx(Vt,{icon:e.jsx(Se,{className:"text-blue-400",size:26,width:26,height:26}),label:"Active KIIT Users",value:s.totalUsers,subLabel:"Licensed askers on KIIT domain"})]}),e.jsxs("section",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-800 bg-slate-900/60 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Wallet Growth"}),e.jsx("h3",{className:"text-xl font-semibold mt-1",children:"Quarterly top-ups"})]}),e.jsx("span",{className:"rounded-full border border-emerald-500/30 bg-emerald-500/10 px-3 py-1 text-xs text-emerald-300",children:"Live"})]}),e.jsx("div",{className:"h-64 mt-6",children:e.jsx(At,{width:"100%",height:"100%",children:e.jsxs(Qs,{data:r,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"balance",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#34d399",stopOpacity:.7}),e.jsx("stop",{offset:"95%",stopColor:"#34d399",stopOpacity:0})]})}),e.jsx(Et,{strokeDasharray:"3 3",stroke:"#1f2937"}),e.jsx(Rt,{dataKey:"month",stroke:"#9ca3af"}),e.jsx(Tt,{stroke:"#9ca3af",tickFormatter:A=>`‚Çπ${A/1e3}K`}),e.jsx(Bt,{contentStyle:{backgroundColor:"#0f172a",borderColor:"#1f2937",color:"#f1f5f9"},formatter:A=>[`‚Çπ${A.toLocaleString("en-IN")}`,"Balance"]}),e.jsx(Xs,{type:"monotone",dataKey:"balance",stroke:"#34d399",strokeWidth:2.5,fillOpacity:1,fill:"url(#balance)"})]})})})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-800 bg-slate-900/60 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Doubt Load"}),e.jsx("h3",{className:"text-xl font-semibold mt-1",children:"Per-user KIIT distribution"})]}),e.jsx("div",{className:"text-right text-sm text-slate-400",children:e.jsx("p",{children:"Last 30 days"})})]}),e.jsx("div",{className:"h-64 mt-6",children:e.jsx(At,{width:"100%",height:"100%",children:e.jsxs(Zs,{data:N,barSize:22,children:[e.jsx(Et,{strokeDasharray:"3 3",stroke:"#1f2937"}),e.jsx(Rt,{dataKey:"name",stroke:"#9ca3af"}),e.jsx(Tt,{stroke:"#9ca3af"}),e.jsx(Bt,{contentStyle:{backgroundColor:"#0f172a",borderColor:"#1f2937",color:"#f1f5f9"},formatter:A=>[`${A} doubts`,"Count"]}),e.jsx(ea,{dataKey:"doubts",fill:"#60a5fa",radius:[6,6,0,0]})]})})})]})]}),e.jsxs("section",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-800 bg-slate-900/60 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Verified KIIT askers"}),e.jsx("h3",{className:"text-xl font-semibold mt-1",children:"Domain mails in session"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-400",children:"Show:"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:u,onChange:A=>j(Number(A.target.value)),className:"appearance-none bg-slate-800 border border-slate-700 text-slate-200 text-xs px-3 py-1.5 pr-8 rounded-lg hover:bg-slate-750 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 cursor-pointer",children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"})]}),e.jsx(Js,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),e.jsxs("span",{className:"text-xs text-slate-400",children:["Showing ",c?"...":Math.min(u,t.length)," of ",c?"...":f||t.length," total askers"]}),e.jsxs("button",{onClick:()=>{const H=[["Email","Total Small","Total Medium","Total Large","Total Doubts Asked","Last Active","Registered At"].join(","),...t.map(S=>{const U=S.totalCategoryCounts||{small:0,medium:0,large:0};return[S.email||"",U.small,U.medium,U.large,S.doubts||0,S.lastActive||"Never",S.registeredAt?new Date(S.registeredAt).toLocaleDateString():""].join(",")})].join(`
`),k=new Blob([H],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a"),W=URL.createObjectURL(k);_.setAttribute("href",W),_.setAttribute("download",`kiit-users-${new Date().toISOString().split("T")[0]}.csv`),_.style.visibility="hidden",document.body.appendChild(_),_.click(),document.body.removeChild(_)},className:"flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-emerald-300 bg-emerald-500/10 border border-emerald-500/20 rounded-lg hover:bg-emerald-500/20 transition-colors",disabled:c||t.length===0,children:[e.jsx(Ct,{size:14}),"Export CSV"]})]})]}),e.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-800",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-slate-900/80 text-left text-xs uppercase tracking-widest text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-medium",children:"Email"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Total Doubts"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Last Active"})]})}),e.jsx("tbody",{className:"text-sm",children:c?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-4 py-8 text-center text-slate-400",children:"Loading users..."})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-4 py-8 text-center text-slate-400",children:"No KIIT users found"})}):t.slice(0,u).map(A=>{const H=A.totalCategoryCounts||{small:0,medium:0,large:0};return e.jsxs("tr",{className:"border-t border-slate-800/80 hover:bg-slate-800/30 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-slate-100 font-medium",children:A.email}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:"text-xs text-emerald-300 font-semibold",children:["S: ",H.small,", M: ",H.medium,", L: ",H.large]}),e.jsxs("span",{className:"text-xs text-emerald-400/80",children:["Total: ",A.doubts||0]})]})}),e.jsx("td",{className:"px-4 py-4 text-slate-400",children:A.lastActive||"Never"})]},A.id||A.email)})})]})})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-800 bg-slate-900/60 p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Wallet utilization"}),e.jsx("h3",{className:"text-xl font-semibold mt-1",children:"Session payouts"})]}),e.jsx("span",{className:"text-xs text-emerald-300",children:"Auto reconciled"})]}),e.jsx("div",{className:"space-y-4",children:c?e.jsx("div",{className:"text-center py-8 text-slate-400",children:"Loading wallet data..."}):t.length===0?e.jsx("div",{className:"text-center py-8 text-slate-400",children:"No users found"}):t.slice(0,5).map(A=>e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-800 bg-slate-900/40 px-4 py-3 hover:bg-slate-900/60 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:A.email}),e.jsxs("p",{className:"text-xs text-slate-400",children:[A.doubts||0," doubts asked"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-emerald-300",children:A.doubts||0}),e.jsx("p",{className:"text-xs text-slate-500",children:"total doubts"})]})]},`wallet-${A.id||A.email}`))})]})]})]}),e.jsx(xr,{isOpen:b,onClose:()=>{y(!1),console.log("üîÑ Modal closed, checking refreshDoubtBalance:",{refreshDoubtBalance:typeof m,onPurchaseSuccess:typeof l}),m&&typeof m=="function"?(console.log("üîÑ Modal closed, refreshing doubt balance..."),setTimeout(()=>{m()},1500)):l&&typeof l=="function"?(console.log("üîÑ Modal closed, using onPurchaseSuccess..."),setTimeout(()=>{l()},1500)):console.warn("‚ö†Ô∏è No refresh function available when modal closed")},universityInfo:{id:"kiit-university-id",name:"KIIT University",email:"admin@kiit.ac.in"},onPurchaseSuccess:()=>{console.log("üîÑ Purchase success callback called, checking functions..."),console.log("üîÑ refreshDoubtBalance:",typeof m,m),console.log("üîÑ onPurchaseSuccess:",typeof l,l),m&&typeof m=="function"?(console.log("‚úÖ Calling refreshDoubtBalance..."),m()):l&&typeof l=="function"?(console.log("‚úÖ Calling onPurchaseSuccess..."),l()):console.error("‚ùå No refresh function available in purchase success callback")}})]})},Vt=({icon:n,label:s,value:t,subLabel:a,ctaLabel:r,onCtaClick:i})=>e.jsxs("div",{className:"rounded-3xl border border-slate-800 bg-slate-900/60 p-5 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"rounded-2xl bg-slate-800/80 p-3",children:Dt.isValidElement(n)?Dt.cloneElement(n,{width:26,height:26}):n}),e.jsx("span",{className:"text-xs uppercase tracking-widest text-slate-500",children:"Secure"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:s}),e.jsx("p",{className:"text-2xl font-semibold mt-1",children:t}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:a})]}),r&&e.jsx("button",{type:"button",onClick:i,className:"w-full rounded-2xl border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-sm font-medium text-emerald-200 transition hover:border-emerald-300 hover:bg-emerald-500/20",children:r})]}),gr=()=>{const n=he(),[s,t]=o.useState(""),[a,r]=o.useState(""),[i,l]=o.useState(""),[m,d]=o.useState("login"),[x,c]=o.useState(""),[f,b]=o.useState(!1),[y,u]=o.useState(!1);o.useEffect(()=>{localStorage.getItem(pt)==="true"&&n("/university/admin/dashboard",{replace:!0})},[n]);const j=h=>g(I,null,function*(){h.preventDefault(),c(""),b(!0);try{if(s!==Me.email||a!==Me.password){c("Invalid KIIT admin credentials."),b(!1);return}const T=yield(yield fetch("/api/admin/university/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:a})})).json();T.success?(u(!0),d("otp")):c(T.message||"Failed to send OTP. Please try again.")}catch(p){c("Network error. Please check your connection and try again.")}finally{b(!1)}}),N=h=>g(I,null,function*(){h.preventDefault(),c(""),b(!0);try{const T=yield(yield fetch("/api/admin/university/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,otp:i})})).json();T.success?(localStorage.setItem(pt,"true"),n("/university/admin/dashboard")):c(T.message||"Invalid OTP. Please try again.")}catch(p){c("Network error. Please check your connection and try again.")}finally{b(!1)}}),C=()=>g(I,null,function*(){c(""),b(!0),l("");try{const p=yield(yield fetch("/api/admin/university/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:a})})).json();p.success?(c(""),alert("OTP resent successfully!")):c(p.message||"Failed to resend OTP. Please try again.")}catch(h){c("Network error. Please check your connection and try again.")}finally{b(!1)}}),R=()=>{d("login"),l(""),c(""),u(!1)};return m==="otp"?e.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-lg bg-slate-900 border border-slate-800 rounded-2xl p-8 shadow-2xl shadow-blue-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-blue-500/10 flex items-center justify-center",children:e.jsx(Ae,{className:"text-blue-400",size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-blue-400",children:"OTP Verification"}),e.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Verify Your Email"}),e.jsxs("p",{className:"text-slate-400 text-sm",children:["OTP sent to ",s]})]})]}),y&&e.jsx("div",{className:"mb-4 rounded-xl border border-emerald-400/40 bg-emerald-500/10 px-4 py-2 text-sm text-emerald-300",children:"OTP has been sent to your email. Please check your inbox."}),e.jsxs("form",{className:"space-y-4",onSubmit:N,children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:"Enter OTP"}),e.jsx("input",{type:"text",value:i,onChange:h=>l(h.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,className:"w-full rounded-xl bg-slate-800 border border-slate-700 px-4 py-3 text-white text-center text-2xl tracking-widest focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),e.jsx("p",{className:"text-xs text-slate-500 mt-2 text-center",children:"6-digit code sent to your email"})]}),x&&e.jsx("div",{className:"rounded-xl border border-red-400/40 bg-red-500/10 px-4 py-2 text-sm text-red-300",children:x}),e.jsx("button",{type:"submit",disabled:f||i.length!==6,className:"w-full rounded-xl bg-gradient-to-r from-blue-600 to-cyan-500 py-3 font-semibold text-white shadow-lg shadow-blue-900/40 transition hover:shadow-cyan-900/40 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Verifying...":"Verify OTP"}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-2 text-slate-400 hover:text-white transition",children:[e.jsx(Te,{size:16}),"Back to Login"]}),e.jsx("button",{type:"button",onClick:C,disabled:f,className:"text-blue-400 hover:text-blue-300 transition disabled:opacity-50",children:"Resend OTP"})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-lg bg-slate-900 border border-slate-800 rounded-2xl p-8 shadow-2xl shadow-blue-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-blue-500/10 flex items-center justify-center",children:e.jsx(Ot,{className:"text-blue-400",size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-blue-400",children:"KIIT HQ"}),e.jsx("h1",{className:"text-2xl font-semibold text-white",children:"University Admin Login"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Secure access to KIIT client dashboards"})]})]}),e.jsxs("form",{className:"space-y-4",onSubmit:j,children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:"Email"}),e.jsx("input",{type:"email",value:s,onChange:h=>t(h.target.value),placeholder:"2105834@kiit.ac.in",className:"w-full rounded-xl bg-slate-800 border border-slate-700 px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:"Password"}),e.jsx("input",{type:"password",value:a,onChange:h=>r(h.target.value),placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",className:"w-full rounded-xl bg-slate-800 border border-slate-700 px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),x&&e.jsx("div",{className:"rounded-xl border border-red-400/40 bg-red-500/10 px-4 py-2 text-sm text-red-300",children:x}),e.jsx("button",{type:"submit",disabled:f,className:"w-full rounded-xl bg-gradient-to-r from-blue-600 to-cyan-500 py-3 font-semibold text-white shadow-lg shadow-blue-900/40 transition hover:shadow-cyan-900/40 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Sending OTP...":"Send OTP"})]}),e.jsxs("div",{className:"mt-6 rounded-2xl border border-slate-800 bg-slate-900/60 p-4 text-xs text-slate-400",children:[e.jsx("p",{children:"Demo credentials"}),e.jsxs("p",{children:["Email: ",Me.email]}),e.jsxs("p",{children:["Password: ",Me.password]})]})]})})},br=()=>{const n=he(),s=localStorage.getItem(pt)==="true",[t,a]=o.useState({doubtBuckets:{small:0,medium:0,large:0},totalAvailable:0}),[r,i]=o.useState(!1),[l,m]=o.useState([]),[d,x]=o.useState(!1),[c,f]=o.useState(0);o.useEffect(()=>{s||n("/university/admin/login",{replace:!0})},[s,n]);const b=o.useCallback(()=>g(I,null,function*(){try{x(!0);const C=yield fetch("/api/university/kiit-users",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},cache:"no-cache",credentials:"include"});if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const R=yield C.json();if(R.success&&R.data){const h=R.data.users||[];m(h),f(h.length),console.log("‚úÖ KIIT users fetched:",h.length,"users")}else console.warn("‚ö†Ô∏è API response not successful:",R),m([]),f(0)}catch(C){console.error("‚ùå Error fetching KIIT users:",C),m([]),f(0)}finally{x(!1)}}),[]),y=o.useCallback(()=>g(I,null,function*(){try{console.log("üîÑ UniversityAdminDashboard - Fetching doubt balance..."),i(!0);const C=yield fetch("/api/university/doubt-balance?university_email=admin@kiit.ac.in",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},cache:"no-cache",credentials:"include"});if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const R=yield C.json();if(console.log("üìä UniversityAdminDashboard - API response:",R),R.success&&R.data){const h={doubtBuckets:R.data.doubtBuckets||{small:0,medium:0,large:0},totalAvailable:R.data.totalAvailableDoubts||R.data.totalAvailable||0};console.log("‚úÖ UniversityAdminDashboard - Setting balance:",h),a(h)}}catch(C){console.error("‚ùå UniversityAdminDashboard - Error fetching balance:",C),a({doubtBuckets:{small:0,medium:0,large:0},totalAvailable:0})}finally{i(!1)}}),[]);o.useEffect(()=>{if(s){y(),b();const C=dt(window.location.origin,{withCredentials:!0});C.on("university:balance-updated",h=>{h.university_email==="admin@kiit.ac.in"&&a({doubtBuckets:h.doubtBuckets||{small:0,medium:0,large:0},totalAvailable:h.totalAvailable||0})}),C.on("user:registered",()=>{b()}),C.on("doubt:created",()=>{b()});const R=setInterval(()=>{y(),b()},3e4);return()=>{clearInterval(R),C.disconnect()}}},[s,y,b]);const u=o.useMemo(()=>{const C=[],R=new Date;for(let h=6;h>=0;h--){const p=new Date(R);p.setDate(p.getDate()-h);const T=p.toLocaleDateString("en-US",{month:"short",day:"numeric"}),H=l.filter(k=>k.registeredAt?new Date(k.registeredAt).toDateString()===p.toDateString():!1).reduce((k,_)=>k+(_.doubts||0),0)*110;C.push({date:T,balance:H})}return C},[l]),j=o.useMemo(()=>{const C=l.reduce((P,A)=>P+(A.doubts||0),0),R=l.reduce((P,A)=>P+(A.doubts||0)*110,0),h=l.length?Math.round(C/l.length*10)/10:0,p=t.totalAvailable||0,T=t.doubtBuckets||{small:0,medium:0,large:0};return{totalUsers:l.length,totalDoubts:C,averagePerUser:h,walletBalance:p*110,walletUsed:R,availableDoubts:p,doubtBuckets:T}},[l,t]),N=()=>{localStorage.removeItem(pt),n("/university/admin/login")};return s?(console.log("üîç UniversityAdminDashboard - Rendering with props:",{refreshDoubtBalance:typeof y,onPurchaseSuccess:typeof y,doubtBalance:t,loadingBalance:r}),e.jsx(us,{summary:j,kiitUsers:l,allUsers:l,walletHistory:u,onLogout:N,onPurchaseSuccess:y,refreshDoubtBalance:y,doubtBalance:t,loadingBalance:r,loadingUsers:d,totalUsers:c})):null},pr=()=>{const n=he(),[s,t]=o.useState("idle"),[a,r]=o.useState(""),i=()=>g(I,null,function*(){try{if(t("verifying"),r("Verifying your session..."),!ae.getToken())throw new Error("No token found");yield ae.getProfile(),localStorage.setItem("cacheVerified","true"),t("success"),r("Verified. Redirecting to dashboard..."),setTimeout(()=>n("/dashboard"),800)}catch(l){t("error"),r("Verification failed. Please log in again.");try{yield ae.logout()}catch(m){}setTimeout(()=>n("/"),1200)}});return o.useEffect(()=>{i()},[]),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-8 w-full max-w-md text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[s==="verifying"&&e.jsx(be,{className:"w-8 h-8 text-blue-600 animate-spin"}),s==="success"&&e.jsx(Ot,{className:"w-8 h-8 text-green-600"}),s==="error"&&e.jsx(Ht,{className:"w-8 h-8 text-red-600"})]}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Cache Verification"}),e.jsx("p",{className:"text-gray-600 mb-6",children:a||"Click verify to continue to dashboard."}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{onClick:i,disabled:s==="verifying",className:`px-5 py-2 rounded-lg text-white ${s==="verifying"?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"}`,children:s==="verifying"?"Verifying...":"Verify Cache"}),e.jsx("button",{onClick:()=>g(I,null,function*(){try{yield ae.logout()}catch(l){}localStorage.removeItem("cacheVerified"),n("/")}),className:"px-5 py-2 rounded-lg border border-gray-300",children:"Logout"})]})]})})},fr=()=>{const n=he(),[s,t]=o.useState(null),[a,r]=o.useState(!0),[i,l]=o.useState(!1),[m,d]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[x,c]=o.useState({current:!1,new:!1,confirm:!1}),[f,b]=o.useState(!1),[y,u]=o.useState(""),[j,N]=o.useState("");o.useEffect(()=>{(()=>g(I,null,function*(){if(!ae.isAuthenticated()){n("/");return}C()}))()},[n]);const C=()=>g(I,null,function*(){try{r(!0);const P=yield ae.getProfile();t(P)}catch(P){console.error("Error loading user profile:",P),ae.logout(),n("/")}finally{r(!1)}}),R=P=>g(I,null,function*(){if(P.preventDefault(),u(""),N(""),m.newPassword!==m.confirmPassword){u("New passwords do not match");return}if(m.newPassword.length<6){u("Password must be at least 6 characters long");return}try{b(!0),yield new Promise(A=>setTimeout(A,1e3)),N("Password changed successfully!"),d({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{l(!1),N("")},2e3)}catch(A){console.error("Error changing password:",A),u(A.message||"Failed to change password. Please try again.")}finally{b(!1)}}),h=()=>g(I,null,function*(){try{yield ae.logout(),n("/")}catch(P){console.error("Logout error:",P),n("/")}}),p=()=>{n("/contact")},T=P=>(P&&P.split(" ").map(A=>A[0]).join("").toUpperCase().slice(0,2),`https://ui-avatars.com/api/?name=${encodeURIComponent(P||"User")}&background=FFE5D4&color=8B4513&size=128&bold=true`);return a?e.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 dark:border-blue-400"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300 transition-colors duration-300",children:"Loading profile..."})]}):e.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center p-6 transition-colors duration-300",children:e.jsxs("div",{className:"w-full max-w-sm",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-colors duration-300",children:[e.jsx("div",{className:"h-24 bg-gradient-to-r from-orange-200 via-orange-100 to-orange-200 dark:from-orange-800 dark:via-orange-700 dark:to-orange-800 relative transition-colors duration-300",children:e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 -bottom-12",children:e.jsx("div",{className:"w-24 h-24 rounded-full bg-white dark:bg-gray-800 p-1 shadow-lg transition-colors duration-300",children:e.jsx("img",{src:T(s==null?void 0:s.name),alt:(s==null?void 0:s.name)||"User",className:"w-full h-full rounded-full object-cover"})})})}),e.jsxs("div",{className:"pt-16 pb-8 px-8",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white transition-colors duration-300",children:(s==null?void 0:s.name)||"User"}),e.jsx(te,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 transition-colors duration-300"})]})}),e.jsx("div",{className:"text-center mb-8",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm transition-colors duration-300",children:(s==null?void 0:s.email)||""})}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 mb-6 transition-colors duration-300"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm transition-colors duration-300",children:"Name:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium transition-colors duration-300",children:(s==null?void 0:s.name)||"User"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm transition-colors duration-300",children:"email id:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium transition-colors duration-300",children:(s==null?void 0:s.email)||""})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm transition-colors duration-300",children:"change password:"}),e.jsx("button",{onClick:()=>l(!0),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm transition-colors duration-300",children:"Change"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm transition-colors duration-300",children:"help & support:"}),e.jsx("button",{onClick:p,className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm transition-colors duration-300",children:"Contact"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm transition-colors duration-300",children:"logout:"}),e.jsx("button",{onClick:h,className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 font-medium text-sm transition-colors duration-300",children:"Logout"})]})]})]})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-black dark:bg-opacity-70 flex items-center justify-center z-50 p-4 transition-colors duration-300",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md shadow-2xl transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white transition-colors duration-300",children:"Change Password"}),e.jsx("button",{onClick:()=>{l(!1),d({currentPassword:"",newPassword:"",confirmPassword:""}),u(""),N("")},className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-300",children:e.jsx(de,{className:"w-5 h-5"})})]}),y&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg transition-colors duration-300",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm transition-colors duration-300",children:y})}),j&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg transition-colors duration-300",children:e.jsx("p",{className:"text-green-600 dark:text-green-400 text-sm transition-colors duration-300",children:j})}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-300",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x.current?"text":"password",value:m.currentPassword,onChange:P=>d(Z(M({},m),{currentPassword:P.target.value})),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent pr-10 transition-colors duration-300",required:!0}),e.jsx("button",{type:"button",onClick:()=>c(Z(M({},x),{current:!x.current})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-300",children:x.current?e.jsx(et,{className:"w-4 h-4"}):e.jsx(Oe,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-300",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x.new?"text":"password",value:m.newPassword,onChange:P=>d(Z(M({},m),{newPassword:P.target.value})),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent pr-10 transition-colors duration-300",required:!0,minLength:6}),e.jsx("button",{type:"button",onClick:()=>c(Z(M({},x),{new:!x.new})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-300",children:x.new?e.jsx(et,{className:"w-4 h-4"}):e.jsx(Oe,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-300",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x.confirm?"text":"password",value:m.confirmPassword,onChange:P=>d(Z(M({},m),{confirmPassword:P.target.value})),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent pr-10 transition-colors duration-300",required:!0,minLength:6}),e.jsx("button",{type:"button",onClick:()=>c(Z(M({},x),{confirm:!x.confirm})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-300",children:x.confirm?e.jsx(et,{className:"w-4 h-4"}):e.jsx(Oe,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),d({currentPassword:"",newPassword:"",confirmPassword:""}),u(""),N("")},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:"flex-1 px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-colors duration-300",children:f?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4 animate-spin"}),"Changing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-4 h-4"}),"Change Password"]})})]})]})]})})]})})};function yr(){return e.jsx(Ws,{children:e.jsx("div",{className:"App min-h-screen bg-white dark:bg-gray-900 transition-colors duration-300",children:e.jsxs(Ys,{children:[e.jsx(ce,{path:"/",element:e.jsx(Ka,{})}),e.jsx(ce,{path:"/about",element:e.jsx(Ha,{})}),e.jsx(ce,{path:"/contact",element:e.jsx(Qa,{})}),e.jsx(ce,{path:"/auth",element:e.jsx(na,{})}),e.jsx(ce,{path:"/onboarding",element:e.jsx(pa,{})}),e.jsx(ce,{path:"/dashboard",element:e.jsx(ha,{})}),e.jsx(ce,{path:"/verify-cache",element:e.jsx(pr,{})}),e.jsx(ce,{path:"/dashboard/doubts",element:e.jsx(ja,{})}),e.jsx(ce,{path:"/dashboard/notifications",element:e.jsx(Na,{})}),e.jsx(ce,{path:"/dashboard/awaiting/:doubtId",element:e.jsx(Sa,{})}),e.jsx(ce,{path:"/dashboard/session/:doubtId",element:e.jsx(Fa,{})}),e.jsx(ce,{path:"/dashboard/pyq",element:e.jsx(La,{})}),e.jsx(ce,{path:"/dashboard/pyq/:roomName",element:e.jsx($a,{})}),e.jsx(ce,{path:"/dashboard/solve/:doubtId",element:e.jsx(Oa,{})}),e.jsx(ce,{path:"/dashboard/solved-doubts",element:e.jsx(Ma,{})}),e.jsx(ce,{path:"/dashboard/profile",element:e.jsx(fr,{})}),e.jsx(ce,{path:"/dashboard/corporate-connect",element:e.jsx(Wa,{})}),e.jsx(ce,{path:"/dashboard/referral-system",element:e.jsx(Ya,{})}),e.jsx(ce,{path:"/dashboard/social",element:e.jsx(Gt,{})}),e.jsx(ce,{path:"/dashboard/social/:userId",element:e.jsx(Gt,{})}),e.jsx(ce,{path:"/admin/login",element:e.jsx(Za,{})}),e.jsx(ce,{path:"/admin/dashboard",element:e.jsx(mr,{})}),e.jsx(ce,{path:"/admin/panel",element:e.jsx(Xa,{})}),e.jsx(ce,{path:"/admin/kiit",element:e.jsx(hr,{})}),e.jsx(ce,{path:"/university/admin/login",element:e.jsx(gr,{})}),e.jsx(ce,{path:"/university/admin/dashboard",element:e.jsx(br,{})}),e.jsx(ce,{path:"/demo/awaiting-solver",element:e.jsx(Pa,{})}),e.jsx(ce,{path:"/test/awaiting-flow",element:e.jsx(Ca,{})})]})})})}Vs.createRoot(document.getElementById("root")).render(e.jsx(Dt.StrictMode,{children:e.jsx(ra,{children:e.jsx(yr,{})})}))});export default jr();
